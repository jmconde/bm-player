{"version":3,"file":"bm-player.js","sources":["../node_modules/lottie-web/build/player/lottie.js","../node_modules/lodash/_freeGlobal.js","../node_modules/lodash/_root.js","../node_modules/lodash/_Symbol.js","../node_modules/lodash/_getRawTag.js","../node_modules/lodash/_objectToString.js","../node_modules/lodash/_baseGetTag.js","../node_modules/lodash/isObjectLike.js","../node_modules/lodash/isnumber.js","../node_modules/lodash/isArray.js","../node_modules/lodash/isstring.js","../node_modules/lodash/isboolean.js","../node_modules/lodash/defaultto.js","../node_modules/lodash/isundefined.js","../node_modules/lodash/_listCacheClear.js","../node_modules/lodash/eq.js","../node_modules/lodash/_assocIndexOf.js","../node_modules/lodash/_listCacheDelete.js","../node_modules/lodash/_listCacheGet.js","../node_modules/lodash/_listCacheHas.js","../node_modules/lodash/_listCacheSet.js","../node_modules/lodash/_ListCache.js","../node_modules/lodash/_stackClear.js","../node_modules/lodash/_stackDelete.js","../node_modules/lodash/_stackGet.js","../node_modules/lodash/_stackHas.js","../node_modules/lodash/isObject.js","../node_modules/lodash/isFunction.js","../node_modules/lodash/_coreJsData.js","../node_modules/lodash/_isMasked.js","../node_modules/lodash/_toSource.js","../node_modules/lodash/_baseIsNative.js","../node_modules/lodash/_getValue.js","../node_modules/lodash/_getNative.js","../node_modules/lodash/_Map.js","../node_modules/lodash/_nativeCreate.js","../node_modules/lodash/_hashClear.js","../node_modules/lodash/_hashDelete.js","../node_modules/lodash/_hashGet.js","../node_modules/lodash/_hashHas.js","../node_modules/lodash/_hashSet.js","../node_modules/lodash/_Hash.js","../node_modules/lodash/_mapCacheClear.js","../node_modules/lodash/_isKeyable.js","../node_modules/lodash/_getMapData.js","../node_modules/lodash/_mapCacheDelete.js","../node_modules/lodash/_mapCacheGet.js","../node_modules/lodash/_mapCacheHas.js","../node_modules/lodash/_mapCacheSet.js","../node_modules/lodash/_MapCache.js","../node_modules/lodash/_stackSet.js","../node_modules/lodash/_Stack.js","../node_modules/lodash/_setCacheAdd.js","../node_modules/lodash/_setCacheHas.js","../node_modules/lodash/_SetCache.js","../node_modules/lodash/_arraySome.js","../node_modules/lodash/_cacheHas.js","../node_modules/lodash/_equalArrays.js","../node_modules/lodash/_Uint8Array.js","../node_modules/lodash/_mapToArray.js","../node_modules/lodash/_setToArray.js","../node_modules/lodash/_equalByTag.js","../node_modules/lodash/_arrayPush.js","../node_modules/lodash/_baseGetAllKeys.js","../node_modules/lodash/_arrayFilter.js","../node_modules/lodash/stubArray.js","../node_modules/lodash/_getSymbols.js","../node_modules/lodash/_baseTimes.js","../node_modules/lodash/_baseIsArguments.js","../node_modules/lodash/isArguments.js","../node_modules/lodash/stubFalse.js","../node_modules/lodash/isBuffer.js","../node_modules/lodash/_isIndex.js","../node_modules/lodash/isLength.js","../node_modules/lodash/_baseIsTypedArray.js","../node_modules/lodash/_baseUnary.js","../node_modules/lodash/_nodeUtil.js","../node_modules/lodash/isTypedArray.js","../node_modules/lodash/_arrayLikeKeys.js","../node_modules/lodash/_isPrototype.js","../node_modules/lodash/_overArg.js","../node_modules/lodash/_nativeKeys.js","../node_modules/lodash/_baseKeys.js","../node_modules/lodash/isArrayLike.js","../node_modules/lodash/keys.js","../node_modules/lodash/_getAllKeys.js","../node_modules/lodash/_equalObjects.js","../node_modules/lodash/_DataView.js","../node_modules/lodash/_Promise.js","../node_modules/lodash/_Set.js","../node_modules/lodash/_WeakMap.js","../node_modules/lodash/_getTag.js","../node_modules/lodash/_baseIsEqualDeep.js","../node_modules/lodash/_baseIsEqual.js","../node_modules/lodash/_baseIsMatch.js","../node_modules/lodash/_isStrictComparable.js","../node_modules/lodash/_getMatchData.js","../node_modules/lodash/_matchesStrictComparable.js","../node_modules/lodash/_baseMatches.js","../node_modules/lodash/isSymbol.js","../node_modules/lodash/_isKey.js","../node_modules/lodash/memoize.js","../node_modules/lodash/_memoizeCapped.js","../node_modules/lodash/_stringToPath.js","../node_modules/lodash/_arrayMap.js","../node_modules/lodash/_baseToString.js","../node_modules/lodash/toString.js","../node_modules/lodash/_castPath.js","../node_modules/lodash/_toKey.js","../node_modules/lodash/_baseGet.js","../node_modules/lodash/get.js","../node_modules/lodash/_baseHasIn.js","../node_modules/lodash/_hasPath.js","../node_modules/lodash/hasIn.js","../node_modules/lodash/_baseMatchesProperty.js","../node_modules/lodash/identity.js","../node_modules/lodash/_baseProperty.js","../node_modules/lodash/_basePropertyDeep.js","../node_modules/lodash/property.js","../node_modules/lodash/_baseIteratee.js","../node_modules/lodash/_createFind.js","../node_modules/lodash/_baseFindIndex.js","../node_modules/lodash/toNumber.js","../node_modules/lodash/toFinite.js","../node_modules/lodash/toInteger.js","../node_modules/lodash/findIndex.js","../node_modules/lodash/find.js","../src/js/event.js","../src/js/main.js"],"sourcesContent":["(typeof navigator !== \"undefined\") && (function(root, factory) {\r\n    if (typeof define === \"function\" && define.amd) {\r\n        define(function() {\r\n            return factory(root);\r\n        });\r\n    } else if (typeof module === \"object\" && module.exports) {\r\n        module.exports = factory(root);\r\n    } else {\r\n        root.lottie = factory(root);\r\n        root.bodymovin = root.lottie;\r\n    }\r\n}((window || {}), function(window) {\r\n    \"use strict\";\r\n    var svgNS = \"http://www.w3.org/2000/svg\";\r\n\r\nvar locationHref = '';\r\n\r\nvar initialDefaultFrame = -999999;\r\n\nvar subframeEnabled = true;\r\nvar expressionsPlugin;\r\nvar isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\r\nvar cachedColors = {};\r\nvar bm_rounder = Math.round;\r\nvar bm_rnd;\r\nvar bm_pow = Math.pow;\r\nvar bm_sqrt = Math.sqrt;\r\nvar bm_abs = Math.abs;\r\nvar bm_floor = Math.floor;\r\nvar bm_max = Math.max;\r\nvar bm_min = Math.min;\r\nvar blitter = 10;\r\n\r\nvar BMMath = {};\r\n(function(){\r\n    var propertyNames = Object.getOwnPropertyNames(Math);\r\n    var i, len = propertyNames.length;\r\n    for(i=0;i<len;i+=1){\r\n        BMMath[propertyNames[i]] = Math[propertyNames[i]];\r\n    }\r\n}());\r\n\r\nfunction ProjectInterface(){return {};}\r\n\r\nBMMath.random = Math.random;\r\nBMMath.abs = function(val){\r\n    var tOfVal = typeof val;\r\n    if(tOfVal === 'object' && val.length){\r\n        var absArr = createSizedArray(val.length);\r\n        var i, len = val.length;\r\n        for(i=0;i<len;i+=1){\r\n            absArr[i] = Math.abs(val[i]);\r\n        }\r\n        return absArr;\r\n    }\r\n    return Math.abs(val);\r\n\r\n};\r\nvar defaultCurveSegments = 150;\r\nvar degToRads = Math.PI/180;\r\nvar roundCorner = 0.5519;\r\n\r\nfunction roundValues(flag){\r\n    if(flag){\r\n        bm_rnd = Math.round;\r\n    }else{\r\n        bm_rnd = function(val){\r\n            return val;\r\n        };\r\n    }\r\n}\r\nroundValues(false);\r\n\r\nfunction styleDiv(element){\r\n    element.style.position = 'absolute';\r\n    element.style.top = 0;\r\n    element.style.left = 0;\r\n    element.style.display = 'block';\r\n    element.style.transformOrigin = element.style.webkitTransformOrigin = '0 0';\r\n    element.style.backfaceVisibility  = element.style.webkitBackfaceVisibility = 'visible';\r\n    element.style.transformStyle = element.style.webkitTransformStyle = element.style.mozTransformStyle = \"preserve-3d\";\r\n}\r\n\r\nfunction BMEnterFrameEvent(n,c,t,d){\r\n    this.type = n;\r\n    this.currentTime = c;\r\n    this.totalTime = t;\r\n    this.direction = d < 0 ? -1:1;\r\n}\r\n\r\nfunction BMCompleteEvent(n,d){\r\n    this.type = n;\r\n    this.direction = d < 0 ? -1:1;\r\n}\r\n\r\nfunction BMCompleteLoopEvent(n,c,t,d){\r\n    this.type = n;\r\n    this.currentLoop = t;\r\n    this.totalLoops = c;\r\n    this.direction = d < 0 ? -1:1;\r\n}\r\n\r\nfunction BMSegmentStartEvent(n,f,t){\r\n    this.type = n;\r\n    this.firstFrame = f;\r\n    this.totalFrames = t;\r\n}\r\n\r\nfunction BMDestroyEvent(n,t){\r\n    this.type = n;\r\n    this.target = t;\r\n}\r\n\r\nfunction randomString(length, chars){\r\n    if(chars === undefined){\r\n        chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890';\r\n    }\r\n    var i;\r\n    var result = '';\r\n    for (i = length; i > 0; --i) result += chars[Math.round(Math.random() * (chars.length - 1))];\r\n    return result;\r\n}\r\n\r\nfunction HSVtoRGB(h, s, v) {\r\n    var r, g, b, i, f, p, q, t;\r\n    i = Math.floor(h * 6);\r\n    f = h * 6 - i;\r\n    p = v * (1 - s);\r\n    q = v * (1 - f * s);\r\n    t = v * (1 - (1 - f) * s);\r\n    switch (i % 6) {\r\n        case 0: r = v; g = t; b = p; break;\r\n        case 1: r = q; g = v; b = p; break;\r\n        case 2: r = p; g = v; b = t; break;\r\n        case 3: r = p; g = q; b = v; break;\r\n        case 4: r = t; g = p; b = v; break;\r\n        case 5: r = v; g = p; b = q; break;\r\n    }\r\n    return [ r,\r\n        g,\r\n         b ];\r\n}\r\n\r\nfunction RGBtoHSV(r, g, b) {\r\n    var max = Math.max(r, g, b), min = Math.min(r, g, b),\r\n        d = max - min,\r\n        h,\r\n        s = (max === 0 ? 0 : d / max),\r\n        v = max / 255;\r\n\r\n    switch (max) {\r\n        case min: h = 0; break;\r\n        case r: h = (g - b) + d * (g < b ? 6: 0); h /= 6 * d; break;\r\n        case g: h = (b - r) + d * 2; h /= 6 * d; break;\r\n        case b: h = (r - g) + d * 4; h /= 6 * d; break;\r\n    }\r\n\r\n    return [\r\n         h,\r\n         s,\r\n         v\r\n    ];\r\n}\r\n\r\nfunction addSaturationToRGB(color,offset){\r\n    var hsv = RGBtoHSV(color[0]*255,color[1]*255,color[2]*255);\r\n    hsv[1] += offset;\r\n    if (hsv[1] > 1) {\r\n        hsv[1] = 1;\r\n    }\r\n    else if (hsv[1] <= 0) {\r\n        hsv[1] = 0;\r\n    }\r\n    return HSVtoRGB(hsv[0],hsv[1],hsv[2]);\r\n}\r\n\r\nfunction addBrightnessToRGB(color,offset){\r\n    var hsv = RGBtoHSV(color[0]*255,color[1]*255,color[2]*255);\r\n    hsv[2] += offset;\r\n    if (hsv[2] > 1) {\r\n        hsv[2] = 1;\r\n    }\r\n    else if (hsv[2] < 0) {\r\n        hsv[2] = 0;\r\n    }\r\n    return HSVtoRGB(hsv[0],hsv[1],hsv[2]);\r\n}\r\n\r\nfunction addHueToRGB(color,offset) {\r\n    var hsv = RGBtoHSV(color[0]*255,color[1]*255,color[2]*255);\r\n    hsv[0] += offset/360;\r\n    if (hsv[0] > 1) {\r\n        hsv[0] -= 1;\r\n    }\r\n    else if (hsv[0] < 0) {\r\n        hsv[0] += 1;\r\n    }\r\n    return HSVtoRGB(hsv[0],hsv[1],hsv[2]);\r\n}\r\n\r\nvar rgbToHex = (function(){\r\n    var colorMap = [];\r\n    var i;\r\n    var hex;\r\n    for(i=0;i<256;i+=1){\r\n        hex = i.toString(16);\r\n        colorMap[i] = hex.length == 1 ? '0' + hex : hex;\r\n    }\r\n\r\n    return function(r, g, b) {\r\n        if(r<0){\r\n            r = 0;\r\n        }\r\n        if(g<0){\r\n            g = 0;\r\n        }\r\n        if(b<0){\r\n            b = 0;\r\n        }\r\n        return '#' + colorMap[r] + colorMap[g] + colorMap[b];\r\n    };\r\n}());\nfunction BaseEvent(){}\r\nBaseEvent.prototype = {\r\n\ttriggerEvent: function (eventName, args) {\r\n\t    if (this._cbs[eventName]) {\r\n\t        var len = this._cbs[eventName].length;\r\n\t        for (var i = 0; i < len; i++){\r\n\t            this._cbs[eventName][i](args);\r\n\t        }\r\n\t    }\r\n\t},\r\n\taddEventListener: function (eventName, callback) {\r\n\t    if (!this._cbs[eventName]){\r\n\t        this._cbs[eventName] = [];\r\n\t    }\r\n\t    this._cbs[eventName].push(callback);\r\n\r\n\t\treturn function() {\r\n\t\t\tthis.removeEventListener(eventName, callback);\r\n\t\t}.bind(this);\r\n\t},\r\n\tremoveEventListener: function (eventName,callback){\r\n\t    if (!callback){\r\n\t        this._cbs[eventName] = null;\r\n\t    }else if(this._cbs[eventName]){\r\n\t        var i = 0, len = this._cbs[eventName].length;\r\n\t        while(i<len){\r\n\t            if(this._cbs[eventName][i] === callback){\r\n\t                this._cbs[eventName].splice(i,1);\r\n\t                i -=1;\r\n\t                len -= 1;\r\n\t            }\r\n\t            i += 1;\r\n\t        }\r\n\t        if(!this._cbs[eventName].length){\r\n\t            this._cbs[eventName] = null;\r\n\t        }\r\n\t    }\r\n\t}\r\n};\nvar createTypedArray = (function(){\r\n\tfunction createRegularArray(type, len){\r\n\t\tvar i = 0, arr = [], value;\r\n\t\tswitch(type) {\r\n\t\t\tcase 'int16':\r\n\t\t\tcase 'uint8c':\r\n\t\t\t\tvalue = 1;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tvalue = 1.1;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tfor(i = 0; i < len; i += 1) {\r\n\t\t\tarr.push(value);\r\n\t\t}\r\n\t\treturn arr;\r\n\t}\r\n\tfunction createTypedArray(type, len){\r\n\t\tif(type === 'float32') {\r\n\t\t\treturn new Float32Array(len);\r\n\t\t} else if(type === 'int16') {\r\n\t\t\treturn new Int16Array(len);\r\n\t\t} else if(type === 'uint8c') {\r\n\t\t\treturn new Uint8ClampedArray(len);\r\n\t\t}\r\n\t}\r\n\tif(typeof Uint8ClampedArray === 'function' && typeof Float32Array === 'function') {\r\n\t\treturn createTypedArray;\r\n\t} else {\r\n\t\treturn createRegularArray;\r\n\t}\r\n}());\r\n\r\nfunction createSizedArray(len) {\r\n\treturn Array.apply(null,{length:len});\r\n}\nfunction createNS(type) {\r\n\t//return {appendChild:function(){},setAttribute:function(){},style:{}}\r\n\treturn document.createElementNS(svgNS, type);\r\n}\nfunction createTag(type) {\r\n\t//return {appendChild:function(){},setAttribute:function(){},style:{}}\r\n\treturn document.createElement(type);\r\n}\nfunction DynamicPropertyContainer(){};\r\nDynamicPropertyContainer.prototype = {\r\n\taddDynamicProperty: function(prop) {\r\n\t\tif(this.dynamicProperties.indexOf(prop) === -1) {\r\n\t        this.dynamicProperties.push(prop);\r\n\t        this.container.addDynamicProperty(this);\r\n\t    \tthis._isAnimated = true;\r\n\t    }\r\n\t},\r\n\titerateDynamicProperties: function(){\r\n\t    this._mdf = false;\r\n\t    var i, len = this.dynamicProperties.length;\r\n\t    for(i=0;i<len;i+=1){\r\n\t        this.dynamicProperties[i].getValue();\r\n\t        if(this.dynamicProperties[i]._mdf) {\r\n\t            this._mdf = true;\r\n\t        }\r\n\t    }\r\n\t},\r\n\tinitDynamicPropertyContainer: function(container){\r\n\t    this.container = container;\r\n\t    this.dynamicProperties = [];\r\n\t    this._mdf = false;\r\n\t    this._isAnimated = false;\r\n\t}\r\n}\n/*!\r\n Transformation Matrix v2.0\r\n (c) Epistemex 2014-2015\r\n www.epistemex.com\r\n By Ken Fyrstenberg\r\n Contributions by leeoniya.\r\n License: MIT, header required.\r\n */\r\n\r\n/**\r\n * 2D transformation matrix object initialized with identity matrix.\r\n *\r\n * The matrix can synchronize a canvas context by supplying the context\r\n * as an argument, or later apply current absolute transform to an\r\n * existing context.\r\n *\r\n * All values are handled as floating point values.\r\n *\r\n * @param {CanvasRenderingContext2D} [context] - Optional context to sync with Matrix\r\n * @prop {number} a - scale x\r\n * @prop {number} b - shear y\r\n * @prop {number} c - shear x\r\n * @prop {number} d - scale y\r\n * @prop {number} e - translate x\r\n * @prop {number} f - translate y\r\n * @prop {CanvasRenderingContext2D|null} [context=null] - set or get current canvas context\r\n * @constructor\r\n */\r\n\r\nvar Matrix = (function(){\r\n\r\n    var _cos = Math.cos;\r\n    var _sin = Math.sin;\r\n    var _tan = Math.tan;\r\n    var _rnd = Math.round;\r\n\r\n    function reset(){\r\n        this.props[0] = 1;\r\n        this.props[1] = 0;\r\n        this.props[2] = 0;\r\n        this.props[3] = 0;\r\n        this.props[4] = 0;\r\n        this.props[5] = 1;\r\n        this.props[6] = 0;\r\n        this.props[7] = 0;\r\n        this.props[8] = 0;\r\n        this.props[9] = 0;\r\n        this.props[10] = 1;\r\n        this.props[11] = 0;\r\n        this.props[12] = 0;\r\n        this.props[13] = 0;\r\n        this.props[14] = 0;\r\n        this.props[15] = 1;\r\n        return this;\r\n    }\r\n\r\n    function rotate(angle) {\r\n        if(angle === 0){\r\n            return this;\r\n        }\r\n        var mCos = _cos(angle);\r\n        var mSin = _sin(angle);\r\n        return this._t(mCos, -mSin,  0, 0, mSin,  mCos, 0, 0, 0,  0,  1, 0, 0, 0, 0, 1);\r\n    }\r\n\r\n    function rotateX(angle){\r\n        if(angle === 0){\r\n            return this;\r\n        }\r\n        var mCos = _cos(angle);\r\n        var mSin = _sin(angle);\r\n        return this._t(1, 0, 0, 0, 0, mCos, -mSin, 0, 0, mSin,  mCos, 0, 0, 0, 0, 1);\r\n    }\r\n\r\n    function rotateY(angle){\r\n        if(angle === 0){\r\n            return this;\r\n        }\r\n        var mCos = _cos(angle);\r\n        var mSin = _sin(angle);\r\n        return this._t(mCos,  0,  mSin, 0, 0, 1, 0, 0, -mSin,  0,  mCos, 0, 0, 0, 0, 1);\r\n    }\r\n\r\n    function rotateZ(angle){\r\n        if(angle === 0){\r\n            return this;\r\n        }\r\n        var mCos = _cos(angle);\r\n        var mSin = _sin(angle);\r\n        return this._t(mCos, -mSin,  0, 0, mSin,  mCos, 0, 0, 0,  0,  1, 0, 0, 0, 0, 1);\r\n    }\r\n\r\n    function shear(sx,sy){\r\n        return this._t(1, sy, sx, 1, 0, 0);\r\n    }\r\n\r\n    function skew(ax, ay){\r\n        return this.shear(_tan(ax), _tan(ay));\r\n    }\r\n\r\n    function skewFromAxis(ax, angle){\r\n        var mCos = _cos(angle);\r\n        var mSin = _sin(angle);\r\n        return this._t(mCos, mSin,  0, 0, -mSin,  mCos, 0, 0, 0,  0,  1, 0, 0, 0, 0, 1)\r\n            ._t(1, 0,  0, 0, _tan(ax),  1, 0, 0, 0,  0,  1, 0, 0, 0, 0, 1)\r\n            ._t(mCos, -mSin,  0, 0, mSin,  mCos, 0, 0, 0,  0,  1, 0, 0, 0, 0, 1);\r\n        //return this._t(mCos, mSin, -mSin, mCos, 0, 0)._t(1, 0, _tan(ax), 1, 0, 0)._t(mCos, -mSin, mSin, mCos, 0, 0);\r\n    }\r\n\r\n    function scale(sx, sy, sz) {\r\n        sz = isNaN(sz) ? 1 : sz;\r\n        if(sx == 1 && sy == 1 && sz == 1){\r\n            return this;\r\n        }\r\n        return this._t(sx, 0, 0, 0, 0, sy, 0, 0, 0, 0, sz, 0, 0, 0, 0, 1);\r\n    }\r\n\r\n    function setTransform(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {\r\n        this.props[0] = a;\r\n        this.props[1] = b;\r\n        this.props[2] = c;\r\n        this.props[3] = d;\r\n        this.props[4] = e;\r\n        this.props[5] = f;\r\n        this.props[6] = g;\r\n        this.props[7] = h;\r\n        this.props[8] = i;\r\n        this.props[9] = j;\r\n        this.props[10] = k;\r\n        this.props[11] = l;\r\n        this.props[12] = m;\r\n        this.props[13] = n;\r\n        this.props[14] = o;\r\n        this.props[15] = p;\r\n        return this;\r\n    }\r\n\r\n    function translate(tx, ty, tz) {\r\n        tz = tz || 0;\r\n        if(tx !== 0 || ty !== 0 || tz !== 0){\r\n            return this._t(1,0,0,0,0,1,0,0,0,0,1,0,tx,ty,tz,1);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    function transform(a2, b2, c2, d2, e2, f2, g2, h2, i2, j2, k2, l2, m2, n2, o2, p2) {\r\n\r\n        var _p = this.props;\r\n\r\n        if(a2 === 1 && b2 === 0 && c2 === 0 && d2 === 0 && e2 === 0 && f2 === 1 && g2 === 0 && h2 === 0 && i2 === 0 && j2 === 0 && k2 === 1 && l2 === 0){\r\n            //NOTE: commenting this condition because TurboFan deoptimizes code when present\r\n            //if(m2 !== 0 || n2 !== 0 || o2 !== 0){\r\n                _p[12] = _p[12] * a2 + _p[15] * m2;\r\n                _p[13] = _p[13] * f2 + _p[15] * n2;\r\n                _p[14] = _p[14] * k2 + _p[15] * o2;\r\n                _p[15] = _p[15] * p2;\r\n            //}\r\n            this._identityCalculated = false;\r\n            return this;\r\n        }\r\n\r\n        var a1 = _p[0];\r\n        var b1 = _p[1];\r\n        var c1 = _p[2];\r\n        var d1 = _p[3];\r\n        var e1 = _p[4];\r\n        var f1 = _p[5];\r\n        var g1 = _p[6];\r\n        var h1 = _p[7];\r\n        var i1 = _p[8];\r\n        var j1 = _p[9];\r\n        var k1 = _p[10];\r\n        var l1 = _p[11];\r\n        var m1 = _p[12];\r\n        var n1 = _p[13];\r\n        var o1 = _p[14];\r\n        var p1 = _p[15];\r\n\r\n        /* matrix order (canvas compatible):\r\n         * ace\r\n         * bdf\r\n         * 001\r\n         */\r\n        _p[0] = a1 * a2 + b1 * e2 + c1 * i2 + d1 * m2;\r\n        _p[1] = a1 * b2 + b1 * f2 + c1 * j2 + d1 * n2 ;\r\n        _p[2] = a1 * c2 + b1 * g2 + c1 * k2 + d1 * o2 ;\r\n        _p[3] = a1 * d2 + b1 * h2 + c1 * l2 + d1 * p2 ;\r\n\r\n        _p[4] = e1 * a2 + f1 * e2 + g1 * i2 + h1 * m2 ;\r\n        _p[5] = e1 * b2 + f1 * f2 + g1 * j2 + h1 * n2 ;\r\n        _p[6] = e1 * c2 + f1 * g2 + g1 * k2 + h1 * o2 ;\r\n        _p[7] = e1 * d2 + f1 * h2 + g1 * l2 + h1 * p2 ;\r\n\r\n        _p[8] = i1 * a2 + j1 * e2 + k1 * i2 + l1 * m2 ;\r\n        _p[9] = i1 * b2 + j1 * f2 + k1 * j2 + l1 * n2 ;\r\n        _p[10] = i1 * c2 + j1 * g2 + k1 * k2 + l1 * o2 ;\r\n        _p[11] = i1 * d2 + j1 * h2 + k1 * l2 + l1 * p2 ;\r\n\r\n        _p[12] = m1 * a2 + n1 * e2 + o1 * i2 + p1 * m2 ;\r\n        _p[13] = m1 * b2 + n1 * f2 + o1 * j2 + p1 * n2 ;\r\n        _p[14] = m1 * c2 + n1 * g2 + o1 * k2 + p1 * o2 ;\r\n        _p[15] = m1 * d2 + n1 * h2 + o1 * l2 + p1 * p2 ;\r\n\r\n        this._identityCalculated = false;\r\n        return this;\r\n    }\r\n\r\n    function isIdentity() {\r\n        if(!this._identityCalculated){\r\n            this._identity = !(this.props[0] !== 1 || this.props[1] !== 0 || this.props[2] !== 0 || this.props[3] !== 0 || this.props[4] !== 0 || this.props[5] !== 1 || this.props[6] !== 0 || this.props[7] !== 0 || this.props[8] !== 0 || this.props[9] !== 0 || this.props[10] !== 1 || this.props[11] !== 0 || this.props[12] !== 0 || this.props[13] !== 0 || this.props[14] !== 0 || this.props[15] !== 1);\r\n            this._identityCalculated = true;\r\n        }\r\n        return this._identity;\r\n    }\r\n\r\n    function equals(matr){\r\n        var i = 0;\r\n        while (i < 16) {\r\n            if(matr.props[i] !== this.props[i]) {\r\n                return false;\r\n            }\r\n            i+=1;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    function clone(matr){\r\n        var i;\r\n        for(i=0;i<16;i+=1){\r\n            matr.props[i] = this.props[i];\r\n        }\r\n    }\r\n\r\n    function cloneFromProps(props){\r\n        var i;\r\n        for(i=0;i<16;i+=1){\r\n            this.props[i] = props[i];\r\n        }\r\n    }\r\n\r\n    function applyToPoint(x, y, z) {\r\n\r\n        return {\r\n            x: x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12],\r\n            y: x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13],\r\n            z: x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14]\r\n        };\r\n        /*return {\r\n         x: x * me.a + y * me.c + me.e,\r\n         y: x * me.b + y * me.d + me.f\r\n         };*/\r\n    }\r\n    function applyToX(x, y, z) {\r\n        return x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12];\r\n    }\r\n    function applyToY(x, y, z) {\r\n        return x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13];\r\n    }\r\n    function applyToZ(x, y, z) {\r\n        return x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14];\r\n    }\r\n\r\n    function inversePoint(pt) {\r\n        var determinant = this.props[0] * this.props[5] - this.props[1] * this.props[4];\r\n        var a = this.props[5]/determinant;\r\n        var b = - this.props[1]/determinant;\r\n        var c = - this.props[4]/determinant;\r\n        var d = this.props[0]/determinant;\r\n        var e = (this.props[4] * this.props[13] - this.props[5] * this.props[12])/determinant;\r\n        var f = - (this.props[0] * this.props[13] - this.props[1] * this.props[12])/determinant;\r\n        return [pt[0] * a + pt[1] * c + e, pt[0] * b + pt[1] * d + f, 0];\r\n    }\r\n\r\n    function inversePoints(pts){\r\n        var i, len = pts.length, retPts = [];\r\n        for(i=0;i<len;i+=1){\r\n            retPts[i] = inversePoint(pts[i]);\r\n        }\r\n        return retPts;\r\n    }\r\n\r\n    function applyToTriplePoints(pt1, pt2, pt3) {\r\n        var arr = createTypedArray('float32', 6);\r\n        if(this.isIdentity()) {\r\n            arr[0] = pt1[0];\r\n            arr[1] = pt1[1];\r\n            arr[2] = pt2[0];\r\n            arr[3] = pt2[1];\r\n            arr[4] = pt3[0];\r\n            arr[5] = pt3[1];\r\n        } else {\r\n            var p0 = this.props[0], p1 = this.props[1], p4 = this.props[4], p5 = this.props[5], p12 = this.props[12], p13 = this.props[13];\r\n            arr[0] = pt1[0] * p0 + pt1[1] * p4 + p12;\r\n            arr[1] = pt1[0] * p1 + pt1[1] * p5 + p13;\r\n            arr[2] = pt2[0] * p0 + pt2[1] * p4 + p12;\r\n            arr[3] = pt2[0] * p1 + pt2[1] * p5 + p13;\r\n            arr[4] = pt3[0] * p0 + pt3[1] * p4 + p12;\r\n            arr[5] = pt3[0] * p1 + pt3[1] * p5 + p13;\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    function applyToPointArray(x,y,z){\r\n        var arr;\r\n        if(this.isIdentity()) {\r\n            arr = [x,y,z];\r\n        } else {\r\n            arr = [x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12],x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13],x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14]];\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    function applyToPointStringified(x, y) {\r\n        if(this.isIdentity()) {\r\n            return x + ',' + y;\r\n        }\r\n        var _p = this.props;\r\n        return Math.round((x * _p[0] + y * _p[4] + _p[12]) * 100) / 100+','+ Math.round((x * _p[1] + y * _p[5] + _p[13]) * 100) / 100;\r\n    }\r\n\r\n    function toCSS() {\r\n        //Doesn't make much sense to add this optimization. If it is an identity matrix, it's very likely this will get called only once since it won't be keyframed.\r\n        /*if(this.isIdentity()) {\r\n            return '';\r\n        }*/\r\n        var i = 0;\r\n        var props = this.props;\r\n        var cssValue = 'matrix3d(';\r\n        var v = 10000;\r\n        while(i<16){\r\n            cssValue += _rnd(props[i]*v)/v;\r\n            cssValue += i === 15 ? ')':',';\r\n            i += 1;\r\n        }\r\n        return cssValue;\r\n    }\r\n\r\n    function roundMatrixProperty(val) {\r\n        var v = 10000;\r\n        if((val < 0.000001 && val > 0) || (val > -0.000001 && val < 0)) {\r\n            return _rnd(val * v) / v;\r\n        }\r\n        return val;\r\n    }\r\n\r\n    function to2dCSS() {\r\n        //Doesn't make much sense to add this optimization. If it is an identity matrix, it's very likely this will get called only once since it won't be keyframed.\r\n        /*if(this.isIdentity()) {\r\n            return '';\r\n        }*/\r\n        var props = this.props;\r\n        var _a = roundMatrixProperty(props[0]);\r\n        var _b = roundMatrixProperty(props[1]);\r\n        var _c = roundMatrixProperty(props[4]);\r\n        var _d = roundMatrixProperty(props[5]);\r\n        var _e = roundMatrixProperty(props[12]);\r\n        var _f = roundMatrixProperty(props[13]);\r\n        return \"matrix(\" + _a + ',' + _b + ',' + _c + ',' + _d + ',' + _e + ',' + _f + \")\";\r\n    }\r\n\r\n    return function(){\r\n        this.reset = reset;\r\n        this.rotate = rotate;\r\n        this.rotateX = rotateX;\r\n        this.rotateY = rotateY;\r\n        this.rotateZ = rotateZ;\r\n        this.skew = skew;\r\n        this.skewFromAxis = skewFromAxis;\r\n        this.shear = shear;\r\n        this.scale = scale;\r\n        this.setTransform = setTransform;\r\n        this.translate = translate;\r\n        this.transform = transform;\r\n        this.applyToPoint = applyToPoint;\r\n        this.applyToX = applyToX;\r\n        this.applyToY = applyToY;\r\n        this.applyToZ = applyToZ;\r\n        this.applyToPointArray = applyToPointArray;\r\n        this.applyToTriplePoints = applyToTriplePoints;\r\n        this.applyToPointStringified = applyToPointStringified;\r\n        this.toCSS = toCSS;\r\n        this.to2dCSS = to2dCSS;\r\n        this.clone = clone;\r\n        this.cloneFromProps = cloneFromProps;\r\n        this.equals = equals;\r\n        this.inversePoints = inversePoints;\r\n        this.inversePoint = inversePoint;\r\n        this._t = this.transform;\r\n        this.isIdentity = isIdentity;\r\n        this._identity = true;\r\n        this._identityCalculated = false;\r\n\r\n        this.props = createTypedArray('float32', 16);\r\n        this.reset();\r\n    };\r\n}());\r\n\n/*\r\n Copyright 2014 David Bau.\r\n\r\n Permission is hereby granted, free of charge, to any person obtaining\r\n a copy of this software and associated documentation files (the\r\n \"Software\"), to deal in the Software without restriction, including\r\n without limitation the rights to use, copy, modify, merge, publish,\r\n distribute, sublicense, and/or sell copies of the Software, and to\r\n permit persons to whom the Software is furnished to do so, subject to\r\n the following conditions:\r\n\r\n The above copyright notice and this permission notice shall be\r\n included in all copies or substantial portions of the Software.\r\n\r\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\r\n IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\r\n CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\r\n TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\r\n SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\n */\r\n\r\n(function (pool, math) {\r\n//\r\n// The following constants are related to IEEE 754 limits.\r\n//\r\n    var global = this,\r\n        width = 256,        // each RC4 output is 0 <= x < 256\r\n        chunks = 6,         // at least six RC4 outputs for each double\r\n        digits = 52,        // there are 52 significant digits in a double\r\n        rngname = 'random', // rngname: name for Math.random and Math.seedrandom\r\n        startdenom = math.pow(width, chunks),\r\n        significance = math.pow(2, digits),\r\n        overflow = significance * 2,\r\n        mask = width - 1,\r\n        nodecrypto;         // node.js crypto module, initialized at the bottom.\r\n\r\n//\r\n// seedrandom()\r\n// This is the seedrandom function described above.\r\n//\r\n    function seedrandom(seed, options, callback) {\r\n        var key = [];\r\n        options = (options === true) ? { entropy: true } : (options || {});\r\n\r\n        // Flatten the seed string or build one from local entropy if needed.\r\n        var shortseed = mixkey(flatten(\r\n            options.entropy ? [seed, tostring(pool)] :\r\n                (seed === null) ? autoseed() : seed, 3), key);\r\n\r\n        // Use the seed to initialize an ARC4 generator.\r\n        var arc4 = new ARC4(key);\r\n\r\n        // This function returns a random double in [0, 1) that contains\r\n        // randomness in every bit of the mantissa of the IEEE 754 value.\r\n        var prng = function() {\r\n            var n = arc4.g(chunks),             // Start with a numerator n < 2 ^ 48\r\n                d = startdenom,                 //   and denominator d = 2 ^ 48.\r\n                x = 0;                          //   and no 'extra last byte'.\r\n            while (n < significance) {          // Fill up all significant digits by\r\n                n = (n + x) * width;              //   shifting numerator and\r\n                d *= width;                       //   denominator and generating a\r\n                x = arc4.g(1);                    //   new least-significant-byte.\r\n            }\r\n            while (n >= overflow) {             // To avoid rounding up, before adding\r\n                n /= 2;                           //   last byte, shift everything\r\n                d /= 2;                           //   right using integer math until\r\n                x >>>= 1;                         //   we have exactly the desired bits.\r\n            }\r\n            return (n + x) / d;                 // Form the number within [0, 1).\r\n        };\r\n\r\n        prng.int32 = function() { return arc4.g(4) | 0; };\r\n        prng.quick = function() { return arc4.g(4) / 0x100000000; };\r\n        prng.double = prng;\r\n\r\n        // Mix the randomness into accumulated entropy.\r\n        mixkey(tostring(arc4.S), pool);\r\n\r\n        // Calling convention: what to return as a function of prng, seed, is_math.\r\n        return (options.pass || callback ||\r\n        function(prng, seed, is_math_call, state) {\r\n            if (state) {\r\n                // Load the arc4 state from the given state if it has an S array.\r\n                if (state.S) { copy(state, arc4); }\r\n                // Only provide the .state method if requested via options.state.\r\n                prng.state = function() { return copy(arc4, {}); };\r\n            }\r\n\r\n            // If called as a method of Math (Math.seedrandom()), mutate\r\n            // Math.random because that is how seedrandom.js has worked since v1.0.\r\n            if (is_math_call) { math[rngname] = prng; return seed; }\r\n\r\n            // Otherwise, it is a newer calling convention, so return the\r\n            // prng directly.\r\n            else return prng;\r\n        })(\r\n            prng,\r\n            shortseed,\r\n            'global' in options ? options.global : (this == math),\r\n            options.state);\r\n    }\r\n    math['seed' + rngname] = seedrandom;\r\n\r\n//\r\n// ARC4\r\n//\r\n// An ARC4 implementation.  The constructor takes a key in the form of\r\n// an array of at most (width) integers that should be 0 <= x < (width).\r\n//\r\n// The g(count) method returns a pseudorandom integer that concatenates\r\n// the next (count) outputs from ARC4.  Its return value is a number x\r\n// that is in the range 0 <= x < (width ^ count).\r\n//\r\n    function ARC4(key) {\r\n        var t, keylen = key.length,\r\n            me = this, i = 0, j = me.i = me.j = 0, s = me.S = [];\r\n\r\n        // The empty key [] is treated as [0].\r\n        if (!keylen) { key = [keylen++]; }\r\n\r\n        // Set up S using the standard key scheduling algorithm.\r\n        while (i < width) {\r\n            s[i] = i++;\r\n        }\r\n        for (i = 0; i < width; i++) {\r\n            s[i] = s[j = mask & (j + key[i % keylen] + (t = s[i]))];\r\n            s[j] = t;\r\n        }\r\n\r\n        // The \"g\" method returns the next (count) outputs as one number.\r\n        me.g = function(count) {\r\n            // Using instance members instead of closure state nearly doubles speed.\r\n            var t, r = 0,\r\n                i = me.i, j = me.j, s = me.S;\r\n            while (count--) {\r\n                t = s[i = mask & (i + 1)];\r\n                r = r * width + s[mask & ((s[i] = s[j = mask & (j + t)]) + (s[j] = t))];\r\n            }\r\n            me.i = i; me.j = j;\r\n            return r;\r\n            // For robust unpredictability, the function call below automatically\r\n            // discards an initial batch of values.  This is called RC4-drop[256].\r\n            // See http://google.com/search?q=rsa+fluhrer+response&btnI\r\n        };\r\n    }\r\n\r\n//\r\n// copy()\r\n// Copies internal state of ARC4 to or from a plain object.\r\n//\r\n    function copy(f, t) {\r\n        t.i = f.i;\r\n        t.j = f.j;\r\n        t.S = f.S.slice();\r\n        return t;\r\n    }\r\n\r\n//\r\n// flatten()\r\n// Converts an object tree to nested arrays of strings.\r\n//\r\n    function flatten(obj, depth) {\r\n        var result = [], typ = (typeof obj), prop;\r\n        if (depth && typ == 'object') {\r\n            for (prop in obj) {\r\n                try { result.push(flatten(obj[prop], depth - 1)); } catch (e) {}\r\n            }\r\n        }\r\n        return (result.length ? result : typ == 'string' ? obj : obj + '\\0');\r\n    }\r\n\r\n//\r\n// mixkey()\r\n// Mixes a string seed into a key that is an array of integers, and\r\n// returns a shortened string seed that is equivalent to the result key.\r\n//\r\n    function mixkey(seed, key) {\r\n        var stringseed = seed + '', smear, j = 0;\r\n        while (j < stringseed.length) {\r\n            key[mask & j] =\r\n                mask & ((smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++));\r\n        }\r\n        return tostring(key);\r\n    }\r\n\r\n//\r\n// autoseed()\r\n// Returns an object for autoseeding, using window.crypto and Node crypto\r\n// module if available.\r\n//\r\n    function autoseed() {\r\n        try {\r\n            if (nodecrypto) { return tostring(nodecrypto.randomBytes(width)); }\r\n            var out = new Uint8Array(width);\r\n            (global.crypto || global.msCrypto).getRandomValues(out);\r\n            return tostring(out);\r\n        } catch (e) {\r\n            var browser = global.navigator,\r\n                plugins = browser && browser.plugins;\r\n            return [+new Date(), global, plugins, global.screen, tostring(pool)];\r\n        }\r\n    }\r\n\r\n//\r\n// tostring()\r\n// Converts an array of charcodes to a string\r\n//\r\n    function tostring(a) {\r\n        return String.fromCharCode.apply(0, a);\r\n    }\r\n\r\n//\r\n// When seedrandom.js is loaded, we immediately mix a few bits\r\n// from the built-in RNG into the entropy pool.  Because we do\r\n// not want to interfere with deterministic PRNG state later,\r\n// seedrandom will not call math.random on its own again after\r\n// initialization.\r\n//\r\n    mixkey(math.random(), pool);\r\n\r\n//\r\n// Nodejs and AMD support: export the implementation as a module using\r\n// either convention.\r\n//\r\n\r\n// End anonymous scope, and pass initial values.\r\n})(\r\n    [],     // pool: entropy pool starts empty\r\n    BMMath    // math: package containing random, pow, and seedrandom\r\n);\nvar BezierFactory = (function(){\r\n    /**\r\n     * BezierEasing - use bezier curve for transition easing function\r\n     * by Gaëtan Renaudeau 2014 - 2015 – MIT License\r\n     *\r\n     * Credits: is based on Firefox's nsSMILKeySpline.cpp\r\n     * Usage:\r\n     * var spline = BezierEasing([ 0.25, 0.1, 0.25, 1.0 ])\r\n     * spline.get(x) => returns the easing value | x must be in [0, 1] range\r\n     *\r\n     */\r\n\r\n        var ob = {};\r\n    ob.getBezierEasing = getBezierEasing;\r\n    var beziers = {};\r\n\r\n    function getBezierEasing(a,b,c,d,nm){\r\n        var str = nm || ('bez_' + a+'_'+b+'_'+c+'_'+d).replace(/\\./g, 'p');\r\n        if(beziers[str]){\r\n            return beziers[str];\r\n        }\r\n        var bezEasing = new BezierEasing([a,b,c,d]);\r\n        beziers[str] = bezEasing;\r\n        return bezEasing;\r\n    }\r\n\r\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\r\n    var NEWTON_ITERATIONS = 4;\r\n    var NEWTON_MIN_SLOPE = 0.001;\r\n    var SUBDIVISION_PRECISION = 0.0000001;\r\n    var SUBDIVISION_MAX_ITERATIONS = 10;\r\n\r\n    var kSplineTableSize = 11;\r\n    var kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\r\n\r\n    var float32ArraySupported = typeof Float32Array === \"function\";\r\n\r\n    function A (aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1; }\r\n    function B (aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1; }\r\n    function C (aA1)      { return 3.0 * aA1; }\r\n\r\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\r\n    function calcBezier (aT, aA1, aA2) {\r\n        return ((A(aA1, aA2)*aT + B(aA1, aA2))*aT + C(aA1))*aT;\r\n    }\r\n\r\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\r\n    function getSlope (aT, aA1, aA2) {\r\n        return 3.0 * A(aA1, aA2)*aT*aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\r\n    }\r\n\r\n    function binarySubdivide (aX, aA, aB, mX1, mX2) {\r\n        var currentX, currentT, i = 0;\r\n        do {\r\n            currentT = aA + (aB - aA) / 2.0;\r\n            currentX = calcBezier(currentT, mX1, mX2) - aX;\r\n            if (currentX > 0.0) {\r\n                aB = currentT;\r\n            } else {\r\n                aA = currentT;\r\n            }\r\n        } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\r\n        return currentT;\r\n    }\r\n\r\n    function newtonRaphsonIterate (aX, aGuessT, mX1, mX2) {\r\n        for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\r\n            var currentSlope = getSlope(aGuessT, mX1, mX2);\r\n            if (currentSlope === 0.0) return aGuessT;\r\n            var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\r\n            aGuessT -= currentX / currentSlope;\r\n        }\r\n        return aGuessT;\r\n    }\r\n\r\n    /**\r\n     * points is an array of [ mX1, mY1, mX2, mY2 ]\r\n     */\r\n    function BezierEasing (points) {\r\n        this._p = points;\r\n        this._mSampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\r\n        this._precomputed = false;\r\n\r\n        this.get = this.get.bind(this);\r\n    }\r\n\r\n    BezierEasing.prototype = {\r\n\r\n        get: function (x) {\r\n            var mX1 = this._p[0],\r\n                mY1 = this._p[1],\r\n                mX2 = this._p[2],\r\n                mY2 = this._p[3];\r\n            if (!this._precomputed) this._precompute();\r\n            if (mX1 === mY1 && mX2 === mY2) return x; // linear\r\n            // Because JavaScript number are imprecise, we should guarantee the extremes are right.\r\n            if (x === 0) return 0;\r\n            if (x === 1) return 1;\r\n            return calcBezier(this._getTForX(x), mY1, mY2);\r\n        },\r\n\r\n        // Private part\r\n\r\n        _precompute: function () {\r\n            var mX1 = this._p[0],\r\n                mY1 = this._p[1],\r\n                mX2 = this._p[2],\r\n                mY2 = this._p[3];\r\n            this._precomputed = true;\r\n            if (mX1 !== mY1 || mX2 !== mY2)\r\n                this._calcSampleValues();\r\n        },\r\n\r\n        _calcSampleValues: function () {\r\n            var mX1 = this._p[0],\r\n                mX2 = this._p[2];\r\n            for (var i = 0; i < kSplineTableSize; ++i) {\r\n                this._mSampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * getTForX chose the fastest heuristic to determine the percentage value precisely from a given X projection.\r\n         */\r\n        _getTForX: function (aX) {\r\n            var mX1 = this._p[0],\r\n                mX2 = this._p[2],\r\n                mSampleValues = this._mSampleValues;\r\n\r\n            var intervalStart = 0.0;\r\n            var currentSample = 1;\r\n            var lastSample = kSplineTableSize - 1;\r\n\r\n            for (; currentSample !== lastSample && mSampleValues[currentSample] <= aX; ++currentSample) {\r\n                intervalStart += kSampleStepSize;\r\n            }\r\n            --currentSample;\r\n\r\n            // Interpolate to provide an initial guess for t\r\n            var dist = (aX - mSampleValues[currentSample]) / (mSampleValues[currentSample+1] - mSampleValues[currentSample]);\r\n            var guessForT = intervalStart + dist * kSampleStepSize;\r\n\r\n            var initialSlope = getSlope(guessForT, mX1, mX2);\r\n            if (initialSlope >= NEWTON_MIN_SLOPE) {\r\n                return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\r\n            } else if (initialSlope === 0.0) {\r\n                return guessForT;\r\n            } else {\r\n                return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\r\n            }\r\n        }\r\n    };\r\n\r\n    return ob;\r\n\r\n}());\n(function () {\r\n    var lastTime = 0;\r\n    var vendors = ['ms', 'moz', 'webkit', 'o'];\r\n    for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\r\n        window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\r\n        window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] || window[vendors[x] + 'CancelRequestAnimationFrame'];\r\n    }\r\n    if(!window.requestAnimationFrame)\r\n        window.requestAnimationFrame = function (callback, element) {\r\n            var currTime = new Date().getTime();\r\n            var timeToCall = Math.max(0, 16 - (currTime - lastTime));\r\n            var id = setTimeout(function () {\r\n                    callback(currTime + timeToCall);\r\n                },\r\n                timeToCall);\r\n            lastTime = currTime + timeToCall;\r\n            return id;\r\n        };\r\n    if(!window.cancelAnimationFrame)\r\n        window.cancelAnimationFrame = function (id) {\r\n            clearTimeout(id);\r\n        };\r\n}());\r\n\nfunction extendPrototype(sources,destination){\r\n    var i, len = sources.length, sourcePrototype;\r\n    for (i = 0;i < len;i += 1) {\r\n        sourcePrototype = sources[i].prototype;\r\n        for (var attr in sourcePrototype) {\r\n            if (sourcePrototype.hasOwnProperty(attr)) destination.prototype[attr] = sourcePrototype[attr];\r\n        }\r\n    }\r\n}\r\n\r\nfunction getDescriptor(object, prop) {\r\n    return Object.getOwnPropertyDescriptor(object, prop);\r\n}\r\n\r\nfunction createProxyFunction(prototype) {\r\n\tfunction ProxyFunction(){}\r\n\tProxyFunction.prototype = prototype;\r\n\treturn ProxyFunction;\r\n}\nfunction bezFunction(){\r\n\r\n    var easingFunctions = [];\r\n    var math = Math;\r\n\r\n    function pointOnLine2D(x1,y1, x2,y2, x3,y3){\r\n        var det1 = (x1*y2) + (y1*x3) + (x2*y3) - (x3*y2) - (y3*x1) - (x2*y1);\r\n        return det1 > -0.001 && det1 < 0.001;\r\n    }\r\n\r\n    function pointOnLine3D(x1,y1,z1, x2,y2,z2, x3,y3,z3){\r\n        if(z1 === 0 && z2 === 0 && z3 === 0) {\r\n            return pointOnLine2D(x1,y1, x2,y2, x3,y3);\r\n        }\r\n        var dist1 = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2) + Math.pow(z2 - z1, 2));\r\n        var dist2 = Math.sqrt(Math.pow(x3 - x1, 2) + Math.pow(y3 - y1, 2) + Math.pow(z3 - z1, 2));\r\n        var dist3 = Math.sqrt(Math.pow(x3 - x2, 2) + Math.pow(y3 - y2, 2) + Math.pow(z3 - z2, 2));\r\n        var diffDist;\r\n        if(dist1 > dist2){\r\n            if(dist1 > dist3){\r\n                diffDist = dist1 - dist2 - dist3;\r\n            } else {\r\n                diffDist = dist3 - dist2 - dist1;\r\n            }\r\n        } else if(dist3 > dist2){\r\n            diffDist = dist3 - dist2 - dist1;\r\n        } else {\r\n            diffDist = dist2 - dist1 - dist3;\r\n        }\r\n        return diffDist > -0.0001 && diffDist < 0.0001;\r\n    }\r\n\r\n    var getBezierLength = (function(){\r\n\r\n        return function(pt1,pt2,pt3,pt4){\r\n            var curveSegments = defaultCurveSegments;\r\n            var k;\r\n            var i, len;\r\n            var ptCoord,perc,addedLength = 0;\r\n            var ptDistance;\r\n            var point = [],lastPoint = [];\r\n            var lengthData = bezier_length_pool.newElement();\r\n            len = pt3.length;\r\n            for(k=0;k<curveSegments;k+=1){\r\n                perc = k/(curveSegments-1);\r\n                ptDistance = 0;\r\n                for(i=0;i<len;i+=1){\r\n                    ptCoord = bm_pow(1-perc,3)*pt1[i]+3*bm_pow(1-perc,2)*perc*pt3[i]+3*(1-perc)*bm_pow(perc,2)*pt4[i]+bm_pow(perc,3)*pt2[i];\r\n                    point[i] = ptCoord;\r\n                    if(lastPoint[i] !== null){\r\n                        ptDistance += bm_pow(point[i] - lastPoint[i],2);\r\n                    }\r\n                    lastPoint[i] = point[i];\r\n                }\r\n                if(ptDistance){\r\n                    ptDistance = bm_sqrt(ptDistance);\r\n                    addedLength += ptDistance;\r\n                }\r\n                lengthData.percents[k] = perc;\r\n                lengthData.lengths[k] = addedLength;\r\n            }\r\n            lengthData.addedLength = addedLength;\r\n            return lengthData;\r\n        };\r\n    }());\r\n\r\n    function getSegmentsLength(shapeData) {\r\n        var segmentsLength = segments_length_pool.newElement();\r\n        var closed = shapeData.c;\r\n        var pathV = shapeData.v;\r\n        var pathO = shapeData.o;\r\n        var pathI = shapeData.i;\r\n        var i, len = shapeData._length;\r\n        var lengths = segmentsLength.lengths;\r\n        var totalLength = 0;\r\n        for(i=0;i<len-1;i+=1){\r\n            lengths[i] = getBezierLength(pathV[i],pathV[i+1],pathO[i],pathI[i+1]);\r\n            totalLength += lengths[i].addedLength;\r\n        }\r\n        if(closed && len){\r\n            lengths[i] = getBezierLength(pathV[i],pathV[0],pathO[i],pathI[0]);\r\n            totalLength += lengths[i].addedLength;\r\n        }\r\n        segmentsLength.totalLength = totalLength;\r\n        return segmentsLength;\r\n    }\r\n\r\n    function BezierData(length){\r\n        this.segmentLength = 0;\r\n        this.points = new Array(length);\r\n    }\r\n\r\n    function PointData(partial,point){\r\n        this.partialLength = partial;\r\n        this.point = point;\r\n    }\r\n\r\n    var buildBezierData = (function(){\r\n\r\n        var storedData = {};\r\n\r\n        return function (keyData){\r\n            var pt1 = keyData.s;\r\n            var pt2 = keyData.e;\r\n            var pt3 = keyData.to;\r\n            var pt4 = keyData.ti;\r\n            var bezierName = (pt1[0]+'_'+pt1[1]+'_'+pt2[0]+'_'+pt2[1]+'_'+pt3[0]+'_'+pt3[1]+'_'+pt4[0]+'_'+pt4[1]).replace(/\\./g, 'p');\r\n            if(storedData[bezierName]){\r\n                keyData.bezierData = storedData[bezierName];\r\n                return;\r\n            }\r\n            var curveSegments = defaultCurveSegments;\r\n            var k, i, len;\r\n            var ptCoord,perc,addedLength = 0;\r\n            var ptDistance;\r\n            var point,lastPoint = null;\r\n            if (pt1.length === 2 && (pt1[0] != pt2[0] || pt1[1] != pt2[1]) && pointOnLine2D(pt1[0],pt1[1],pt2[0],pt2[1],pt1[0]+pt3[0],pt1[1]+pt3[1]) && pointOnLine2D(pt1[0],pt1[1],pt2[0],pt2[1],pt2[0]+pt4[0],pt2[1]+pt4[1])){\r\n                curveSegments = 2;\r\n            }\r\n            var bezierData = new BezierData(curveSegments);\r\n            len = pt3.length;\r\n            for (k = 0; k < curveSegments; k += 1) {\r\n                point = createSizedArray(len);\r\n                perc = k / (curveSegments - 1);\r\n                ptDistance = 0;\r\n                for (i = 0; i < len; i += 1){\r\n                    ptCoord = bm_pow(1-perc,3)*pt1[i]+3*bm_pow(1-perc,2)*perc*(pt1[i] + pt3[i])+3*(1-perc)*bm_pow(perc,2)*(pt2[i] + pt4[i])+bm_pow(perc,3)*pt2[i];\r\n                    point[i] = ptCoord;\r\n                    if(lastPoint !== null){\r\n                        ptDistance += bm_pow(point[i] - lastPoint[i],2);\r\n                    }\r\n                }\r\n                ptDistance = bm_sqrt(ptDistance);\r\n                addedLength += ptDistance;\r\n                bezierData.points[k] = new PointData(ptDistance, point);\r\n                lastPoint = point;\r\n            }\r\n            bezierData.segmentLength = addedLength;\r\n            keyData.bezierData = bezierData;\r\n            storedData[bezierName] = bezierData;\r\n        };\r\n    }());\r\n\r\n    function getDistancePerc(perc,bezierData){\r\n        var percents = bezierData.percents;\r\n        var lengths = bezierData.lengths;\r\n        var len = percents.length;\r\n        var initPos = bm_floor((len-1)*perc);\r\n        var lengthPos = perc*bezierData.addedLength;\r\n        var lPerc = 0;\r\n        if(initPos === len - 1 || initPos === 0 || lengthPos === lengths[initPos]){\r\n            return percents[initPos];\r\n        }else{\r\n            var dir = lengths[initPos] > lengthPos ? -1 : 1;\r\n            var flag = true;\r\n            while(flag){\r\n                if(lengths[initPos] <= lengthPos && lengths[initPos+1] > lengthPos){\r\n                    lPerc = (lengthPos - lengths[initPos]) / (lengths[initPos+1] - lengths[initPos]);\r\n                    flag = false;\r\n                }else{\r\n                    initPos += dir;\r\n                }\r\n                if(initPos < 0 || initPos >= len - 1){\r\n                    //FIX for TypedArrays that don't store floating point values with enough accuracy\r\n                    if(initPos === len - 1) {\r\n                        return percents[initPos];\r\n                    }\r\n                    flag = false;\r\n                }\r\n            }\r\n            return percents[initPos] + (percents[initPos+1] - percents[initPos])*lPerc;\r\n        }\r\n    }\r\n\r\n    function getPointInSegment(pt1, pt2, pt3, pt4, percent, bezierData) {\r\n        var t1 = getDistancePerc(percent,bezierData);\r\n        var u0 = 1;\r\n        var u1 = 1 - t1;\r\n        var ptX = Math.round((u1*u1*u1* pt1[0] + (t1*u1*u1 + u1*t1*u1 + u1*u1*t1)* pt3[0] + (t1*t1*u1 + u1*t1*t1 + t1*u1*t1)*pt4[0] + t1*t1*t1* pt2[0])* 1000) / 1000;\r\n        var ptY = Math.round((u1*u1*u1* pt1[1] + (t1*u1*u1 + u1*t1*u1 + u1*u1*t1)* pt3[1] + (t1*t1*u1 + u1*t1*t1 + t1*u1*t1)*pt4[1] + t1*t1*t1* pt2[1])* 1000) / 1000;\r\n        return [ptX, ptY];\r\n    }\r\n\r\n    function getSegmentArray() {\r\n\r\n    }\r\n\r\n    var bezier_segment_points = createTypedArray('float32', 8);\r\n\r\n    function getNewSegment(pt1,pt2,pt3,pt4,startPerc,endPerc, bezierData){\r\n\r\n        startPerc = startPerc < 0 ? 0 : startPerc > 1 ? 1 : startPerc;\r\n        var t0 = getDistancePerc(startPerc,bezierData);\r\n        endPerc = endPerc > 1 ? 1 : endPerc;\r\n        var t1 = getDistancePerc(endPerc,bezierData);\r\n        var i, len = pt1.length;\r\n        var u0 = 1 - t0;\r\n        var u1 = 1 - t1;\r\n        var u0u0u0 = u0*u0*u0;\r\n        var t0u0u0_3 = t0*u0*u0*3;\r\n        var t0t0u0_3 = t0*t0*u0*3;\r\n        var t0t0t0 = t0*t0*t0;\r\n        //\r\n        var u0u0u1 = u0*u0*u1;\r\n        var t0u0u1_3 = t0*u0*u1 + u0*t0*u1 + u0*u0*t1;\r\n        var t0t0u1_3 = t0*t0*u1 + u0*t0*t1 + t0*u0*t1;\r\n        var t0t0t1 = t0*t0*t1;\r\n        //\r\n        var u0u1u1 = u0*u1*u1;\r\n        var t0u1u1_3 = t0*u1*u1 + u0*t1*u1 + u0*u1*t1;\r\n        var t0t1u1_3 = t0*t1*u1 + u0*t1*t1 + t0*u1*t1;\r\n        var t0t1t1 = t0*t1*t1;\r\n        //\r\n        var u1u1u1 = u1*u1*u1;\r\n        var t1u1u1_3 = t1*u1*u1 + u1*t1*u1 + u1*u1*t1;\r\n        var t1t1u1_3 = t1*t1*u1 + u1*t1*t1 + t1*u1*t1;\r\n        var t1t1t1 = t1*t1*t1;\r\n        for(i=0;i<len;i+=1){\r\n            bezier_segment_points[i * 4] = Math.round((u0u0u0 * pt1[i] + t0u0u0_3 * pt3[i] + t0t0u0_3 * pt4[i] + t0t0t0 * pt2[i]) * 1000) / 1000;\r\n            bezier_segment_points[i * 4 + 1] = Math.round((u0u0u1 * pt1[i] + t0u0u1_3 * pt3[i] + t0t0u1_3 * pt4[i] + t0t0t1 * pt2[i]) * 1000) / 1000;\r\n            bezier_segment_points[i * 4 + 2] = Math.round((u0u1u1 * pt1[i] + t0u1u1_3 * pt3[i] + t0t1u1_3 * pt4[i] + t0t1t1 * pt2[i]) * 1000) / 1000;\r\n            bezier_segment_points[i * 4 + 3] = Math.round((u1u1u1 * pt1[i] + t1u1u1_3 * pt3[i] + t1t1u1_3 * pt4[i] + t1t1t1 * pt2[i]) * 1000) / 1000;\r\n        }\r\n\r\n        return bezier_segment_points;\r\n    }\r\n\r\n    return {\r\n        getSegmentsLength : getSegmentsLength,\r\n        getNewSegment : getNewSegment,\r\n        getPointInSegment : getPointInSegment,\r\n        buildBezierData : buildBezierData,\r\n        pointOnLine2D : pointOnLine2D,\r\n        pointOnLine3D : pointOnLine3D\r\n    };\r\n}\r\n\r\nvar bez = bezFunction();\nfunction dataFunctionManager(){\r\n\r\n    //var tCanvasHelper = createTag('canvas').getContext('2d');\r\n\r\n    function completeLayers(layers, comps, fontManager){\r\n        var layerData;\r\n        var animArray, lastFrame;\r\n        var i, len = layers.length;\r\n        var j, jLen, k, kLen;\r\n        for(i=0;i<len;i+=1){\r\n            layerData = layers[i];\r\n            if(!('ks' in layerData) || layerData.completed){\r\n                continue;\r\n            }\r\n            layerData.completed = true;\r\n            if(layerData.tt){\r\n                layers[i-1].td = layerData.tt;\r\n            }\r\n            animArray = [];\r\n            lastFrame = -1;\r\n            if(layerData.hasMask){\r\n                var maskProps = layerData.masksProperties;\r\n                jLen = maskProps.length;\r\n                for(j=0;j<jLen;j+=1){\r\n                    if(maskProps[j].pt.k.i){\r\n                        convertPathsToAbsoluteValues(maskProps[j].pt.k);\r\n                    }else{\r\n                        kLen = maskProps[j].pt.k.length;\r\n                        for(k=0;k<kLen;k+=1){\r\n                            if(maskProps[j].pt.k[k].s){\r\n                                convertPathsToAbsoluteValues(maskProps[j].pt.k[k].s[0]);\r\n                            }\r\n                            if(maskProps[j].pt.k[k].e){\r\n                                convertPathsToAbsoluteValues(maskProps[j].pt.k[k].e[0]);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if(layerData.ty===0){\r\n                layerData.layers = findCompLayers(layerData.refId, comps);\r\n                completeLayers(layerData.layers,comps, fontManager);\r\n            }else if(layerData.ty === 4){\r\n                completeShapes(layerData.shapes);\r\n            }else if(layerData.ty == 5){\r\n                completeText(layerData, fontManager);\r\n            }\r\n        }\r\n    }\r\n\r\n    function findCompLayers(id,comps){\r\n        var i = 0, len = comps.length;\r\n        while(i<len){\r\n            if(comps[i].id === id){\r\n                if(!comps[i].layers.__used) {\r\n                    comps[i].layers.__used = true;\r\n                    return comps[i].layers;\r\n                }\r\n                return JSON.parse(JSON.stringify(comps[i].layers));\r\n            }\r\n            i += 1;\r\n        }\r\n    }\r\n\r\n    function completeShapes(arr){\r\n        var i, len = arr.length;\r\n        var j, jLen;\r\n        var hasPaths = false;\r\n        for(i=len-1;i>=0;i-=1){\r\n            if(arr[i].ty == 'sh'){\r\n                if(arr[i].ks.k.i){\r\n                    convertPathsToAbsoluteValues(arr[i].ks.k);\r\n                }else{\r\n                    jLen = arr[i].ks.k.length;\r\n                    for(j=0;j<jLen;j+=1){\r\n                        if(arr[i].ks.k[j].s){\r\n                            convertPathsToAbsoluteValues(arr[i].ks.k[j].s[0]);\r\n                        }\r\n                        if(arr[i].ks.k[j].e){\r\n                            convertPathsToAbsoluteValues(arr[i].ks.k[j].e[0]);\r\n                        }\r\n                    }\r\n                }\r\n                hasPaths = true;\r\n            }else if(arr[i].ty == 'gr'){\r\n                completeShapes(arr[i].it);\r\n            }\r\n        }\r\n        /*if(hasPaths){\r\n            //mx: distance\r\n            //ss: sensitivity\r\n            //dc: decay\r\n            arr.splice(arr.length-1,0,{\r\n                \"ty\": \"ms\",\r\n                \"mx\":20,\r\n                \"ss\":10,\r\n                 \"dc\":0.001,\r\n                \"maxDist\":200\r\n            });\r\n        }*/\r\n    }\r\n\r\n    function convertPathsToAbsoluteValues(path){\r\n        var i, len = path.i.length;\r\n        for(i=0;i<len;i+=1){\r\n            path.i[i][0] += path.v[i][0];\r\n            path.i[i][1] += path.v[i][1];\r\n            path.o[i][0] += path.v[i][0];\r\n            path.o[i][1] += path.v[i][1];\r\n        }\r\n    }\r\n\r\n    function checkVersion(minimum,animVersionString){\r\n        var animVersion = animVersionString ? animVersionString.split('.') : [100,100,100];\r\n        if(minimum[0]>animVersion[0]){\r\n            return true;\r\n        } else if(animVersion[0] > minimum[0]){\r\n            return false;\r\n        }\r\n        if(minimum[1]>animVersion[1]){\r\n            return true;\r\n        } else if(animVersion[1] > minimum[1]){\r\n            return false;\r\n        }\r\n        if(minimum[2]>animVersion[2]){\r\n            return true;\r\n        } else if(animVersion[2] > minimum[2]){\r\n            return false;\r\n        }\r\n    }\r\n\r\n    var checkText = (function(){\r\n        var minimumVersion = [4,4,14];\r\n\r\n        function updateTextLayer(textLayer){\r\n            var documentData = textLayer.t.d;\r\n            textLayer.t.d = {\r\n                k: [\r\n                    {\r\n                        s:documentData,\r\n                        t:0\r\n                    }\r\n                ]\r\n            };\r\n        }\r\n\r\n        function iterateLayers(layers){\r\n            var i, len = layers.length;\r\n            for(i=0;i<len;i+=1){\r\n                if(layers[i].ty === 5){\r\n                    updateTextLayer(layers[i]);\r\n                }\r\n            }\r\n        }\r\n\r\n        return function (animationData){\r\n            if(checkVersion(minimumVersion,animationData.v)){\r\n                iterateLayers(animationData.layers);\r\n                if(animationData.assets){\r\n                    var i, len = animationData.assets.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        if(animationData.assets[i].layers){\r\n                            iterateLayers(animationData.assets[i].layers);\r\n\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }());\r\n\r\n    var checkChars = (function() {\r\n        var minimumVersion = [4,7,99];\r\n        return function (animationData){\r\n            if(animationData.chars && !checkVersion(minimumVersion,animationData.v)){\r\n                var i, len = animationData.chars.length, j, jLen, k, kLen;\r\n                var pathData, paths;\r\n                for(i = 0; i < len; i += 1) {\r\n                    if(animationData.chars[i].data && animationData.chars[i].data.shapes) {\r\n                        paths = animationData.chars[i].data.shapes[0].it;\r\n                        jLen = paths.length;\r\n\r\n                        for(j = 0; j < jLen; j += 1) {\r\n                            pathData = paths[j].ks.k;\r\n                            if(!pathData.__converted) {\r\n                                convertPathsToAbsoluteValues(paths[j].ks.k);\r\n                                pathData.__converted = true;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }());\r\n\r\n    var checkColors = (function(){\r\n        var minimumVersion = [4,1,9];\r\n\r\n        function iterateShapes(shapes){\r\n            var i, len = shapes.length;\r\n            var j, jLen;\r\n            for(i=0;i<len;i+=1){\r\n                if(shapes[i].ty === 'gr'){\r\n                    iterateShapes(shapes[i].it);\r\n                }else if(shapes[i].ty === 'fl' || shapes[i].ty === 'st'){\r\n                    if(shapes[i].c.k && shapes[i].c.k[0].i){\r\n                        jLen = shapes[i].c.k.length;\r\n                        for(j=0;j<jLen;j+=1){\r\n                            if(shapes[i].c.k[j].s){\r\n                                shapes[i].c.k[j].s[0] /= 255;\r\n                                shapes[i].c.k[j].s[1] /= 255;\r\n                                shapes[i].c.k[j].s[2] /= 255;\r\n                                shapes[i].c.k[j].s[3] /= 255;\r\n                            }\r\n                            if(shapes[i].c.k[j].e){\r\n                                shapes[i].c.k[j].e[0] /= 255;\r\n                                shapes[i].c.k[j].e[1] /= 255;\r\n                                shapes[i].c.k[j].e[2] /= 255;\r\n                                shapes[i].c.k[j].e[3] /= 255;\r\n                            }\r\n                        }\r\n                    } else {\r\n                        shapes[i].c.k[0] /= 255;\r\n                        shapes[i].c.k[1] /= 255;\r\n                        shapes[i].c.k[2] /= 255;\r\n                        shapes[i].c.k[3] /= 255;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        function iterateLayers(layers){\r\n            var i, len = layers.length;\r\n            for(i=0;i<len;i+=1){\r\n                if(layers[i].ty === 4){\r\n                    iterateShapes(layers[i].shapes);\r\n                }\r\n            }\r\n        }\r\n\r\n        return function (animationData){\r\n            if(checkVersion(minimumVersion,animationData.v)){\r\n                iterateLayers(animationData.layers);\r\n                if(animationData.assets){\r\n                    var i, len = animationData.assets.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        if(animationData.assets[i].layers){\r\n                            iterateLayers(animationData.assets[i].layers);\r\n\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }());\r\n\r\n    var checkShapes = (function(){\r\n        var minimumVersion = [4,4,18];\r\n\r\n\r\n\r\n        function completeShapes(arr){\r\n            var i, len = arr.length;\r\n            var j, jLen;\r\n            var hasPaths = false;\r\n            for(i=len-1;i>=0;i-=1){\r\n                if(arr[i].ty == 'sh'){\r\n                    if(arr[i].ks.k.i){\r\n                        arr[i].ks.k.c = arr[i].closed;\r\n                    }else{\r\n                        jLen = arr[i].ks.k.length;\r\n                        for(j=0;j<jLen;j+=1){\r\n                            if(arr[i].ks.k[j].s){\r\n                                arr[i].ks.k[j].s[0].c = arr[i].closed;\r\n                            }\r\n                            if(arr[i].ks.k[j].e){\r\n                                arr[i].ks.k[j].e[0].c = arr[i].closed;\r\n                            }\r\n                        }\r\n                    }\r\n                    hasPaths = true;\r\n                }else if(arr[i].ty == 'gr'){\r\n                    completeShapes(arr[i].it);\r\n                }\r\n            }\r\n        }\r\n\r\n        function iterateLayers(layers){\r\n            var layerData;\r\n            var i, len = layers.length;\r\n            var j, jLen, k, kLen;\r\n            for(i=0;i<len;i+=1){\r\n                layerData = layers[i];\r\n                if(layerData.hasMask){\r\n                    var maskProps = layerData.masksProperties;\r\n                    jLen = maskProps.length;\r\n                    for(j=0;j<jLen;j+=1){\r\n                        if(maskProps[j].pt.k.i){\r\n                            maskProps[j].pt.k.c = maskProps[j].cl;\r\n                        }else{\r\n                            kLen = maskProps[j].pt.k.length;\r\n                            for(k=0;k<kLen;k+=1){\r\n                                if(maskProps[j].pt.k[k].s){\r\n                                    maskProps[j].pt.k[k].s[0].c = maskProps[j].cl;\r\n                                }\r\n                                if(maskProps[j].pt.k[k].e){\r\n                                    maskProps[j].pt.k[k].e[0].c = maskProps[j].cl;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                if(layerData.ty === 4){\r\n                    completeShapes(layerData.shapes);\r\n                }\r\n            }\r\n        }\r\n\r\n        return function (animationData){\r\n            if(checkVersion(minimumVersion,animationData.v)){\r\n                iterateLayers(animationData.layers);\r\n                if(animationData.assets){\r\n                    var i, len = animationData.assets.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        if(animationData.assets[i].layers){\r\n                            iterateLayers(animationData.assets[i].layers);\r\n\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }());\r\n\r\n    function completeData(animationData, fontManager){\r\n        if(animationData.__complete){\r\n            return;\r\n        }\r\n        checkColors(animationData);\r\n        checkText(animationData);\r\n        checkChars(animationData);\r\n        checkShapes(animationData);\r\n        completeLayers(animationData.layers, animationData.assets, fontManager);\r\n        animationData.__complete = true;\r\n        //blitAnimation(animationData, animationData.assets, fontManager);\r\n    }\r\n\r\n    function completeText(data, fontManager){\r\n        if(data.t.a.length === 0 && !('m' in data.t.p)){\r\n            data.singleShape = true;\r\n        }\r\n    }\r\n\r\n    var moduleOb = {};\r\n    moduleOb.completeData = completeData;\r\n\r\n    return moduleOb;\r\n}\r\n\r\nvar dataManager = dataFunctionManager();\nvar FontManager = (function(){\r\n\r\n    var maxWaitingTime = 5000;\r\n    var emptyChar = {\r\n        w: 0,\r\n        size:0,\r\n        shapes:[]\r\n    };\r\n    var combinedCharacters = [];\r\n    //Hindi characters\r\n    combinedCharacters = combinedCharacters.concat([2304, 2305, 2306, 2307, 2362, 2363, 2364, 2364, 2366\r\n    , 2367, 2368, 2369, 2370, 2371, 2372, 2373, 2374, 2375, 2376, 2377, 2378, 2379\r\n    , 2380, 2381, 2382, 2383, 2387, 2388, 2389, 2390, 2391, 2402, 2403]);\r\n\r\n    function setUpNode(font, family){\r\n        var parentNode = createTag('span');\r\n        parentNode.style.fontFamily    = family;\r\n        var node = createTag('span');\r\n        // Characters that vary significantly among different fonts\r\n        node.innerHTML = 'giItT1WQy@!-/#';\r\n        // Visible - so we can measure it - but not on the screen\r\n        parentNode.style.position      = 'absolute';\r\n        parentNode.style.left          = '-10000px';\r\n        parentNode.style.top           = '-10000px';\r\n        // Large font size makes even subtle changes obvious\r\n        parentNode.style.fontSize      = '300px';\r\n        // Reset any font properties\r\n        parentNode.style.fontVariant   = 'normal';\r\n        parentNode.style.fontStyle     = 'normal';\r\n        parentNode.style.fontWeight    = 'normal';\r\n        parentNode.style.letterSpacing = '0';\r\n        parentNode.appendChild(node);\r\n        document.body.appendChild(parentNode);\r\n\r\n        // Remember width with no applied web font\r\n        var width = node.offsetWidth;\r\n        node.style.fontFamily = font + ', '+family;\r\n        return {node:node, w:width, parent:parentNode};\r\n    }\r\n\r\n    function checkLoadedFonts() {\r\n        var i, len = this.fonts.length;\r\n        var node, w;\r\n        var loadedCount = len;\r\n        for(i=0;i<len; i+= 1){\r\n            if(this.fonts[i].loaded){\r\n                loadedCount -= 1;\r\n                continue;\r\n            }\r\n            if(this.fonts[i].fOrigin === 't' || this.fonts[i].origin === 2){\r\n                if(window.Typekit && window.Typekit.load && this.typekitLoaded === 0){\r\n                    this.typekitLoaded = 1;\r\n                    try{window.Typekit.load({\r\n                        async: true,\r\n                        active: function() {\r\n                            this.typekitLoaded = 2;\r\n                        }.bind(this)\r\n                    });}catch(e){}\r\n                }\r\n                if(this.typekitLoaded === 2) {\r\n                    this.fonts[i].loaded = true;\r\n                }\r\n            } else if(this.fonts[i].fOrigin === 'n' || this.fonts[i].origin === 0){\r\n                this.fonts[i].loaded = true;\r\n            } else{\r\n                node = this.fonts[i].monoCase.node;\r\n                w = this.fonts[i].monoCase.w;\r\n                if(node.offsetWidth !== w){\r\n                    loadedCount -= 1;\r\n                    this.fonts[i].loaded = true;\r\n                }else{\r\n                    node = this.fonts[i].sansCase.node;\r\n                    w = this.fonts[i].sansCase.w;\r\n                    if(node.offsetWidth !== w){\r\n                        loadedCount -= 1;\r\n                        this.fonts[i].loaded = true;\r\n                    }\r\n                }\r\n                if(this.fonts[i].loaded){\r\n                    this.fonts[i].sansCase.parent.parentNode.removeChild(this.fonts[i].sansCase.parent);\r\n                    this.fonts[i].monoCase.parent.parentNode.removeChild(this.fonts[i].monoCase.parent);\r\n                }\r\n            }\r\n        }\r\n\r\n        if(loadedCount !== 0 && Date.now() - this.initTime < maxWaitingTime){\r\n            setTimeout(checkLoadedFonts.bind(this),20);\r\n        }else{\r\n            setTimeout(function(){this.loaded = true;}.bind(this),0);\r\n\r\n        }\r\n    }\r\n\r\n    function createHelper(def, fontData){\r\n        var tHelper = createNS('text');\r\n        tHelper.style.fontSize = '100px';\r\n        //tHelper.style.fontFamily = fontData.fFamily;\r\n        tHelper.setAttribute('font-family', fontData.fFamily);\r\n        tHelper.setAttribute('font-style', fontData.fStyle);\r\n        tHelper.setAttribute('font-weight', fontData.fWeight);\r\n        tHelper.textContent = '1';\r\n        if(fontData.fClass){\r\n            tHelper.style.fontFamily = 'inherit';\r\n            tHelper.className = fontData.fClass;\r\n        } else {\r\n            tHelper.style.fontFamily = fontData.fFamily;\r\n        }\r\n        def.appendChild(tHelper);\r\n        var tCanvasHelper = createTag('canvas').getContext('2d');\r\n        tCanvasHelper.font = fontData.fWeight + ' ' + fontData.fStyle + ' 100px '+ fontData.fFamily;\r\n        //tCanvasHelper.font = ' 100px '+ fontData.fFamily;\r\n        return tHelper;\r\n    }\r\n\r\n    function addFonts(fontData, defs){\r\n        if(!fontData){\r\n            this.loaded = true;\r\n            return;\r\n        }\r\n        if(this.chars){\r\n            this.loaded = true;\r\n            this.fonts = fontData.list;\r\n            return;\r\n        }\r\n\r\n\r\n        var fontArr = fontData.list;\r\n        var i, len = fontArr.length;\r\n        for(i=0; i<len; i+= 1){\r\n            fontArr[i].loaded = false;\r\n            fontArr[i].monoCase = setUpNode(fontArr[i].fFamily,'monospace');\r\n            fontArr[i].sansCase = setUpNode(fontArr[i].fFamily,'sans-serif');\r\n            if(!fontArr[i].fPath) {\r\n                fontArr[i].loaded = true;\r\n            }else if(fontArr[i].fOrigin === 'p' || fontArr[i].origin === 3){\r\n                var s = createTag('style');\r\n                s.type = \"text/css\";\r\n                s.innerHTML = \"@font-face {\" + \"font-family: \"+fontArr[i].fFamily+\"; font-style: normal; src: url('\"+fontArr[i].fPath+\"');}\";\r\n                defs.appendChild(s);\r\n            } else if(fontArr[i].fOrigin === 'g' || fontArr[i].origin === 1){\r\n                var l = createTag('link');\r\n                l.type = \"text/css\";\r\n                l.rel = \"stylesheet\";\r\n                l.href = fontArr[i].fPath;\r\n                document.body.appendChild(l);\r\n            } else if(fontArr[i].fOrigin === 't' || fontArr[i].origin === 2){\r\n                var sc = createTag('script');\r\n                sc.setAttribute('src',fontArr[i].fPath);\r\n                defs.appendChild(sc);\r\n            }\r\n            fontArr[i].helper = createHelper(defs,fontArr[i]);\r\n            fontArr[i].cache = {};\r\n            this.fonts.push(fontArr[i]);\r\n        }\r\n        //On some cases the font even if it is loaded, it won't load correctly when measuring text on canvas.\r\n        //Adding this timeout seems to fix it\r\n       setTimeout(function() {\r\n            checkLoadedFonts.bind(this)();\r\n        }.bind(this), 100);\r\n    }\r\n\r\n    function addChars(chars){\r\n        if(!chars){\r\n            return;\r\n        }\r\n        if(!this.chars){\r\n            this.chars = [];\r\n        }\r\n        var i, len = chars.length;\r\n        var j, jLen = this.chars.length, found;\r\n        for(i=0;i<len;i+=1){\r\n            j = 0;\r\n            found = false;\r\n            while(j<jLen){\r\n                if(this.chars[j].style === chars[i].style && this.chars[j].fFamily === chars[i].fFamily && this.chars[j].ch === chars[i].ch){\r\n                    found = true;\r\n                }\r\n                j += 1;\r\n            }\r\n            if(!found){\r\n                this.chars.push(chars[i]);\r\n                jLen += 1;\r\n            }\r\n        }\r\n    }\r\n\r\n    function getCharData(char, style, font){\r\n        var i = 0, len = this.chars.length;\r\n        while( i < len) {\r\n            if(this.chars[i].ch === char && this.chars[i].style === style && this.chars[i].fFamily === font){\r\n                return this.chars[i];\r\n            }\r\n            i+= 1;\r\n        }\r\n        if(console && console.warn) {\r\n            console.warn('Missing character from exported characters list: ', char, style, font);\r\n        }\r\n        return emptyChar;\r\n    }\r\n\r\n    function measureText(char, fontName, size) {\r\n        var fontData = this.getFontByName(fontName);\r\n        var index = char.charCodeAt(0);\r\n        if(!fontData.cache[index + 1]) {\r\n            var tHelper = fontData.helper;\r\n            //Canvas version\r\n            //fontData.cache[index] = tHelper.measureText(char).width / 100;\r\n            //SVG version\r\n            //console.log(tHelper.getBBox().width)\r\n            /*tHelper.textContent = '|' + char + '|';\r\n            var doubleSize = tHelper.getComputedTextLength();\r\n            tHelper.textContent = '||';\r\n            var singleSize = tHelper.getComputedTextLength();\r\n            fontData.cache[index + 1] = (doubleSize - singleSize)/100;*/\r\n           \r\n            tHelper.textContent = char;\r\n            fontData.cache[index + 1] = (tHelper.getComputedTextLength())/100;\r\n        }\r\n        return fontData.cache[index + 1] * size;\r\n    }\r\n\r\n    function getFontByName(name){\r\n        var i = 0, len = this.fonts.length;\r\n        while(i<len){\r\n            if(this.fonts[i].fName === name) {\r\n                return this.fonts[i];\r\n            }\r\n            i += 1;\r\n        }\r\n        return this.fonts[0];\r\n    }\r\n\r\n    function getCombinedCharacterCodes() {\r\n        return combinedCharacters;\r\n    }\r\n\r\n    var Font = function(){\r\n        this.fonts = [];\r\n        this.chars = null;\r\n        this.typekitLoaded = 0;\r\n        this.loaded = false;\r\n        this.initTime = Date.now();\r\n    };\r\n    //TODO: for now I'm adding these methods to the Class and not the prototype. Think of a better way to implement it. \r\n    Font.getCombinedCharacterCodes = getCombinedCharacterCodes;\r\n\r\n    Font.prototype.addChars = addChars;\r\n    Font.prototype.addFonts = addFonts;\r\n    Font.prototype.getCharData = getCharData;\r\n    Font.prototype.getFontByName = getFontByName;\r\n    Font.prototype.measureText = measureText;\r\n\r\n    return Font;\r\n\r\n}());\nvar PropertyFactory = (function(){\r\n\r\n    var initFrame = initialDefaultFrame;\r\n    var math_abs = Math.abs;\r\n\r\n    function interpolateValue(frameNum, caching){\r\n        var offsetTime = this.offsetTime;\r\n        var newValue;\r\n        if(this.propType === 'multidimensional') {\r\n            newValue = createTypedArray('float32', this.pv.length);\r\n        }\r\n        var iterationIndex = caching.lastIndex;\r\n        var i = iterationIndex;\r\n        var len = this.keyframes.length- 1,flag = true;\r\n        var keyData, nextKeyData;\r\n\r\n        while(flag){\r\n            keyData = this.keyframes[i];\r\n            nextKeyData = this.keyframes[i+1];\r\n            if(i == len-1 && frameNum >= nextKeyData.t - offsetTime){\r\n                if(keyData.h){\r\n                    keyData = nextKeyData;\r\n                }\r\n                iterationIndex = 0;\r\n                break;\r\n            }\r\n            if((nextKeyData.t - offsetTime) > frameNum){\r\n                iterationIndex = i;\r\n                break;\r\n            }\r\n            if(i < len - 1){\r\n                i += 1;\r\n            }else{\r\n                iterationIndex = 0;\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n        var k, kLen,perc,jLen, j, fnc;\r\n        if(keyData.to){\r\n\r\n            if(!keyData.bezierData){\r\n                bez.buildBezierData(keyData);\r\n            }\r\n            var bezierData = keyData.bezierData;\r\n            if(frameNum >= nextKeyData.t-offsetTime || frameNum < keyData.t-offsetTime){\r\n                var ind = frameNum >= nextKeyData.t-offsetTime ? bezierData.points.length - 1 : 0;\r\n                kLen = bezierData.points[ind].point.length;\r\n                for(k = 0; k < kLen; k += 1){\r\n                    newValue[k] = bezierData.points[ind].point[k];\r\n                }\r\n                caching._lastBezierData = null;\r\n            }else{\r\n                if(keyData.__fnct){\r\n                    fnc = keyData.__fnct;\r\n                }else{\r\n                    fnc = BezierFactory.getBezierEasing(keyData.o.x,keyData.o.y,keyData.i.x,keyData.i.y,keyData.n).get;\r\n                    keyData.__fnct = fnc;\r\n                }\r\n                perc = fnc((frameNum-(keyData.t-offsetTime))/((nextKeyData.t-offsetTime)-(keyData.t-offsetTime)));\r\n                var distanceInLine = bezierData.segmentLength*perc;\r\n\r\n                var segmentPerc;\r\n                var addedLength =  (caching.lastFrame < frameNum && caching._lastBezierData === bezierData) ? caching._lastAddedLength : 0;\r\n                j =  (caching.lastFrame < frameNum && caching._lastBezierData === bezierData) ? caching._lastPoint : 0;\r\n                flag = true;\r\n                jLen = bezierData.points.length;\r\n                while(flag){\r\n                    addedLength +=bezierData.points[j].partialLength;\r\n                    if(distanceInLine === 0 || perc === 0 || j == bezierData.points.length - 1){\r\n                        kLen = bezierData.points[j].point.length;\r\n                        for(k=0;k<kLen;k+=1){\r\n                            newValue[k] = bezierData.points[j].point[k];\r\n                        }\r\n                        break;\r\n                    }else if(distanceInLine >= addedLength && distanceInLine < addedLength + bezierData.points[j+1].partialLength){\r\n                        segmentPerc = (distanceInLine-addedLength)/(bezierData.points[j+1].partialLength);\r\n                        kLen = bezierData.points[j].point.length;\r\n                        for(k=0;k<kLen;k+=1){\r\n                            newValue[k] = bezierData.points[j].point[k] + (bezierData.points[j+1].point[k] - bezierData.points[j].point[k])*segmentPerc;\r\n                        }\r\n                        break;\r\n                    }\r\n                    if(j < jLen - 1){\r\n                        j += 1;\r\n                    }else{\r\n                        flag = false;\r\n                    }\r\n                }\r\n                caching._lastPoint = j;\r\n                caching._lastAddedLength = addedLength - bezierData.points[j].partialLength;\r\n                caching._lastBezierData = bezierData;\r\n            }\r\n        }else{\r\n            var outX,outY,inX,inY, keyValue;\r\n            len = keyData.s.length;\r\n            if(this.sh && keyData.h !== 1) {\r\n                if(frameNum >= nextKeyData.t-offsetTime){\r\n                    newValue[0] = keyData.e[0];\r\n                    newValue[1] = keyData.e[1];\r\n                    newValue[2] = keyData.e[2];\r\n                }else if(frameNum <= keyData.t-offsetTime){\r\n                    newValue[0] = keyData.s[0];\r\n                    newValue[1] = keyData.s[1];\r\n                    newValue[2] = keyData.s[2];\r\n                }else{\r\n                    var quatStart = createQuaternion(keyData.s);\r\n                    var quatEnd = createQuaternion(keyData.e);\r\n                    var time = (frameNum-(keyData.t-offsetTime))/((nextKeyData.t-offsetTime)-(keyData.t-offsetTime));\r\n                    quaternionToEuler(newValue, slerp(quatStart, quatEnd, time));\r\n                }\r\n                \r\n            } else {\r\n                for(i=0;i<len;i+=1){\r\n                    if(keyData.h !== 1){\r\n                        if(frameNum >= nextKeyData.t-offsetTime){\r\n                            perc = 1;\r\n                        }else if(frameNum < keyData.t-offsetTime){\r\n                            perc = 0;\r\n                        }else{\r\n                            if(keyData.o.x.constructor === Array){\r\n                                if(!keyData.__fnct){\r\n                                    keyData.__fnct = [];\r\n                                }\r\n                                if (!keyData.__fnct[i]) {\r\n                                    outX = keyData.o.x[i] || keyData.o.x[0];\r\n                                    outY = keyData.o.y[i] || keyData.o.y[0];\r\n                                    inX = keyData.i.x[i] || keyData.i.x[0];\r\n                                    inY = keyData.i.y[i] || keyData.i.y[0];\r\n                                    fnc = BezierFactory.getBezierEasing(outX,outY,inX,inY).get;\r\n                                    keyData.__fnct[i] = fnc;\r\n                                } else {\r\n                                    fnc = keyData.__fnct[i];\r\n                                }\r\n                            } else {\r\n                                if (!keyData.__fnct) {\r\n                                    outX = keyData.o.x;\r\n                                    outY = keyData.o.y;\r\n                                    inX = keyData.i.x;\r\n                                    inY = keyData.i.y;\r\n                                    fnc = BezierFactory.getBezierEasing(outX,outY,inX,inY).get;\r\n                                    keyData.__fnct = fnc;\r\n                                } else{\r\n                                    fnc = keyData.__fnct;\r\n                                }\r\n                            }\r\n                            perc = fnc((frameNum-(keyData.t-offsetTime))/((nextKeyData.t-offsetTime)-(keyData.t-offsetTime)));\r\n                        }\r\n                    }\r\n\r\n                    keyValue = keyData.h === 1 ? keyData.s[i] : keyData.s[i]+(keyData.e[i]-keyData.s[i])*perc;\r\n\r\n                    if(len === 1){\r\n                        newValue = keyValue;\r\n                    }else{\r\n                        newValue[i] = keyValue;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        caching.lastIndex = iterationIndex;\r\n        return newValue;\r\n    }\r\n\r\n    //based on @Toji's https://github.com/toji/gl-matrix/\r\n    function slerp(a, b, t) {\r\n        var out = [];\r\n        var ax = a[0], ay = a[1], az = a[2], aw = a[3],\r\n        bx = b[0], by = b[1], bz = b[2], bw = b[3]\r\n\r\n        var omega, cosom, sinom, scale0, scale1;\r\n\r\n        cosom = ax * bx + ay * by + az * bz + aw * bw;\r\n        if (cosom < 0.0) {\r\n            cosom = -cosom;\r\n            bx = -bx;\r\n            by = -by;\r\n            bz = -bz;\r\n            bw = -bw;\r\n        }\r\n        if ((1.0 - cosom) > 0.000001) {\r\n            omega = Math.acos(cosom);\r\n            sinom = Math.sin(omega);\r\n            scale0 = Math.sin((1.0 - t) * omega) / sinom;\r\n            scale1 = Math.sin(t * omega) / sinom;\r\n        } else {\r\n            scale0 = 1.0 - t;\r\n            scale1 = t;\r\n        }\r\n        out[0] = scale0 * ax + scale1 * bx;\r\n        out[1] = scale0 * ay + scale1 * by;\r\n        out[2] = scale0 * az + scale1 * bz;\r\n        out[3] = scale0 * aw + scale1 * bw;\r\n\r\n        return out;\r\n    }\r\n\r\n    function quaternionToEuler(out, quat) {\r\n        var qx = quat[0];\r\n        var qy = quat[1];\r\n        var qz = quat[2];\r\n        var qw = quat[3];\r\n        var heading = Math.atan2(2*qy*qw-2*qx*qz , 1 - 2*qy*qy - 2*qz*qz)\r\n        var attitude = Math.asin(2*qx*qy + 2*qz*qw) \r\n        var bank = Math.atan2(2*qx*qw-2*qy*qz , 1 - 2*qx*qx - 2*qz*qz);\r\n        out[0] = heading/degToRads;\r\n        out[1] = attitude/degToRads;\r\n        out[2] = bank/degToRads;\r\n    }\r\n\r\n    function createQuaternion(values) {\r\n        var heading = values[0] * degToRads;\r\n        var attitude = values[1] * degToRads;\r\n        var bank = values[2] * degToRads;\r\n        var c1 = Math.cos(heading / 2);\r\n        var c2 = Math.cos(attitude / 2);\r\n        var c3 = Math.cos(bank / 2);\r\n        var s1 = Math.sin(heading / 2);\r\n        var s2 = Math.sin(attitude / 2);\r\n        var s3 = Math.sin(bank / 2);\r\n        var w = c1 * c2 * c3 - s1 * s2 * s3;\r\n        var x = s1 * s2 * c3 + c1 * c2 * s3;\r\n        var y = s1 * c2 * c3 + c1 * s2 * s3;\r\n        var z = c1 * s2 * c3 - s1 * c2 * s3;\r\n\r\n        return [x,y,z,w];\r\n    }\r\n\r\n    function getValueAtCurrentTime(){\r\n        var frameNum = this.comp.renderedFrame - this.offsetTime;\r\n        var initTime = this.keyframes[0].t - this.offsetTime;\r\n        var endTime = this.keyframes[this.keyframes.length- 1].t-this.offsetTime;\r\n        if(!(frameNum === this._caching.lastFrame || (this._caching.lastFrame !== initFrame && ((this._caching.lastFrame >= endTime && frameNum >= endTime) || (this._caching.lastFrame < initTime && frameNum < initTime))))){\r\n            this._caching.lastIndex = this._caching.lastFrame < frameNum ? this._caching.lastIndex : 0;\r\n            var renderResult = this.interpolateValue(frameNum, this._caching);\r\n            this.pv = renderResult;\r\n        }\r\n        this._caching.lastFrame = frameNum;\r\n        return this.pv;\r\n    }\r\n\r\n    function setVValue(val) {\r\n        var multipliedValue;\r\n        if(this.propType === 'unidimensional') {\r\n            multipliedValue = val * this.mult;\r\n            if(math_abs(this.v - multipliedValue) > 0.00001) {\r\n                this.v = multipliedValue;\r\n                this._mdf = true;\r\n            }\r\n        } else {\r\n            var i = 0, len = this.v.length;\r\n            while (i < len) {\r\n                multipliedValue = val[i] * this.mult;\r\n                if (math_abs(this.v[i] - multipliedValue) > 0.00001) {\r\n                    this.v[i] = multipliedValue;\r\n                    this._mdf = true;\r\n                }\r\n                i += 1;\r\n            }\r\n        }\r\n    }\r\n\r\n    function processEffectsSequence() {\r\n        if(this.elem.globalData.frameId === this.frameId || !this.effectsSequence.length) {\r\n            return;\r\n        }        \r\n        if(this.lock) {\r\n            this.setVValue(this.pv);\r\n            return;\r\n        }\r\n        this.lock = true;\r\n        this._mdf = this._isFirstFrame;\r\n        var multipliedValue;\r\n        var i, len = this.effectsSequence.length;\r\n        var finalValue = this.kf ? this.pv : this.data.k;\r\n        for(i = 0; i < len; i += 1) {\r\n            finalValue = this.effectsSequence[i](finalValue);\r\n        }\r\n        this.setVValue(finalValue);\r\n        this._isFirstFrame = false;\r\n        this.lock = false;\r\n        this.frameId = this.elem.globalData.frameId;\r\n    }\r\n\r\n    function addEffect(effectFunction) {\r\n        this.effectsSequence.push(effectFunction);\r\n        this.container.addDynamicProperty(this);\r\n    }\r\n\r\n    function ValueProperty(elem, data, mult, container){\r\n        this.propType = 'unidimensional';\r\n        this.mult = mult || 1;\r\n        this.data = data;\r\n        this.v = mult ? data.k * mult : data.k;\r\n        this.pv = data.k;\r\n        this._mdf = false;\r\n        this.elem = elem;\r\n        this.container = container;\r\n        this.comp = elem.comp;\r\n        this.k = false;\r\n        this.kf = false;\r\n        this.vel = 0;\r\n        this.effectsSequence = [];\r\n        this._isFirstFrame = true;\r\n        this.getValue = processEffectsSequence;\r\n        this.setVValue = setVValue;\r\n        this.addEffect = addEffect;\r\n    }\r\n\r\n    function MultiDimensionalProperty(elem, data, mult, container) {\r\n        this.propType = 'multidimensional';\r\n        this.mult = mult || 1;\r\n        this.data = data;\r\n        this._mdf = false;\r\n        this.elem = elem;\r\n        this.container = container;\r\n        this.comp = elem.comp;\r\n        this.k = false;\r\n        this.kf = false;\r\n        this.frameId = -1;\r\n        var i, len = data.k.length;\r\n        this.v = createTypedArray('float32', len);\r\n        this.pv = createTypedArray('float32', len);\r\n        var arr = createTypedArray('float32', len);\r\n        this.vel = createTypedArray('float32', len);\r\n        for (i = 0; i < len; i += 1) {\r\n            this.v[i] = data.k[i] * this.mult;\r\n            this.pv[i] = data.k[i];\r\n        }\r\n        this._isFirstFrame = true;\r\n        this.effectsSequence = [];\r\n        this.getValue = processEffectsSequence;\r\n        this.setVValue = setVValue;\r\n        this.addEffect = addEffect;\r\n    }\r\n\r\n    function KeyframedValueProperty(elem, data, mult, container) {\r\n        this.propType = 'unidimensional';\r\n        this.keyframes = data.k;\r\n        this.offsetTime = elem.data.st;\r\n        this.frameId = -1;\r\n        this._caching = {lastFrame: initFrame, lastIndex: 0, value: 0};\r\n        this.k = true;\r\n        this.kf = true;\r\n        this.data = data;\r\n        this.mult = mult || 1;\r\n        this.elem = elem;\r\n        this.container = container;\r\n        this.comp = elem.comp;\r\n        this.v = initFrame;\r\n        this.pv = initFrame;\r\n        this._isFirstFrame = true;\r\n        this.getValue = processEffectsSequence;\r\n        this.setVValue = setVValue;\r\n        this.interpolateValue = interpolateValue;\r\n        this.effectsSequence = [getValueAtCurrentTime.bind(this)];\r\n        this.addEffect = addEffect;\r\n    }\r\n\r\n    function KeyframedMultidimensionalProperty(elem, data, mult, container){\r\n        this.propType = 'multidimensional';\r\n        var i, len = data.k.length;\r\n        var s, e,to,ti;\r\n        for (i = 0; i < len - 1; i += 1) {\r\n            if (data.k[i].to && data.k[i].s && data.k[i].e) {\r\n                s = data.k[i].s;\r\n                e = data.k[i].e;\r\n                to = data.k[i].to;\r\n                ti = data.k[i].ti;\r\n                if((s.length === 2 && !(s[0] === e[0] && s[1] === e[1]) && bez.pointOnLine2D(s[0],s[1],e[0],e[1],s[0] + to[0],s[1] + to[1]) && bez.pointOnLine2D(s[0],s[1],e[0],e[1],e[0] + ti[0],e[1] + ti[1])) || (s.length === 3 && !(s[0] === e[0] && s[1] === e[1] && s[2] === e[2]) && bez.pointOnLine3D(s[0],s[1],s[2],e[0],e[1],e[2],s[0] + to[0],s[1] + to[1],s[2] + to[2]) && bez.pointOnLine3D(s[0],s[1],s[2],e[0],e[1],e[2],e[0] + ti[0],e[1] + ti[1],e[2] + ti[2]))){\r\n                    data.k[i].to = null;\r\n                    data.k[i].ti = null;\r\n                }\r\n                if(s[0] === e[0] && s[1] === e[1] && to[0] === 0 && to[1] === 0 && ti[0] === 0 && ti[1] === 0) {\r\n                    if(s.length === 2 || (s[2] === e[2] && to[2] === 0 && ti[2] === 0)) {\r\n                        data.k[i].to = null;\r\n                        data.k[i].ti = null;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.effectsSequence = [getValueAtCurrentTime.bind(this)];\r\n        this.keyframes = data.k;\r\n        this.offsetTime = elem.data.st;\r\n        this.k = true;\r\n        this.kf = true;\r\n        this._isFirstFrame = true;\r\n        this.mult = mult || 1;\r\n        this.elem = elem;\r\n        this.container = container;\r\n        this.comp = elem.comp;\r\n        this.getValue = processEffectsSequence;\r\n        this.setVValue = setVValue;\r\n        this.interpolateValue = interpolateValue;\r\n        this.frameId = -1;\r\n        var arrLen = data.k[0].s.length;\r\n        this.v = createTypedArray('float32', arrLen);\r\n        this.pv = createTypedArray('float32', arrLen);\r\n        for (i = 0; i < arrLen; i += 1) {\r\n            this.v[i] = initFrame;\r\n            this.pv[i] = initFrame;\r\n        }\r\n        this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray('float32', arrLen)};\r\n        this.addEffect = addEffect;\r\n    }\r\n\r\n    function getProp(elem,data,type, mult, container) {\r\n        var p;\r\n        if(data.a === 0){\r\n            if(type === 0) {\r\n                p = new ValueProperty(elem,data,mult, container);\r\n            } else {\r\n                p = new MultiDimensionalProperty(elem,data, mult, container);\r\n            }\r\n        } else if(data.a === 1){\r\n            if(type === 0) {\r\n                p = new KeyframedValueProperty(elem,data,mult, container);\r\n            } else {\r\n                p = new KeyframedMultidimensionalProperty(elem,data, mult, container);\r\n            }\r\n        } else if(!data.k.length){\r\n            p = new ValueProperty(elem,data, mult, container);\r\n        }else if(typeof(data.k[0]) === 'number'){\r\n            p = new MultiDimensionalProperty(elem,data, mult, container);\r\n        }else{\r\n            switch(type){\r\n                case 0:\r\n                    p = new KeyframedValueProperty(elem,data,mult, container);\r\n                    break;\r\n                case 1:\r\n                    p = new KeyframedMultidimensionalProperty(elem,data,mult, container);\r\n                    break;\r\n            }\r\n        }\r\n        if(p.effectsSequence.length){\r\n            container.addDynamicProperty(p);\r\n        }\r\n        return p;\r\n    }\r\n\r\n    var ob = {\r\n        getProp: getProp\r\n    };\r\n    return ob;\r\n}());\nvar TransformPropertyFactory = (function() {\r\n\r\n    function applyToMatrix(mat) {\r\n        var _mdf = this._mdf;\r\n        this.iterateDynamicProperties();\r\n        this._mdf = this._mdf || _mdf;\r\n        if (this.a) {\r\n            mat.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\r\n        }\r\n        if (this.s) {\r\n            mat.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\r\n        }\r\n        if (this.sk) {\r\n            mat.skewFromAxis(-this.sk.v, this.sa.v);\r\n        }\r\n        if (this.r) {\r\n            mat.rotate(-this.r.v);\r\n        } else {\r\n            mat.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);\r\n        }\r\n        if (this.data.p.s) {\r\n            if (this.data.p.z) {\r\n                mat.translate(this.px.v, this.py.v, -this.pz.v);\r\n            } else {\r\n                mat.translate(this.px.v, this.py.v, 0);\r\n            }\r\n        } else {\r\n            mat.translate(this.p.v[0], this.p.v[1], -this.p.v[2]);\r\n        }\r\n    }\r\n    function processKeys(forceRender){\r\n        if (this.elem.globalData.frameId === this.frameId) {\r\n            return;\r\n        }\r\n        if(this._isDirty) {\r\n            this.precalculateMatrix();\r\n            this._isDirty = false;\r\n        }\r\n\r\n        this.iterateDynamicProperties();\r\n\r\n        if (this._mdf || forceRender) {\r\n            this.v.cloneFromProps(this.pre.props);\r\n            if (this.appliedTransformations < 1) {\r\n                this.v.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\r\n            }\r\n            if(this.appliedTransformations < 2) {\r\n                this.v.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\r\n            }\r\n            if (this.sk && this.appliedTransformations < 3) {\r\n                this.v.skewFromAxis(-this.sk.v, this.sa.v);\r\n            }\r\n            if (this.r && this.appliedTransformations < 4) {\r\n                this.v.rotate(-this.r.v);\r\n            } else if (!this.r && this.appliedTransformations < 4){\r\n                this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);\r\n            }\r\n            if (this.autoOriented) {\r\n                var v1,v2, frameRate = this.elem.globalData.frameRate;\r\n                if(this.p && this.p.keyframes && this.p.getValueAtTime) {\r\n                    if (this.p._caching.lastFrame+this.p.offsetTime <= this.p.keyframes[0].t) {\r\n                        v1 = this.p.getValueAtTime((this.p.keyframes[0].t + 0.01) / frameRate,0);\r\n                        v2 = this.p.getValueAtTime(this.p.keyframes[0].t / frameRate, 0);\r\n                    } else if(this.p._caching.lastFrame+this.p.offsetTime >= this.p.keyframes[this.p.keyframes.length - 1].t) {\r\n                        v1 = this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length - 1].t / frameRate), 0);\r\n                        v2 = this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length - 1].t - 0.01) / frameRate, 0);\r\n                    } else {\r\n                        v1 = this.p.pv;\r\n                        v2 = this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime - 0.01) / frameRate, this.p.offsetTime);\r\n                    }\r\n                } else if(this.px && this.px.keyframes && this.py.keyframes && this.px.getValueAtTime && this.py.getValueAtTime) {\r\n                    v1 = [];\r\n                    v2 = [];\r\n                    var px = this.px, py = this.py, frameRate;\r\n                    if (px._caching.lastFrame+px.offsetTime <= px.keyframes[0].t) {\r\n                        v1[0] = px.getValueAtTime((px.keyframes[0].t + 0.01) / frameRate,0);\r\n                        v1[1] = py.getValueAtTime((py.keyframes[0].t + 0.01) / frameRate,0);\r\n                        v2[0] = px.getValueAtTime((px.keyframes[0].t) / frameRate,0);\r\n                        v2[1] = py.getValueAtTime((py.keyframes[0].t) / frameRate,0);\r\n                    } else if(px._caching.lastFrame+px.offsetTime >= px.keyframes[px.keyframes.length - 1].t) {\r\n                        v1[0] = px.getValueAtTime((px.keyframes[px.keyframes.length - 1].t / frameRate),0);\r\n                        v1[1] = py.getValueAtTime((py.keyframes[py.keyframes.length - 1].t / frameRate),0);\r\n                        v2[0] = px.getValueAtTime((px.keyframes[px.keyframes.length - 1].t - 0.01) / frameRate,0);\r\n                        v2[1] = py.getValueAtTime((py.keyframes[py.keyframes.length - 1].t - 0.01) / frameRate,0);\r\n                    } else {\r\n                        v1 = [px.pv, py.pv];\r\n                        v2[0] = px.getValueAtTime((px._caching.lastFrame+px.offsetTime - 0.01) / frameRate,px.offsetTime);\r\n                        v2[1] = py.getValueAtTime((py._caching.lastFrame+py.offsetTime - 0.01) / frameRate,py.offsetTime);\r\n                    }\r\n                }\r\n                this.v.rotate(-Math.atan2(v1[1] - v2[1], v1[0] - v2[0]));\r\n            }\r\n            if(this.data.p.s){\r\n                if(this.data.p.z) {\r\n                    this.v.translate(this.px.v, this.py.v, -this.pz.v);\r\n                } else {\r\n                    this.v.translate(this.px.v, this.py.v, 0);\r\n                }\r\n            }else{\r\n                this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2]);\r\n            }\r\n        }\r\n        this.frameId = this.elem.globalData.frameId;\r\n    }\r\n\r\n    function precalculateMatrix() {\r\n        if(!this.a.k) {\r\n            this.pre.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\r\n            this.appliedTransformations = 1;\r\n        } else {\r\n            return;\r\n        }\r\n        if(!this.s.effectsSequence.length) {\r\n            this.pre.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\r\n            this.appliedTransformations = 2;\r\n        } else {\r\n            return;\r\n        }\r\n        if(this.sk) {\r\n            if(!this.sk.effectsSequence.length && !this.sa.effectsSequence.length) {\r\n                this.pre.skewFromAxis(-this.sk.v, this.sa.v);\r\n            this.appliedTransformations = 3;\r\n            } else {\r\n                return;\r\n            }\r\n        }\r\n        if (this.r) {\r\n            if(!this.r.effectsSequence.length) {\r\n                this.pre.rotate(-this.r.v);\r\n                this.appliedTransformations = 4;\r\n            } else {\r\n                return;\r\n            }\r\n        } else if(!this.rz.effectsSequence.length && !this.ry.effectsSequence.length && !this.rx.effectsSequence.length && !this.or.effectsSequence.length) {\r\n            this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);\r\n            this.appliedTransformations = 4;\r\n        }\r\n    }\r\n\r\n    function autoOrient(){\r\n        //\r\n        //var prevP = this.getValueAtTime();\r\n    }\r\n\r\n    function addDynamicProperty(prop) {\r\n        this._addDynamicProperty(prop);\r\n        this.elem.addDynamicProperty(prop);\r\n        this._isDirty = true;\r\n    }\r\n\r\n    function TransformProperty(elem,data,container){\r\n        this.elem = elem;\r\n        this.frameId = -1;\r\n        this.propType = 'transform';\r\n        this.data = data;\r\n        this.v = new Matrix();\r\n        //Precalculated matrix with non animated properties\r\n        this.pre = new Matrix();\r\n        this.appliedTransformations = 0;\r\n        this.initDynamicPropertyContainer(container || elem);\r\n        if(data.p.s){\r\n            this.px = PropertyFactory.getProp(elem,data.p.x,0,0,this);\r\n            this.py = PropertyFactory.getProp(elem,data.p.y,0,0,this);\r\n            if(data.p.z){\r\n                this.pz = PropertyFactory.getProp(elem,data.p.z,0,0,this);\r\n            }\r\n        }else{\r\n            this.p = PropertyFactory.getProp(elem,data.p,1,0,this);\r\n        }\r\n        if(data.r) {\r\n            this.r = PropertyFactory.getProp(elem, data.r, 0, degToRads, this);\r\n        } else if(data.rx) {\r\n            this.rx = PropertyFactory.getProp(elem, data.rx, 0, degToRads, this);\r\n            this.ry = PropertyFactory.getProp(elem, data.ry, 0, degToRads, this);\r\n            this.rz = PropertyFactory.getProp(elem, data.rz, 0, degToRads, this);\r\n            if(data.or.k[0].ti) {\r\n                var i, len = data.or.k.length;\r\n                for(i=0;i<len;i+=1) {\r\n                    data.or.k[i].to = data.or.k[i].ti = null;\r\n                }\r\n            }\r\n            this.or = PropertyFactory.getProp(elem, data.or, 1, degToRads, this);\r\n            //sh Indicates it needs to be capped between -180 and 180\r\n            this.or.sh = true;\r\n        }\r\n        if(data.sk){\r\n            this.sk = PropertyFactory.getProp(elem, data.sk, 0, degToRads, this);\r\n            this.sa = PropertyFactory.getProp(elem, data.sa, 0, degToRads, this);\r\n        }\r\n        if(data.a) {\r\n            this.a = PropertyFactory.getProp(elem,data.a,1,0,this);\r\n        }\r\n        if(data.s) {\r\n            this.s = PropertyFactory.getProp(elem,data.s,1,0.01,this);\r\n        }\r\n        // Opacity is not part of the transform properties, that's why it won't use this.dynamicProperties. That way transforms won't get updated if opacity changes.\r\n        if(data.o){\r\n            this.o = PropertyFactory.getProp(elem,data.o,0,0.01,elem);\r\n        } else {\r\n            this.o = {_mdf:false,v:1};\r\n        }\r\n        this._isDirty = true;\r\n        if(!this.dynamicProperties.length){\r\n            this.getValue(true);\r\n        }\r\n    }\r\n\r\n    TransformProperty.prototype = {\r\n        applyToMatrix: applyToMatrix,\r\n        getValue: processKeys,\r\n        precalculateMatrix: precalculateMatrix,\r\n        autoOrient: autoOrient\r\n    }\r\n\r\n    extendPrototype([DynamicPropertyContainer], TransformProperty);\r\n    TransformProperty.prototype.addDynamicProperty = addDynamicProperty;\r\n    TransformProperty.prototype._addDynamicProperty = DynamicPropertyContainer.prototype.addDynamicProperty;\r\n\r\n    function getTransformProperty(elem,data,container){\r\n        return new TransformProperty(elem,data,container);\r\n    }\r\n\r\n    return {\r\n        getTransformProperty: getTransformProperty\r\n    };\r\n\r\n}());\nfunction ShapePath(){\r\n\tthis.c = false;\r\n\tthis._length = 0;\r\n\tthis._maxLength = 8;\r\n\tthis.v = createSizedArray(this._maxLength);\r\n\tthis.o = createSizedArray(this._maxLength);\r\n\tthis.i = createSizedArray(this._maxLength);\r\n}\r\n\r\nShapePath.prototype.setPathData = function(closed, len) {\r\n\tthis.c = closed;\r\n\tthis.setLength(len);\r\n\tvar i = 0;\r\n\twhile(i < len){\r\n\t\tthis.v[i] = point_pool.newElement();\r\n\t\tthis.o[i] = point_pool.newElement();\r\n\t\tthis.i[i] = point_pool.newElement();\r\n\t\ti += 1;\r\n\t}\r\n};\r\n\r\nShapePath.prototype.setLength = function(len) {\r\n\twhile(this._maxLength < len) {\r\n\t\tthis.doubleArrayLength();\r\n\t}\r\n\tthis._length = len;\r\n};\r\n\r\nShapePath.prototype.doubleArrayLength = function() {\r\n\tthis.v = this.v.concat(createSizedArray(this._maxLength));\r\n\tthis.i = this.i.concat(createSizedArray(this._maxLength));\r\n\tthis.o = this.o.concat(createSizedArray(this._maxLength));\r\n\tthis._maxLength *= 2;\r\n};\r\n\r\nShapePath.prototype.setXYAt = function(x, y, type, pos, replace) {\r\n\tvar arr;\r\n\tthis._length = Math.max(this._length, pos + 1);\r\n\tif(this._length >= this._maxLength) {\r\n\t\tthis.doubleArrayLength();\r\n\t}\r\n\tswitch(type){\r\n\t\tcase 'v':\r\n\t\t\tarr = this.v;\r\n\t\t\tbreak;\r\n\t\tcase 'i':\r\n\t\t\tarr = this.i;\r\n\t\t\tbreak;\r\n\t\tcase 'o':\r\n\t\t\tarr = this.o;\r\n\t\t\tbreak;\r\n\t}\r\n\tif(!arr[pos] || (arr[pos] && !replace)){\r\n\t\tarr[pos] = point_pool.newElement();\r\n\t}\r\n\tarr[pos][0] = x;\r\n\tarr[pos][1] = y;\r\n};\r\n\r\nShapePath.prototype.setTripleAt = function(vX,vY,oX,oY,iX,iY,pos, replace) {\r\n\tthis.setXYAt(vX,vY,'v',pos, replace);\r\n\tthis.setXYAt(oX,oY,'o',pos, replace);\r\n\tthis.setXYAt(iX,iY,'i',pos, replace);\r\n};\r\n\r\nShapePath.prototype.reverse = function() {\r\n\tvar newPath = new ShapePath();\r\n\tnewPath.setPathData(this.c, this._length);\r\n\tvar vertices = this.v, outPoints = this.o, inPoints = this.i;\r\n\tvar init = 0;\r\n\tif (this.c) {\r\n\t\tnewPath.setTripleAt(vertices[0][0], vertices[0][1], inPoints[0][0], inPoints[0][1], outPoints[0][0], outPoints[0][1], 0, false);\r\n        init = 1;\r\n    }\r\n    var cnt = this._length - 1;\r\n    var len = this._length;\r\n\r\n    var i;\r\n    for (i = init; i < len; i += 1) {\r\n    \tnewPath.setTripleAt(vertices[cnt][0], vertices[cnt][1], inPoints[cnt][0], inPoints[cnt][1], outPoints[cnt][0], outPoints[cnt][1], i, false);\r\n        cnt -= 1;\r\n    }\r\n    return newPath;\r\n};\nvar ShapePropertyFactory = (function(){\r\n\r\n    var initFrame = -999999;\r\n\r\n    function interpolateShape(frameNum, previousValue, caching) {\r\n        var iterationIndex = caching.lastIndex;\r\n        var keyPropS,keyPropE,isHold, j, k, jLen, kLen, perc, vertexValue;\r\n        var kf = this.keyframes;\r\n        if(frameNum < kf[0].t-this.offsetTime){\r\n            keyPropS = kf[0].s[0];\r\n            isHold = true;\r\n            iterationIndex = 0;\r\n        }else if(frameNum >= kf[kf.length - 1].t-this.offsetTime){\r\n            if(kf[kf.length - 2].h === 1){\r\n                keyPropS = kf[kf.length - 1].s[0];\r\n            }else{\r\n                keyPropS = kf[kf.length - 2].e[0];\r\n            }\r\n            isHold = true;\r\n        }else{\r\n            var i = iterationIndex;\r\n            var len = kf.length- 1,flag = true,keyData,nextKeyData;\r\n            while(flag){\r\n                keyData = kf[i];\r\n                nextKeyData = kf[i+1];\r\n                if((nextKeyData.t - this.offsetTime) > frameNum){\r\n                    break;\r\n                }\r\n                if(i < len - 1){\r\n                    i += 1;\r\n                }else{\r\n                    flag = false;\r\n                }\r\n            }\r\n            isHold = keyData.h === 1;\r\n            iterationIndex = i;\r\n            if(!isHold){\r\n                if(frameNum >= nextKeyData.t-this.offsetTime){\r\n                    perc = 1;\r\n                }else if(frameNum < keyData.t-this.offsetTime){\r\n                    perc = 0;\r\n                }else{\r\n                    var fnc;\r\n                    if(keyData.__fnct){\r\n                        fnc = keyData.__fnct;\r\n                    }else{\r\n                        fnc = BezierFactory.getBezierEasing(keyData.o.x,keyData.o.y,keyData.i.x,keyData.i.y).get;\r\n                        keyData.__fnct = fnc;\r\n                    }\r\n                    perc = fnc((frameNum-(keyData.t-this.offsetTime))/((nextKeyData.t-this.offsetTime)-(keyData.t-this.offsetTime)));\r\n                }\r\n                keyPropE = keyData.e[0];\r\n            }\r\n            keyPropS = keyData.s[0];\r\n        }\r\n        jLen = previousValue._length;\r\n        kLen = keyPropS.i[0].length;\r\n        caching.lastIndex = iterationIndex;\r\n\r\n        for(j=0;j<jLen;j+=1){\r\n            for(k=0;k<kLen;k+=1){\r\n                vertexValue = isHold ? keyPropS.i[j][k] :  keyPropS.i[j][k]+(keyPropE.i[j][k]-keyPropS.i[j][k])*perc;\r\n                previousValue.i[j][k] = vertexValue;\r\n                vertexValue = isHold ? keyPropS.o[j][k] :  keyPropS.o[j][k]+(keyPropE.o[j][k]-keyPropS.o[j][k])*perc;\r\n                previousValue.o[j][k] = vertexValue;\r\n                vertexValue = isHold ? keyPropS.v[j][k] :  keyPropS.v[j][k]+(keyPropE.v[j][k]-keyPropS.v[j][k])*perc;\r\n                previousValue.v[j][k] = vertexValue;\r\n            }\r\n        }\r\n    }\r\n\r\n    function interpolateShapeCurrentTime(){\r\n        var frameNum = this.comp.renderedFrame - this.offsetTime;\r\n        var initTime = this.keyframes[0].t - this.offsetTime;\r\n        var endTime = this.keyframes[this.keyframes.length - 1].t - this.offsetTime;\r\n        var lastFrame = this._caching.lastFrame;\r\n        if(!(lastFrame !== initFrame && ((lastFrame < initTime && frameNum < initTime) || (lastFrame > endTime && frameNum > endTime)))){\r\n            ////\r\n            this._caching.lastIndex = lastFrame < frameNum ? this._caching.lastIndex : 0;\r\n            this.interpolateShape(frameNum, this.pv, this._caching);\r\n            ////\r\n        }\r\n        this._caching.lastFrame = frameNum;\r\n        return this.pv;\r\n    }\r\n\r\n    function resetShape(){\r\n        this.paths = this.localShapeCollection;\r\n    }\r\n\r\n    function shapesEqual(shape1, shape2) {\r\n        if(shape1._length !== shape2._length || shape1.c !== shape2.c){\r\n            return false;\r\n        }\r\n        var i, len = shape1._length;\r\n        for(i = 0; i < len; i += 1) {\r\n            if(shape1.v[i][0] !== shape2.v[i][0] || shape1.v[i][1] !== shape2.v[i][1] || shape1.o[i][0] !== shape2.o[i][0] || shape1.o[i][1] !== shape2.o[i][1] || shape1.i[i][0] !== shape2.i[i][0] || shape1.i[i][1] !== shape2.i[i][1]){\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    function processEffectsSequence() {\r\n        if(this.lock || this.elem.globalData.frameId === this.frameId) {\r\n            return;\r\n        }\r\n        this.lock = true;\r\n        this.frameId = this.elem.globalData.frameId;\r\n        this._mdf = false;\r\n        var finalValue = this.kf ? this.pv : this.data.ks ? this.data.ks.k : this.data.pt.k;\r\n        var i, len = this.effectsSequence.length;\r\n        for(i = 0; i < len; i += 1) {\r\n            finalValue = this.effectsSequence[i](finalValue);\r\n        }\r\n        if(!shapesEqual(this.v, finalValue)) {\r\n            this.v = shape_pool.clone(finalValue);\r\n            this.localShapeCollection.releaseShapes();\r\n            this.localShapeCollection.addShape(this.v);\r\n            this._mdf = true;\r\n            this.paths = this.localShapeCollection;\r\n        }\r\n        this.lock = false;\r\n    };\r\n\r\n    function ShapeProperty(elem, data, type){\r\n        this.propType = 'shape';\r\n        this.comp = elem.comp;\r\n        this.container = elem;\r\n        this.elem = elem;\r\n        this.data = data;\r\n        this.k = false;\r\n        this.kf = false;\r\n        this._mdf = false;\r\n        var pathData = type === 3 ? data.pt.k : data.ks.k;\r\n        this.v = shape_pool.clone(pathData);\r\n        this.pv = shape_pool.clone(this.v);\r\n        this.localShapeCollection = shapeCollection_pool.newShapeCollection();\r\n        this.paths = this.localShapeCollection;\r\n        this.paths.addShape(this.v);\r\n        this.reset = resetShape;\r\n        this.effectsSequence = [];\r\n    }\r\n\r\n    function addEffect(effectFunction) {\r\n        this.effectsSequence.push(effectFunction);\r\n        this.container.addDynamicProperty(this);\r\n    }\r\n\r\n    ShapeProperty.prototype.interpolateShape = interpolateShape;\r\n    ShapeProperty.prototype.getValue = processEffectsSequence;\r\n    ShapeProperty.prototype.getValue = processEffectsSequence;\r\n    ShapeProperty.prototype.addEffect = addEffect;\r\n\r\n    function KeyframedShapeProperty(elem,data,type){\r\n        this.propType = 'shape';\r\n        this.comp = elem.comp;\r\n        this.elem = elem;\r\n        this.container = elem;\r\n        this.offsetTime = elem.data.st;\r\n        this.keyframes = type === 3 ? data.pt.k : data.ks.k;\r\n        this.k = true;\r\n        this.kf = true;\r\n        var i, len = this.keyframes[0].s[0].i.length;\r\n        var jLen = this.keyframes[0].s[0].i[0].length;\r\n        this.v = shape_pool.newElement();\r\n        this.v.setPathData(this.keyframes[0].s[0].c, len);\r\n        this.pv = shape_pool.clone(this.v);\r\n        this.localShapeCollection = shapeCollection_pool.newShapeCollection();\r\n        this.paths = this.localShapeCollection;\r\n        this.paths.addShape(this.v);\r\n        this.lastFrame = initFrame;\r\n        this.reset = resetShape;\r\n        this._caching = {lastFrame: initFrame, lastIndex: 0};\r\n        this.effectsSequence = [interpolateShapeCurrentTime.bind(this)];\r\n    }\r\n    KeyframedShapeProperty.prototype.getValue = processEffectsSequence;\r\n    KeyframedShapeProperty.prototype.interpolateShape = interpolateShape;\r\n    KeyframedShapeProperty.prototype.addEffect = addEffect;\r\n\r\n    var EllShapeProperty = (function(){\r\n\r\n        var cPoint = roundCorner;\r\n\r\n        function EllShapeProperty(elem,data) {\r\n            /*this.v = {\r\n                v: createSizedArray(4),\r\n                i: createSizedArray(4),\r\n                o: createSizedArray(4),\r\n                c: true\r\n            };*/\r\n            this.v = shape_pool.newElement();\r\n            this.v.setPathData(true, 4);\r\n            this.localShapeCollection = shapeCollection_pool.newShapeCollection();\r\n            this.paths = this.localShapeCollection;\r\n            this.localShapeCollection.addShape(this.v);\r\n            this.d = data.d;\r\n            this.elem = elem;\r\n            this.comp = elem.comp;\r\n            this.frameId = -1;\r\n            this.initDynamicPropertyContainer(elem);\r\n            this.p = PropertyFactory.getProp(elem,data.p,1,0,this);\r\n            this.s = PropertyFactory.getProp(elem,data.s,1,0,this);\r\n            if(this.dynamicProperties.length){\r\n                this.k = true;\r\n            }else{\r\n                this.k = false;\r\n                this.convertEllToPath();\r\n            }\r\n        };\r\n\r\n        EllShapeProperty.prototype = {\r\n            reset: resetShape,\r\n            getValue: function (){\r\n                if(this.elem.globalData.frameId === this.frameId){\r\n                    return;\r\n                }\r\n                this.frameId = this.elem.globalData.frameId;\r\n                this.iterateDynamicProperties();\r\n\r\n                if(this._mdf){\r\n                    this.convertEllToPath();\r\n                }\r\n            },\r\n            convertEllToPath: function() {\r\n                var p0 = this.p.v[0], p1 = this.p.v[1], s0 = this.s.v[0]/2, s1 = this.s.v[1]/2;\r\n                var _cw = this.d !== 3;\r\n                var _v = this.v;\r\n                _v.v[0][0] = p0;\r\n                _v.v[0][1] = p1 - s1;\r\n                _v.v[1][0] = _cw ? p0 + s0 : p0 - s0;\r\n                _v.v[1][1] = p1;\r\n                _v.v[2][0] = p0;\r\n                _v.v[2][1] = p1 + s1;\r\n                _v.v[3][0] = _cw ? p0 - s0 : p0 + s0;\r\n                _v.v[3][1] = p1;\r\n                _v.i[0][0] = _cw ? p0 - s0 * cPoint : p0 + s0 * cPoint;\r\n                _v.i[0][1] = p1 - s1;\r\n                _v.i[1][0] = _cw ? p0 + s0 : p0 - s0;\r\n                _v.i[1][1] = p1 - s1 * cPoint;\r\n                _v.i[2][0] = _cw ? p0 + s0 * cPoint : p0 - s0 * cPoint;\r\n                _v.i[2][1] = p1 + s1;\r\n                _v.i[3][0] = _cw ? p0 - s0 : p0 + s0;\r\n                _v.i[3][1] = p1 + s1 * cPoint;\r\n                _v.o[0][0] = _cw ? p0 + s0 * cPoint : p0 - s0 * cPoint;\r\n                _v.o[0][1] = p1 - s1;\r\n                _v.o[1][0] = _cw ? p0 + s0 : p0 - s0;\r\n                _v.o[1][1] = p1 + s1 * cPoint;\r\n                _v.o[2][0] = _cw ? p0 - s0 * cPoint : p0 + s0 * cPoint;\r\n                _v.o[2][1] = p1 + s1;\r\n                _v.o[3][0] = _cw ? p0 - s0 : p0 + s0;\r\n                _v.o[3][1] = p1 - s1 * cPoint;\r\n            }\r\n        }\r\n\r\n        extendPrototype([DynamicPropertyContainer], EllShapeProperty);\r\n\r\n        return EllShapeProperty;\r\n    }());\r\n\r\n    var StarShapeProperty = (function() {\r\n\r\n        function StarShapeProperty(elem,data) {\r\n            this.v = shape_pool.newElement();\r\n            this.v.setPathData(true, 0);\r\n            this.elem = elem;\r\n            this.comp = elem.comp;\r\n            this.data = data;\r\n            this.frameId = -1;\r\n            this.d = data.d;\r\n            this.initDynamicPropertyContainer(elem);\r\n            if(data.sy === 1){\r\n                this.ir = PropertyFactory.getProp(elem,data.ir,0,0,this);\r\n                this.is = PropertyFactory.getProp(elem,data.is,0,0.01,this);\r\n                this.convertToPath = this.convertStarToPath;\r\n            } else {\r\n                this.convertToPath = this.convertPolygonToPath;\r\n            }\r\n            this.pt = PropertyFactory.getProp(elem,data.pt,0,0,this);\r\n            this.p = PropertyFactory.getProp(elem,data.p,1,0,this);\r\n            this.r = PropertyFactory.getProp(elem,data.r,0,degToRads,this);\r\n            this.or = PropertyFactory.getProp(elem,data.or,0,0,this);\r\n            this.os = PropertyFactory.getProp(elem,data.os,0,0.01,this);\r\n            this.localShapeCollection = shapeCollection_pool.newShapeCollection();\r\n            this.localShapeCollection.addShape(this.v);\r\n            this.paths = this.localShapeCollection;\r\n            if(this.dynamicProperties.length){\r\n                this.k = true;\r\n            }else{\r\n                this.k = false;\r\n                this.convertToPath();\r\n            }\r\n        };\r\n\r\n        StarShapeProperty.prototype = {\r\n            reset: resetShape,\r\n            getValue: function() {\r\n                if(this.elem.globalData.frameId === this.frameId){\r\n                    return;\r\n                }\r\n                this.frameId = this.elem.globalData.frameId;\r\n                this.iterateDynamicProperties();\r\n                if(this._mdf){\r\n                    this.convertToPath();\r\n                }\r\n            },\r\n            convertStarToPath: function() {\r\n                var numPts = Math.floor(this.pt.v)*2;\r\n                var angle = Math.PI*2/numPts;\r\n                /*this.v.v.length = numPts;\r\n                this.v.i.length = numPts;\r\n                this.v.o.length = numPts;*/\r\n                var longFlag = true;\r\n                var longRad = this.or.v;\r\n                var shortRad = this.ir.v;\r\n                var longRound = this.os.v;\r\n                var shortRound = this.is.v;\r\n                var longPerimSegment = 2*Math.PI*longRad/(numPts*2);\r\n                var shortPerimSegment = 2*Math.PI*shortRad/(numPts*2);\r\n                var i, rad,roundness,perimSegment, currentAng = -Math.PI/ 2;\r\n                currentAng += this.r.v;\r\n                var dir = this.data.d === 3 ? -1 : 1;\r\n                this.v._length = 0;\r\n                for(i=0;i<numPts;i+=1){\r\n                    rad = longFlag ? longRad : shortRad;\r\n                    roundness = longFlag ? longRound : shortRound;\r\n                    perimSegment = longFlag ? longPerimSegment : shortPerimSegment;\r\n                    var x = rad * Math.cos(currentAng);\r\n                    var y = rad * Math.sin(currentAng);\r\n                    var ox = x === 0 && y === 0 ? 0 : y/Math.sqrt(x*x + y*y);\r\n                    var oy = x === 0 && y === 0 ? 0 : -x/Math.sqrt(x*x + y*y);\r\n                    x +=  + this.p.v[0];\r\n                    y +=  + this.p.v[1];\r\n                    this.v.setTripleAt(x,y,x-ox*perimSegment*roundness*dir,y-oy*perimSegment*roundness*dir,x+ox*perimSegment*roundness*dir,y+oy*perimSegment*roundness*dir, i, true);\r\n\r\n                    /*this.v.v[i] = [x,y];\r\n                    this.v.i[i] = [x+ox*perimSegment*roundness*dir,y+oy*perimSegment*roundness*dir];\r\n                    this.v.o[i] = [x-ox*perimSegment*roundness*dir,y-oy*perimSegment*roundness*dir];\r\n                    this.v._length = numPts;*/\r\n                    longFlag = !longFlag;\r\n                    currentAng += angle*dir;\r\n                }\r\n            },\r\n            convertPolygonToPath: function() {\r\n                var numPts = Math.floor(this.pt.v);\r\n                var angle = Math.PI*2/numPts;\r\n                var rad = this.or.v;\r\n                var roundness = this.os.v;\r\n                var perimSegment = 2*Math.PI*rad/(numPts*4);\r\n                var i, currentAng = -Math.PI/ 2;\r\n                var dir = this.data.d === 3 ? -1 : 1;\r\n                currentAng += this.r.v;\r\n                this.v._length = 0;\r\n                for(i=0;i<numPts;i+=1){\r\n                    var x = rad * Math.cos(currentAng);\r\n                    var y = rad * Math.sin(currentAng);\r\n                    var ox = x === 0 && y === 0 ? 0 : y/Math.sqrt(x*x + y*y);\r\n                    var oy = x === 0 && y === 0 ? 0 : -x/Math.sqrt(x*x + y*y);\r\n                    x +=  + this.p.v[0];\r\n                    y +=  + this.p.v[1];\r\n                    this.v.setTripleAt(x,y,x-ox*perimSegment*roundness*dir,y-oy*perimSegment*roundness*dir,x+ox*perimSegment*roundness*dir,y+oy*perimSegment*roundness*dir, i, true);\r\n                    currentAng += angle*dir;\r\n                }\r\n                this.paths.length = 0;\r\n                this.paths[0] = this.v;\r\n            }\r\n\r\n        }\r\n        extendPrototype([DynamicPropertyContainer], StarShapeProperty);\r\n\r\n        return StarShapeProperty;\r\n    }());\r\n\r\n    var RectShapeProperty = (function() {\r\n\r\n         function RectShapeProperty(elem,data) {\r\n            this.v = shape_pool.newElement();\r\n            this.v.c = true;\r\n            this.localShapeCollection = shapeCollection_pool.newShapeCollection();\r\n            this.localShapeCollection.addShape(this.v);\r\n            this.paths = this.localShapeCollection;\r\n            this.elem = elem;\r\n            this.comp = elem.comp;\r\n            this.frameId = -1;\r\n            this.d = data.d;\r\n            this.initDynamicPropertyContainer(elem);\r\n            this.p = PropertyFactory.getProp(elem,data.p,1,0,this);\r\n            this.s = PropertyFactory.getProp(elem,data.s,1,0,this);\r\n            this.r = PropertyFactory.getProp(elem,data.r,0,0,this);\r\n            if(this.dynamicProperties.length){\r\n                this.k = true;\r\n            }else{\r\n                this.k = false;\r\n                this.convertRectToPath();\r\n            }\r\n        };\r\n\r\n        RectShapeProperty.prototype = {\r\n            convertRectToPath: function (){\r\n                var p0 = this.p.v[0], p1 = this.p.v[1], v0 = this.s.v[0]/2, v1 = this.s.v[1]/2;\r\n                var round = bm_min(v0,v1,this.r.v);\r\n                var cPoint = round*(1-roundCorner);\r\n                this.v._length = 0;\r\n\r\n                if(this.d === 2 || this.d === 1) {\r\n                    this.v.setTripleAt(p0+v0, p1-v1+round,p0+v0, p1-v1+round,p0+v0,p1-v1+cPoint,0, true);\r\n                    this.v.setTripleAt(p0+v0, p1+v1-round,p0+v0, p1+v1-cPoint,p0+v0, p1+v1-round,1, true);\r\n                    if(round!== 0){\r\n                        this.v.setTripleAt(p0+v0-round, p1+v1,p0+v0-round,p1+v1,p0+v0-cPoint,p1+v1,2, true);\r\n                        this.v.setTripleAt(p0-v0+round,p1+v1,p0-v0+cPoint,p1+v1,p0-v0+round,p1+v1,3, true);\r\n                        this.v.setTripleAt(p0-v0,p1+v1-round,p0-v0,p1+v1-round,p0-v0,p1+v1-cPoint,4, true);\r\n                        this.v.setTripleAt(p0-v0,p1-v1+round,p0-v0,p1-v1+cPoint,p0-v0,p1-v1+round,5, true);\r\n                        this.v.setTripleAt(p0-v0+round,p1-v1,p0-v0+round,p1-v1,p0-v0+cPoint,p1-v1,6, true);\r\n                        this.v.setTripleAt(p0+v0-round,p1-v1,p0+v0-cPoint,p1-v1,p0+v0-round,p1-v1,7, true);\r\n                    } else {\r\n                        this.v.setTripleAt(p0-v0,p1+v1,p0-v0+cPoint,p1+v1,p0-v0,p1+v1,2);\r\n                        this.v.setTripleAt(p0-v0,p1-v1,p0-v0,p1-v1+cPoint,p0-v0,p1-v1,3);\r\n                    }\r\n                }else{\r\n                    this.v.setTripleAt(p0+v0,p1-v1+round,p0+v0,p1-v1+cPoint,p0+v0,p1-v1+round,0, true);\r\n                    if(round!== 0){\r\n                        this.v.setTripleAt(p0+v0-round,p1-v1,p0+v0-round,p1-v1,p0+v0-cPoint,p1-v1,1, true);\r\n                        this.v.setTripleAt(p0-v0+round,p1-v1,p0-v0+cPoint,p1-v1,p0-v0+round,p1-v1,2, true);\r\n                        this.v.setTripleAt(p0-v0,p1-v1+round,p0-v0,p1-v1+round,p0-v0,p1-v1+cPoint,3, true);\r\n                        this.v.setTripleAt(p0-v0,p1+v1-round,p0-v0,p1+v1-cPoint,p0-v0,p1+v1-round,4, true);\r\n                        this.v.setTripleAt(p0-v0+round,p1+v1,p0-v0+round,p1+v1,p0-v0+cPoint,p1+v1,5, true);\r\n                        this.v.setTripleAt(p0+v0-round,p1+v1,p0+v0-cPoint,p1+v1,p0+v0-round,p1+v1,6, true);\r\n                        this.v.setTripleAt(p0+v0,p1+v1-round,p0+v0,p1+v1-round,p0+v0,p1+v1-cPoint,7, true);\r\n                    } else {\r\n                        this.v.setTripleAt(p0-v0,p1-v1,p0-v0+cPoint,p1-v1,p0-v0,p1-v1,1, true);\r\n                        this.v.setTripleAt(p0-v0,p1+v1,p0-v0,p1+v1-cPoint,p0-v0,p1+v1,2, true);\r\n                        this.v.setTripleAt(p0+v0,p1+v1,p0+v0-cPoint,p1+v1,p0+v0,p1+v1,3, true);\r\n\r\n                    }\r\n                }\r\n            },\r\n            getValue: function(frameNum){\r\n                if(this.elem.globalData.frameId === this.frameId){\r\n                    return;\r\n                }\r\n                this.frameId = this.elem.globalData.frameId;\r\n                this.iterateDynamicProperties();\r\n                if(this._mdf){\r\n                    this.convertRectToPath();\r\n                }\r\n\r\n            },\r\n            reset: resetShape\r\n        }\r\n        extendPrototype([DynamicPropertyContainer], RectShapeProperty);\r\n\r\n        return RectShapeProperty;\r\n    }());\r\n\r\n    function getShapeProp(elem,data,type){\r\n        var prop;\r\n        if(type === 3 || type === 4){\r\n            var dataProp = type === 3 ? data.pt : data.ks;\r\n            var keys = dataProp.k;\r\n            if(dataProp.a === 1 || keys.length){\r\n                prop = new KeyframedShapeProperty(elem, data, type);\r\n            }else{\r\n                prop = new ShapeProperty(elem, data, type);\r\n            }\r\n        }else if(type === 5){\r\n            prop = new RectShapeProperty(elem, data);\r\n        }else if(type === 6){\r\n            prop = new EllShapeProperty(elem, data);\r\n        }else if(type === 7){\r\n            prop = new StarShapeProperty(elem, data);\r\n        }\r\n        if(prop.k){\r\n            elem.addDynamicProperty(prop);\r\n        }\r\n        return prop;\r\n    }\r\n\r\n    function getConstructorFunction() {\r\n        return ShapeProperty;\r\n    }\r\n\r\n    function getKeyframedConstructorFunction() {\r\n        return KeyframedShapeProperty;\r\n    }\r\n\r\n    var ob = {};\r\n    ob.getShapeProp = getShapeProp;\r\n    ob.getConstructorFunction = getConstructorFunction;\r\n    ob.getKeyframedConstructorFunction = getKeyframedConstructorFunction;\r\n    return ob;\r\n}());\nvar ShapeModifiers = (function(){\r\n    var ob = {};\r\n    var modifiers = {};\r\n    ob.registerModifier = registerModifier;\r\n    ob.getModifier = getModifier;\r\n\r\n    function registerModifier(nm,factory){\r\n        if(!modifiers[nm]){\r\n            modifiers[nm] = factory;\r\n        }\r\n    }\r\n\r\n    function getModifier(nm,elem, data){\r\n        return new modifiers[nm](elem, data);\r\n    }\r\n\r\n    return ob;\r\n}());\r\n\r\nfunction ShapeModifier(){}\r\nShapeModifier.prototype.initModifierProperties = function(){};\r\nShapeModifier.prototype.addShapeToModifier = function(){};\r\nShapeModifier.prototype.addShape = function(data){\r\n    if(!this.closed){\r\n        var shapeData = {shape:data.sh, data: data, localShapeCollection:shapeCollection_pool.newShapeCollection()};\r\n        this.shapes.push(shapeData);\r\n        this.addShapeToModifier(shapeData);\r\n        if(this._isAnimated) {\r\n            data.setAsAnimated();\r\n        }\r\n    }\r\n};\r\nShapeModifier.prototype.init = function(elem,data){\r\n    this.shapes = [];\r\n    this.elem = elem;\r\n    this.initDynamicPropertyContainer(elem);\r\n    this.initModifierProperties(elem,data);\r\n    this.frameId = initialDefaultFrame;\r\n    this.closed = false;\r\n    this.k = false;\r\n    if(this.dynamicProperties.length){\r\n        this.k = true;\r\n    }else{\r\n        this.getValue(true);\r\n    }\r\n};\r\nShapeModifier.prototype.processKeys = function(){\r\n    if(this.elem.globalData.frameId === this.frameId){\r\n        return;\r\n    }\r\n    this.frameId = this.elem.globalData.frameId;\r\n    this.iterateDynamicProperties();\r\n};\r\n\r\nextendPrototype([DynamicPropertyContainer], ShapeModifier);\nfunction TrimModifier(){\r\n}\r\nextendPrototype([ShapeModifier], TrimModifier);\r\nTrimModifier.prototype.initModifierProperties = function(elem, data) {\r\n    this.s = PropertyFactory.getProp(elem, data.s, 0, 0.01, this);\r\n    this.e = PropertyFactory.getProp(elem, data.e, 0, 0.01, this);\r\n    this.o = PropertyFactory.getProp(elem, data.o, 0, 0, this);\r\n    this.sValue = 0;\r\n    this.eValue = 0;\r\n    this.getValue = this.processKeys;\r\n    this.m = data.m;\r\n    this._isAnimated = !!this.s.effectsSequence.length || !!this.e.effectsSequence.length || !!this.o.effectsSequence.length;\r\n};\r\n\r\nTrimModifier.prototype.addShapeToModifier = function(shapeData){\r\n    shapeData.pathsData = [];\r\n};\r\n\r\nTrimModifier.prototype.calculateShapeEdges = function(s, e, shapeLength, addedLength, totalModifierLength) {\r\n    var segments = [];\r\n    if (e <= 1) {\r\n        segments.push({\r\n            s: s,\r\n            e: e\r\n        });\r\n    } else if (s >= 1) {\r\n        segments.push({\r\n            s: s - 1,\r\n            e: e - 1\r\n        });\r\n    } else {\r\n        segments.push({\r\n            s: s,\r\n            e: 1\r\n        });\r\n        segments.push({\r\n            s: 0,\r\n            e: e - 1\r\n        });\r\n    }\r\n    var shapeSegments = [];\r\n    var i, len = segments.length, segmentOb;\r\n    for (i = 0; i < len; i += 1) {\r\n        segmentOb = segments[i];\r\n        if (segmentOb.e * totalModifierLength < addedLength || segmentOb.s * totalModifierLength > addedLength + shapeLength) {\r\n            \r\n        } else {\r\n            var shapeS, shapeE;\r\n            if (segmentOb.s * totalModifierLength <= addedLength) {\r\n                shapeS = 0;\r\n            } else {\r\n                shapeS = (segmentOb.s * totalModifierLength - addedLength) / shapeLength;\r\n            }\r\n            if(segmentOb.e * totalModifierLength >= addedLength + shapeLength) {\r\n                shapeE = 1;\r\n            } else {\r\n                shapeE = ((segmentOb.e * totalModifierLength - addedLength) / shapeLength);\r\n            }\r\n            shapeSegments.push([shapeS, shapeE]);\r\n        }\r\n    }\r\n    if (!shapeSegments.length) {\r\n        shapeSegments.push([0, 0]);\r\n    }\r\n    return shapeSegments;\r\n};\r\n\r\nTrimModifier.prototype.releasePathsData = function(pathsData) {\r\n    var i, len = pathsData.length;\r\n    for (i = 0; i < len; i += 1) {\r\n        segments_length_pool.release(pathsData[i]);\r\n    }\r\n    pathsData.length = 0;\r\n    return pathsData;\r\n};\r\n\r\nTrimModifier.prototype.processShapes = function(_isFirstFrame) {\r\n    var s, e;\r\n    if (this._mdf || _isFirstFrame) {\r\n        var o = (this.o.v % 360) / 360;\r\n        if (o < 0) {\r\n            o += 1;\r\n        }\r\n        s = this.s.v + o;\r\n        e = this.e.v + o;\r\n        if (s === e) {\r\n\r\n        }\r\n        if (s > e) {\r\n            var _s = s;\r\n            s = e;\r\n            e = _s;\r\n        }\r\n        s = Math.round(s*1000)/1000;\r\n        e = Math.round(e*1000)/1000;\r\n        this.sValue = s;\r\n        this.eValue = e;\r\n    } else {\r\n        s = this.sValue;\r\n        e = this.eValue;\r\n    }\r\n    var shapePaths;\r\n    var i, len = this.shapes.length, j, jLen;\r\n    var pathsData, pathData, totalShapeLength, totalModifierLength = 0;\r\n\r\n    if (e === s) {\r\n        for (i = 0; i < len; i += 1) {\r\n            this.shapes[i].localShapeCollection.releaseShapes();\r\n            this.shapes[i].shape._mdf = true;\r\n            this.shapes[i].shape.paths = this.shapes[i].localShapeCollection;\r\n        }\r\n    } else if (!((e === 1 && s === 0) || (e===0 && s === 1))){\r\n        var segments = [], shapeData, localShapeCollection;\r\n        for (i = 0; i < len; i += 1) {\r\n            shapeData = this.shapes[i];\r\n            // if shape hasn't changed and trim properties haven't changed, cached previous path can be used\r\n            if (!shapeData.shape._mdf && !this._mdf && !_isFirstFrame && this.m !== 2) {\r\n                shapeData.shape.paths = shapeData.localShapeCollection;\r\n            } else {\r\n                shapePaths = shapeData.shape.paths;\r\n                jLen = shapePaths._length;\r\n                totalShapeLength = 0;\r\n                if (!shapeData.shape._mdf && shapeData.pathsData.length) {\r\n                    totalShapeLength = shapeData.totalShapeLength;\r\n                } else {\r\n                    pathsData = this.releasePathsData(shapeData.pathsData);\r\n                    for (j = 0; j < jLen; j += 1) {\r\n                        pathData = bez.getSegmentsLength(shapePaths.shapes[j]);\r\n                        pathsData.push(pathData);\r\n                        totalShapeLength += pathData.totalLength;\r\n                    }\r\n                    shapeData.totalShapeLength = totalShapeLength;\r\n                    shapeData.pathsData = pathsData;\r\n                }\r\n\r\n                totalModifierLength += totalShapeLength;\r\n                shapeData.shape._mdf = true;\r\n            }\r\n        }\r\n        var shapeS = s, shapeE = e, addedLength = 0, edges;\r\n        for (i = len - 1; i >= 0; i -= 1) {\r\n            shapeData = this.shapes[i];\r\n            if (shapeData.shape._mdf) {\r\n                localShapeCollection = shapeData.localShapeCollection;\r\n                localShapeCollection.releaseShapes();\r\n                //if m === 2 means paths are trimmed individually so edges need to be found for this specific shape relative to whoel group\r\n                if (this.m === 2 && len > 1) {\r\n                    edges = this.calculateShapeEdges(s, e, shapeData.totalShapeLength, addedLength, totalModifierLength);\r\n                    addedLength += shapeData.totalShapeLength;\r\n                } else {\r\n                    edges = [[shapeS, shapeE]];\r\n                }\r\n                jLen = edges.length;\r\n                for (j = 0; j < jLen; j += 1) {\r\n                    shapeS = edges[j][0];\r\n                    shapeE = edges[j][1];\r\n                    segments.length = 0;\r\n                    if (shapeE <= 1) {\r\n                        segments.push({\r\n                            s:shapeData.totalShapeLength * shapeS,\r\n                            e:shapeData.totalShapeLength * shapeE\r\n                        });\r\n                    } else if (shapeS >= 1) {\r\n                        segments.push({\r\n                            s:shapeData.totalShapeLength * (shapeS - 1),\r\n                            e:shapeData.totalShapeLength * (shapeE - 1)\r\n                        });\r\n                    } else {\r\n                        segments.push({\r\n                            s:shapeData.totalShapeLength * shapeS,\r\n                            e:shapeData.totalShapeLength\r\n                        });\r\n                        segments.push({\r\n                            s:0,\r\n                            e:shapeData.totalShapeLength * (shapeE - 1)\r\n                        });\r\n                    }\r\n                    var newShapesData = this.addShapes(shapeData,segments[0]);\r\n                    if (segments[0].s !== segments[0].e) {\r\n                        if (segments.length > 1) {\r\n                            if (shapeData.shape.v.c) {\r\n                                var lastShape = newShapesData.pop();\r\n                                this.addPaths(newShapesData, localShapeCollection);\r\n                                newShapesData = this.addShapes(shapeData, segments[1], lastShape);\r\n                            } else {\r\n                                this.addPaths(newShapesData, localShapeCollection);\r\n                                newShapesData = this.addShapes(shapeData, segments[1]);\r\n                            }\r\n                        } \r\n                        this.addPaths(newShapesData, localShapeCollection);\r\n                    }\r\n                    \r\n                }\r\n                shapeData.shape.paths = localShapeCollection;\r\n            }\r\n        }\r\n    } else if (this._mdf) {\r\n        for (i = 0; i < len; i += 1) {\r\n            //Releasign Trim Cached paths data when no trim applied in case shapes are modified inbetween.\r\n            //Don't remove this even if it's losing cached info.\r\n            this.shapes[i].pathsData.length = 0;\r\n            this.shapes[i].shape._mdf = true;\r\n        }\r\n    }\r\n};\r\n\r\nTrimModifier.prototype.addPaths = function(newPaths, localShapeCollection) {\r\n    var i, len = newPaths.length;\r\n    for (i = 0; i < len; i += 1) {\r\n        localShapeCollection.addShape(newPaths[i]);\r\n    }\r\n};\r\n\r\nTrimModifier.prototype.addSegment = function(pt1, pt2, pt3, pt4, shapePath, pos, newShape) {\r\n    shapePath.setXYAt(pt2[0], pt2[1], 'o', pos);\r\n    shapePath.setXYAt(pt3[0], pt3[1], 'i', pos + 1);\r\n    if(newShape){\r\n        shapePath.setXYAt(pt1[0], pt1[1], 'v', pos);\r\n    }\r\n    shapePath.setXYAt(pt4[0], pt4[1], 'v', pos + 1);\r\n};\r\n\r\nTrimModifier.prototype.addSegmentFromArray = function(points, shapePath, pos, newShape) {\r\n    shapePath.setXYAt(points[1], points[5], 'o', pos);\r\n    shapePath.setXYAt(points[2], points[6], 'i', pos + 1);\r\n    if(newShape){\r\n        shapePath.setXYAt(points[0], points[4], 'v', pos);\r\n    }\r\n    shapePath.setXYAt(points[3], points[7], 'v', pos + 1);\r\n};\r\n\r\nTrimModifier.prototype.addShapes = function(shapeData, shapeSegment, shapePath) {\r\n    var pathsData = shapeData.pathsData;\r\n    var shapePaths = shapeData.shape.paths.shapes;\r\n    var i, len = shapeData.shape.paths._length, j, jLen;\r\n    var addedLength = 0;\r\n    var currentLengthData,segmentCount;\r\n    var lengths;\r\n    var segment;\r\n    var shapes = [];\r\n    var initPos;\r\n    var newShape = true;\r\n    if (!shapePath) {\r\n        shapePath = shape_pool.newElement();\r\n        segmentCount = 0;\r\n        initPos = 0;\r\n    } else {\r\n        segmentCount = shapePath._length;\r\n        initPos = shapePath._length;\r\n    }\r\n    shapes.push(shapePath);\r\n    for (i = 0; i < len; i += 1) {\r\n        lengths = pathsData[i].lengths;\r\n        shapePath.c = shapePaths[i].c;\r\n        jLen = shapePaths[i].c ? lengths.length : lengths.length + 1;\r\n        for (j = 1; j < jLen; j +=1) {\r\n            currentLengthData = lengths[j-1];\r\n            if (addedLength + currentLengthData.addedLength < shapeSegment.s) {\r\n                addedLength += currentLengthData.addedLength;\r\n                shapePath.c = false;\r\n            } else if(addedLength > shapeSegment.e) {\r\n                shapePath.c = false;\r\n                break;\r\n            } else {\r\n                if (shapeSegment.s <= addedLength && shapeSegment.e >= addedLength + currentLengthData.addedLength) {\r\n                    this.addSegment(shapePaths[i].v[j - 1], shapePaths[i].o[j - 1], shapePaths[i].i[j], shapePaths[i].v[j], shapePath, segmentCount, newShape);\r\n                    newShape = false;\r\n                } else {\r\n                    segment = bez.getNewSegment(shapePaths[i].v[j - 1], shapePaths[i].v[j], shapePaths[i].o[j - 1], shapePaths[i].i[j], (shapeSegment.s - addedLength)/currentLengthData.addedLength,(shapeSegment.e - addedLength)/currentLengthData.addedLength, lengths[j-1]);\r\n                    this.addSegmentFromArray(segment, shapePath, segmentCount, newShape);\r\n                    // this.addSegment(segment.pt1, segment.pt3, segment.pt4, segment.pt2, shapePath, segmentCount, newShape);\r\n                    newShape = false;\r\n                    shapePath.c = false;\r\n                }\r\n                addedLength += currentLengthData.addedLength;\r\n                segmentCount += 1;\r\n            }\r\n        }\r\n        if (shapePaths[i].c && lengths.length) {\r\n            currentLengthData = lengths[j - 1];\r\n            if (addedLength <= shapeSegment.e) {\r\n                var segmentLength = lengths[j - 1].addedLength;\r\n                if (shapeSegment.s <= addedLength && shapeSegment.e >= addedLength + segmentLength) {\r\n                    this.addSegment(shapePaths[i].v[j - 1], shapePaths[i].o[j - 1], shapePaths[i].i[0], shapePaths[i].v[0], shapePath, segmentCount, newShape);\r\n                    newShape = false;\r\n                } else {\r\n                    segment = bez.getNewSegment(shapePaths[i].v[j - 1], shapePaths[i].v[0], shapePaths[i].o[j - 1], shapePaths[i].i[0], (shapeSegment.s - addedLength) / segmentLength, (shapeSegment.e - addedLength) / segmentLength, lengths[j - 1]);\r\n                    this.addSegmentFromArray(segment, shapePath, segmentCount, newShape);\r\n                    // this.addSegment(segment.pt1, segment.pt3, segment.pt4, segment.pt2, shapePath, segmentCount, newShape);\r\n                    newShape = false;\r\n                    shapePath.c = false;\r\n                }\r\n            } else {\r\n                shapePath.c = false;\r\n            }\r\n            addedLength += currentLengthData.addedLength;\r\n            segmentCount += 1;\r\n        }\r\n        if (shapePath._length) {\r\n            shapePath.setXYAt(shapePath.v[initPos][0], shapePath.v[initPos][1], 'i', initPos);\r\n            shapePath.setXYAt(shapePath.v[shapePath._length - 1][0], shapePath.v[shapePath._length - 1][1],'o', shapePath._length - 1);\r\n        }\r\n        if (addedLength > shapeSegment.e) {\r\n            break;\r\n        }\r\n        if (i < len - 1) {\r\n            shapePath = shape_pool.newElement();\r\n            newShape = true;\r\n            shapes.push(shapePath);\r\n            segmentCount = 0;\r\n        }\r\n    }\r\n    return shapes;\r\n};\r\n\r\n\r\nShapeModifiers.registerModifier('tm', TrimModifier);\nfunction RoundCornersModifier(){}\r\nextendPrototype([ShapeModifier],RoundCornersModifier);\r\nRoundCornersModifier.prototype.initModifierProperties = function(elem,data){\r\n    this.getValue = this.processKeys;\r\n    this.rd = PropertyFactory.getProp(elem,data.r,0,null,this);\r\n    this._isAnimated = !!this.rd.effectsSequence.length;\r\n};\r\n\r\nRoundCornersModifier.prototype.processPath = function(path, round){\r\n    var cloned_path = shape_pool.newElement();\r\n    cloned_path.c = path.c;\r\n    var i, len = path._length;\r\n    var currentV,currentI,currentO,closerV, newV,newO,newI,distance,newPosPerc,index = 0;\r\n    var vX,vY,oX,oY,iX,iY;\r\n    for(i=0;i<len;i+=1){\r\n        currentV = path.v[i];\r\n        currentO = path.o[i];\r\n        currentI = path.i[i];\r\n        if(currentV[0]===currentO[0] && currentV[1]===currentO[1] && currentV[0]===currentI[0] && currentV[1]===currentI[1]){\r\n            if((i===0 || i === len - 1) && !path.c){\r\n                cloned_path.setTripleAt(currentV[0],currentV[1],currentO[0],currentO[1],currentI[0],currentI[1],index);\r\n                /*cloned_path.v[index] = currentV;\r\n                cloned_path.o[index] = currentO;\r\n                cloned_path.i[index] = currentI;*/\r\n                index += 1;\r\n            } else {\r\n                if(i===0){\r\n                    closerV = path.v[len-1];\r\n                } else {\r\n                    closerV = path.v[i-1];\r\n                }\r\n                distance = Math.sqrt(Math.pow(currentV[0]-closerV[0],2)+Math.pow(currentV[1]-closerV[1],2));\r\n                newPosPerc = distance ? Math.min(distance/2,round)/distance : 0;\r\n                vX = iX = currentV[0]+(closerV[0]-currentV[0])*newPosPerc;\r\n                vY = iY = currentV[1]-(currentV[1]-closerV[1])*newPosPerc;\r\n                oX = vX-(vX-currentV[0])*roundCorner;\r\n                oY = vY-(vY-currentV[1])*roundCorner;\r\n                cloned_path.setTripleAt(vX,vY,oX,oY,iX,iY,index);\r\n                index += 1;\r\n\r\n                if(i === len - 1){\r\n                    closerV = path.v[0];\r\n                } else {\r\n                    closerV = path.v[i+1];\r\n                }\r\n                distance = Math.sqrt(Math.pow(currentV[0]-closerV[0],2)+Math.pow(currentV[1]-closerV[1],2));\r\n                newPosPerc = distance ? Math.min(distance/2,round)/distance : 0;\r\n                vX = oX = currentV[0]+(closerV[0]-currentV[0])*newPosPerc;\r\n                vY = oY = currentV[1]+(closerV[1]-currentV[1])*newPosPerc;\r\n                iX = vX-(vX-currentV[0])*roundCorner;\r\n                iY = vY-(vY-currentV[1])*roundCorner;\r\n                cloned_path.setTripleAt(vX,vY,oX,oY,iX,iY,index);\r\n                index += 1;\r\n            }\r\n        } else {\r\n            cloned_path.setTripleAt(path.v[i][0],path.v[i][1],path.o[i][0],path.o[i][1],path.i[i][0],path.i[i][1],index);\r\n            index += 1;\r\n        }\r\n    }\r\n    return cloned_path;\r\n};\r\n\r\nRoundCornersModifier.prototype.processShapes = function(_isFirstFrame){\r\n    var shapePaths;\r\n    var i, len = this.shapes.length;\r\n    var j, jLen;\r\n    var rd = this.rd.v;\r\n\r\n    if(rd !== 0){\r\n        var shapeData, newPaths, localShapeCollection;\r\n        for(i=0;i<len;i+=1){\r\n            shapeData = this.shapes[i];\r\n            newPaths = shapeData.shape.paths;\r\n            localShapeCollection = shapeData.localShapeCollection;\r\n            if(!(!shapeData.shape._mdf && !this._mdf && !_isFirstFrame)){\r\n                localShapeCollection.releaseShapes();\r\n                shapeData.shape._mdf = true;\r\n                shapePaths = shapeData.shape.paths.shapes;\r\n                jLen = shapeData.shape.paths._length;\r\n                for(j=0;j<jLen;j+=1){\r\n                    localShapeCollection.addShape(this.processPath(shapePaths[j],rd));\r\n                }\r\n            }\r\n            shapeData.shape.paths = shapeData.localShapeCollection;\r\n        }\r\n\r\n    }\r\n    if(!this.dynamicProperties.length){\r\n        this._mdf = false;\r\n    }\r\n};\r\n\r\nShapeModifiers.registerModifier('rd',RoundCornersModifier);\nfunction RepeaterModifier(){}\r\nextendPrototype([ShapeModifier], RepeaterModifier);\r\n\r\nRepeaterModifier.prototype.initModifierProperties = function(elem,data){\r\n    this.getValue = this.processKeys;\r\n    this.c = PropertyFactory.getProp(elem,data.c,0,null,this);\r\n    this.o = PropertyFactory.getProp(elem,data.o,0,null,this);\r\n    this.tr = TransformPropertyFactory.getTransformProperty(elem,data.tr,this);\r\n    this.data = data;\r\n    if(!this.dynamicProperties.length){\r\n        this.getValue(true);\r\n    }\r\n    this._isAnimated = !!this.dynamicProperties.length;\r\n    this.pMatrix = new Matrix();\r\n    this.rMatrix = new Matrix();\r\n    this.sMatrix = new Matrix();\r\n    this.tMatrix = new Matrix();\r\n    this.matrix = new Matrix();\r\n};\r\n\r\nRepeaterModifier.prototype.applyTransforms = function(pMatrix, rMatrix, sMatrix, transform, perc, inv){\r\n    var dir = inv ? -1 : 1;\r\n    var scaleX = transform.s.v[0] + (1 - transform.s.v[0]) * (1 - perc);\r\n    var scaleY = transform.s.v[1] + (1 - transform.s.v[1]) * (1 - perc);\r\n    pMatrix.translate(transform.p.v[0] * dir * perc, transform.p.v[1] * dir * perc, transform.p.v[2]);\r\n    rMatrix.translate(-transform.a.v[0], -transform.a.v[1], transform.a.v[2]);\r\n    rMatrix.rotate(-transform.r.v * dir * perc);\r\n    rMatrix.translate(transform.a.v[0], transform.a.v[1], transform.a.v[2]);\r\n    sMatrix.translate(-transform.a.v[0], -transform.a.v[1], transform.a.v[2]);\r\n    sMatrix.scale(inv ? 1/scaleX : scaleX, inv ? 1/scaleY : scaleY);\r\n    sMatrix.translate(transform.a.v[0], transform.a.v[1], transform.a.v[2]);\r\n};\r\n\r\nRepeaterModifier.prototype.init = function(elem, arr, pos, elemsData) {\r\n    this.elem = elem;\r\n    this.arr = arr;\r\n    this.pos = pos;\r\n    this.elemsData = elemsData;\r\n    this._currentCopies = 0;\r\n    this._elements = [];\r\n    this._groups = [];\r\n    this.frameId = -1;\r\n    this.initDynamicPropertyContainer(elem);\r\n    this.initModifierProperties(elem,arr[pos]);\r\n    var cont = 0;\r\n    while(pos>0){\r\n        pos -= 1;\r\n        //this._elements.unshift(arr.splice(pos,1)[0]);\r\n        this._elements.unshift(arr[pos]);\r\n        cont += 1;\r\n    }\r\n    if(this.dynamicProperties.length){\r\n        this.k = true;\r\n    }else{\r\n        this.getValue(true);\r\n    }\r\n};\r\n\r\nRepeaterModifier.prototype.resetElements = function(elements){\r\n    var i, len = elements.length;\r\n    for(i = 0; i < len; i += 1) {\r\n        elements[i]._processed = false;\r\n        if(elements[i].ty === 'gr'){\r\n            this.resetElements(elements[i].it);\r\n        }\r\n    }\r\n};\r\n\r\nRepeaterModifier.prototype.cloneElements = function(elements){\r\n    var i, len = elements.length;\r\n    var newElements = JSON.parse(JSON.stringify(elements));\r\n    this.resetElements(newElements);\r\n    return newElements;\r\n};\r\n\r\nRepeaterModifier.prototype.changeGroupRender = function(elements, renderFlag) {\r\n    var i, len = elements.length;\r\n    for(i = 0; i < len ; i += 1) {\r\n        elements[i]._render = renderFlag;\r\n        if(elements[i].ty === 'gr') {\r\n            this.changeGroupRender(elements[i].it, renderFlag);\r\n        }\r\n    }\r\n};\r\n\r\nRepeaterModifier.prototype.processShapes = function(_isFirstFrame) {\r\n    var items, itemsTransform, i, dir, cont;\r\n    if(this._mdf || _isFirstFrame){\r\n        var copies = Math.ceil(this.c.v);\r\n        if(this._groups.length < copies){\r\n            while(this._groups.length < copies){\r\n                var group = {\r\n                    it:this.cloneElements(this._elements),\r\n                    ty:'gr'\r\n                };\r\n                group.it.push({\"a\":{\"a\":0,\"ix\":1,\"k\":[0,0]},\"nm\":\"Transform\",\"o\":{\"a\":0,\"ix\":7,\"k\":100},\"p\":{\"a\":0,\"ix\":2,\"k\":[0,0]},\"r\":{\"a\":1,\"ix\":6,\"k\":[{s:0,e:0,t:0},{s:0,e:0,t:1}]},\"s\":{\"a\":0,\"ix\":3,\"k\":[100,100]},\"sa\":{\"a\":0,\"ix\":5,\"k\":0},\"sk\":{\"a\":0,\"ix\":4,\"k\":0},\"ty\":\"tr\"});\r\n                \r\n                this.arr.splice(0,0,group);\r\n                this._groups.splice(0,0,group);\r\n                this._currentCopies += 1;\r\n            }\r\n            this.elem.reloadShapes();\r\n        }\r\n        cont = 0;\r\n        var renderFlag;\r\n        for(i = 0; i  <= this._groups.length - 1; i += 1){\r\n            renderFlag = cont < copies;\r\n            this._groups[i]._render = renderFlag;\r\n            this.changeGroupRender(this._groups[i].it, renderFlag);\r\n            cont += 1;\r\n        }\r\n        \r\n        this._currentCopies = copies;\r\n        ////\r\n\r\n        var offset = this.o.v;\r\n        var offsetModulo = offset%1;\r\n        var roundOffset = offset > 0 ? Math.floor(offset) : Math.ceil(offset);\r\n        var k;\r\n        var tMat = this.tr.v.props;\r\n        var pProps = this.pMatrix.props;\r\n        var rProps = this.rMatrix.props;\r\n        var sProps = this.sMatrix.props;\r\n        this.pMatrix.reset();\r\n        this.rMatrix.reset();\r\n        this.sMatrix.reset();\r\n        this.tMatrix.reset();\r\n        this.matrix.reset();\r\n        var iteration = 0;\r\n\r\n        if(offset > 0) {\r\n            while(iteration<roundOffset){\r\n                this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, false);\r\n                iteration += 1;\r\n            }\r\n            if(offsetModulo){\r\n                this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, offsetModulo, false);\r\n                iteration += offsetModulo;\r\n            }\r\n        } else if(offset < 0) {\r\n            while(iteration>roundOffset){\r\n                this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, true);\r\n                iteration -= 1;\r\n            }\r\n            if(offsetModulo){\r\n                this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, - offsetModulo, true);\r\n                iteration -= offsetModulo;\r\n            }\r\n        }\r\n        i = this.data.m === 1 ? 0 : this._currentCopies - 1;\r\n        dir = this.data.m === 1 ? 1 : -1;\r\n        cont = this._currentCopies;\r\n        var j, jLen;\r\n        while(cont){\r\n            items = this.elemsData[i].it;\r\n            itemsTransform = items[items.length - 1].transform.mProps.v.props;\r\n            jLen = itemsTransform.length;\r\n            items[items.length - 1].transform.mProps._mdf = true;\r\n            items[items.length - 1].transform.op._mdf = true;\r\n            if(iteration !== 0){\r\n                if((i !== 0 && dir === 1) || (i !== this._currentCopies - 1 && dir === -1)){\r\n                    this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, false);\r\n                }\r\n                this.matrix.transform(rProps[0],rProps[1],rProps[2],rProps[3],rProps[4],rProps[5],rProps[6],rProps[7],rProps[8],rProps[9],rProps[10],rProps[11],rProps[12],rProps[13],rProps[14],rProps[15]);\r\n                this.matrix.transform(sProps[0],sProps[1],sProps[2],sProps[3],sProps[4],sProps[5],sProps[6],sProps[7],sProps[8],sProps[9],sProps[10],sProps[11],sProps[12],sProps[13],sProps[14],sProps[15]);\r\n                this.matrix.transform(pProps[0],pProps[1],pProps[2],pProps[3],pProps[4],pProps[5],pProps[6],pProps[7],pProps[8],pProps[9],pProps[10],pProps[11],pProps[12],pProps[13],pProps[14],pProps[15]);\r\n                \r\n                for(j=0;j<jLen;j+=1) {\r\n                    itemsTransform[j] = this.matrix.props[j];\r\n                }\r\n                this.matrix.reset();\r\n            } else {\r\n                this.matrix.reset();\r\n                for(j=0;j<jLen;j+=1) {\r\n                    itemsTransform[j] = this.matrix.props[j];\r\n                }\r\n            }\r\n            iteration += 1;\r\n            cont -= 1;\r\n            i += dir;\r\n        }\r\n    } else {\r\n        cont = this._currentCopies;\r\n        i = 0;\r\n        dir = 1;\r\n        while(cont){\r\n            items = this.elemsData[i].it;\r\n            itemsTransform = items[items.length - 1].transform.mProps.v.props;\r\n            items[items.length - 1].transform.mProps._mdf = false;\r\n            items[items.length - 1].transform.op._mdf = false;\r\n            cont -= 1;\r\n            i += dir;\r\n        }\r\n    }\r\n};\r\n\r\nRepeaterModifier.prototype.addShape = function(){};\r\n\r\nShapeModifiers.registerModifier('rp',RepeaterModifier);\nfunction ShapeCollection(){\r\n\tthis._length = 0;\r\n\tthis._maxLength = 4;\r\n\tthis.shapes = createSizedArray(this._maxLength);\r\n}\r\n\r\nShapeCollection.prototype.addShape = function(shapeData){\r\n\tif(this._length === this._maxLength){\r\n\t\tthis.shapes = this.shapes.concat(createSizedArray(this._maxLength));\r\n\t\tthis._maxLength *= 2;\r\n\t}\r\n\tthis.shapes[this._length] = shapeData;\r\n\tthis._length += 1;\r\n};\r\n\r\nShapeCollection.prototype.releaseShapes = function(){\r\n\tvar i;\r\n\tfor(i = 0; i < this._length; i += 1) {\r\n\t\tshape_pool.release(this.shapes[i]);\r\n\t}\r\n\tthis._length = 0;\r\n};\nfunction DashProperty(elem, data, renderer, container) {\r\n    this.elem = elem;\r\n    this.frameId = -1;\r\n    this.dataProps = createSizedArray(data.length);\r\n    this.renderer = renderer;\r\n    this.k = false;\r\n    this.dashStr = '';\r\n    this.dashArray = createTypedArray('float32',  data.length ? data.length - 1 : 0);\r\n    this.dashoffset = createTypedArray('float32',  1);\r\n    this.initDynamicPropertyContainer(container);\r\n    var i, len = data.length || 0, prop;\r\n    for(i = 0; i < len; i += 1) {\r\n        prop = PropertyFactory.getProp(elem,data[i].v,0, 0, this);\r\n        this.k = prop.k || this.k;\r\n        this.dataProps[i] = {n:data[i].n,p:prop};\r\n    }\r\n    if(!this.k){\r\n        this.getValue(true);\r\n    }\r\n    this._isAnimated = this.k;\r\n}\r\n\r\nDashProperty.prototype.getValue = function(forceRender) {\r\n    if(this.elem.globalData.frameId === this.frameId && !forceRender){\r\n        return;\r\n    }\r\n    this.frameId = this.elem.globalData.frameId;\r\n    this.iterateDynamicProperties();\r\n    this._mdf = this._mdf || forceRender;\r\n    if (this._mdf) {\r\n        var i = 0, len = this.dataProps.length;\r\n        if(this.renderer === 'svg') {\r\n            this.dashStr = '';\r\n        }\r\n        for(i=0;i<len;i+=1){\r\n            if(this.dataProps[i].n != 'o'){\r\n                if(this.renderer === 'svg') {\r\n                    this.dashStr += ' ' + this.dataProps[i].p.v;\r\n                }else{\r\n                    this.dashArray[i] = this.dataProps[i].p.v;\r\n                }\r\n            }else{\r\n                this.dashoffset[0] = this.dataProps[i].p.v;\r\n            }\r\n        }\r\n    }\r\n};\r\nextendPrototype([DynamicPropertyContainer], DashProperty);\nfunction GradientProperty(elem,data){\r\n    this.data = data;\r\n    this.c = createTypedArray('uint8c', data.p*4);\r\n    var cLength = data.k.k[0].s ? (data.k.k[0].s.length - data.p*4) : data.k.k.length - data.p*4;\r\n    this.o = createTypedArray('float32', cLength);\r\n    this._cmdf = false;\r\n    this._omdf = false;\r\n    this._collapsable = this.checkCollapsable();\r\n    this._hasOpacity = cLength;\r\n    this.initDynamicPropertyContainer(elem);\r\n    this.prop = PropertyFactory.getProp(elem,data.k,1,null,this);\r\n    this.k = this.prop.k;\r\n    this.getValue(true);\r\n}\r\n\r\nGradientProperty.prototype.comparePoints = function(values, points) {\r\n    var i = 0, len = this.o.length/2, diff;\r\n    while(i < len) {\r\n        diff = Math.abs(values[i*4] - values[points*4 + i*2]);\r\n        if(diff > 0.01){\r\n            return false;\r\n        }\r\n        i += 1;\r\n    }\r\n    return true;\r\n};\r\n\r\nGradientProperty.prototype.checkCollapsable = function() {\r\n    if (this.o.length/2 !== this.c.length/4) {\r\n        return false;\r\n    }\r\n    if (this.data.k.k[0].s) {\r\n        var i = 0, len = this.data.k.k.length;\r\n        while (i < len) {\r\n            if (!this.comparePoints(this.data.k.k[i].s, this.data.p)) {\r\n                return false;\r\n            }\r\n            i += 1;\r\n        }\r\n    } else if(!this.comparePoints(this.data.k.k, this.data.p)) {\r\n        return false;\r\n    }\r\n    return true;\r\n};\r\n\r\nGradientProperty.prototype.getValue = function(forceRender){\r\n    this.prop.getValue();\r\n    this._mdf = false;\r\n    this._cmdf = false;\r\n    this._omdf = false;\r\n    if(this.prop._mdf || forceRender){\r\n        var i, len = this.data.p*4;\r\n        var mult, val;\r\n        for(i=0;i<len;i+=1){\r\n            mult = i%4 === 0 ? 100 : 255;\r\n            val = Math.round(this.prop.v[i]*mult);\r\n            if(this.c[i] !== val){\r\n                this.c[i] = val;\r\n                this._cmdf = !forceRender;\r\n            }\r\n        }\r\n        if(this.o.length){\r\n            len = this.prop.v.length;\r\n            for(i=this.data.p*4;i<len;i+=1){\r\n                mult = i%2 === 0 ? 100 : 1;\r\n                val = i%2 === 0 ?  Math.round(this.prop.v[i]*100):this.prop.v[i];\r\n                if(this.o[i-this.data.p*4] !== val){\r\n                    this.o[i-this.data.p*4] = val;\r\n                    this._omdf = !forceRender;\r\n                }\r\n            }\r\n        }\r\n        this._mdf = !forceRender;\r\n    }\r\n};\r\n\r\nextendPrototype([DynamicPropertyContainer], GradientProperty);\nvar buildShapeString = function(pathNodes, length, closed, mat) {\r\n\tif(length === 0) {\r\n            return '';\r\n        }\r\n        var _o = pathNodes.o;\r\n        var _i = pathNodes.i;\r\n        var _v = pathNodes.v;\r\n        var i, shapeString = \" M\" + mat.applyToPointStringified(_v[0][0], _v[0][1]);\r\n        for(i = 1; i < length; i += 1) {\r\n            shapeString += \" C\" + mat.applyToPointStringified(_o[i - 1][0], _o[i - 1][1]) + \" \" + mat.applyToPointStringified(_i[i][0], _i[i][1]) + \" \" + mat.applyToPointStringified(_v[i][0], _v[i][1]);\r\n        }\r\n        if (closed && length) {\r\n            shapeString += \" C\" + mat.applyToPointStringified(_o[i - 1][0], _o[i - 1][1]) + \" \" + mat.applyToPointStringified(_i[0][0], _i[0][1]) + \" \" + mat.applyToPointStringified(_v[0][0], _v[0][1]);\r\n            shapeString += 'z';\r\n        }\r\n        return shapeString;\r\n}\nvar ImagePreloader = (function(){\r\n\r\n    function imageLoaded(){\r\n        this.loadedAssets += 1;\r\n        if(this.loadedAssets === this.totalImages){\r\n            if(this.imagesLoadedCb) {\r\n                this.imagesLoadedCb(null);\r\n            }\r\n        }\r\n    }\r\n\r\n    function getAssetsPath(assetData){\r\n        var path = '';\r\n        if(assetData.e) {\r\n            path = assetData.p;\r\n        }else if(this.assetsPath){\r\n            var imagePath = assetData.p;\r\n            if(imagePath.indexOf('images/') !== -1){\r\n                imagePath = imagePath.split('/')[1];\r\n            }\r\n            path = this.assetsPath + imagePath;\r\n        } else {\r\n            path = this.path;\r\n            path += assetData.u ? assetData.u : '';\r\n            path += assetData.p;\r\n        }\r\n        return path;\r\n    }\r\n\r\n    function loadImage(path){\r\n        var img = createTag('img');\r\n        img.addEventListener('load', imageLoaded.bind(this), false);\r\n        img.addEventListener('error', imageLoaded.bind(this), false);\r\n        img.src = path;\r\n    }\r\n    function loadAssets(assets, cb){\r\n        this.imagesLoadedCb = cb;\r\n        this.totalAssets = assets.length;\r\n        var i;\r\n        for(i=0;i<this.totalAssets;i+=1){\r\n            if(!assets[i].layers){\r\n                loadImage.bind(this)(getAssetsPath.bind(this)(assets[i]));\r\n                this.totalImages += 1;\r\n            }\r\n        }\r\n    }\r\n\r\n    function setPath(path){\r\n        this.path = path || '';\r\n    }\r\n\r\n    function setAssetsPath(path){\r\n        this.assetsPath = path || '';\r\n    }\r\n\r\n    function destroy() {\r\n        this.imagesLoadedCb = null;\r\n    }\r\n\r\n    return function ImagePreloader(){\r\n        this.loadAssets = loadAssets;\r\n        this.setAssetsPath = setAssetsPath;\r\n        this.setPath = setPath;\r\n        this.destroy = destroy;\r\n        this.assetsPath = '';\r\n        this.path = '';\r\n        this.totalAssets = 0;\r\n        this.totalImages = 0;\r\n        this.loadedAssets = 0;\r\n        this.imagesLoadedCb = null;\r\n    };\r\n}());\nvar featureSupport = (function(){\r\n\tvar ob = {\r\n\t\tmaskType: true\r\n\t};\r\n\tif (/MSIE 10/i.test(navigator.userAgent) || /MSIE 9/i.test(navigator.userAgent) || /rv:11.0/i.test(navigator.userAgent) || /Edge\\/\\d./i.test(navigator.userAgent)) {\r\n\t   ob.maskType = false;\r\n\t}\r\n\treturn ob;\r\n}());\nvar filtersFactory = (function(){\r\n\tvar ob = {};\r\n\tob.createFilter = createFilter;\r\n\tob.createAlphaToLuminanceFilter = createAlphaToLuminanceFilter;\r\n\r\n\tfunction createFilter(filId){\r\n        \tvar fil = createNS('filter');\r\n        \tfil.setAttribute('id',filId);\r\n                fil.setAttribute('filterUnits','objectBoundingBox');\r\n                fil.setAttribute('x','0%');\r\n                fil.setAttribute('y','0%');\r\n                fil.setAttribute('width','100%');\r\n                fil.setAttribute('height','100%');\r\n                return fil;\r\n\t}\r\n\r\n\tfunction createAlphaToLuminanceFilter(){\r\n                var feColorMatrix = createNS('feColorMatrix');\r\n                feColorMatrix.setAttribute('type','matrix');\r\n                feColorMatrix.setAttribute('color-interpolation-filters','sRGB');\r\n                feColorMatrix.setAttribute('values','0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1');\r\n                return feColorMatrix;\r\n\t}\r\n\r\n\treturn ob;\r\n}());\nvar assetLoader = (function(){\r\n\r\n\tfunction formatResponse(xhr) {\r\n\t\tif(xhr.response && typeof xhr.response === 'object') {\r\n\t\t\treturn xhr.response;\r\n\t\t} else if(xhr.response && typeof xhr.response === 'string') {\r\n\t\t\treturn JSON.parse(xhr.response);\r\n\t\t} else if(xhr.responseText) {\r\n\t\t\treturn JSON.parse(xhr.response);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction loadAsset(path, callback, errorCallback) {\r\n\t\tvar response;\r\n\t\tvar xhr = new XMLHttpRequest();\r\n\t\txhr.open('GET', path, true);\r\n\t\t// set responseType after calling open or IE will break.\r\n\t\txhr.responseType = \"json\";\r\n\t    xhr.send();\r\n\t    xhr.onreadystatechange = function () {\r\n\t        if (xhr.readyState == 4) {\r\n\t            if(xhr.status == 200){\r\n\t            \tresponse = formatResponse(xhr);\r\n\t            \tcallback(response);\r\n\t            }else{\r\n\t                try{\r\n\t            \t\tresponse = formatResponse(xhr);\r\n\t            \t\tcallback(response);\r\n\t                }catch(err){\r\n\t                \tif(errorCallback) {\r\n\t                \t\terrorCallback(err);\r\n\t                \t}\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t}\r\n\treturn {\r\n\t\tload: loadAsset\r\n\t}\r\n}())\r\n\nfunction TextAnimatorProperty(textData, renderType, elem){\r\n    this._isFirstFrame = true;\r\n\tthis._hasMaskedPath = false;\r\n\tthis._frameId = -1;\r\n\tthis._textData = textData;\r\n\tthis._renderType = renderType;\r\n    this._elem = elem;\r\n\tthis._animatorsData = createSizedArray(this._textData.a.length);\r\n\tthis._pathData = {};\r\n\tthis._moreOptions = {\r\n\t\talignment: {}\r\n\t};\r\n\tthis.renderedLetters = [];\r\n    this.lettersChangedFlag = false;\r\n    this.initDynamicPropertyContainer(elem);\r\n\r\n}\r\n\r\nTextAnimatorProperty.prototype.searchProperties = function(){\r\n    var i, len = this._textData.a.length, animatorProps;\r\n    var getProp = PropertyFactory.getProp;\r\n    for(i=0;i<len;i+=1){\r\n        animatorProps = this._textData.a[i];\r\n        this._animatorsData[i] = new TextAnimatorDataProperty(this._elem, animatorProps, this);\r\n    }\r\n    if(this._textData.p && 'm' in this._textData.p){\r\n        this._pathData = {\r\n            f: getProp(this._elem,this._textData.p.f,0,0,this),\r\n            l: getProp(this._elem,this._textData.p.l,0,0,this),\r\n            r: this._textData.p.r,\r\n            m: this._elem.maskManager.getMaskProperty(this._textData.p.m)\r\n        };\r\n        this._hasMaskedPath = true;\r\n    } else {\r\n        this._hasMaskedPath = false;\r\n    }\r\n    this._moreOptions.alignment = getProp(this._elem,this._textData.m.a,1,0,this);\r\n};\r\n\r\nTextAnimatorProperty.prototype.getMeasures = function(documentData, lettersChangedFlag){\r\n    this.lettersChangedFlag = lettersChangedFlag;\r\n    if(!this._mdf && !this._isFirstFrame && !lettersChangedFlag && (!this._hasMaskedPath || !this._pathData.m._mdf)) {\r\n        return;\r\n    }\r\n    this._isFirstFrame = false;\r\n    var alignment = this._moreOptions.alignment.v;\r\n    var animators = this._animatorsData;\r\n    var textData = this._textData;\r\n    var matrixHelper = this.mHelper;\r\n    var renderType = this._renderType;\r\n    var renderedLettersCount = this.renderedLetters.length;\r\n    var data = this.data;\r\n    var xPos,yPos;\r\n    var i, len;\r\n    var letters = documentData.l, pathInfo, currentLength, currentPoint, segmentLength, flag, pointInd, segmentInd, prevPoint, points, segments, partialLength, totalLength, perc, tanAngle, mask;\r\n    if(this._hasMaskedPath) {\r\n        mask = this._pathData.m;\r\n        if(!this._pathData.n || this._pathData._mdf){\r\n            var paths = mask.v;\r\n            if(this._pathData.r){\r\n                paths = paths.reverse();\r\n            }\r\n            // TODO: release bezier data cached from previous pathInfo: this._pathData.pi\r\n            pathInfo = {\r\n                tLength: 0,\r\n                segments: []\r\n            };\r\n            len = paths._length - 1;\r\n            var pathData;\r\n            totalLength = 0;\r\n            for (i = 0; i < len; i += 1) {\r\n                pathData = {\r\n                    s: paths.v[i],\r\n                    e: paths.v[i + 1],\r\n                    to: [paths.o[i][0] - paths.v[i][0], paths.o[i][1] - paths.v[i][1]],\r\n                    ti: [paths.i[i + 1][0] - paths.v[i + 1][0], paths.i[i + 1][1] - paths.v[i + 1][1]]\r\n                };\r\n                bez.buildBezierData(pathData);\r\n                pathInfo.tLength += pathData.bezierData.segmentLength;\r\n                pathInfo.segments.push(pathData);\r\n                totalLength += pathData.bezierData.segmentLength;\r\n            }\r\n            i = len;\r\n            if (mask.v.c) {\r\n                pathData = {\r\n                    s: paths.v[i],\r\n                    e: paths.v[0],\r\n                    to: [paths.o[i][0] - paths.v[i][0], paths.o[i][1] - paths.v[i][1]],\r\n                    ti: [paths.i[0][0] - paths.v[0][0], paths.i[0][1] - paths.v[0][1]]\r\n                };\r\n                bez.buildBezierData(pathData);\r\n                pathInfo.tLength += pathData.bezierData.segmentLength;\r\n                pathInfo.segments.push(pathData);\r\n                totalLength += pathData.bezierData.segmentLength;\r\n            }\r\n            this._pathData.pi = pathInfo;\r\n        }\r\n        pathInfo = this._pathData.pi;\r\n\r\n        currentLength = this._pathData.f.v;\r\n        segmentInd = 0;\r\n        pointInd = 1;\r\n        segmentLength = 0;\r\n        flag = true;\r\n        segments = pathInfo.segments;\r\n        if (currentLength < 0 && mask.v.c) {\r\n            if (pathInfo.tLength < Math.abs(currentLength)) {\r\n                currentLength = -Math.abs(currentLength) % pathInfo.tLength;\r\n            }\r\n            segmentInd = segments.length - 1;\r\n            points = segments[segmentInd].bezierData.points;\r\n            pointInd = points.length - 1;\r\n            while (currentLength < 0) {\r\n                currentLength += points[pointInd].partialLength;\r\n                pointInd -= 1;\r\n                if (pointInd < 0) {\r\n                    segmentInd -= 1;\r\n                    points = segments[segmentInd].bezierData.points;\r\n                    pointInd = points.length - 1;\r\n                }\r\n            }\r\n\r\n        }\r\n        points = segments[segmentInd].bezierData.points;\r\n        prevPoint = points[pointInd - 1];\r\n        currentPoint = points[pointInd];\r\n        partialLength = currentPoint.partialLength;\r\n    }\r\n\r\n\r\n    len = letters.length;\r\n    xPos = 0;\r\n    yPos = 0;\r\n    var yOff = documentData.finalSize * 1.2 * 0.714;\r\n    var firstLine = true;\r\n    var animatorProps, animatorSelector;\r\n    var j, jLen;\r\n    var letterValue;\r\n\r\n    jLen = animators.length;\r\n    var lastLetter;\r\n\r\n    var mult, ind = -1, offf, xPathPos, yPathPos;\r\n    var initPathPos = currentLength,initSegmentInd = segmentInd, initPointInd = pointInd, currentLine = -1;\r\n    var elemOpacity;\r\n    var sc,sw,fc,k;\r\n    var lineLength = 0;\r\n    var letterSw, letterSc, letterFc, letterM = '', letterP = this.defaultPropsArray, letterO;\r\n\r\n    //\r\n    if(documentData.j === 2 || documentData.j === 1) {\r\n        var animatorJustifyOffset = 0;\r\n        var animatorFirstCharOffset = 0;\r\n        var justifyOffsetMult = documentData.j === 2 ? -0.5 : -1;\r\n        var lastIndex = 0;\r\n        var isNewLine = true;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n            if (letters[i].n) {\r\n                if(animatorJustifyOffset) {\r\n                    animatorJustifyOffset += animatorFirstCharOffset;\r\n                }\r\n                while (lastIndex < i) {\r\n                    letters[lastIndex].animatorJustifyOffset = animatorJustifyOffset;\r\n                    lastIndex += 1;\r\n                }\r\n                animatorJustifyOffset = 0;\r\n                isNewLine = true;\r\n            } else {\r\n                for (j = 0; j < jLen; j += 1) {\r\n                    animatorProps = animators[j].a;\r\n                    if (animatorProps.t.propType) {\r\n                        if (isNewLine && documentData.j === 2) {\r\n                            animatorFirstCharOffset += animatorProps.t.v * justifyOffsetMult;\r\n                        }\r\n                        animatorSelector = animators[j].s;\r\n                        mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n                        if (mult.length) {\r\n                            animatorJustifyOffset += animatorProps.t.v*mult[0] * justifyOffsetMult;\r\n                        } else {\r\n                            animatorJustifyOffset += animatorProps.t.v*mult * justifyOffsetMult;\r\n                        }\r\n                    }\r\n                }\r\n                isNewLine = false;\r\n            }\r\n        }\r\n        if(animatorJustifyOffset) {\r\n            animatorJustifyOffset += animatorFirstCharOffset;\r\n        }\r\n        while(lastIndex < i) {\r\n            letters[lastIndex].animatorJustifyOffset = animatorJustifyOffset;\r\n            lastIndex += 1;\r\n        }\r\n    }\r\n    //\r\n\r\n    for( i = 0; i < len; i += 1) {\r\n\r\n        matrixHelper.reset();\r\n        elemOpacity = 1;\r\n        if(letters[i].n) {\r\n            xPos = 0;\r\n            yPos += documentData.yOffset;\r\n            yPos += firstLine ? 1 : 0;\r\n            currentLength = initPathPos ;\r\n            firstLine = false;\r\n            lineLength = 0;\r\n            if(this._hasMaskedPath) {\r\n                segmentInd = initSegmentInd;\r\n                pointInd = initPointInd;\r\n                points = segments[segmentInd].bezierData.points;\r\n                prevPoint = points[pointInd - 1];\r\n                currentPoint = points[pointInd];\r\n                partialLength = currentPoint.partialLength;\r\n                segmentLength = 0;\r\n            }\r\n            letterO = letterSw = letterFc = letterM = '';\r\n            letterP = this.defaultPropsArray;\r\n        }else{\r\n            if(this._hasMaskedPath) {\r\n                if(currentLine !== letters[i].line){\r\n                    switch(documentData.j){\r\n                        case 1:\r\n                            currentLength += totalLength - documentData.lineWidths[letters[i].line];\r\n                            break;\r\n                        case 2:\r\n                            currentLength += (totalLength - documentData.lineWidths[letters[i].line])/2;\r\n                            break;\r\n                    }\r\n                    currentLine = letters[i].line;\r\n                }\r\n                if (ind !== letters[i].ind) {\r\n                    if (letters[ind]) {\r\n                        currentLength += letters[ind].extra;\r\n                    }\r\n                    currentLength += letters[i].an / 2;\r\n                    ind = letters[i].ind;\r\n                }\r\n                currentLength += alignment[0] * letters[i].an / 200;\r\n                var animatorOffset = 0;\r\n                for (j = 0; j < jLen; j += 1) {\r\n                    animatorProps = animators[j].a;\r\n                    if (animatorProps.p.propType) {\r\n                        animatorSelector = animators[j].s;\r\n                        mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n                        if(mult.length){\r\n                            animatorOffset += animatorProps.p.v[0] * mult[0];\r\n                        } else{\r\n                            animatorOffset += animatorProps.p.v[0] * mult;\r\n                        }\r\n\r\n                    }\r\n                    if (animatorProps.a.propType) {\r\n                        animatorSelector = animators[j].s;\r\n                        mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n                        if(mult.length){\r\n                            animatorOffset += animatorProps.a.v[0] * mult[0];\r\n                        } else{\r\n                            animatorOffset += animatorProps.a.v[0] * mult;\r\n                        }\r\n\r\n                    }\r\n                }\r\n                flag = true;\r\n                while (flag) {\r\n                    if (segmentLength + partialLength >= currentLength + animatorOffset || !points) {\r\n                        perc = (currentLength + animatorOffset - segmentLength) / currentPoint.partialLength;\r\n                        xPathPos = prevPoint.point[0] + (currentPoint.point[0] - prevPoint.point[0]) * perc;\r\n                        yPathPos = prevPoint.point[1] + (currentPoint.point[1] - prevPoint.point[1]) * perc;\r\n                        matrixHelper.translate(-alignment[0]*letters[i].an/200, -(alignment[1] * yOff / 100));\r\n                        flag = false;\r\n                    } else if (points) {\r\n                        segmentLength += currentPoint.partialLength;\r\n                        pointInd += 1;\r\n                        if (pointInd >= points.length) {\r\n                            pointInd = 0;\r\n                            segmentInd += 1;\r\n                            if (!segments[segmentInd]) {\r\n                                if (mask.v.c) {\r\n                                    pointInd = 0;\r\n                                    segmentInd = 0;\r\n                                    points = segments[segmentInd].bezierData.points;\r\n                                } else {\r\n                                    segmentLength -= currentPoint.partialLength;\r\n                                    points = null;\r\n                                }\r\n                            } else {\r\n                                points = segments[segmentInd].bezierData.points;\r\n                            }\r\n                        }\r\n                        if (points) {\r\n                            prevPoint = currentPoint;\r\n                            currentPoint = points[pointInd];\r\n                            partialLength = currentPoint.partialLength;\r\n                        }\r\n                    }\r\n                }\r\n                offf = letters[i].an / 2 - letters[i].add;\r\n                matrixHelper.translate(-offf, 0, 0);\r\n            } else {\r\n                offf = letters[i].an/2 - letters[i].add;\r\n                matrixHelper.translate(-offf,0,0);\r\n\r\n                // Grouping alignment\r\n                matrixHelper.translate(-alignment[0]*letters[i].an/200, -alignment[1]*yOff/100, 0);\r\n            }\r\n\r\n            lineLength += letters[i].l/2;\r\n            for(j=0;j<jLen;j+=1){\r\n                animatorProps = animators[j].a;\r\n                if (animatorProps.t.propType) {\r\n                    animatorSelector = animators[j].s;\r\n                    mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n                    //This condition is to prevent applying tracking to first character in each line. Might be better to use a boolean \"isNewLine\"\r\n                    if(xPos !== 0 || documentData.j !== 0) {\r\n                        if(this._hasMaskedPath) {\r\n                            if(mult.length) {\r\n                                currentLength += animatorProps.t.v*mult[0];\r\n                            } else {\r\n                                currentLength += animatorProps.t.v*mult;\r\n                            }\r\n                        }else{\r\n                            if(mult.length) {\r\n                                xPos += animatorProps.t.v*mult[0];\r\n                            } else {\r\n                                xPos += animatorProps.t.v*mult;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            lineLength += letters[i].l/2;\r\n            if(documentData.strokeWidthAnim) {\r\n                sw = documentData.sw || 0;\r\n            }\r\n            if(documentData.strokeColorAnim) {\r\n                if(documentData.sc){\r\n                    sc = [documentData.sc[0], documentData.sc[1], documentData.sc[2]];\r\n                }else{\r\n                    sc = [0,0,0];\r\n                }\r\n            }\r\n            if(documentData.fillColorAnim && documentData.fc) {\r\n                fc = [documentData.fc[0], documentData.fc[1], documentData.fc[2]];\r\n            }\r\n            for(j=0;j<jLen;j+=1){\r\n                animatorProps = animators[j].a;\r\n                if (animatorProps.a.propType) {\r\n                    animatorSelector = animators[j].s;\r\n                    mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n\r\n                    if(mult.length){\r\n                        matrixHelper.translate(-animatorProps.a.v[0]*mult[0], -animatorProps.a.v[1]*mult[1], animatorProps.a.v[2]*mult[2]);\r\n                    } else {\r\n                        matrixHelper.translate(-animatorProps.a.v[0]*mult, -animatorProps.a.v[1]*mult, animatorProps.a.v[2]*mult);\r\n                    }\r\n                }\r\n            }\r\n            for(j=0;j<jLen;j+=1){\r\n                animatorProps = animators[j].a;\r\n                if (animatorProps.s.propType) {\r\n                    animatorSelector = animators[j].s;\r\n                    mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n                    if(mult.length){\r\n                        matrixHelper.scale(1+((animatorProps.s.v[0]-1)*mult[0]),1+((animatorProps.s.v[1]-1)*mult[1]),1);\r\n                    } else {\r\n                        matrixHelper.scale(1+((animatorProps.s.v[0]-1)*mult),1+((animatorProps.s.v[1]-1)*mult),1);\r\n                    }\r\n                }\r\n            }\r\n            for(j=0;j<jLen;j+=1) {\r\n                animatorProps = animators[j].a;\r\n                animatorSelector = animators[j].s;\r\n                mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n                if (animatorProps.sk.propType) {\r\n                    if(mult.length) {\r\n                        matrixHelper.skewFromAxis(-animatorProps.sk.v * mult[0], animatorProps.sa.v * mult[1]);\r\n                    } else {\r\n                        matrixHelper.skewFromAxis(-animatorProps.sk.v * mult, animatorProps.sa.v * mult);\r\n                    }\r\n                }\r\n                if (animatorProps.r.propType) {\r\n                    if(mult.length) {\r\n                        matrixHelper.rotateZ(-animatorProps.r.v * mult[2]);\r\n                    } else {\r\n                        matrixHelper.rotateZ(-animatorProps.r.v * mult);\r\n                    }\r\n                }\r\n                if (animatorProps.ry.propType) {\r\n\r\n                    if(mult.length) {\r\n                        matrixHelper.rotateY(animatorProps.ry.v*mult[1]);\r\n                    }else{\r\n                        matrixHelper.rotateY(animatorProps.ry.v*mult);\r\n                    }\r\n                }\r\n                if (animatorProps.rx.propType) {\r\n                    if(mult.length) {\r\n                        matrixHelper.rotateX(animatorProps.rx.v*mult[0]);\r\n                    } else {\r\n                        matrixHelper.rotateX(animatorProps.rx.v*mult);\r\n                    }\r\n                }\r\n                if (animatorProps.o.propType) {\r\n                    if(mult.length) {\r\n                        elemOpacity += ((animatorProps.o.v)*mult[0] - elemOpacity)*mult[0];\r\n                    } else {\r\n                        elemOpacity += ((animatorProps.o.v)*mult - elemOpacity)*mult;\r\n                    }\r\n                }\r\n                if (documentData.strokeWidthAnim && animatorProps.sw.propType) {\r\n                    if(mult.length) {\r\n                        sw += animatorProps.sw.v*mult[0];\r\n                    } else {\r\n                        sw += animatorProps.sw.v*mult;\r\n                    }\r\n                }\r\n                if (documentData.strokeColorAnim && animatorProps.sc.propType) {\r\n                    for(k=0;k<3;k+=1){\r\n                        if(mult.length) {\r\n                            sc[k] = sc[k] + (animatorProps.sc.v[k] - sc[k])*mult[0];\r\n                        } else {\r\n                            sc[k] = sc[k] + (animatorProps.sc.v[k] - sc[k])*mult;\r\n                        }\r\n                    }\r\n                }\r\n                if (documentData.fillColorAnim && documentData.fc) {\r\n                    if(animatorProps.fc.propType){\r\n                        for(k=0;k<3;k+=1){\r\n                            if(mult.length) {\r\n                                fc[k] = fc[k] + (animatorProps.fc.v[k] - fc[k])*mult[0];\r\n                            } else {\r\n                                fc[k] = fc[k] + (animatorProps.fc.v[k] - fc[k])*mult;\r\n                            }\r\n                        }\r\n                    }\r\n                    if(animatorProps.fh.propType){\r\n                        if(mult.length) {\r\n                            fc = addHueToRGB(fc,animatorProps.fh.v*mult[0]);\r\n                        } else {\r\n                            fc = addHueToRGB(fc,animatorProps.fh.v*mult);\r\n                        }\r\n                    }\r\n                    if(animatorProps.fs.propType){\r\n                        if(mult.length) {\r\n                            fc = addSaturationToRGB(fc,animatorProps.fs.v*mult[0]);\r\n                        } else {\r\n                            fc = addSaturationToRGB(fc,animatorProps.fs.v*mult);\r\n                        }\r\n                    }\r\n                    if(animatorProps.fb.propType){\r\n                        if(mult.length) {\r\n                            fc = addBrightnessToRGB(fc,animatorProps.fb.v*mult[0]);\r\n                        } else {\r\n                            fc = addBrightnessToRGB(fc,animatorProps.fb.v*mult);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            for(j=0;j<jLen;j+=1){\r\n                animatorProps = animators[j].a;\r\n\r\n                if (animatorProps.p.propType) {\r\n                    animatorSelector = animators[j].s;\r\n                    mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n                    if(this._hasMaskedPath) {\r\n                        if(mult.length) {\r\n                            matrixHelper.translate(0, animatorProps.p.v[1] * mult[0], -animatorProps.p.v[2] * mult[1]);\r\n                        } else {\r\n                            matrixHelper.translate(0, animatorProps.p.v[1] * mult, -animatorProps.p.v[2] * mult);\r\n                        }\r\n                    }else{\r\n                        if(mult.length) {\r\n                            matrixHelper.translate(animatorProps.p.v[0] * mult[0], animatorProps.p.v[1] * mult[1], -animatorProps.p.v[2] * mult[2]);\r\n                        } else {\r\n                            matrixHelper.translate(animatorProps.p.v[0] * mult, animatorProps.p.v[1] * mult, -animatorProps.p.v[2] * mult);\r\n                        \r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if(documentData.strokeWidthAnim){\r\n                letterSw = sw < 0 ? 0 : sw;\r\n            }\r\n            if(documentData.strokeColorAnim){\r\n                letterSc = 'rgb('+Math.round(sc[0]*255)+','+Math.round(sc[1]*255)+','+Math.round(sc[2]*255)+')';\r\n            }\r\n            if(documentData.fillColorAnim && documentData.fc){\r\n                letterFc = 'rgb('+Math.round(fc[0]*255)+','+Math.round(fc[1]*255)+','+Math.round(fc[2]*255)+')';\r\n            }\r\n\r\n            if(this._hasMaskedPath) {\r\n                matrixHelper.translate(0,-documentData.ls);\r\n\r\n                matrixHelper.translate(0, alignment[1]*yOff/100 + yPos,0);\r\n                if (textData.p.p) {\r\n                    tanAngle = (currentPoint.point[1] - prevPoint.point[1]) / (currentPoint.point[0] - prevPoint.point[0]);\r\n                    var rot = Math.atan(tanAngle) * 180 / Math.PI;\r\n                    if (currentPoint.point[0] < prevPoint.point[0]) {\r\n                        rot += 180;\r\n                    }\r\n                    matrixHelper.rotate(-rot * Math.PI / 180);\r\n                }\r\n                matrixHelper.translate(xPathPos, yPathPos, 0);\r\n                currentLength -= alignment[0]*letters[i].an/200;\r\n                if(letters[i+1] && ind !== letters[i+1].ind){\r\n                    currentLength += letters[i].an / 2;\r\n                    currentLength += documentData.tr/1000*documentData.finalSize;\r\n                }\r\n            }else{\r\n\r\n                matrixHelper.translate(xPos,yPos,0);\r\n\r\n                if(documentData.ps){\r\n                    //matrixHelper.translate(documentData.ps[0],documentData.ps[1],0);\r\n                    matrixHelper.translate(documentData.ps[0],documentData.ps[1] + documentData.ascent,0);\r\n                }\r\n                switch(documentData.j){\r\n                    case 1:\r\n                        matrixHelper.translate(letters[i].animatorJustifyOffset + documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[letters[i].line]),0,0);\r\n                        break;\r\n                    case 2:\r\n                        matrixHelper.translate(letters[i].animatorJustifyOffset + documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[letters[i].line])/2,0,0);\r\n                        break;\r\n                }\r\n                matrixHelper.translate(0,-documentData.ls);\r\n                matrixHelper.translate(offf,0,0);\r\n                matrixHelper.translate(alignment[0]*letters[i].an/200,alignment[1]*yOff/100,0);\r\n                xPos += letters[i].l + documentData.tr/1000*documentData.finalSize;\r\n            }\r\n            if(renderType === 'html'){\r\n                letterM = matrixHelper.toCSS();\r\n            }else if(renderType === 'svg'){\r\n                letterM = matrixHelper.to2dCSS();\r\n            }else{\r\n                letterP = [matrixHelper.props[0],matrixHelper.props[1],matrixHelper.props[2],matrixHelper.props[3],matrixHelper.props[4],matrixHelper.props[5],matrixHelper.props[6],matrixHelper.props[7],matrixHelper.props[8],matrixHelper.props[9],matrixHelper.props[10],matrixHelper.props[11],matrixHelper.props[12],matrixHelper.props[13],matrixHelper.props[14],matrixHelper.props[15]];\r\n            }\r\n            letterO = elemOpacity;\r\n        }\r\n\r\n        if(renderedLettersCount <= i) {\r\n            letterValue = new LetterProps(letterO,letterSw,letterSc,letterFc,letterM,letterP);\r\n            this.renderedLetters.push(letterValue);\r\n            renderedLettersCount += 1;\r\n            this.lettersChangedFlag = true;\r\n        } else {\r\n            letterValue = this.renderedLetters[i];\r\n            this.lettersChangedFlag = letterValue.update(letterO, letterSw, letterSc, letterFc, letterM, letterP) || this.lettersChangedFlag;\r\n        }\r\n    }\r\n};\r\n\r\nTextAnimatorProperty.prototype.getValue = function(){\r\n\tif(this._elem.globalData.frameId === this._frameId){\r\n        return;\r\n    }\r\n    this._frameId = this._elem.globalData.frameId;\r\n    this.iterateDynamicProperties();\r\n};\r\n\r\nTextAnimatorProperty.prototype.mHelper = new Matrix();\r\nTextAnimatorProperty.prototype.defaultPropsArray = [];\r\nextendPrototype([DynamicPropertyContainer], TextAnimatorProperty);\nfunction TextAnimatorDataProperty(elem, animatorProps, container) {\r\n\tvar defaultData = {propType:false};\r\n\tvar getProp = PropertyFactory.getProp;\r\n\tvar textAnimator_animatables = animatorProps.a;\r\n\tthis.a = {\r\n\t\tr: textAnimator_animatables.r ? getProp(elem, textAnimator_animatables.r, 0, degToRads, container) : defaultData,\r\n\t\trx: textAnimator_animatables.rx ? getProp(elem, textAnimator_animatables.rx, 0, degToRads, container) : defaultData,\r\n\t\try: textAnimator_animatables.ry ? getProp(elem, textAnimator_animatables.ry, 0, degToRads, container) : defaultData,\r\n\t\tsk: textAnimator_animatables.sk ? getProp(elem, textAnimator_animatables.sk, 0, degToRads, container) : defaultData,\r\n\t\tsa: textAnimator_animatables.sa ? getProp(elem, textAnimator_animatables.sa, 0, degToRads, container) : defaultData,\r\n\t\ts: textAnimator_animatables.s ? getProp(elem, textAnimator_animatables.s, 1, 0.01, container) : defaultData,\r\n\t\ta: textAnimator_animatables.a ? getProp(elem, textAnimator_animatables.a, 1, 0, container) : defaultData,\r\n\t\to: textAnimator_animatables.o ? getProp(elem, textAnimator_animatables.o, 0, 0.01, container) : defaultData,\r\n\t\tp: textAnimator_animatables.p ? getProp(elem,textAnimator_animatables.p, 1, 0, container) : defaultData,\r\n\t\tsw: textAnimator_animatables.sw ? getProp(elem, textAnimator_animatables.sw, 0, 0, container) : defaultData,\r\n\t\tsc: textAnimator_animatables.sc ? getProp(elem, textAnimator_animatables.sc, 1, 0, container) : defaultData,\r\n\t\tfc: textAnimator_animatables.fc ? getProp(elem, textAnimator_animatables.fc, 1, 0, container) : defaultData,\r\n\t\tfh: textAnimator_animatables.fh ? getProp(elem, textAnimator_animatables.fh, 0, 0, container) : defaultData,\r\n\t\tfs: textAnimator_animatables.fs ? getProp(elem, textAnimator_animatables.fs, 0, 0.01, container) : defaultData,\r\n\t\tfb: textAnimator_animatables.fb ? getProp(elem, textAnimator_animatables.fb, 0, 0.01, container) : defaultData,\r\n\t\tt: textAnimator_animatables.t ? getProp(elem, textAnimator_animatables.t, 0, 0, container) : defaultData\r\n\t};\r\n\r\n\tthis.s = TextSelectorProp.getTextSelectorProp(elem,animatorProps.s, container);\r\n    this.s.t = animatorProps.s.t;\r\n}\nfunction LetterProps(o, sw, sc, fc, m, p){\r\n    this.o = o;\r\n    this.sw = sw;\r\n    this.sc = sc;\r\n    this.fc = fc;\r\n    this.m = m;\r\n    this.p = p;\r\n    this._mdf = {\r\n    \to: true,\r\n    \tsw: !!sw,\r\n    \tsc: !!sc,\r\n    \tfc: !!fc,\r\n    \tm: true,\r\n    \tp: true\r\n    };\r\n}\r\n\r\nLetterProps.prototype.update = function(o, sw, sc, fc, m, p) {\r\n\tthis._mdf.o = false;\r\n\tthis._mdf.sw = false;\r\n\tthis._mdf.sc = false;\r\n\tthis._mdf.fc = false;\r\n\tthis._mdf.m = false;\r\n\tthis._mdf.p = false;\r\n\tvar updated = false;\r\n\r\n\tif(this.o !== o) {\r\n\t\tthis.o = o;\r\n\t\tthis._mdf.o = true;\r\n\t\tupdated = true;\r\n\t}\r\n\tif(this.sw !== sw) {\r\n\t\tthis.sw = sw;\r\n\t\tthis._mdf.sw = true;\r\n\t\tupdated = true;\r\n\t}\r\n\tif(this.sc !== sc) {\r\n\t\tthis.sc = sc;\r\n\t\tthis._mdf.sc = true;\r\n\t\tupdated = true;\r\n\t}\r\n\tif(this.fc !== fc) {\r\n\t\tthis.fc = fc;\r\n\t\tthis._mdf.fc = true;\r\n\t\tupdated = true;\r\n\t}\r\n\tif(this.m !== m) {\r\n\t\tthis.m = m;\r\n\t\tthis._mdf.m = true;\r\n\t\tupdated = true;\r\n\t}\r\n\tif(p.length && (this.p[0] !== p[0] || this.p[1] !== p[1] || this.p[4] !== p[4] || this.p[5] !== p[5] || this.p[12] !== p[12] || this.p[13] !== p[13])) {\r\n\t\tthis.p = p;\r\n\t\tthis._mdf.p = true;\r\n\t\tupdated = true;\r\n\t}\r\n\treturn updated;\r\n};\nfunction TextProperty(elem, data){\r\n\tthis._frameId = initialDefaultFrame;\r\n\tthis.pv = '';\r\n\tthis.v = '';\r\n\tthis.kf = false;\r\n\tthis._isFirstFrame = true;\r\n\tthis._mdf = false;\r\n    this.data = data;\r\n\tthis.elem = elem;\r\n    this.comp = this.elem.comp;\r\n\tthis.keysIndex = 0;\r\n    this.canResize = false;\r\n    this.minimumFontSize = 1;\r\n    this.effectsSequence = [];\r\n\tthis.currentData = {\r\n\t\tascent: 0,\r\n        boxWidth: this.defaultBoxWidth,\r\n        f: '',\r\n        fStyle: '',\r\n        fWeight: '',\r\n        fc: '',\r\n        j: '',\r\n        justifyOffset: '',\r\n        l: [],\r\n        lh: 0,\r\n        lineWidths: [],\r\n        ls: '',\r\n        of: '',\r\n        s: '',\r\n        sc: '',\r\n        sw: 0,\r\n        t: 0,\r\n        tr: 0,\r\n        sz:0,\r\n        ps:null,\r\n        fillColorAnim: false,\r\n        strokeColorAnim: false,\r\n        strokeWidthAnim: false,\r\n        yOffset: 0,\r\n        finalSize:0,\r\n        finalText:[],\r\n        finalLineHeight: 0,\r\n        __complete: false\r\n\r\n\t};\r\n    this.copyData(this.currentData, this.data.d.k[0].s);\r\n\r\n    if(!this.searchProperty()) {\r\n        this.completeTextData(this.currentData);\r\n    }\r\n}\r\n\r\nTextProperty.prototype.defaultBoxWidth = [0,0];\r\n\r\nTextProperty.prototype.copyData = function(obj, data) {\r\n    for(var s in data) {\r\n        if(data.hasOwnProperty(s)) {\r\n            obj[s] = data[s];\r\n        }\r\n    }\r\n    return obj;\r\n}\r\n\r\nTextProperty.prototype.setCurrentData = function(data){\r\n    if(!data.__complete) {\r\n        this.completeTextData(data);\r\n    }\r\n    this.currentData = data;\r\n    this.currentData.boxWidth = this.currentData.boxWidth || this.defaultBoxWidth;\r\n    this._mdf = true;\r\n};\r\n\r\nTextProperty.prototype.searchProperty = function() {\r\n    return this.searchKeyframes();\r\n};\r\n\r\nTextProperty.prototype.searchKeyframes = function() {\r\n    this.kf = this.data.d.k.length > 1;\r\n    if(this.kf) {\r\n        this.addEffect(this.getKeyframeValue.bind(this));\r\n    }\r\n    return this.kf;\r\n}\r\n\r\nTextProperty.prototype.addEffect = function(effectFunction) {\r\n\tthis.effectsSequence.push(effectFunction);\r\n    this.elem.addDynamicProperty(this);\r\n};\r\n\r\nTextProperty.prototype.getValue = function(_finalValue) {\r\n    if((this.elem.globalData.frameId === this.frameId || !this.effectsSequence.length) && !_finalValue) {\r\n        return;\r\n    }\r\n    var currentValue = this.currentData;\r\n    var currentIndex = this.keysIndex;\r\n    if(this.lock) {\r\n        this.setCurrentData(this.currentData, currentTextValue);\r\n        return;\r\n    }\r\n    this.lock = true;\r\n    this._mdf = false;\r\n    var multipliedValue;\r\n    var i, len = this.effectsSequence.length;\r\n    var finalValue = _finalValue || this.data.d.k[this.keysIndex].s;\r\n    for(i = 0; i < len; i += 1) {\r\n        //Checking if index changed to prevent creating a new object every time the expression updates.\r\n        if(currentIndex !== this.keysIndex) {\r\n            finalValue = this.effectsSequence[i](finalValue, finalValue.t);\r\n        } else {\r\n            finalValue = this.effectsSequence[i](this.currentData, finalValue.t);\r\n        }\r\n    }\r\n    if(currentValue !== finalValue) {\r\n        this.setCurrentData(finalValue);\r\n    }\r\n    this.pv = this.v = this.currentData;\r\n    this.lock = false;\r\n    this.frameId = this.elem.globalData.frameId;\r\n}\r\n\r\nTextProperty.prototype.getKeyframeValue = function() {\r\n    var textKeys = this.data.d.k, textDocumentData;\r\n    var frameNum = this.elem.comp.renderedFrame;\r\n    var i = 0, len = textKeys.length;\r\n    while(i <= len - 1) {\r\n        textDocumentData = textKeys[i].s;\r\n        if(i === len - 1 || textKeys[i+1].t > frameNum){\r\n            break;\r\n        }\r\n        i += 1;\r\n    }\r\n    if(this.keysIndex !== i) {\r\n        this.keysIndex = i;\r\n    }\r\n    return this.data.d.k[this.keysIndex].s;\r\n};\r\n\r\nTextProperty.prototype.buildFinalText = function(text) {\r\n    var combinedCharacters = FontManager.getCombinedCharacterCodes();\r\n    var charactersArray = [];\r\n    var i = 0, len = text.length;\r\n    while (i < len) {\r\n        if (combinedCharacters.indexOf(text.charCodeAt(i)) !== -1) {\r\n            charactersArray[charactersArray.length - 1] += text.charAt(i);\r\n        } else {\r\n            charactersArray.push(text.charAt(i));\r\n        }\r\n        i += 1;\r\n    }\r\n    return charactersArray;\r\n}\r\n\r\nTextProperty.prototype.completeTextData = function(documentData) {\r\n    documentData.__complete = true;\r\n    var fontManager = this.elem.globalData.fontManager;\r\n    var data = this.data;\r\n    var letters = [];\r\n    var i, len;\r\n    var newLineFlag, index = 0, val;\r\n    var anchorGrouping = data.m.g;\r\n    var currentSize = 0, currentPos = 0, currentLine = 0, lineWidths = [];\r\n    var lineWidth = 0;\r\n    var maxLineWidth = 0;\r\n    var j, jLen;\r\n    var fontData = fontManager.getFontByName(documentData.f);\r\n    var charData, cLength = 0;\r\n    var styles = fontData.fStyle ? fontData.fStyle.split(' ') : [];\r\n\r\n    var fWeight = 'normal', fStyle = 'normal';\r\n    len = styles.length;\r\n    var styleName;\r\n    for(i=0;i<len;i+=1){\r\n        styleName = styles[i].toLowerCase();\r\n        switch(styleName) {\r\n            case 'italic':\r\n            fStyle = 'italic';\r\n            break;\r\n            case 'bold':\r\n            fWeight = '700';\r\n            break;\r\n            case 'black':\r\n            fWeight = '900';\r\n            break;\r\n            case 'medium':\r\n            fWeight = '500';\r\n            break;\r\n            case 'regular':\r\n            case 'normal':\r\n            fWeight = '400';\r\n            break;\r\n            case 'light':\r\n            case 'thin':\r\n            fWeight = '200';\r\n            break;\r\n        }\r\n    }\r\n    documentData.fWeight = fontData.fWeight || fWeight;\r\n    documentData.fStyle = fStyle;\r\n    len = documentData.t.length;\r\n    documentData.finalSize = documentData.s;\r\n    documentData.finalText = this.buildFinalText(documentData.t);\r\n    documentData.finalLineHeight = documentData.lh;\r\n    var trackingOffset = documentData.tr/1000*documentData.finalSize;\r\n    if(documentData.sz){\r\n        var flag = true;\r\n        var boxWidth = documentData.sz[0];\r\n        var boxHeight = documentData.sz[1];\r\n        var currentHeight, finalText;\r\n        while(flag) {\r\n            finalText = this.buildFinalText(documentData.t);\r\n            currentHeight = 0;\r\n            lineWidth = 0;\r\n            len = finalText.length;\r\n            trackingOffset = documentData.tr/1000*documentData.finalSize;\r\n            var lastSpaceIndex = -1;\r\n            for(i=0;i<len;i+=1){\r\n                newLineFlag = false;\r\n                if(finalText[i] === ' '){\r\n                    lastSpaceIndex = i;\r\n                }else if(finalText[i].charCodeAt(0) === 13){\r\n                    lineWidth = 0;\r\n                    newLineFlag = true;\r\n                    currentHeight += documentData.finalLineHeight || documentData.finalSize*1.2;\r\n                }\r\n                if(fontManager.chars){\r\n                    charData = fontManager.getCharData(finalText[i], fontData.fStyle, fontData.fFamily);\r\n                    cLength = newLineFlag ? 0 : charData.w*documentData.finalSize/100;\r\n                }else{\r\n                    //tCanvasHelper.font = documentData.s + 'px '+ fontData.fFamily;\r\n                    cLength = fontManager.measureText(finalText[i], documentData.f, documentData.finalSize);\r\n                }\r\n                if(lineWidth + cLength > boxWidth && finalText[i] !== ' '){\r\n                    if(lastSpaceIndex === -1){\r\n                        len += 1;\r\n                    } else {\r\n                        i = lastSpaceIndex;\r\n                    }\r\n                    currentHeight += documentData.finalLineHeight || documentData.finalSize*1.2;\r\n                    finalText.splice(i, lastSpaceIndex === i ? 1 : 0,\"\\r\");\r\n                    //finalText = finalText.substr(0,i) + \"\\r\" + finalText.substr(i === lastSpaceIndex ? i + 1 : i);\r\n                    lastSpaceIndex = -1;\r\n                    lineWidth = 0;\r\n                }else {\r\n                    lineWidth += cLength;\r\n                    lineWidth += trackingOffset;\r\n                }\r\n            }\r\n            currentHeight += fontData.ascent*documentData.finalSize/100;\r\n            if(this.canResize && documentData.finalSize > this.minimumFontSize && boxHeight < currentHeight) {\r\n                documentData.finalSize -= 1;\r\n                documentData.finalLineHeight = documentData.finalSize * documentData.lh / documentData.s;\r\n            } else {\r\n                documentData.finalText = finalText;\r\n                len = documentData.finalText.length;\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n    }\r\n    lineWidth = - trackingOffset;\r\n    cLength = 0;\r\n    var uncollapsedSpaces = 0;\r\n    var currentChar;\r\n    for (i = 0;i < len ;i += 1) {\r\n        newLineFlag = false;\r\n        currentChar = documentData.finalText[i];\r\n        if(currentChar === ' '){\r\n            val = '\\u00A0';\r\n        }else if(currentChar.charCodeAt(0) === 13){\r\n            uncollapsedSpaces = 0;\r\n            lineWidths.push(lineWidth);\r\n            maxLineWidth = lineWidth > maxLineWidth ? lineWidth : maxLineWidth;\r\n            lineWidth = - 2 * trackingOffset;\r\n            val = '';\r\n            newLineFlag = true;\r\n            currentLine += 1;\r\n        }else{\r\n            val = documentData.finalText[i];\r\n        }\r\n        if(fontManager.chars){\r\n            charData = fontManager.getCharData(currentChar, fontData.fStyle, fontManager.getFontByName(documentData.f).fFamily);\r\n            cLength = newLineFlag ? 0 : charData.w*documentData.finalSize/100;\r\n        }else{\r\n            //var charWidth = fontManager.measureText(val, documentData.f, documentData.finalSize);\r\n            //tCanvasHelper.font = documentData.finalSize + 'px '+ fontManager.getFontByName(documentData.f).fFamily;\r\n            cLength = fontManager.measureText(val, documentData.f, documentData.finalSize);\r\n        }\r\n\r\n        //\r\n        if(currentChar === ' '){\r\n            uncollapsedSpaces += cLength + trackingOffset;\r\n        } else {\r\n            lineWidth += cLength + trackingOffset + uncollapsedSpaces;\r\n            uncollapsedSpaces = 0;\r\n        }\r\n        letters.push({l:cLength,an:cLength,add:currentSize,n:newLineFlag, anIndexes:[], val: val, line: currentLine, animatorJustifyOffset: 0});\r\n        if(anchorGrouping == 2){\r\n            currentSize += cLength;\r\n            if(val === '' || val === '\\u00A0' || i === len - 1){\r\n                if(val === '' || val === '\\u00A0'){\r\n                    currentSize -= cLength;\r\n                }\r\n                while(currentPos<=i){\r\n                    letters[currentPos].an = currentSize;\r\n                    letters[currentPos].ind = index;\r\n                    letters[currentPos].extra = cLength;\r\n                    currentPos += 1;\r\n                }\r\n                index += 1;\r\n                currentSize = 0;\r\n            }\r\n        }else if(anchorGrouping == 3){\r\n            currentSize += cLength;\r\n            if(val === '' || i === len - 1){\r\n                if(val === ''){\r\n                    currentSize -= cLength;\r\n                }\r\n                while(currentPos<=i){\r\n                    letters[currentPos].an = currentSize;\r\n                    letters[currentPos].ind = index;\r\n                    letters[currentPos].extra = cLength;\r\n                    currentPos += 1;\r\n                }\r\n                currentSize = 0;\r\n                index += 1;\r\n            }\r\n        }else{\r\n            letters[index].ind = index;\r\n            letters[index].extra = 0;\r\n            index += 1;\r\n        }\r\n    }\r\n    documentData.l = letters;\r\n    maxLineWidth = lineWidth > maxLineWidth ? lineWidth : maxLineWidth;\r\n    lineWidths.push(lineWidth);\r\n    if(documentData.sz){\r\n        documentData.boxWidth = documentData.sz[0];\r\n        documentData.justifyOffset = 0;\r\n    }else{\r\n        documentData.boxWidth = maxLineWidth;\r\n        switch(documentData.j){\r\n            case 1:\r\n                documentData.justifyOffset = - documentData.boxWidth;\r\n                break;\r\n            case 2:\r\n                documentData.justifyOffset = - documentData.boxWidth/2;\r\n                break;\r\n            default:\r\n                documentData.justifyOffset = 0;\r\n        }\r\n    }\r\n    documentData.lineWidths = lineWidths;\r\n\r\n    var animators = data.a, animatorData, letterData;\r\n    jLen = animators.length;\r\n    var based, ind, indexes = [];\r\n    for(j=0;j<jLen;j+=1){\r\n        animatorData = animators[j];\r\n        if(animatorData.a.sc){\r\n            documentData.strokeColorAnim = true;\r\n        }\r\n        if(animatorData.a.sw){\r\n            documentData.strokeWidthAnim = true;\r\n        }\r\n        if(animatorData.a.fc || animatorData.a.fh || animatorData.a.fs || animatorData.a.fb){\r\n            documentData.fillColorAnim = true;\r\n        }\r\n        ind = 0;\r\n        based = animatorData.s.b;\r\n        for(i=0;i<len;i+=1){\r\n            letterData = letters[i];\r\n            letterData.anIndexes[j] = ind;\r\n            if((based == 1 && letterData.val !== '') || (based == 2 && letterData.val !== '' && letterData.val !== '\\u00A0') || (based == 3 && (letterData.n || letterData.val == '\\u00A0' || i == len - 1)) || (based == 4 && (letterData.n || i == len - 1))){\r\n                if(animatorData.s.rn === 1){\r\n                    indexes.push(ind);\r\n                }\r\n                ind += 1;\r\n            }\r\n        }\r\n        data.a[j].s.totalChars = ind;\r\n        var currentInd = -1, newInd;\r\n        if(animatorData.s.rn === 1){\r\n            for(i = 0; i < len; i += 1){\r\n                letterData = letters[i];\r\n                if(currentInd != letterData.anIndexes[j]){\r\n                    currentInd = letterData.anIndexes[j];\r\n                    newInd = indexes.splice(Math.floor(Math.random()*indexes.length),1)[0];\r\n                }\r\n                letterData.anIndexes[j] = newInd;\r\n            }\r\n        }\r\n    }\r\n    documentData.yOffset = documentData.finalLineHeight || documentData.finalSize*1.2;\r\n    documentData.ls = documentData.ls || 0;\r\n    documentData.ascent = fontData.ascent*documentData.finalSize/100;\r\n};\r\n\r\nTextProperty.prototype.updateDocumentData = function(newData, index) {\r\n\tindex = index === undefined ? this.keysIndex : index;\r\n    var dData = this.copyData({}, this.data.d.k[index].s);\r\n    dData = this.copyData(dData, newData);\r\n    this.data.d.k[index].s = dData;\r\n    this.recalculate(index);\r\n};\r\n\r\nTextProperty.prototype.recalculate = function(index) {\r\n    var dData = this.data.d.k[index].s;\r\n    dData.__complete = false;\r\n    this.keysIndex = 0;\r\n    this._isFirstFrame = true;\r\n    this.getValue(dData);\r\n}\r\n\r\nTextProperty.prototype.canResizeFont = function(_canResize) {\r\n    this.canResize = _canResize;\r\n    this.recalculate(this.keysIndex);\r\n};\r\n\r\nTextProperty.prototype.setMinimumFontSize = function(_fontValue) {\r\n    this.minimumFontSize = Math.floor(_fontValue) || 1;\r\n    this.recalculate(this.keysIndex);\r\n};\r\n\nvar TextSelectorProp = (function(){\r\n    var max = Math.max;\r\n    var min = Math.min;\r\n    var floor = Math.floor;\r\n\r\n    function TextSelectorProp(elem,data){\r\n        this._currentTextLength = -1;\r\n        this.k = false;\r\n        this.data = data;\r\n        this.elem = elem;\r\n        this.comp = elem.comp;\r\n        this.finalS = 0;\r\n        this.finalE = 0;\r\n        this.initDynamicPropertyContainer(elem);\r\n        this.s = PropertyFactory.getProp(elem,data.s || {k:0},0,0,this);\r\n        if('e' in data){\r\n            this.e = PropertyFactory.getProp(elem,data.e,0,0,this);\r\n        }else{\r\n            this.e = {v:100};\r\n        }\r\n        this.o = PropertyFactory.getProp(elem,data.o || {k:0},0,0,this);\r\n        this.xe = PropertyFactory.getProp(elem,data.xe || {k:0},0,0,this);\r\n        this.ne = PropertyFactory.getProp(elem,data.ne || {k:0},0,0,this);\r\n        this.a = PropertyFactory.getProp(elem,data.a,0,0.01,this);\r\n        if(!this.dynamicProperties.length){\r\n            this.getValue();\r\n        }\r\n    }\r\n\r\n    TextSelectorProp.prototype = {\r\n        getMult: function(ind) {\r\n            if(this._currentTextLength !== this.elem.textProperty.currentData.l.length) {\r\n                this.getValue();\r\n            }\r\n            //var easer = bez.getEasingCurve(this.ne.v/100,0,1-this.xe.v/100,1);\r\n            var easer = BezierFactory.getBezierEasing(this.ne.v/100,0,1-this.xe.v/100,1).get;\r\n            var mult = 0;\r\n            var s = this.finalS;\r\n            var e = this.finalE;\r\n            var type = this.data.sh;\r\n            if(type == 2){\r\n                if(e === s){\r\n                    mult = ind >= e ? 1 : 0;\r\n                }else{\r\n                    mult = max(0,min(0.5/(e-s) + (ind-s)/(e-s),1));\r\n                }\r\n                mult = easer(mult);\r\n            }else if(type == 3){\r\n                if(e === s){\r\n                    mult = ind >= e ? 0 : 1;\r\n                }else{\r\n                    mult = 1 - max(0,min(0.5/(e-s) + (ind-s)/(e-s),1));\r\n                }\r\n\r\n                mult = easer(mult);\r\n            }else if(type == 4){\r\n                if(e === s){\r\n                    mult = 0;\r\n                }else{\r\n                    mult = max(0,min(0.5/(e-s) + (ind-s)/(e-s),1));\r\n                    if(mult<0.5){\r\n                        mult *= 2;\r\n                    }else{\r\n                        mult = 1 - 2*(mult-0.5);\r\n                    }\r\n                }\r\n                mult = easer(mult);\r\n            }else if(type == 5){\r\n                if(e === s){\r\n                    mult = 0;\r\n                }else{\r\n                    var tot = e - s;\r\n                    /*ind += 0.5;\r\n                    mult = -4/(tot*tot)*(ind*ind)+(4/tot)*ind;*/\r\n                    ind = min(max(0,ind+0.5-s),e-s);\r\n                    var x = -tot/2+ind;\r\n                    var a = tot/2;\r\n                    mult = Math.sqrt(1 - (x*x)/(a*a));\r\n                }\r\n                mult = easer(mult);\r\n            }else if(type == 6){\r\n                if(e === s){\r\n                    mult = 0;\r\n                }else{\r\n                    ind = min(max(0,ind+0.5-s),e-s);\r\n                    mult = (1+(Math.cos((Math.PI+Math.PI*2*(ind)/(e-s)))))/2;\r\n                    /*\r\n                     ind = Math.min(Math.max(s,ind),e-1);\r\n                     mult = (1+(Math.cos((Math.PI+Math.PI*2*(ind-s)/(e-1-s)))))/2;\r\n                     mult = Math.max(mult,(1/(e-1-s))/(e-1-s));*/\r\n                }\r\n                mult = easer(mult);\r\n            }else {\r\n                if(ind >= floor(s)){\r\n                    if(ind-s < 0){\r\n                        mult = 1 - (s - ind);\r\n                    }else{\r\n                        mult = max(0,min(e-ind,1));\r\n                    }\r\n                }\r\n                mult = easer(mult);\r\n            }\r\n            return mult*this.a.v;\r\n        },\r\n        getValue: function(newCharsFlag) {\r\n            this.iterateDynamicProperties();\r\n            this._mdf = newCharsFlag || this._mdf;\r\n            this._currentTextLength = this.elem.textProperty.currentData.l.length || 0;\r\n            if(newCharsFlag && this.data.r === 2) {\r\n                this.e.v = this._currentTextLength;\r\n            }\r\n            var divisor = this.data.r === 2 ? 1 : 100 / this.data.totalChars;\r\n            var o = this.o.v/divisor;\r\n            var s = this.s.v/divisor + o;\r\n            var e = (this.e.v/divisor) + o;\r\n            if(s>e){\r\n                var _s = s;\r\n                s = e;\r\n                e = _s;\r\n            }\r\n            this.finalS = s;\r\n            this.finalE = e;\r\n        }\r\n    }\r\n    extendPrototype([DynamicPropertyContainer], TextSelectorProp);\r\n\r\n    function getTextSelectorProp(elem, data,arr) {\r\n        return new TextSelectorProp(elem, data, arr);\r\n    }\r\n\r\n    return {\r\n        getTextSelectorProp: getTextSelectorProp\r\n    };\r\n}());\r\n\r\n    \nvar pool_factory = (function() {\r\n\treturn function(initialLength, _create, _release, _clone) {\r\n\r\n\t\tvar _length = 0;\r\n\t\tvar _maxLength = initialLength;\r\n\t\tvar pool = createSizedArray(_maxLength);\r\n\r\n\t\tvar ob = {\r\n\t\t\tnewElement: newElement,\r\n\t\t\trelease: release\r\n\t\t};\r\n\r\n\t\tfunction newElement(){\r\n\t\t\tvar element;\r\n\t\t\tif(_length){\r\n\t\t\t\t_length -= 1;\r\n\t\t\t\telement = pool[_length];\r\n\t\t\t} else {\r\n\t\t\t\telement = _create();\r\n\t\t\t}\r\n\t\t\treturn element;\r\n\t\t}\r\n\r\n\t\tfunction release(element) {\r\n\t\t\tif(_length === _maxLength) {\r\n\t\t\t\tpool = pooling.double(pool);\r\n\t\t\t\t_maxLength = _maxLength*2;\r\n\t\t\t}\r\n\t\t\tif (_release) {\r\n\t\t\t\t_release(element);\r\n\t\t\t}\r\n\t\t\tpool[_length] = element;\r\n\t\t\t_length += 1;\r\n\t\t}\r\n\r\n\t\tfunction clone() {\r\n\t\t\tvar clonedElement = newElement();\r\n\t\t\treturn _clone(clonedElement);\r\n\t\t}\r\n\r\n\t\treturn ob;\r\n\t};\r\n}());\r\n\nvar pooling = (function(){\r\n\r\n\tfunction double(arr){\r\n\t\treturn arr.concat(createSizedArray(arr.length));\r\n\t}\r\n\r\n\treturn {\r\n\t\tdouble: double\r\n\t};\r\n}());\nvar point_pool = (function(){\r\n\r\n\tfunction create() {\r\n\t\treturn createTypedArray('float32', 2);\r\n\t}\r\n\treturn pool_factory(8, create);\r\n}());\nvar shape_pool = (function(){\r\n\r\n\tfunction create() {\r\n\t\treturn new ShapePath();\r\n\t}\r\n\r\n\tfunction release(shapePath) {\r\n\t\tvar len = shapePath._length, i;\r\n\t\tfor(i = 0; i < len; i += 1) {\r\n\t\t\tpoint_pool.release(shapePath.v[i]);\r\n\t\t\tpoint_pool.release(shapePath.i[i]);\r\n\t\t\tpoint_pool.release(shapePath.o[i]);\r\n\t\t\tshapePath.v[i] = null;\r\n\t\t\tshapePath.i[i] = null;\r\n\t\t\tshapePath.o[i] = null;\r\n\t\t}\r\n\t\tshapePath._length = 0;\r\n\t\tshapePath.c = false;\r\n\t}\r\n\r\n\tfunction clone(shape) {\r\n\t\tvar cloned = factory.newElement();\r\n\t\tvar i, len = shape._length === undefined ? shape.v.length : shape._length;\r\n\t\tcloned.setLength(len);\r\n\t\tcloned.c = shape.c;\r\n\t\tvar pt;\r\n\t\t\r\n\t\tfor(i = 0; i < len; i += 1) {\r\n\t\t\tcloned.setTripleAt(shape.v[i][0],shape.v[i][1],shape.o[i][0],shape.o[i][1],shape.i[i][0],shape.i[i][1], i);\r\n\t\t}\r\n\t\treturn cloned;\r\n\t}\r\n\r\n\tvar factory = pool_factory(4, create, release);\r\n\tfactory.clone = clone;\r\n\r\n\treturn factory;\r\n}());\nvar shapeCollection_pool = (function(){\r\n\tvar ob = {\r\n\t\tnewShapeCollection: newShapeCollection,\r\n\t\trelease: release\r\n\t};\r\n\r\n\tvar _length = 0;\r\n\tvar _maxLength = 4;\r\n\tvar pool = createSizedArray(_maxLength);\r\n\r\n\tfunction newShapeCollection(){\r\n\t\tvar shapeCollection;\r\n\t\tif(_length){\r\n\t\t\t_length -= 1;\r\n\t\t\tshapeCollection = pool[_length];\r\n\t\t} else {\r\n\t\t\tshapeCollection = new ShapeCollection();\r\n\t\t}\r\n\t\treturn shapeCollection;\r\n\t}\r\n\r\n\tfunction release(shapeCollection) {\r\n\t\tvar i, len = shapeCollection._length;\r\n\t\tfor(i = 0; i < len; i += 1) {\r\n\t\t\tshape_pool.release(shapeCollection.shapes[i]);\r\n\t\t}\r\n\t\tshapeCollection._length = 0;\r\n\r\n\t\tif(_length === _maxLength) {\r\n\t\t\tpool = pooling.double(pool);\r\n\t\t\t_maxLength = _maxLength*2;\r\n\t\t}\r\n\t\tpool[_length] = shapeCollection;\r\n\t\t_length += 1;\r\n\t}\r\n\r\n\treturn ob;\r\n}());\nvar segments_length_pool = (function(){\r\n\r\n\tfunction create() {\r\n\t\treturn {\r\n\t\t\tlengths: [],\r\n\t\t\ttotalLength: 0\r\n\t\t};\r\n\t}\r\n\r\n\tfunction release(element) {\r\n\t\tvar i, len = element.lengths.length;\r\n\t\tfor(i=0;i<len;i+=1) {\r\n\t\t\tbezier_length_pool.release(element.lengths[i]);\r\n\t\t}\r\n\t\telement.lengths.length = 0;\r\n\t}\r\n\r\n\treturn pool_factory(8, create, release);\r\n}());\nvar bezier_length_pool = (function(){\r\n\r\n\tfunction create() {\r\n\t\treturn {\r\n            addedLength: 0,\r\n            percents: createTypedArray('float32', defaultCurveSegments),\r\n            lengths: createTypedArray('float32', defaultCurveSegments),\r\n        };\r\n\t}\r\n\treturn pool_factory(8, create);\r\n}());\nfunction BaseRenderer(){}\r\nBaseRenderer.prototype.checkLayers = function(num){\r\n    var i, len = this.layers.length, data;\r\n    this.completeLayers = true;\r\n    for (i = len - 1; i >= 0; i--) {\r\n        if (!this.elements[i]) {\r\n            data = this.layers[i];\r\n            if(data.ip - data.st <= (num - this.layers[i].st) && data.op - data.st > (num - this.layers[i].st))\r\n            {\r\n                this.buildItem(i);\r\n            }\r\n        }\r\n        this.completeLayers = this.elements[i] ? this.completeLayers:false;\r\n    }\r\n    this.checkPendingElements();\r\n};\r\n\r\nBaseRenderer.prototype.createItem = function(layer){\r\n    switch(layer.ty){\r\n        case 2:\r\n            return this.createImage(layer);\r\n        case 0:\r\n            return this.createComp(layer);\r\n        case 1:\r\n            return this.createSolid(layer);\r\n        case 3:\r\n            return this.createNull(layer);\r\n        case 4:\r\n            return this.createShape(layer);\r\n        case 5:\r\n            return this.createText(layer);\r\n        case 13:\r\n            return this.createCamera(layer);\r\n    }\r\n    return this.createNull(layer);\r\n};\r\n\r\nBaseRenderer.prototype.createCamera = function(){\r\n    throw new Error('You\\'re using a 3d camera. Try the html renderer.');\r\n};\r\n\r\nBaseRenderer.prototype.buildAllItems = function(){\r\n    var i, len = this.layers.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.buildItem(i);\r\n    }\r\n    this.checkPendingElements();\r\n};\r\n\r\nBaseRenderer.prototype.includeLayers = function(newLayers){\r\n    this.completeLayers = false;\r\n    var i, len = newLayers.length;\r\n    var j, jLen = this.layers.length;\r\n    for(i=0;i<len;i+=1){\r\n        j = 0;\r\n        while(j<jLen){\r\n            if(this.layers[j].id == newLayers[i].id){\r\n                this.layers[j] = newLayers[i];\r\n                break;\r\n            }\r\n            j += 1;\r\n        }\r\n    }\r\n};\r\n\r\nBaseRenderer.prototype.setProjectInterface = function(pInterface){\r\n    this.globalData.projectInterface = pInterface;\r\n};\r\n\r\nBaseRenderer.prototype.initItems = function(){\r\n    if(!this.globalData.progressiveLoad){\r\n        this.buildAllItems();\r\n    }\r\n};\r\nBaseRenderer.prototype.buildElementParenting = function(element, parentName, hierarchy) {\r\n    var elements = this.elements;\r\n    var layers = this.layers;\r\n    var i=0, len = layers.length;\r\n    while (i < len) {\r\n        if (layers[i].ind == parentName) {\r\n            if (!elements[i] || elements[i] === true) {\r\n                this.buildItem(i);\r\n                this.addPendingElement(element);\r\n            } else {\r\n                hierarchy.push(elements[i]);\r\n                elements[i].setAsParent();\r\n                if(layers[i].parent !== undefined) {\r\n                    this.buildElementParenting(element, layers[i].parent, hierarchy);\r\n                } else {\r\n                    element.setHierarchy(hierarchy);\r\n                }\r\n            }\r\n        }\r\n        i += 1;\r\n    }\r\n};\r\n\r\nBaseRenderer.prototype.addPendingElement = function(element){\r\n    this.pendingElements.push(element);\r\n};\r\n\r\nBaseRenderer.prototype.searchExtraCompositions = function(assets){\r\n    var i, len = assets.length;\r\n    for(i=0;i<len;i+=1){\r\n        if(assets[i].xt){\r\n            var comp = this.createComp(assets[i]);\r\n            comp.initExpressions();\r\n            this.globalData.projectInterface.registerComposition(comp);\r\n        }\r\n    }\r\n};\r\n\r\nBaseRenderer.prototype.setupGlobalData = function(animData, fontsContainer) {\r\n    this.globalData.fontManager = new FontManager();\r\n    this.globalData.fontManager.addChars(animData.chars);\r\n    this.globalData.fontManager.addFonts(animData.fonts, fontsContainer);\r\n    this.globalData.getAssetData = this.animationItem.getAssetData.bind(this.animationItem);\r\n    this.globalData.getAssetsPath = this.animationItem.getAssetsPath.bind(this.animationItem);\r\n    this.globalData.elementLoaded = this.animationItem.elementLoaded.bind(this.animationItem);\r\n    this.globalData.addPendingElement = this.animationItem.addPendingElement.bind(this.animationItem);\r\n    this.globalData.frameId = 0;\r\n    this.globalData.frameRate = animData.fr;\r\n    this.globalData.nm = animData.nm;\r\n    this.globalData.compSize = {\r\n        w: animData.w,\r\n        h: animData.h\r\n    }\r\n}\nfunction SVGRenderer(animationItem, config){\r\n    this.animationItem = animationItem;\r\n    this.layers = null;\r\n    this.renderedFrame = -1;\r\n    this.svgElement = createNS('svg');\r\n    var defs = createNS( 'defs');\r\n    this.svgElement.appendChild(defs);\r\n    var maskElement = createNS('g');\r\n    this.svgElement.appendChild(maskElement);\r\n    this.layerElement = maskElement;\r\n    this.renderConfig = {\r\n        preserveAspectRatio: (config && config.preserveAspectRatio) || 'xMidYMid meet',\r\n        imagePreserveAspectRatio: (config && config.imagePreserveAspectRatio) || 'xMidYMid slice',\r\n        progressiveLoad: (config && config.progressiveLoad) || false,\r\n        hideOnTransparent: (config && config.hideOnTransparent === false) ? false : true,\r\n        viewBoxOnly: (config && config.viewBoxOnly) || false,\r\n        viewBoxSize: (config && config.viewBoxSize) || false,\r\n        className: (config && config.className) || ''\r\n    };\r\n    this.globalData = {\r\n        _mdf: false,\r\n        frameNum: -1,\r\n        defs: defs,\r\n        renderConfig: this.renderConfig\r\n    };\r\n    this.elements = [];\r\n    this.pendingElements = [];\r\n    this.destroyed = false;\r\n\r\n}\r\n\r\nextendPrototype([BaseRenderer],SVGRenderer);\r\n\r\nSVGRenderer.prototype.createNull = function (data) {\r\n    return new NullElement(data,this.globalData,this);\r\n};\r\n\r\nSVGRenderer.prototype.createShape = function (data) {\r\n    return new SVGShapeElement(data,this.globalData,this);\r\n};\r\n\r\nSVGRenderer.prototype.createText = function (data) {\r\n    return new SVGTextElement(data,this.globalData,this);\r\n\r\n};\r\n\r\nSVGRenderer.prototype.createImage = function (data) {\r\n    return new IImageElement(data,this.globalData,this);\r\n};\r\n\r\nSVGRenderer.prototype.createComp = function (data) {\r\n    return new SVGCompElement(data,this.globalData,this);\r\n\r\n};\r\n\r\nSVGRenderer.prototype.createSolid = function (data) {\r\n    return new ISolidElement(data,this.globalData,this);\r\n};\r\n\r\nSVGRenderer.prototype.configAnimation = function(animData){\r\n    this.svgElement.setAttribute('xmlns','http://www.w3.org/2000/svg');\r\n    if(this.renderConfig.viewBoxSize) {\r\n        this.svgElement.setAttribute('viewBox',this.renderConfig.viewBoxSize);\r\n    } else {\r\n        this.svgElement.setAttribute('viewBox','0 0 '+animData.w+' '+animData.h);\r\n    }\r\n\r\n    if(!this.renderConfig.viewBoxOnly) {\r\n        this.svgElement.setAttribute('width',animData.w);\r\n        this.svgElement.setAttribute('height',animData.h);\r\n        this.svgElement.style.width = '100%';\r\n        this.svgElement.style.height = '100%';\r\n        this.svgElement.style.transform = 'translate3d(0,0,0)';\r\n    }\r\n    if(this.renderConfig.className) {\r\n        this.svgElement.setAttribute('class', this.renderConfig.className);\r\n    }\r\n    this.svgElement.setAttribute('preserveAspectRatio',this.renderConfig.preserveAspectRatio);\r\n    //this.layerElement.style.transform = 'translate3d(0,0,0)';\r\n    //this.layerElement.style.transformOrigin = this.layerElement.style.mozTransformOrigin = this.layerElement.style.webkitTransformOrigin = this.layerElement.style['-webkit-transform'] = \"0px 0px 0px\";\r\n    this.animationItem.wrapper.appendChild(this.svgElement);\r\n    //Mask animation\r\n    var defs = this.globalData.defs;\r\n\r\n    this.setupGlobalData(animData, defs);\r\n    this.globalData.progressiveLoad = this.renderConfig.progressiveLoad;\r\n    this.data = animData;\r\n\r\n    var maskElement = createNS( 'clipPath');\r\n    var rect = createNS('rect');\r\n    rect.setAttribute('width',animData.w);\r\n    rect.setAttribute('height',animData.h);\r\n    rect.setAttribute('x',0);\r\n    rect.setAttribute('y',0);\r\n    var maskId = 'animationMask_'+randomString(10);\r\n    maskElement.setAttribute('id', maskId);\r\n    maskElement.appendChild(rect);\r\n    this.layerElement.setAttribute(\"clip-path\", \"url(\" + locationHref + \"#\"+maskId+\")\");\r\n\r\n    defs.appendChild(maskElement);\r\n    this.layers = animData.layers;\r\n    this.elements = createSizedArray(animData.layers.length);\r\n};\r\n\r\n\r\nSVGRenderer.prototype.destroy = function () {\r\n    this.animationItem.wrapper.innerHTML = '';\r\n    this.layerElement = null;\r\n    this.globalData.defs = null;\r\n    var i, len = this.layers ? this.layers.length : 0;\r\n    for (i = 0; i < len; i++) {\r\n        if(this.elements[i]){\r\n            this.elements[i].destroy();\r\n        }\r\n    }\r\n    this.elements.length = 0;\r\n    this.destroyed = true;\r\n    this.animationItem = null;\r\n};\r\n\r\nSVGRenderer.prototype.updateContainerSize = function () {\r\n};\r\n\r\nSVGRenderer.prototype.buildItem  = function(pos){\r\n    var elements = this.elements;\r\n    if(elements[pos] || this.layers[pos].ty == 99){\r\n        return;\r\n    }\r\n    elements[pos] = true;\r\n    var element = this.createItem(this.layers[pos]);\r\n\r\n    elements[pos] = element;\r\n    if(expressionsPlugin){\r\n        if(this.layers[pos].ty === 0){\r\n            this.globalData.projectInterface.registerComposition(element);\r\n        }\r\n        element.initExpressions();\r\n    }\r\n    this.appendElementInPos(element,pos);\r\n    if(this.layers[pos].tt){\r\n        if(!this.elements[pos - 1] || this.elements[pos - 1] === true){\r\n            this.buildItem(pos - 1);\r\n            this.addPendingElement(element);\r\n        } else {\r\n            element.setMatte(elements[pos - 1].layerId);\r\n        }\r\n    }\r\n};\r\n\r\nSVGRenderer.prototype.checkPendingElements  = function(){\r\n    while(this.pendingElements.length){\r\n        var element = this.pendingElements.pop();\r\n        element.checkParenting();\r\n        if(element.data.tt){\r\n            var i = 0, len = this.elements.length;\r\n            while(i<len){\r\n                if(this.elements[i] === element){\r\n                    element.setMatte(this.elements[i - 1].layerId);\r\n                    break;\r\n                }\r\n                i += 1;\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nSVGRenderer.prototype.renderFrame = function(num){\r\n    if(this.renderedFrame === num || this.destroyed){\r\n        return;\r\n    }\r\n    if(num === null){\r\n        num = this.renderedFrame;\r\n    }else{\r\n        this.renderedFrame = num;\r\n    }\r\n    // console.log('-------');\r\n    // console.log('FRAME ',num);\r\n    this.globalData.frameNum = num;\r\n    this.globalData.frameId += 1;\r\n    this.globalData.projectInterface.currentFrame = num;\r\n    this.globalData._mdf = false;\r\n    var i, len = this.layers.length;\r\n    if(!this.completeLayers){\r\n        this.checkLayers(num);\r\n    }\r\n    for (i = len - 1; i >= 0; i--) {\r\n        if(this.completeLayers || this.elements[i]){\r\n            this.elements[i].prepareFrame(num - this.layers[i].st);\r\n        }\r\n    }\r\n    if(this.globalData._mdf) {\r\n        for (i = 0; i < len; i += 1) {\r\n            if(this.completeLayers || this.elements[i]){\r\n                this.elements[i].renderFrame();\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nSVGRenderer.prototype.appendElementInPos = function(element, pos){\r\n    var newElement = element.getBaseElement();\r\n    if(!newElement){\r\n        return;\r\n    }\r\n    var i = 0;\r\n    var nextElement;\r\n    while(i<pos){\r\n        if(this.elements[i] && this.elements[i]!== true && this.elements[i].getBaseElement()){\r\n            nextElement = this.elements[i].getBaseElement();\r\n        }\r\n        i += 1;\r\n    }\r\n    if(nextElement){\r\n        this.layerElement.insertBefore(newElement, nextElement);\r\n    } else {\r\n        this.layerElement.appendChild(newElement);\r\n    }\r\n};\r\n\r\nSVGRenderer.prototype.hide = function(){\r\n    this.layerElement.style.display = 'none';\r\n};\r\n\r\nSVGRenderer.prototype.show = function(){\r\n    this.layerElement.style.display = 'block';\r\n};\r\n\nfunction MaskElement(data,element,globalData) {\r\n    this.data = data;\r\n    this.element = element;\r\n    this.globalData = globalData;\r\n    this.storedData = [];\r\n    this.masksProperties = this.data.masksProperties || [];\r\n    this.maskElement = null;\r\n    var defs = this.globalData.defs;\r\n    var i, len = this.masksProperties ? this.masksProperties.length : 0;\r\n    this.viewData = createSizedArray(len);\r\n    this.solidPath = '';\r\n\r\n\r\n    var path, properties = this.masksProperties;\r\n    var count = 0;\r\n    var currentMasks = [];\r\n    var j, jLen;\r\n    var layerId = randomString(10);\r\n    var rect, expansor, feMorph,x;\r\n    var maskType = 'clipPath', maskRef = 'clip-path';\r\n    for (i = 0; i < len; i++) {\r\n\r\n        if((properties[i].mode !== 'a' && properties[i].mode !== 'n')|| properties[i].inv || properties[i].o.k !== 100){\r\n            maskType = 'mask';\r\n            maskRef = 'mask';\r\n        }\r\n\r\n        if((properties[i].mode == 's' || properties[i].mode == 'i') && count === 0){\r\n            rect = createNS( 'rect');\r\n            rect.setAttribute('fill', '#ffffff');\r\n            rect.setAttribute('width', this.element.comp.data.w || 0);\r\n            rect.setAttribute('height', this.element.comp.data.h || 0);\r\n            currentMasks.push(rect);\r\n        } else {\r\n            rect = null;\r\n        }\r\n\r\n        path = createNS( 'path');\r\n        if(properties[i].mode == 'n') {\r\n            // TODO move this to a factory or to a constructor\r\n            this.viewData[i] = {\r\n                op: PropertyFactory.getProp(this.element,properties[i].o,0,0.01,this.element),\r\n                prop: ShapePropertyFactory.getShapeProp(this.element,properties[i],3),\r\n                elem: path,\r\n                lastPath: ''\r\n            };\r\n            defs.appendChild(path);\r\n            continue;\r\n        }\r\n        count += 1;\r\n\r\n        path.setAttribute('fill', properties[i].mode === 's' ? '#000000':'#ffffff');\r\n        path.setAttribute('clip-rule','nonzero');\r\n        var filterID;\r\n\r\n        if (properties[i].x.k !== 0) {\r\n            maskType = 'mask';\r\n            maskRef = 'mask';\r\n            x = PropertyFactory.getProp(this.element,properties[i].x,0,null,this.element);\r\n            filterID = 'fi_'+randomString(10);\r\n            expansor = createNS('filter');\r\n            expansor.setAttribute('id',filterID);\r\n            feMorph = createNS('feMorphology');\r\n            feMorph.setAttribute('operator','dilate');\r\n            feMorph.setAttribute('in','SourceGraphic');\r\n            feMorph.setAttribute('radius','0');\r\n            expansor.appendChild(feMorph);\r\n            defs.appendChild(expansor);\r\n            path.setAttribute('stroke', properties[i].mode === 's' ? '#000000':'#ffffff');\r\n        } else {\r\n            feMorph = null;\r\n            x = null;\r\n        }\r\n\r\n        // TODO move this to a factory or to a constructor\r\n        this.storedData[i] = {\r\n             elem: path,\r\n             x: x,\r\n             expan: feMorph,\r\n            lastPath: '',\r\n            lastOperator:'',\r\n            filterId:filterID,\r\n            lastRadius:0\r\n        };\r\n        if(properties[i].mode == 'i'){\r\n            jLen = currentMasks.length;\r\n            var g = createNS('g');\r\n            for(j=0;j<jLen;j+=1){\r\n                g.appendChild(currentMasks[j]);\r\n            }\r\n            var mask = createNS('mask');\r\n            mask.setAttribute('mask-type','alpha');\r\n            mask.setAttribute('id',layerId+'_'+count);\r\n            mask.appendChild(path);\r\n            defs.appendChild(mask);\r\n            g.setAttribute('mask','url(' + locationHref + '#'+layerId+'_'+count+')');\r\n\r\n            currentMasks.length = 0;\r\n            currentMasks.push(g);\r\n        }else{\r\n            currentMasks.push(path);\r\n        }\r\n        if(properties[i].inv && !this.solidPath){\r\n            this.solidPath = this.createLayerSolidPath();\r\n        }\r\n        // TODO move this to a factory or to a constructor\r\n        this.viewData[i] = {\r\n            elem: path,\r\n            lastPath: '',\r\n            op: PropertyFactory.getProp(this.element,properties[i].o,0,0.01,this.element),\r\n            prop:ShapePropertyFactory.getShapeProp(this.element,properties[i],3),\r\n            invRect: rect\r\n        };\r\n        if(!this.viewData[i].prop.k){\r\n            this.drawPath(properties[i],this.viewData[i].prop.v,this.viewData[i]);\r\n        }\r\n    }\r\n\r\n    this.maskElement = createNS( maskType);\r\n\r\n    len = currentMasks.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.maskElement.appendChild(currentMasks[i]);\r\n    }\r\n\r\n    if(count > 0){\r\n        this.maskElement.setAttribute('id', layerId);\r\n        this.element.maskedElement.setAttribute(maskRef, \"url(\" + locationHref + \"#\" + layerId + \")\");\r\n        defs.appendChild(this.maskElement);\r\n    }\r\n    if (this.viewData.length) {\r\n        this.element.addRenderableComponent(this);\r\n    }\r\n\r\n}\r\n\r\nMaskElement.prototype.getMaskProperty = function(pos){\r\n    return this.viewData[pos].prop;\r\n};\r\n\r\nMaskElement.prototype.renderFrame = function (isFirstFrame) {\r\n    var finalMat = this.element.finalTransform.mat;\r\n    var i, len = this.masksProperties.length;\r\n    for (i = 0; i < len; i++) {\r\n        if(this.viewData[i].prop._mdf || isFirstFrame){\r\n            this.drawPath(this.masksProperties[i],this.viewData[i].prop.v,this.viewData[i]);\r\n        }\r\n        if(this.viewData[i].op._mdf || isFirstFrame){\r\n            this.viewData[i].elem.setAttribute('fill-opacity',this.viewData[i].op.v);\r\n        }\r\n        if(this.masksProperties[i].mode !== 'n'){\r\n            if(this.viewData[i].invRect && (this.element.finalTransform.mProp._mdf || isFirstFrame)){\r\n                this.viewData[i].invRect.setAttribute('x', -finalMat.props[12]);\r\n                this.viewData[i].invRect.setAttribute('y', -finalMat.props[13]);\r\n            }\r\n            if(this.storedData[i].x && (this.storedData[i].x._mdf || isFirstFrame)){\r\n                var feMorph = this.storedData[i].expan;\r\n                if(this.storedData[i].x.v < 0){\r\n                    if(this.storedData[i].lastOperator !== 'erode'){\r\n                        this.storedData[i].lastOperator = 'erode';\r\n                        this.storedData[i].elem.setAttribute('filter','url(' + locationHref + '#'+this.storedData[i].filterId+')');\r\n                    }\r\n                    feMorph.setAttribute('radius',-this.storedData[i].x.v);\r\n                }else{\r\n                    if(this.storedData[i].lastOperator !== 'dilate'){\r\n                        this.storedData[i].lastOperator = 'dilate';\r\n                        this.storedData[i].elem.setAttribute('filter',null);\r\n                    }\r\n                    this.storedData[i].elem.setAttribute('stroke-width', this.storedData[i].x.v*2);\r\n\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nMaskElement.prototype.getMaskelement = function () {\r\n    return this.maskElement;\r\n};\r\n\r\nMaskElement.prototype.createLayerSolidPath = function(){\r\n    var path = 'M0,0 ';\r\n    path += ' h' + this.globalData.compSize.w ;\r\n    path += ' v' + this.globalData.compSize.h ;\r\n    path += ' h-' + this.globalData.compSize.w ;\r\n    path += ' v-' + this.globalData.compSize.h + ' ';\r\n    return path;\r\n};\r\n\r\nMaskElement.prototype.drawPath = function(pathData,pathNodes,viewData){\r\n    var pathString = \" M\"+pathNodes.v[0][0]+','+pathNodes.v[0][1];\r\n    var i, len;\r\n    len = pathNodes._length;\r\n    for(i=1;i<len;i+=1){\r\n        //pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[i][0]+','+pathNodes.i[i][1] + \" \"+pathNodes.v[i][0]+','+pathNodes.v[i][1];\r\n        pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[i][0]+','+pathNodes.i[i][1] + \" \"+pathNodes.v[i][0]+','+pathNodes.v[i][1];\r\n    }\r\n        //pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[0][0]+','+pathNodes.i[0][1] + \" \"+pathNodes.v[0][0]+','+pathNodes.v[0][1];\r\n    if(pathNodes.c && len > 1){\r\n        pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[0][0]+','+pathNodes.i[0][1] + \" \"+pathNodes.v[0][0]+','+pathNodes.v[0][1];\r\n    }\r\n    //pathNodes.__renderedString = pathString;\r\n\r\n\r\n    if(viewData.lastPath !== pathString){\r\n        var pathShapeValue = '';\r\n        if(viewData.elem){\r\n            if(pathNodes.c){\r\n                pathShapeValue = pathData.inv ? this.solidPath + pathString : pathString;\r\n            }\r\n            viewData.elem.setAttribute('d',pathShapeValue);\r\n        }\r\n        viewData.lastPath = pathString;\r\n    }\r\n};\r\n\r\nMaskElement.prototype.destroy = function(){\r\n    this.element = null;\r\n    this.globalData = null;\r\n    this.maskElement = null;\r\n    this.data = null;\r\n    this.masksProperties = null;\r\n};\r\n\n/**\r\n * @file \r\n * Handles AE's layer parenting property.\r\n *\r\n */\r\n\r\nfunction HierarchyElement(){}\r\n\r\nHierarchyElement.prototype = {\r\n\t/**\r\n     * @function \r\n     * Initializes hierarchy properties\r\n     *\r\n     */\r\n\tinitHierarchy: function() {\r\n\t\t//element's parent list\r\n\t    this.hierarchy = [];\r\n\t    //if element is parent of another layer _isParent will be true\r\n\t    this._isParent = false;\r\n\t    this.checkParenting();\r\n\t},\r\n\t/**\r\n     * @function \r\n     * Sets layer's hierarchy.\r\n     * @param {array} hierarch\r\n     * layer's parent list\r\n     *\r\n     */ \r\n\tsetHierarchy: function(hierarchy){\r\n\t    this.hierarchy = hierarchy;\r\n\t},\r\n\t/**\r\n     * @function \r\n     * Sets layer as parent.\r\n     *\r\n     */ \r\n\tsetAsParent: function() {\r\n\t    this._isParent = true;\r\n\t},\r\n\t/**\r\n     * @function \r\n     * Searches layer's parenting chain\r\n     *\r\n     */ \r\n\tcheckParenting: function(){\r\n\t    if (this.data.parent !== undefined){\r\n\t        this.comp.buildElementParenting(this, this.data.parent, []);\r\n\t    }\r\n\t}\r\n};\n/**\r\n * @file \r\n * Handles element's layer frame update.\r\n * Checks layer in point and out point\r\n *\r\n */\r\n\r\nfunction FrameElement(){}\r\n\r\nFrameElement.prototype = {\r\n    /**\r\n     * @function \r\n     * Initializes frame related properties.\r\n     *\r\n     */\r\n    initFrame: function(){\r\n        //set to true when inpoint is rendered\r\n        this._isFirstFrame = false;\r\n        //list of animated properties\r\n        this.dynamicProperties = [];\r\n        // If layer has been modified in current tick this will be true\r\n        this._mdf = false;\r\n    },\r\n    /**\r\n     * @function \r\n     * Calculates all dynamic values\r\n     *\r\n     * @param {number} num\r\n     * current frame number in Layer's time\r\n     * @param {boolean} isVisible\r\n     * if layers is currently in range\r\n     * \r\n     */\r\n    prepareProperties: function(num, isVisible) {\r\n        var i, len = this.dynamicProperties.length;\r\n        for (i = 0;i < len; i += 1) {\r\n            if (isVisible || (this._isParent && this.dynamicProperties[i].propType === 'transform')) {\r\n                this.dynamicProperties[i].getValue();\r\n                if (this.dynamicProperties[i]._mdf) {\r\n                    this.globalData._mdf = true;\r\n                    this._mdf = true;\r\n                }\r\n            }\r\n        }\r\n    },\r\n    addDynamicProperty: function(prop) {\r\n        if(this.dynamicProperties.indexOf(prop) === -1) {\r\n            this.dynamicProperties.push(prop);\r\n        }\r\n    }\r\n};\nfunction TransformElement(){}\r\n\r\nTransformElement.prototype = {\r\n    initTransform: function() {\r\n        this.finalTransform = {\r\n            mProp: this.data.ks ? TransformPropertyFactory.getTransformProperty(this, this.data.ks, this) : {o:0},\r\n            _matMdf: false,\r\n            _opMdf: false,\r\n            mat: new Matrix()\r\n        };\r\n        if (this.data.ao) {\r\n            this.finalTransform.mProp.autoOriented = true;\r\n        }\r\n\r\n        //TODO: check TYPE 11: Guided elements\r\n        if (this.data.ty !== 11) {\r\n            //this.createElements();\r\n        }\r\n    },\r\n    renderTransform: function() {\r\n\r\n        this.finalTransform._opMdf = this.finalTransform.mProp.o._mdf || this._isFirstFrame;\r\n        this.finalTransform._matMdf = this.finalTransform.mProp._mdf || this._isFirstFrame;\r\n\r\n        if (this.hierarchy) {\r\n            var mat;\r\n            var finalMat = this.finalTransform.mat;\r\n            var i = 0, len = this.hierarchy.length;\r\n            //Checking if any of the transformation matrices in the hierarchy chain has changed.\r\n            if (!this.finalTransform._matMdf) {\r\n                while (i < len) {\r\n                    if (this.hierarchy[i].finalTransform.mProp._mdf) {\r\n                        this.finalTransform._matMdf = true;\r\n                        break;\r\n                    }\r\n                    i += 1;\r\n                }\r\n            }\r\n            \r\n            if (this.finalTransform._matMdf) {\r\n                mat = this.finalTransform.mProp.v.props;\r\n                finalMat.cloneFromProps(mat);\r\n                for (i = 0; i < len; i += 1) {\r\n                    mat = this.hierarchy[i].finalTransform.mProp.v.props;\r\n                    finalMat.transform(mat[0], mat[1], mat[2], mat[3], mat[4], mat[5], mat[6], mat[7], mat[8], mat[9], mat[10], mat[11], mat[12], mat[13], mat[14], mat[15]);\r\n                }\r\n            }\r\n        }\r\n    },\r\n    globalToLocal: function(pt) {\r\n        var transforms = [];\r\n        transforms.push(this.finalTransform);\r\n        var flag = true;\r\n        var comp = this.comp;\r\n        while (flag) {\r\n            if (comp.finalTransform) {\r\n                if (comp.data.hasMask) {\r\n                    transforms.splice(0, 0, comp.finalTransform);\r\n                }\r\n                comp = comp.comp;\r\n            } else {\r\n                flag = false;\r\n            }\r\n        }\r\n        var i, len = transforms.length,ptNew;\r\n        for (i = 0; i < len; i += 1) {\r\n            ptNew = transforms[i].mat.applyToPointArray(0, 0, 0);\r\n            //ptNew = transforms[i].mat.applyToPointArray(pt[0],pt[1],pt[2]);\r\n            pt = [pt[0] - ptNew[0], pt[1] - ptNew[1], 0];\r\n        }\r\n        return pt;\r\n    },\r\n    mHelper: new Matrix()\r\n};\nfunction RenderableElement(){\r\n\r\n}\r\n\r\nRenderableElement.prototype = {\r\n    initRenderable: function() {\r\n        //layer's visibility related to inpoint and outpoint. Rename isVisible to isInRange\r\n        this.isInRange = false;\r\n        //layer's display state\r\n        this.hidden = false;\r\n        // If layer's transparency equals 0, it can be hidden\r\n        this.isTransparent = false;\r\n        //list of animated components\r\n        this.renderableComponents = [];\r\n    },\r\n    addRenderableComponent: function(component) {\r\n        if(this.renderableComponents.indexOf(component) === -1) {\r\n            this.renderableComponents.push(component);\r\n        }\r\n    },\r\n    removeRenderableComponent: function(component) {\r\n        if(this.renderableComponents.indexOf(component) !== -1) {\r\n            this.renderableComponents.splice(this.renderableComponents.indexOf(component), 1);\r\n        }\r\n    },\r\n    prepareRenderableFrame: function(num) {\r\n        this.checkLayerLimits(num);\r\n    },\r\n    checkTransparency: function(){\r\n        if(this.finalTransform.mProp.o.v <= 0) {\r\n            if(!this.isTransparent && this.globalData.renderConfig.hideOnTransparent){\r\n                this.isTransparent = true;\r\n                this.hide();\r\n            }\r\n        } else if(this.isTransparent) {\r\n            this.isTransparent = false;\r\n            this.show();\r\n        }\r\n    },\r\n    /**\r\n     * @function \r\n     * Initializes frame related properties.\r\n     *\r\n     * @param {number} num\r\n     * current frame number in Layer's time\r\n     * \r\n     */\r\n    checkLayerLimits: function(num) {\r\n        if(this.data.ip - this.data.st <= num && this.data.op - this.data.st > num)\r\n        {\r\n            if(this.isInRange !== true){\r\n                this.globalData._mdf = true;\r\n                this._mdf = true;\r\n                this.isInRange = true;\r\n                this.show();\r\n            }\r\n        } else {\r\n            if(this.isInRange !== false){\r\n                this.globalData._mdf = true;\r\n                this.isInRange = false;\r\n                this.hide();\r\n            }\r\n        }\r\n    },\r\n    renderRenderable: function() {\r\n        var i, len = this.renderableComponents.length;\r\n        for(i = 0; i < len; i += 1) {\r\n            this.renderableComponents[i].renderFrame(this._isFirstFrame);\r\n        }\r\n        /*this.maskManager.renderFrame(this.finalTransform.mat);\r\n        this.renderableEffectsManager.renderFrame(this._isFirstFrame);*/\r\n    },\r\n    sourceRectAtTime: function(){\r\n        return {\r\n            top:0,\r\n            left:0,\r\n            width:100,\r\n            height:100\r\n        };\r\n    },\r\n    getLayerSize: function(){\r\n        if(this.data.ty === 5){\r\n            return {w:this.data.textData.width,h:this.data.textData.height};\r\n        }else{\r\n            return {w:this.data.width,h:this.data.height};\r\n        }\r\n    }\r\n};\nfunction RenderableDOMElement() {}\r\n\r\n(function(){\r\n    var _prototype = {\r\n        initElement: function(data,globalData,comp) {\r\n            this.initFrame();\r\n            this.initBaseData(data, globalData, comp);\r\n            this.initTransform(data, globalData, comp);\r\n            this.initHierarchy();\r\n            this.initRenderable();\r\n            this.initRendererElement();\r\n            this.createContainerElements();\r\n            this.addMasks();\r\n            this.createContent();\r\n            this.hide();\r\n        },\r\n        hide: function(){\r\n            if (!this.hidden && (!this.isInRange || this.isTransparent)) {\r\n                var elem = this.baseElement || this.layerElement;\r\n                elem.style.display = 'none';\r\n                this.hidden = true;\r\n            }\r\n        },\r\n        show: function(){\r\n            if (this.isInRange && !this.isTransparent){\r\n                if (!this.data.hd) {\r\n                    var elem = this.baseElement || this.layerElement;\r\n                    elem.style.display = 'block';\r\n                }\r\n                this.hidden = false;\r\n                this._isFirstFrame = true;\r\n            }\r\n        },\r\n        renderFrame: function() {\r\n            //If it is exported as hidden (data.hd === true) no need to render\r\n            //If it is not visible no need to render\r\n            if (this.data.hd || this.hidden) {\r\n                return;\r\n            }\r\n            this.renderTransform();\r\n            this.renderRenderable();\r\n            this.renderElement();\r\n            this.renderInnerContent();\r\n            if (this._isFirstFrame) {\r\n                this._isFirstFrame = false;\r\n            }\r\n        },\r\n        renderInnerContent: function() {},\r\n        prepareFrame: function(num) {\r\n            this._mdf = false;\r\n            this.prepareRenderableFrame(num);\r\n            this.prepareProperties(num, this.isInRange);\r\n            this.checkTransparency();\r\n        },\r\n        destroy: function(){\r\n            this.innerElem =  null;\r\n            this.destroyBaseElement();\r\n        }\r\n    };\r\n    extendPrototype([RenderableElement, createProxyFunction(_prototype)], RenderableDOMElement);\r\n}());\nfunction ProcessedElement(element, position) {\r\n\tthis.elem = element;\r\n\tthis.pos = position;\r\n}\nfunction SVGStyleData(data, level) {\r\n\tthis.data = data;\r\n\tthis.type = data.ty;\r\n\tthis.d = '';\r\n\tthis.lvl = level;\r\n\tthis._mdf = false;\r\n\tthis.closed = data.hd === true;\r\n\tthis.pElem = createNS('path');\r\n\tthis.msElem = null;\r\n}\r\n\r\nSVGStyleData.prototype.reset = function() {\r\n\tthis.d = '';\r\n\tthis._mdf = false;\r\n};\nfunction SVGShapeData(transformers, level, shape) {\r\n    this.caches = [];\r\n    this.styles = [];\r\n    this.transformers = transformers;\r\n    this.lStr = '';\r\n    this.sh = shape;\r\n    this.lvl = level;\r\n    //TODO find if there are some cases where _isAnimated can be false. \r\n    // For now, since shapes add up with other shapes. They have to be calculated every time.\r\n    // One way of finding out is checking if all styles associated to this shape depend only of this shape\r\n    this._isAnimated = !!shape.k;\r\n    // TODO: commenting this for now since all shapes are animated\r\n    var i = 0, len = transformers.length;\r\n    while(i < len) {\r\n    \tif(transformers[i].mProps.dynamicProperties.length) {\r\n    \t\tthis._isAnimated = true;\r\n    \t\tbreak;\r\n    \t}\r\n    \ti += 1;\r\n    }\r\n}\r\n\r\nSVGShapeData.prototype.setAsAnimated = function() {\r\n    this._isAnimated = true;\r\n}\nfunction SVGTransformData(mProps, op, container) {\r\n\tthis.transform = {\r\n\t\tmProps: mProps,\r\n\t\top: op,\r\n\t\tcontainer: container\r\n\t};\r\n\tthis.elements = [];\r\n    this._isAnimated = this.transform.mProps.dynamicProperties.length || this.transform.op.effectsSequence.length;\r\n}\nfunction SVGStrokeStyleData(elem, data, styleOb){\r\n\tthis.initDynamicPropertyContainer(elem);\r\n\tthis.getValue = this.iterateDynamicProperties;\r\n\tthis.o = PropertyFactory.getProp(elem,data.o,0,0.01,this);\r\n\tthis.w = PropertyFactory.getProp(elem,data.w,0,null,this);\r\n\tthis.d = new DashProperty(elem,data.d||{},'svg',this);\r\n\tthis.c = PropertyFactory.getProp(elem,data.c,1,255,this);\r\n\tthis.style = styleOb;\r\n    this._isAnimated = !!this._isAnimated;\r\n}\r\n\r\nextendPrototype([DynamicPropertyContainer], SVGStrokeStyleData);\nfunction SVGFillStyleData(elem, data, styleOb){\r\n\tthis.initDynamicPropertyContainer(elem);\r\n\tthis.getValue = this.iterateDynamicProperties;\r\n\tthis.o = PropertyFactory.getProp(elem,data.o,0,0.01,this);\r\n\tthis.c = PropertyFactory.getProp(elem,data.c,1,255,this);\r\n\tthis.style = styleOb;\r\n}\r\n\r\nextendPrototype([DynamicPropertyContainer], SVGFillStyleData);\nfunction SVGGradientFillStyleData(elem, data, styleOb){\r\n    this.initDynamicPropertyContainer(elem);\r\n    this.getValue = this.iterateDynamicProperties;\r\n    this.initGradientData(elem, data, styleOb);\r\n}\r\n\r\nSVGGradientFillStyleData.prototype.initGradientData = function(elem, data, styleOb){\r\n    this.o = PropertyFactory.getProp(elem,data.o,0,0.01,this);\r\n    this.s = PropertyFactory.getProp(elem,data.s,1,null,this);\r\n    this.e = PropertyFactory.getProp(elem,data.e,1,null,this);\r\n    this.h = PropertyFactory.getProp(elem,data.h||{k:0},0,0.01,this);\r\n    this.a = PropertyFactory.getProp(elem,data.a||{k:0},0,degToRads,this);\r\n    this.g = new GradientProperty(elem,data.g);\r\n    this.style = styleOb;\r\n    this.stops = [];\r\n    this.setGradientData(styleOb.pElem, data);\r\n    this.setGradientOpacity(data, styleOb);\r\n    this._isAnimated = !!this._isAnimated;\r\n\r\n};\r\n\r\nSVGGradientFillStyleData.prototype.setGradientData = function(pathElement,data){\r\n\r\n    var gradientId = 'gr_'+randomString(10);\r\n    var gfill = createNS(data.t === 1 ? 'linearGradient' : 'radialGradient');\r\n    gfill.setAttribute('id',gradientId);\r\n    gfill.setAttribute('spreadMethod','pad');\r\n    gfill.setAttribute('gradientUnits','userSpaceOnUse');\r\n    var stops = [];\r\n    var stop, j, jLen;\r\n    jLen = data.g.p*4;\r\n    for(j=0;j<jLen;j+=4){\r\n        stop = createNS('stop');\r\n        gfill.appendChild(stop);\r\n        stops.push(stop);\r\n    }\r\n    pathElement.setAttribute( data.ty === 'gf' ? 'fill':'stroke','url(#'+gradientId+')');\r\n    \r\n    this.gf = gfill;\r\n    this.cst = stops;\r\n};\r\n\r\nSVGGradientFillStyleData.prototype.setGradientOpacity = function(data, styleOb){\r\n    if(this.g._hasOpacity && !this.g._collapsable){\r\n        var stop, j, jLen;\r\n        var mask = createNS(\"mask\");\r\n        var maskElement = createNS( 'path');\r\n        mask.appendChild(maskElement);\r\n        var opacityId = 'op_'+randomString(10);\r\n        var maskId = 'mk_'+randomString(10);\r\n        mask.setAttribute('id',maskId);\r\n        var opFill = createNS(data.t === 1 ? 'linearGradient' : 'radialGradient');\r\n        opFill.setAttribute('id',opacityId);\r\n        opFill.setAttribute('spreadMethod','pad');\r\n        opFill.setAttribute('gradientUnits','userSpaceOnUse');\r\n        jLen = data.g.k.k[0].s ? data.g.k.k[0].s.length : data.g.k.k.length;\r\n        var stops = this.stops;\r\n        for(j=data.g.p*4;j<jLen;j+=2){\r\n            stop = createNS('stop');\r\n            stop.setAttribute('stop-color','rgb(255,255,255)');\r\n            opFill.appendChild(stop);\r\n            stops.push(stop);\r\n        }\r\n        maskElement.setAttribute( data.ty === 'gf' ? 'fill':'stroke','url(#'+opacityId+')');\r\n        this.of = opFill;\r\n        this.ms = mask;\r\n        this.ost = stops;\r\n        this.maskId = maskId;\r\n        styleOb.msElem = maskElement;\r\n    }\r\n};\r\n\r\nextendPrototype([DynamicPropertyContainer], SVGGradientFillStyleData);\nfunction SVGGradientStrokeStyleData(elem, data, styleOb){\r\n\tthis.initDynamicPropertyContainer(elem);\r\n\tthis.getValue = this.iterateDynamicProperties;\r\n\tthis.w = PropertyFactory.getProp(elem,data.w,0,null,this);\r\n\tthis.d = new DashProperty(elem,data.d||{},'svg',this);\r\n    this.initGradientData(elem, data, styleOb);\r\n    this._isAnimated = !!this._isAnimated;\r\n}\r\n\r\nextendPrototype([SVGGradientFillStyleData, DynamicPropertyContainer], SVGGradientStrokeStyleData);\nfunction ShapeGroupData() {\r\n\tthis.it = [];\r\n    this.prevViewData = [];\r\n    this.gr = createNS('g');\r\n}\nvar SVGElementsRenderer = (function() {\r\n\tvar _identityMatrix = new Matrix();\r\n\tvar _matrixHelper = new Matrix();\r\n\r\n\tvar ob = {\r\n\t\tcreateRenderFunction: createRenderFunction\r\n\t}\r\n\r\n\tfunction createRenderFunction(data) {\r\n\t    var ty = data.ty;\r\n\t    switch(data.ty) {\r\n\t        case 'fl':\r\n\t        return renderFill;\r\n\t        case 'gf':\r\n\t        return renderGradient;\r\n\t        case 'gs':\r\n\t        return renderGradientStroke;\r\n\t        case 'st':\r\n\t        return renderStroke;\r\n\t        case 'sh':\r\n\t        case 'el':\r\n\t        case 'rc':\r\n\t        case 'sr':\r\n\t        return renderPath;\r\n\t        case 'tr':\r\n\t        return renderContentTransform;\r\n\t    }\r\n\t}\r\n\r\n\tfunction renderContentTransform(styleData, itemData, isFirstFrame) {\r\n\t    if(isFirstFrame || itemData.transform.op._mdf){\r\n\t        itemData.transform.container.setAttribute('opacity',itemData.transform.op.v);\r\n\t    }\r\n\t    if(isFirstFrame || itemData.transform.mProps._mdf){\r\n\t        itemData.transform.container.setAttribute('transform',itemData.transform.mProps.v.to2dCSS());\r\n\t    }\r\n\t}\r\n\r\n\tfunction renderPath(styleData, itemData, isFirstFrame) {\r\n\t    var j, jLen,pathStringTransformed,redraw,pathNodes,l, lLen = itemData.styles.length;\r\n\t    var lvl = itemData.lvl;\r\n\t    var paths, mat, props, iterations, k;\r\n\t    for(l=0;l<lLen;l+=1){\r\n\t        redraw = itemData.sh._mdf || isFirstFrame;\r\n\t        if(itemData.styles[l].lvl < lvl){\r\n\t            mat = _matrixHelper.reset();\r\n\t            iterations = lvl - itemData.styles[l].lvl;\r\n\t            k = itemData.transformers.length-1;\r\n\t            while(!redraw && iterations > 0) {\r\n\t                redraw = itemData.transformers[k].mProps._mdf || redraw;\r\n\t                iterations --;\r\n\t                k --;\r\n\t            }\r\n\t            if(redraw) {\r\n\t                iterations = lvl - itemData.styles[l].lvl;\r\n\t                k = itemData.transformers.length-1;\r\n\t                while(iterations > 0) {\r\n\t                    props = itemData.transformers[k].mProps.v.props;\r\n\t                    mat.transform(props[0],props[1],props[2],props[3],props[4],props[5],props[6],props[7],props[8],props[9],props[10],props[11],props[12],props[13],props[14],props[15]);\r\n\t                    iterations --;\r\n\t                    k --;\r\n\t                }\r\n\t            }\r\n\t        } else {\r\n\t            mat = _identityMatrix;\r\n\t        }\r\n\t        paths = itemData.sh.paths;\r\n\t        jLen = paths._length;\r\n\t        if(redraw){\r\n\t            pathStringTransformed = '';\r\n\t            for(j=0;j<jLen;j+=1){\r\n\t                pathNodes = paths.shapes[j];\r\n\t                if(pathNodes && pathNodes._length){\r\n\t                    pathStringTransformed += buildShapeString(pathNodes, pathNodes._length, pathNodes.c, mat);\r\n\t                }\r\n\t            }\r\n\t            itemData.caches[l] = pathStringTransformed;\r\n\t        } else {\r\n\t            pathStringTransformed = itemData.caches[l];\r\n\t        }\r\n\t        itemData.styles[l].d += styleData.hd === true ? '' : pathStringTransformed;\r\n\t        itemData.styles[l]._mdf = redraw || itemData.styles[l]._mdf;\r\n\t    }\r\n\t}\r\n\r\n\tfunction renderFill (styleData,itemData, isFirstFrame){\r\n\t    var styleElem = itemData.style;\r\n\r\n\t    if(itemData.c._mdf || isFirstFrame){\r\n\t        styleElem.pElem.setAttribute('fill','rgb('+bm_floor(itemData.c.v[0])+','+bm_floor(itemData.c.v[1])+','+bm_floor(itemData.c.v[2])+')');\r\n\t    }\r\n\t    if(itemData.o._mdf || isFirstFrame){\r\n\t        styleElem.pElem.setAttribute('fill-opacity',itemData.o.v);\r\n\t    }\r\n\t};\r\n\r\n\tfunction renderGradientStroke (styleData, itemData, isFirstFrame) {\r\n\t    renderGradient(styleData, itemData, isFirstFrame);\r\n\t    renderStroke(styleData, itemData, isFirstFrame);\r\n\t}\r\n\r\n\tfunction renderGradient(styleData, itemData, isFirstFrame) {\r\n\t    var gfill = itemData.gf;\r\n\t    var hasOpacity = itemData.g._hasOpacity;\r\n\t    var pt1 = itemData.s.v, pt2 = itemData.e.v;\r\n\r\n\t    if (itemData.o._mdf || isFirstFrame) {\r\n\t        var attr = styleData.ty === 'gf' ? 'fill-opacity' : 'stroke-opacity';\r\n\t        itemData.style.pElem.setAttribute(attr, itemData.o.v);\r\n\t    }\r\n\t    if (itemData.s._mdf || isFirstFrame) {\r\n\t        var attr1 = styleData.t === 1 ? 'x1' : 'cx';\r\n\t        var attr2 = attr1 === 'x1' ? 'y1' : 'cy';\r\n\t        gfill.setAttribute(attr1, pt1[0]);\r\n\t        gfill.setAttribute(attr2, pt1[1]);\r\n\t        if (hasOpacity && !itemData.g._collapsable) {\r\n\t            itemData.of.setAttribute(attr1, pt1[0]);\r\n\t            itemData.of.setAttribute(attr2, pt1[1]);\r\n\t        }\r\n\t    }\r\n\t    var stops, i, len, stop;\r\n\t    if (itemData.g._cmdf || isFirstFrame) {\r\n\t        stops = itemData.cst;\r\n\t        var cValues = itemData.g.c;\r\n\t        len = stops.length;\r\n\t        for (i = 0; i < len; i += 1){\r\n\t            stop = stops[i];\r\n\t            stop.setAttribute('offset', cValues[i * 4] + '%');\r\n\t            stop.setAttribute('stop-color','rgb('+ cValues[i * 4 + 1] + ',' + cValues[i * 4 + 2] + ','+cValues[i * 4 + 3] + ')');\r\n\t        }\r\n\t    }\r\n\t    if (hasOpacity && (itemData.g._omdf || isFirstFrame)) {\r\n\t        var oValues = itemData.g.o;\r\n\t        if(itemData.g._collapsable) {\r\n\t            stops = itemData.cst;\r\n\t        } else {\r\n\t            stops = itemData.ost;\r\n\t        }\r\n\t        len = stops.length;\r\n\t        for (i = 0; i < len; i += 1) {\r\n\t            stop = stops[i];\r\n\t            if(!itemData.g._collapsable) {\r\n\t                stop.setAttribute('offset', oValues[i * 2] + '%');\r\n\t            }\r\n\t            stop.setAttribute('stop-opacity', oValues[i * 2 + 1]);\r\n\t        }\r\n\t    }\r\n\t    if (styleData.t === 1) {\r\n\t        if (itemData.e._mdf  || isFirstFrame) {\r\n\t            gfill.setAttribute('x2', pt2[0]);\r\n\t            gfill.setAttribute('y2', pt2[1]);\r\n\t            if (hasOpacity && !itemData.g._collapsable) {\r\n\t                itemData.of.setAttribute('x2', pt2[0]);\r\n\t                itemData.of.setAttribute('y2', pt2[1]);\r\n\t            }\r\n\t        }\r\n\t    } else {\r\n\t        var rad;\r\n\t        if (itemData.s._mdf || itemData.e._mdf || isFirstFrame) {\r\n\t            rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\r\n\t            gfill.setAttribute('r', rad);\r\n\t            if(hasOpacity && !itemData.g._collapsable){\r\n\t                itemData.of.setAttribute('r', rad);\r\n\t            }\r\n\t        }\r\n\t        if (itemData.e._mdf || itemData.h._mdf || itemData.a._mdf || isFirstFrame) {\r\n\t            if (!rad) {\r\n\t                rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\r\n\t            }\r\n\t            var ang = Math.atan2(pt2[1] - pt1[1], pt2[0] - pt1[0]);\r\n\r\n\t            var percent = itemData.h.v >= 1 ? 0.99 : itemData.h.v <= -1 ? -0.99: itemData.h.v;\r\n\t            var dist = rad * percent;\r\n\t            var x = Math.cos(ang + itemData.a.v) * dist + pt1[0];\r\n\t            var y = Math.sin(ang + itemData.a.v) * dist + pt1[1];\r\n\t            gfill.setAttribute('fx', x);\r\n\t            gfill.setAttribute('fy', y);\r\n\t            if (hasOpacity && !itemData.g._collapsable) {\r\n\t                itemData.of.setAttribute('fx', x);\r\n\t                itemData.of.setAttribute('fy', y);\r\n\t            }\r\n\t        }\r\n\t        //gfill.setAttribute('fy','200');\r\n\t    }\r\n\t};\r\n\r\n\tfunction renderStroke(styleData, itemData, isFirstFrame) {\r\n\t    var styleElem = itemData.style;\r\n\t    var d = itemData.d;\r\n\t    if (d && (d._mdf || isFirstFrame) && d.dashStr) {\r\n\t        styleElem.pElem.setAttribute('stroke-dasharray', d.dashStr);\r\n\t        styleElem.pElem.setAttribute('stroke-dashoffset', d.dashoffset[0]);\r\n\t    }\r\n\t    if(itemData.c && (itemData.c._mdf || isFirstFrame)){\r\n\t        styleElem.pElem.setAttribute('stroke','rgb(' + bm_floor(itemData.c.v[0]) + ',' + bm_floor(itemData.c.v[1]) + ',' + bm_floor(itemData.c.v[2]) + ')');\r\n\t    }\r\n\t    if(itemData.o._mdf || isFirstFrame){\r\n\t        styleElem.pElem.setAttribute('stroke-opacity', itemData.o.v);\r\n\t    }\r\n\t    if(itemData.w._mdf || isFirstFrame){\r\n\t        styleElem.pElem.setAttribute('stroke-width', itemData.w.v);\r\n\t        if(styleElem.msElem){\r\n\t            styleElem.msElem.setAttribute('stroke-width', itemData.w.v);\r\n\t        }\r\n\t    }\r\n\t};\r\n\r\n\treturn ob;\r\n}())\nfunction BaseElement(){\r\n}\r\n\r\nBaseElement.prototype = {\r\n    checkMasks: function(){\r\n        if(!this.data.hasMask){\r\n            return false;\r\n        }\r\n        var i = 0, len = this.data.masksProperties.length;\r\n        while(i<len) {\r\n            if((this.data.masksProperties[i].mode !== 'n' && this.data.masksProperties[i].cl !== false)) {\r\n                return true;\r\n            }\r\n            i += 1;\r\n        }\r\n        return false;\r\n    },\r\n    initExpressions: function(){\r\n        this.layerInterface = LayerExpressionInterface(this);\r\n        if(this.data.hasMask && this.maskManager) {\r\n            this.layerInterface.registerMaskInterface(this.maskManager);\r\n        }\r\n        var effectsInterface = EffectsExpressionInterface.createEffectsInterface(this,this.layerInterface);\r\n        this.layerInterface.registerEffectsInterface(effectsInterface);\r\n\r\n        if(this.data.ty === 0 || this.data.xt){\r\n            this.compInterface = CompExpressionInterface(this);\r\n        } else if(this.data.ty === 4){\r\n            this.layerInterface.shapeInterface = ShapeExpressionInterface(this.shapesData,this.itemsData,this.layerInterface);\r\n            this.layerInterface.content = this.layerInterface.shapeInterface;\r\n        } else if(this.data.ty === 5){\r\n            this.layerInterface.textInterface = TextExpressionInterface(this);\r\n            this.layerInterface.text = this.layerInterface.textInterface;\r\n        }\r\n    },\r\n    blendModeEnums: {\r\n        1:'multiply',\r\n        2:'screen',\r\n        3:'overlay',\r\n        4:'darken',\r\n        5:'lighten',\r\n        6:'color-dodge',\r\n        7:'color-burn',\r\n        8:'hard-light',\r\n        9:'soft-light',\r\n        10:'difference',\r\n        11:'exclusion',\r\n        12:'hue',\r\n        13:'saturation',\r\n        14:'color',\r\n        15:'luminosity'\r\n    },\r\n    getBlendMode: function(){\r\n        return this.blendModeEnums[this.data.bm] || '';\r\n    },\r\n    setBlendMode: function(){\r\n        var blendModeValue = this.getBlendMode();\r\n        var elem = this.baseElement || this.layerElement;\r\n\r\n        elem.style['mix-blend-mode'] = blendModeValue;\r\n    },\r\n    initBaseData: function(data, globalData, comp){\r\n        this.globalData = globalData;\r\n        this.comp = comp;\r\n        this.data = data;\r\n        this.layerId = 'ly_'+randomString(10);\r\n        \r\n        //Stretch factor for old animations missing this property.\r\n        if(!this.data.sr){\r\n            this.data.sr = 1;\r\n        }\r\n        // effects manager\r\n        this.effectsManager = new EffectsManager(this.data,this,this.dynamicProperties);\r\n        \r\n    },\r\n    getType: function(){\r\n        return this.type;\r\n    }\r\n}\nfunction NullElement(data,globalData,comp){\r\n    this.initFrame();\r\n\tthis.initBaseData(data, globalData, comp);\r\n    this.initFrame();\r\n    this.initTransform(data, globalData, comp);\r\n    this.initHierarchy();\r\n}\r\n\r\nNullElement.prototype.prepareFrame = function(num) {\r\n    this.prepareProperties(num, true);\r\n};\r\n\r\nNullElement.prototype.renderFrame = function() {\r\n};\r\n\r\nNullElement.prototype.getBaseElement = function() {\r\n\treturn null;\r\n};\r\n\r\nNullElement.prototype.destroy = function() {\r\n};\r\n\r\nNullElement.prototype.sourceRectAtTime = function() {\r\n};\r\n\r\nNullElement.prototype.hide = function() {\r\n};\r\n\r\nextendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement], NullElement);\r\n\nfunction SVGBaseElement(){\r\n}\r\n\r\nSVGBaseElement.prototype = {\r\n    initRendererElement: function() {\r\n        this.layerElement = createNS('g');\r\n    },\r\n    createContainerElements: function(){\r\n        this.matteElement = createNS('g');\r\n        this.transformedElement = this.layerElement;\r\n        this.maskedElement = this.layerElement;\r\n        this._sizeChanged = false;\r\n        var layerElementParent = null;\r\n        //If this layer acts as a mask for the following layer\r\n        var filId, fil, gg;\r\n        if (this.data.td) {\r\n            if (this.data.td == 3 || this.data.td == 1) {\r\n                var masker = createNS('mask');\r\n                masker.setAttribute('id', this.layerId);\r\n                masker.setAttribute('mask-type', this.data.td == 3 ? 'luminance' : 'alpha');\r\n                masker.appendChild(this.layerElement);\r\n                layerElementParent = masker;\r\n                this.globalData.defs.appendChild(masker);\r\n                // This is only for IE and Edge when mask if of type alpha\r\n                if (!featureSupport.maskType && this.data.td == 1) {\r\n                    masker.setAttribute('mask-type', 'luminance');\r\n                    filId = randomString(10);\r\n                    fil = filtersFactory.createFilter(filId);\r\n                    this.globalData.defs.appendChild(fil);\r\n                    fil.appendChild(filtersFactory.createAlphaToLuminanceFilter());\r\n                    gg = createNS('g');\r\n                    gg.appendChild(this.layerElement);\r\n                    layerElementParent = gg;\r\n                    masker.appendChild(gg);\r\n                    gg.setAttribute('filter','url(' + locationHref + '#' + filId + ')');\r\n                }\r\n            } else if(this.data.td == 2) {\r\n                var maskGroup = createNS('mask');\r\n                maskGroup.setAttribute('id', this.layerId);\r\n                maskGroup.setAttribute('mask-type','alpha');\r\n                var maskGrouper = createNS('g');\r\n                maskGroup.appendChild(maskGrouper);\r\n                filId = randomString(10);\r\n                fil = filtersFactory.createFilter(filId);\r\n                ////\r\n\r\n                var feColorMatrix = createNS('feColorMatrix');\r\n                feColorMatrix.setAttribute('type', 'matrix');\r\n                feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\r\n                feColorMatrix.setAttribute('values','1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 -1 1');\r\n                fil.appendChild(feColorMatrix);\r\n\r\n                ////\r\n                /*var feCTr = createNS('feComponentTransfer');\r\n                feCTr.setAttribute('in','SourceGraphic');\r\n                fil.appendChild(feCTr);\r\n                var feFunc = createNS('feFuncA');\r\n                feFunc.setAttribute('type','table');\r\n                feFunc.setAttribute('tableValues','1.0 0.0');\r\n                feCTr.appendChild(feFunc);*/\r\n                this.globalData.defs.appendChild(fil);\r\n                var alphaRect = createNS('rect');\r\n                alphaRect.setAttribute('width',  this.comp.data.w);\r\n                alphaRect.setAttribute('height', this.comp.data.h);\r\n                alphaRect.setAttribute('x','0');\r\n                alphaRect.setAttribute('y','0');\r\n                alphaRect.setAttribute('fill','#ffffff');\r\n                alphaRect.setAttribute('opacity','0');\r\n                maskGrouper.setAttribute('filter', 'url(' + locationHref + '#'+filId+')');\r\n                maskGrouper.appendChild(alphaRect);\r\n                maskGrouper.appendChild(this.layerElement);\r\n                layerElementParent = maskGrouper;\r\n                if (!featureSupport.maskType) {\r\n                    maskGroup.setAttribute('mask-type', 'luminance');\r\n                    fil.appendChild(filtersFactory.createAlphaToLuminanceFilter());\r\n                    gg = createNS('g');\r\n                    maskGrouper.appendChild(alphaRect);\r\n                    gg.appendChild(this.layerElement);\r\n                    layerElementParent = gg;\r\n                    maskGrouper.appendChild(gg);\r\n                }\r\n                this.globalData.defs.appendChild(maskGroup);\r\n            }\r\n        } else if (this.data.tt) {\r\n            this.matteElement.appendChild(this.layerElement);\r\n            layerElementParent = this.matteElement;\r\n            this.baseElement = this.matteElement;\r\n        } else {\r\n            this.baseElement = this.layerElement;\r\n        }\r\n        if (this.data.ln) {\r\n            this.layerElement.setAttribute('id', this.data.ln);\r\n        }\r\n        if (this.data.cl) {\r\n            this.layerElement.setAttribute('class', this.data.cl);\r\n        }\r\n        //Clipping compositions to hide content that exceeds boundaries. If collapsed transformations is on, component should not be clipped\r\n        if (this.data.ty === 0 && !this.data.hd) {\r\n            var cp = createNS( 'clipPath');\r\n            var pt = createNS('path');\r\n            pt.setAttribute('d','M0,0 L' + this.data.w + ',0' + ' L' + this.data.w + ',' + this.data.h + ' L0,' + this.data.h + 'z');\r\n            var clipId = 'cp_'+randomString(8);\r\n            cp.setAttribute('id',clipId);\r\n            cp.appendChild(pt);\r\n            this.globalData.defs.appendChild(cp);\r\n\r\n            if (this.checkMasks()) {\r\n                var cpGroup = createNS('g');\r\n                cpGroup.setAttribute('clip-path','url(' + locationHref + '#'+clipId + ')');\r\n                cpGroup.appendChild(this.layerElement);\r\n                this.transformedElement = cpGroup;\r\n                if (layerElementParent) {\r\n                    layerElementParent.appendChild(this.transformedElement);\r\n                } else {\r\n                    this.baseElement = this.transformedElement;\r\n                }\r\n            } else {\r\n                this.layerElement.setAttribute('clip-path','url(' + locationHref + '#'+clipId+')');\r\n            }\r\n            \r\n        }\r\n        if (this.data.bm !== 0) {\r\n            this.setBlendMode();\r\n        }\r\n        this.renderableEffectsManager = new SVGEffects(this);\r\n\r\n    },\r\n    renderElement: function() {\r\n        if (this.finalTransform._matMdf) {\r\n            this.transformedElement.setAttribute('transform', this.finalTransform.mat.to2dCSS());\r\n        }\r\n        if (this.finalTransform._opMdf) {\r\n            this.transformedElement.setAttribute('opacity', this.finalTransform.mProp.o.v);\r\n        }\r\n    },\r\n    destroyBaseElement: function() {\r\n        this.layerElement = null;\r\n        this.matteElement = null;\r\n        this.maskManager.destroy();\r\n    },\r\n    getBaseElement: function() {\r\n        if (this.data.hd) {\r\n            return null;\r\n        }\r\n        return this.baseElement;\r\n    },\r\n    addMasks: function() {\r\n        this.maskManager = new MaskElement(this.data, this, this.globalData);\r\n    },\r\n    setMatte: function(id) {\r\n        if (!this.matteElement) {\r\n            return;\r\n        }\r\n        this.matteElement.setAttribute(\"mask\", \"url(\" + locationHref + \"#\" + id + \")\");\r\n    }\r\n};\nfunction IShapeElement(){\r\n}\r\n\r\nIShapeElement.prototype = {\r\n    addShapeToModifiers: function(data) {\r\n        var i, len = this.shapeModifiers.length;\r\n        for(i=0;i<len;i+=1){\r\n            this.shapeModifiers[i].addShape(data);\r\n        }\r\n    },\r\n    isShapeInAnimatedModifiers: function(data) {\r\n        var i = 0, len = this.shapeModifiers.length;\r\n        while(i < len) {\r\n            if(this.shapeModifiers[i].isAnimatedWithShape(data)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n    renderModifiers: function() {\r\n        if(!this.shapeModifiers.length){\r\n            return;\r\n        }\r\n        var i, len = this.shapes.length;\r\n        for(i=0;i<len;i+=1){\r\n            this.shapes[i].sh.reset();\r\n        }\r\n\r\n        len = this.shapeModifiers.length;\r\n        for(i=len-1;i>=0;i-=1){\r\n            this.shapeModifiers[i].processShapes(this._isFirstFrame);\r\n        }\r\n    },\r\n    lcEnum: {\r\n        '1': 'butt',\r\n        '2': 'round',\r\n        '3': 'square'\r\n    },\r\n    ljEnum: {\r\n        '1': 'miter',\r\n        '2': 'round',\r\n        '3': 'bevel'\r\n    },\r\n    searchProcessedElement: function(elem){\r\n        var elements = this.processedElements;\r\n        var i = 0, len = elements.length;\r\n        while(i < len){\r\n            if(elements[i].elem === elem){\r\n                return elements[i].pos;\r\n            }\r\n            i += 1;\r\n        }\r\n        return 0;\r\n    },\r\n    addProcessedElement: function(elem, pos){\r\n        var elements = this.processedElements;\r\n        var i = elements.length;\r\n        while(i){\r\n            i -= 1;\r\n            if(elements[i].elem === elem){\r\n                elements[i].pos = pos;\r\n                return;\r\n            }\r\n        }\r\n        elements.push(new ProcessedElement(elem, pos));\r\n    },\r\n    prepareFrame: function(num) {\r\n        this.prepareRenderableFrame(num);\r\n        this.prepareProperties(num, this.isInRange);\r\n    }\r\n};\nfunction ITextElement(){\r\n}\r\n\r\nITextElement.prototype.initElement = function(data,globalData,comp){\r\n    this.lettersChangedFlag = true;\r\n    this.initFrame();\r\n    this.initBaseData(data, globalData, comp);\r\n    this.textProperty = new TextProperty(this, data.t, this.dynamicProperties);\r\n    this.textAnimator = new TextAnimatorProperty(data.t, this.renderType, this);\r\n    this.initTransform(data, globalData, comp);\r\n    this.initHierarchy();\r\n    this.initRenderable();\r\n    this.initRendererElement();\r\n    this.createContainerElements();\r\n    this.addMasks();\r\n    this.createContent();\r\n    this.hide();\r\n    this.textAnimator.searchProperties(this.dynamicProperties);\r\n};\r\n\r\nITextElement.prototype.prepareFrame = function(num) {\r\n    this._mdf = false;\r\n    this.prepareRenderableFrame(num);\r\n    this.prepareProperties(num, this.isInRange);\r\n    if(this.textProperty._mdf || this.textProperty._isFirstFrame) {\r\n        this.buildNewText();\r\n        this.textProperty._isFirstFrame = false;\r\n        this.textProperty._mdf = false;\r\n    }\r\n};\r\n\r\nITextElement.prototype.createPathShape = function(matrixHelper, shapes) {\r\n    var j,jLen = shapes.length;\r\n    var k, kLen, pathNodes;\r\n    var shapeStr = '';\r\n    for(j=0;j<jLen;j+=1){\r\n        pathNodes = shapes[j].ks.k;\r\n        shapeStr += buildShapeString(pathNodes, pathNodes.i.length, true, matrixHelper);\r\n    }\r\n    return shapeStr;\r\n};\r\n\r\nITextElement.prototype.updateDocumentData = function(newData, index) {\r\n    this.textProperty.updateDocumentData(newData, index);\r\n};\r\n\r\nITextElement.prototype.canResizeFont = function(_canResize) {\r\n    this.textProperty.canResizeFont(_canResize);\r\n};\r\n\r\nITextElement.prototype.setMinimumFontSize = function(_fontSize) {\r\n    this.textProperty.setMinimumFontSize(_fontSize);\r\n};\r\n\r\nITextElement.prototype.applyTextPropertiesToMatrix = function(documentData, matrixHelper, lineNumber, xPos, yPos) {\r\n    if(documentData.ps){\r\n        matrixHelper.translate(documentData.ps[0],documentData.ps[1] + documentData.ascent,0);\r\n    }\r\n    matrixHelper.translate(0,-documentData.ls,0);\r\n    switch(documentData.j){\r\n        case 1:\r\n            matrixHelper.translate(documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[lineNumber]),0,0);\r\n            break;\r\n        case 2:\r\n            matrixHelper.translate(documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[lineNumber] )/2,0,0);\r\n            break;\r\n    }\r\n    matrixHelper.translate(xPos, yPos, 0);\r\n};\r\n\r\n\r\nITextElement.prototype.buildColor = function(colorData) {\r\n    return 'rgb(' + Math.round(colorData[0]*255) + ',' + Math.round(colorData[1]*255) + ',' + Math.round(colorData[2]*255) + ')';\r\n};\r\n\r\nITextElement.prototype.emptyProp = new LetterProps();\r\n\r\nITextElement.prototype.destroy = function(){\r\n    \r\n};\nfunction ICompElement(){}\r\n\r\nextendPrototype([BaseElement, TransformElement, HierarchyElement, FrameElement, RenderableDOMElement], ICompElement);\r\n\r\nICompElement.prototype.initElement = function(data,globalData,comp) {\r\n    this.initFrame();\r\n    this.initBaseData(data, globalData, comp);\r\n    this.initTransform(data, globalData, comp);\r\n    this.initRenderable();\r\n    this.initHierarchy();\r\n    this.initRendererElement();\r\n    this.createContainerElements();\r\n    this.addMasks();\r\n    if(this.data.xt || !globalData.progressiveLoad){\r\n        this.buildAllItems();\r\n    }\r\n    this.hide();\r\n};\r\n\r\n/*ICompElement.prototype.hide = function(){\r\n    if(!this.hidden){\r\n        this.hideElement();\r\n        var i,len = this.elements.length;\r\n        for( i = 0; i < len; i+=1 ){\r\n            if(this.elements[i]){\r\n                this.elements[i].hide();\r\n            }\r\n        }\r\n    }\r\n};*/\r\n\r\nICompElement.prototype.prepareFrame = function(num){\r\n    this._mdf = false;\r\n    this.prepareRenderableFrame(num);\r\n    this.prepareProperties(num, this.isInRange);\r\n    if(!this.isInRange && !this.data.xt){\r\n        return;\r\n    }\r\n\r\n    if (!this.tm._placeholder) {\r\n        var timeRemapped = this.tm.v;\r\n        if(timeRemapped === this.data.op){\r\n            timeRemapped = this.data.op - 1;\r\n        }\r\n        this.renderedFrame = timeRemapped;\r\n    } else {\r\n        this.renderedFrame = num/this.data.sr;\r\n    }\r\n    var i,len = this.elements.length;\r\n    if(!this.completeLayers){\r\n        this.checkLayers(this.renderedFrame);\r\n    }\r\n    //This iteration needs to be backwards because of how expressions connect between each other\r\n    for( i = len - 1; i >= 0; i -= 1 ){\r\n        if(this.completeLayers || this.elements[i]){\r\n            this.elements[i].prepareFrame(this.renderedFrame - this.layers[i].st);\r\n            if(this.elements[i]._mdf) {\r\n                this._mdf = true;\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nICompElement.prototype.renderInnerContent = function() {\r\n    var i,len = this.layers.length;\r\n    for( i = 0; i < len; i += 1 ){\r\n        if(this.completeLayers || this.elements[i]){\r\n            this.elements[i].renderFrame();\r\n        }\r\n    }\r\n};\r\n\r\nICompElement.prototype.setElements = function(elems){\r\n    this.elements = elems;\r\n};\r\n\r\nICompElement.prototype.getElements = function(){\r\n    return this.elements;\r\n};\r\n\r\nICompElement.prototype.destroyElements = function(){\r\n    var i,len = this.layers.length;\r\n    for( i = 0; i < len; i+=1 ){\r\n        if(this.elements[i]){\r\n            this.elements[i].destroy();\r\n        }\r\n    }\r\n};\r\n\r\nICompElement.prototype.destroy = function(){\r\n    this.destroyElements();\r\n    this.destroyBaseElement();\r\n};\r\n\nfunction IImageElement(data,globalData,comp){\r\n    this.assetData = globalData.getAssetData(data.refId);\r\n    this.initElement(data,globalData,comp);\r\n}\r\n\r\nextendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement], IImageElement);\r\n\r\nIImageElement.prototype.createContent = function(){\r\n\r\n    var assetPath = this.globalData.getAssetsPath(this.assetData);\r\n\r\n    this.innerElem = createNS('image');\r\n    this.innerElem.setAttribute('width',this.assetData.w+\"px\");\r\n    this.innerElem.setAttribute('height',this.assetData.h+\"px\");\r\n    this.innerElem.setAttribute('preserveAspectRatio',this.assetData.pr || this.globalData.renderConfig.imagePreserveAspectRatio);\r\n    this.innerElem.setAttributeNS('http://www.w3.org/1999/xlink','href',assetPath);\r\n    \r\n    this.layerElement.appendChild(this.innerElem);\r\n};\r\n\nfunction ISolidElement(data,globalData,comp){\r\n    this.initElement(data,globalData,comp);\r\n}\r\nextendPrototype([IImageElement], ISolidElement);\r\n\r\nISolidElement.prototype.createContent = function(){\r\n\r\n    var rect = createNS('rect');\r\n    ////rect.style.width = this.data.sw;\r\n    ////rect.style.height = this.data.sh;\r\n    ////rect.style.fill = this.data.sc;\r\n    rect.setAttribute('width',this.data.sw);\r\n    rect.setAttribute('height',this.data.sh);\r\n    rect.setAttribute('fill',this.data.sc);\r\n    this.layerElement.appendChild(rect);\r\n};\nfunction SVGCompElement(data,globalData,comp){\r\n    this.layers = data.layers;\r\n    this.supports3d = true;\r\n    this.completeLayers = false;\r\n    this.pendingElements = [];\r\n    this.elements = this.layers ? createSizedArray(this.layers.length) : [];\r\n    //this.layerElement = createNS('g');\r\n    this.initElement(data,globalData,comp);\r\n    this.tm = data.tm ? PropertyFactory.getProp(this,data.tm,0,globalData.frameRate,this) : {_placeholder:true};\r\n}\r\n\r\nextendPrototype([SVGRenderer, ICompElement, SVGBaseElement], SVGCompElement);\nfunction SVGTextElement(data,globalData,comp){\r\n    this.textSpans = [];\r\n    this.renderType = 'svg';\r\n    this.initElement(data,globalData,comp);\r\n}\r\n\r\nextendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement], SVGTextElement);\r\n\r\nSVGTextElement.prototype.createContent = function(){\r\n\r\n    if (this.data.singleShape && !this.globalData.fontManager.chars) {\r\n        this.textContainer = createNS('text');\r\n    }\r\n};\r\n\r\nSVGTextElement.prototype.buildTextContents = function(textArray) {\r\n    var i = 0, len = textArray.length;\r\n    var textContents = [], currentTextContent = '';\r\n    while (i < len) {\r\n        if(textArray[i] === String.fromCharCode(13)) {\r\n            textContents.push(currentTextContent);\r\n            currentTextContent = '';\r\n        } else {\r\n            currentTextContent += textArray[i];\r\n        }\r\n        i += 1;\r\n    }\r\n    textContents.push(currentTextContent);\r\n    return textContents;\r\n}\r\n\r\nSVGTextElement.prototype.buildNewText = function(){\r\n    var i, len;\r\n\r\n    var documentData = this.textProperty.currentData;\r\n    this.renderedLetters = createSizedArray(documentData ? documentData.l.length : 0);\r\n    if(documentData.fc) {\r\n        this.layerElement.setAttribute('fill', this.buildColor(documentData.fc));\r\n    }else{\r\n        this.layerElement.setAttribute('fill', 'rgba(0,0,0,0)');\r\n    }\r\n    if(documentData.sc){\r\n        this.layerElement.setAttribute('stroke', this.buildColor(documentData.sc));\r\n        this.layerElement.setAttribute('stroke-width', documentData.sw);\r\n    }\r\n    this.layerElement.setAttribute('font-size', documentData.finalSize);\r\n    var fontData = this.globalData.fontManager.getFontByName(documentData.f);\r\n    if(fontData.fClass){\r\n        this.layerElement.setAttribute('class',fontData.fClass);\r\n    } else {\r\n        this.layerElement.setAttribute('font-family', fontData.fFamily);\r\n        var fWeight = documentData.fWeight, fStyle = documentData.fStyle;\r\n        this.layerElement.setAttribute('font-style', fStyle);\r\n        this.layerElement.setAttribute('font-weight', fWeight);\r\n    }\r\n\r\n    var letters = documentData.l || [];\r\n    var usesGlyphs = this.globalData.fontManager.chars;\r\n    len = letters.length;\r\n\r\n    var tSpan;\r\n    var matrixHelper = this.mHelper;\r\n    var shapes, shapeStr = '', singleShape = this.data.singleShape;\r\n    var xPos = 0, yPos = 0, firstLine = true;\r\n    var trackingOffset = documentData.tr/1000*documentData.finalSize;\r\n    if(singleShape && !usesGlyphs && !documentData.sz) {\r\n        var tElement = this.textContainer;\r\n        var justify = 'start';\r\n        switch(documentData.j) {\r\n            case 1:\r\n                justify = 'end';\r\n                break;\r\n            case 2:\r\n                justify = 'middle';\r\n                break;\r\n        }\r\n        tElement.setAttribute('text-anchor',justify);\r\n        tElement.setAttribute('letter-spacing',trackingOffset);\r\n        var textContent = this.buildTextContents(documentData.finalText);\r\n        len = textContent.length;\r\n        yPos = documentData.ps ? documentData.ps[1] + documentData.ascent : 0;\r\n        for ( i = 0; i < len; i += 1) {\r\n            tSpan = this.textSpans[i] || createNS('tspan');\r\n            tSpan.textContent = textContent[i];\r\n            tSpan.setAttribute('x', 0);\r\n            tSpan.setAttribute('y', yPos);\r\n            tSpan.style.display = 'inherit';\r\n            tElement.appendChild(tSpan);\r\n            this.textSpans[i] = tSpan;\r\n            yPos += documentData.finalLineHeight;\r\n        }\r\n        \r\n        this.layerElement.appendChild(tElement);\r\n    } else {\r\n        var cachedSpansLength = this.textSpans.length;\r\n        var shapeData, charData;\r\n        for (i = 0; i < len; i += 1) {\r\n            if(!usesGlyphs || !singleShape || i === 0){\r\n                tSpan = cachedSpansLength > i ? this.textSpans[i] : createNS(usesGlyphs?'path':'text');\r\n                if (cachedSpansLength <= i) {\r\n                    tSpan.setAttribute('stroke-linecap', 'butt');\r\n                    tSpan.setAttribute('stroke-linejoin','round');\r\n                    tSpan.setAttribute('stroke-miterlimit','4');\r\n                    this.textSpans[i] = tSpan;\r\n                    this.layerElement.appendChild(tSpan);\r\n                }\r\n                tSpan.style.display = 'inherit';\r\n            }\r\n            \r\n            matrixHelper.reset();\r\n            matrixHelper.scale(documentData.finalSize / 100, documentData.finalSize / 100);\r\n            if (singleShape) {\r\n                if(letters[i].n) {\r\n                    xPos = -trackingOffset;\r\n                    yPos += documentData.yOffset;\r\n                    yPos += firstLine ? 1 : 0;\r\n                    firstLine = false;\r\n                }\r\n                this.applyTextPropertiesToMatrix(documentData, matrixHelper, letters[i].line, xPos, yPos);\r\n                xPos += letters[i].l || 0;\r\n                //xPos += letters[i].val === ' ' ? 0 : trackingOffset;\r\n                xPos += trackingOffset;\r\n            }\r\n            if(usesGlyphs) {\r\n                charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\r\n                shapeData = charData && charData.data || {};\r\n                shapes = shapeData.shapes ? shapeData.shapes[0].it : [];\r\n                if(!singleShape){\r\n                    tSpan.setAttribute('d',this.createPathShape(matrixHelper,shapes));\r\n                } else {\r\n                    shapeStr += this.createPathShape(matrixHelper,shapes);\r\n                }\r\n            } else {\r\n                if(singleShape) {\r\n                    tSpan.setAttribute(\"transform\", \"translate(\" + matrixHelper.props[12] + \",\" + matrixHelper.props[13] + \")\");\r\n                }\r\n                tSpan.textContent = letters[i].val;\r\n                tSpan.setAttributeNS(\"http://www.w3.org/XML/1998/namespace\", \"xml:space\",\"preserve\");\r\n            }\r\n            //\r\n        }\r\n        if (singleShape && tSpan) {\r\n            tSpan.setAttribute('d',shapeStr);\r\n        }\r\n    }\r\n    while (i < this.textSpans.length){\r\n        this.textSpans[i].style.display = 'none';\r\n        i += 1;\r\n    }\r\n    \r\n    this._sizeChanged = true;\r\n};\r\n\r\nSVGTextElement.prototype.sourceRectAtTime = function(time){\r\n    this.prepareFrame(this.comp.renderedFrame - this.data.st);\r\n    this.renderInnerContent();\r\n    if(this._sizeChanged){\r\n        this._sizeChanged = false;\r\n        var textBox = this.layerElement.getBBox();\r\n        this.bbox = {\r\n            top: textBox.y,\r\n            left: textBox.x,\r\n            width: textBox.width,\r\n            height: textBox.height\r\n        };\r\n    }\r\n    return this.bbox;\r\n};\r\n\r\nSVGTextElement.prototype.renderInnerContent = function(){\r\n\r\n    if(!this.data.singleShape){\r\n        this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\r\n        if(this.lettersChangedFlag || this.textAnimator.lettersChangedFlag){\r\n            this._sizeChanged = true;\r\n            var  i,len;\r\n            var renderedLetters = this.textAnimator.renderedLetters;\r\n\r\n            var letters = this.textProperty.currentData.l;\r\n\r\n            len = letters.length;\r\n            var renderedLetter, textSpan;\r\n            for(i=0;i<len;i+=1){\r\n                if(letters[i].n){\r\n                    continue;\r\n                }\r\n                renderedLetter = renderedLetters[i];\r\n                textSpan = this.textSpans[i];\r\n                if(renderedLetter._mdf.m) {\r\n                    textSpan.setAttribute('transform',renderedLetter.m);\r\n                }\r\n                if(renderedLetter._mdf.o) {\r\n                    textSpan.setAttribute('opacity',renderedLetter.o);\r\n                }\r\n                if(renderedLetter._mdf.sw){\r\n                    textSpan.setAttribute('stroke-width',renderedLetter.sw);\r\n                }\r\n                if(renderedLetter._mdf.sc){\r\n                    textSpan.setAttribute('stroke',renderedLetter.sc);\r\n                }\r\n                if(renderedLetter._mdf.fc){\r\n                    textSpan.setAttribute('fill',renderedLetter.fc);\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\nfunction SVGShapeElement(data,globalData,comp){\r\n    //List of drawable elements\r\n    this.shapes = [];\r\n    // Full shape data\r\n    this.shapesData = data.shapes;\r\n    //List of styles that will be applied to shapes\r\n    this.stylesList = [];\r\n    //List of modifiers that will be applied to shapes\r\n    this.shapeModifiers = [];\r\n    //List of items in shape tree\r\n    this.itemsData = [];\r\n    //List of items in previous shape tree\r\n    this.processedElements = [];\r\n    // List of animated components\r\n    this.animatedContents = [];\r\n    this.initElement(data,globalData,comp);\r\n    //Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\r\n    // List of elements that have been created\r\n    this.prevViewData = [];\r\n    //Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\r\n}\r\n\r\nextendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement], SVGShapeElement);\r\n\r\nSVGShapeElement.prototype.initSecondaryElement = function() {\r\n};\r\n\r\nSVGShapeElement.prototype.identityMatrix = new Matrix();\r\n\r\nSVGShapeElement.prototype.buildExpressionInterface = function(){};\r\n\r\nSVGShapeElement.prototype.createContent = function(){\r\n    this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement, 0, [], true);\r\n    this.filterUniqueShapes();\r\n};\r\n\r\n/*\r\nThis method searches for multiple shapes that affect a single element and one of them is animated\r\n*/\r\nSVGShapeElement.prototype.filterUniqueShapes = function(){\r\n    var i, len = this.shapes.length, shape;\r\n    var j, jLen = this.stylesList.length;\r\n    var style, count = 0;\r\n    var tempShapes = [];\r\n    var areAnimated = false;\r\n    for(j = 0; j < jLen; j += 1) {\r\n        style = this.stylesList[j];\r\n        areAnimated = false;\r\n        tempShapes.length = 0;\r\n        for(i = 0; i < len; i += 1) {\r\n            shape = this.shapes[i];\r\n            if(shape.styles.indexOf(style) !== -1) {\r\n                tempShapes.push(shape);\r\n                areAnimated = shape._isAnimated || areAnimated;\r\n            }\r\n        }\r\n        if(tempShapes.length > 1 && areAnimated) {\r\n            this.setShapesAsAnimated(tempShapes);\r\n        }\r\n    }\r\n}\r\n\r\nSVGShapeElement.prototype.setShapesAsAnimated = function(shapes){\r\n    var i, len = shapes.length;\r\n    for(i = 0; i < len; i += 1) {\r\n        shapes[i].setAsAnimated();\r\n    }\r\n}\r\n\r\nSVGShapeElement.prototype.createStyleElement = function(data, level){\r\n    //TODO: prevent drawing of hidden styles\r\n    var elementData;\r\n    var styleOb = new SVGStyleData(data, level);\r\n\r\n    var pathElement = styleOb.pElem;\r\n    if(data.ty === 'st') {\r\n        elementData = new SVGStrokeStyleData(this, data, styleOb);\r\n    } else if(data.ty === 'fl') {\r\n        elementData = new SVGFillStyleData(this, data, styleOb);\r\n    } else if(data.ty === 'gf' || data.ty === 'gs') {\r\n        var gradientConstructor = data.ty === 'gf' ? SVGGradientFillStyleData : SVGGradientStrokeStyleData;\r\n        elementData = new gradientConstructor(this, data, styleOb);\r\n        this.globalData.defs.appendChild(elementData.gf);\r\n        if (elementData.maskId) {\r\n            this.globalData.defs.appendChild(elementData.ms);\r\n            this.globalData.defs.appendChild(elementData.of);\r\n            pathElement.setAttribute('mask','url(#' + elementData.maskId + ')');\r\n        }\r\n    }\r\n    \r\n    if(data.ty === 'st' || data.ty === 'gs') {\r\n        pathElement.setAttribute('stroke-linecap', this.lcEnum[data.lc] || 'round');\r\n        pathElement.setAttribute('stroke-linejoin',this.ljEnum[data.lj] || 'round');\r\n        pathElement.setAttribute('fill-opacity','0');\r\n        if(data.lj === 1) {\r\n            pathElement.setAttribute('stroke-miterlimit',data.ml);\r\n        }\r\n    }\r\n\r\n    if(data.r === 2) {\r\n        pathElement.setAttribute('fill-rule', 'evenodd');\r\n    }\r\n\r\n    if(data.ln){\r\n        pathElement.setAttribute('id',data.ln);\r\n    }\r\n    if(data.cl){\r\n        pathElement.setAttribute('class',data.cl);\r\n    }\r\n    this.stylesList.push(styleOb);\r\n    this.addToAnimatedContents(data, elementData);\r\n    return elementData;\r\n};\r\n\r\nSVGShapeElement.prototype.createGroupElement = function(data) {\r\n    var elementData = new ShapeGroupData();\r\n    if(data.ln){\r\n        elementData.gr.setAttribute('id',data.ln);\r\n    }\r\n    return elementData;\r\n};\r\n\r\nSVGShapeElement.prototype.createTransformElement = function(data, container) {\r\n    var transformProperty = TransformPropertyFactory.getTransformProperty(this,data,this);\r\n    var elementData = new SVGTransformData(transformProperty, transformProperty.o, container);\r\n    this.addToAnimatedContents(data, elementData);\r\n    return elementData;\r\n};\r\n\r\nSVGShapeElement.prototype.createShapeElement = function(data, ownTransformers, level) {\r\n    var ty = 4;\r\n    if(data.ty === 'rc'){\r\n        ty = 5;\r\n    }else if(data.ty === 'el'){\r\n        ty = 6;\r\n    }else if(data.ty === 'sr'){\r\n        ty = 7;\r\n    }\r\n    var shapeProperty = ShapePropertyFactory.getShapeProp(this,data,ty,this);\r\n    var elementData = new SVGShapeData(ownTransformers, level, shapeProperty);\r\n    this.shapes.push(elementData);\r\n    this.addShapeToModifiers(elementData);\r\n    this.addToAnimatedContents(data, elementData);\r\n    return elementData;\r\n};\r\n\r\nSVGShapeElement.prototype.addToAnimatedContents = function(data, element) {\r\n    var i = 0, len = this.animatedContents.length;\r\n    while(i < len) {\r\n        if(this.animatedContents[i].element === element) {\r\n            return;\r\n        }\r\n        i += 1;\r\n    }\r\n    this.animatedContents.push({\r\n        fn: SVGElementsRenderer.createRenderFunction(data),\r\n        element: element,\r\n        data: data\r\n    });\r\n};\r\n\r\nSVGShapeElement.prototype.setElementStyles = function(elementData){\r\n    var arr = elementData.styles;\r\n    var j, jLen = this.stylesList.length;\r\n    for (j = 0; j < jLen; j += 1) {\r\n        if (!this.stylesList[j].closed) {\r\n            arr.push(this.stylesList[j]);\r\n        }\r\n    }\r\n};\r\n\r\nSVGShapeElement.prototype.reloadShapes = function(){\r\n    this._isFirstFrame = true;\r\n    var i, len = this.itemsData.length;\r\n    for( i = 0; i < len; i += 1) {\r\n        this.prevViewData[i] = this.itemsData[i];\r\n    }\r\n    this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement, 0, [], true);\r\n    this.filterUniqueShapes();\r\n    len = this.dynamicProperties.length;\r\n    for(i = 0; i < len; i += 1) {\r\n        this.dynamicProperties[i].getValue();\r\n    }\r\n    this.renderModifiers();\r\n};\r\n\r\nSVGShapeElement.prototype.searchShapes = function(arr,itemsData,prevViewData,container, level, transformers, render){\r\n    var ownTransformers = [].concat(transformers);\r\n    var i, len = arr.length - 1;\r\n    var j, jLen;\r\n    var ownStyles = [], ownModifiers = [], styleOb, currentTransform, modifier, processedPos;\r\n    for(i=len;i>=0;i-=1){\r\n        processedPos = this.searchProcessedElement(arr[i]);\r\n        if(!processedPos){\r\n            arr[i]._render = render;\r\n        } else {\r\n            itemsData[i] = prevViewData[processedPos - 1];\r\n        }\r\n        if(arr[i].ty == 'fl' || arr[i].ty == 'st' || arr[i].ty == 'gf' || arr[i].ty == 'gs'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createStyleElement(arr[i], level);\r\n            } else {\r\n                itemsData[i].style.closed = false;\r\n            }\r\n            if(arr[i]._render){\r\n                container.appendChild(itemsData[i].style.pElem);\r\n            }\r\n            ownStyles.push(itemsData[i].style);\r\n        }else if(arr[i].ty == 'gr'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createGroupElement(arr[i]);\r\n            } else {\r\n                jLen = itemsData[i].it.length;\r\n                for(j=0;j<jLen;j+=1){\r\n                    itemsData[i].prevViewData[j] = itemsData[i].it[j];\r\n                }\r\n            }\r\n            this.searchShapes(arr[i].it,itemsData[i].it,itemsData[i].prevViewData,itemsData[i].gr, level + 1, ownTransformers, render);\r\n            if(arr[i]._render){\r\n                container.appendChild(itemsData[i].gr);\r\n            }\r\n        }else if(arr[i].ty == 'tr'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createTransformElement(arr[i], container);\r\n            }\r\n            currentTransform = itemsData[i].transform;\r\n            ownTransformers.push(currentTransform);\r\n        }else if(arr[i].ty == 'sh' || arr[i].ty == 'rc' || arr[i].ty == 'el' || arr[i].ty == 'sr'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createShapeElement(arr[i], ownTransformers, level);\r\n            }\r\n            this.setElementStyles(itemsData[i]);\r\n\r\n        }else if(arr[i].ty == 'tm' || arr[i].ty == 'rd' || arr[i].ty == 'ms'){\r\n            if(!processedPos){\r\n                modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n                modifier.init(this,arr[i]);\r\n                itemsData[i] = modifier;\r\n                this.shapeModifiers.push(modifier);\r\n            } else {\r\n                modifier = itemsData[i];\r\n                modifier.closed = false;\r\n            }\r\n            ownModifiers.push(modifier);\r\n        }else if(arr[i].ty == 'rp'){\r\n            if(!processedPos){\r\n                modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n                itemsData[i] = modifier;\r\n                modifier.init(this,arr,i,itemsData);\r\n                this.shapeModifiers.push(modifier);\r\n                render = false;\r\n            }else{\r\n                modifier = itemsData[i];\r\n                modifier.closed = true;\r\n            }\r\n            ownModifiers.push(modifier);\r\n        }\r\n        this.addProcessedElement(arr[i], i + 1);\r\n    }\r\n    len = ownStyles.length;\r\n    for(i=0;i<len;i+=1){\r\n        ownStyles[i].closed = true;\r\n    }\r\n    len = ownModifiers.length;\r\n    for(i=0;i<len;i+=1){\r\n        ownModifiers[i].closed = true;\r\n    }\r\n};\r\n\r\nSVGShapeElement.prototype.renderInnerContent = function() {\r\n    this.renderModifiers();\r\n    var i, len = this.stylesList.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.stylesList[i].reset();\r\n    }\r\n    this.renderShape();\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n        if (this.stylesList[i]._mdf || this._isFirstFrame) {\r\n            if(this.stylesList[i].msElem){\r\n                this.stylesList[i].msElem.setAttribute('d', this.stylesList[i].d);\r\n                //Adding M0 0 fixes same mask bug on all browsers\r\n                this.stylesList[i].d = 'M0 0' + this.stylesList[i].d;\r\n            }\r\n            this.stylesList[i].pElem.setAttribute('d', this.stylesList[i].d || 'M0 0');\r\n        }\r\n    }\r\n};\r\n\r\nSVGShapeElement.prototype.renderShape = function() {\r\n    var i, len = this.animatedContents.length;\r\n    var animatedContent;\r\n    for(i = 0; i < len; i += 1) {\r\n        animatedContent = this.animatedContents[i];\r\n        if((this._isFirstFrame || animatedContent.element._isAnimated) && animatedContent.data !== true) {\r\n            animatedContent.fn(animatedContent.data, animatedContent.element, this._isFirstFrame);\r\n        }\r\n    }\r\n}\r\n\r\nSVGShapeElement.prototype.destroy = function(){\r\n    this.destroyBaseElement();\r\n    this.shapesData = null;\r\n    this.itemsData = null;\r\n};\r\n\nfunction SVGTintFilter(filter, filterManager){\r\n    this.filterManager = filterManager;\r\n    var feColorMatrix = createNS('feColorMatrix');\r\n    feColorMatrix.setAttribute('type','matrix');\r\n    feColorMatrix.setAttribute('color-interpolation-filters','linearRGB');\r\n    feColorMatrix.setAttribute('values','0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0');\r\n    feColorMatrix.setAttribute('result','f1');\r\n    filter.appendChild(feColorMatrix);\r\n    feColorMatrix = createNS('feColorMatrix');\r\n    feColorMatrix.setAttribute('type','matrix');\r\n    feColorMatrix.setAttribute('color-interpolation-filters','sRGB');\r\n    feColorMatrix.setAttribute('values','1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0');\r\n    feColorMatrix.setAttribute('result','f2');\r\n    filter.appendChild(feColorMatrix);\r\n    this.matrixFilter = feColorMatrix;\r\n    if(filterManager.effectElements[2].p.v !== 100 || filterManager.effectElements[2].p.k){\r\n        var feMerge = createNS('feMerge');\r\n        filter.appendChild(feMerge);\r\n        var feMergeNode;\r\n        feMergeNode = createNS('feMergeNode');\r\n        feMergeNode.setAttribute('in','SourceGraphic');\r\n        feMerge.appendChild(feMergeNode);\r\n        feMergeNode = createNS('feMergeNode');\r\n        feMergeNode.setAttribute('in','f2');\r\n        feMerge.appendChild(feMergeNode);\r\n    }\r\n}\r\n\r\nSVGTintFilter.prototype.renderFrame = function(forceRender){\r\n    if(forceRender || this.filterManager._mdf){\r\n        var colorBlack = this.filterManager.effectElements[0].p.v;\r\n        var colorWhite = this.filterManager.effectElements[1].p.v;\r\n        var opacity = this.filterManager.effectElements[2].p.v/100;\r\n        this.matrixFilter.setAttribute('values',(colorWhite[0]- colorBlack[0])+' 0 0 0 '+ colorBlack[0] +' '+ (colorWhite[1]- colorBlack[1]) +' 0 0 0 '+ colorBlack[1] +' '+ (colorWhite[2]- colorBlack[2]) +' 0 0 0 '+ colorBlack[2] +' 0 0 0 ' + opacity + ' 0');\r\n    }\r\n};\nfunction SVGFillFilter(filter, filterManager){\r\n    this.filterManager = filterManager;\r\n    var feColorMatrix = createNS('feColorMatrix');\r\n    feColorMatrix.setAttribute('type','matrix');\r\n    feColorMatrix.setAttribute('color-interpolation-filters','sRGB');\r\n    feColorMatrix.setAttribute('values','1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0');\r\n    filter.appendChild(feColorMatrix);\r\n    this.matrixFilter = feColorMatrix;\r\n}\r\nSVGFillFilter.prototype.renderFrame = function(forceRender){\r\n    if(forceRender || this.filterManager._mdf){\r\n        var color = this.filterManager.effectElements[2].p.v;\r\n        var opacity = this.filterManager.effectElements[6].p.v;\r\n        this.matrixFilter.setAttribute('values','0 0 0 0 '+color[0]+' 0 0 0 0 '+color[1]+' 0 0 0 0 '+color[2]+' 0 0 0 '+opacity+' 0');\r\n    }\r\n};\nfunction SVGStrokeEffect(elem, filterManager){\r\n    this.initialized = false;\r\n    this.filterManager = filterManager;\r\n    this.elem = elem;\r\n    this.paths = [];\r\n}\r\n\r\nSVGStrokeEffect.prototype.initialize = function(){\r\n\r\n    var elemChildren = this.elem.layerElement.children || this.elem.layerElement.childNodes;\r\n    var path,groupPath, i, len;\r\n    if(this.filterManager.effectElements[1].p.v === 1){\r\n        len = this.elem.maskManager.masksProperties.length;\r\n        i = 0;\r\n    } else {\r\n        i = this.filterManager.effectElements[0].p.v - 1;\r\n        len = i + 1;\r\n    }\r\n    groupPath = createNS('g'); \r\n    groupPath.setAttribute('fill','none');\r\n    groupPath.setAttribute('stroke-linecap','round');\r\n    groupPath.setAttribute('stroke-dashoffset',1);\r\n    for(i;i<len;i+=1){\r\n        path = createNS('path');\r\n        groupPath.appendChild(path);\r\n        this.paths.push({p:path,m:i});\r\n    }\r\n    if(this.filterManager.effectElements[10].p.v === 3){\r\n        var mask = createNS('mask');\r\n        var id = 'stms_' + randomString(10);\r\n        mask.setAttribute('id',id);\r\n        mask.setAttribute('mask-type','alpha');\r\n        mask.appendChild(groupPath);\r\n        this.elem.globalData.defs.appendChild(mask);\r\n        var g = createNS('g');\r\n        g.setAttribute('mask','url(' + locationHref + '#'+id+')');\r\n        if(elemChildren[0]){\r\n            g.appendChild(elemChildren[0]);\r\n        }\r\n        this.elem.layerElement.appendChild(g);\r\n        this.masker = mask;\r\n        groupPath.setAttribute('stroke','#fff');\r\n    } else if(this.filterManager.effectElements[10].p.v === 1 || this.filterManager.effectElements[10].p.v === 2){\r\n        if(this.filterManager.effectElements[10].p.v === 2){\r\n            elemChildren = this.elem.layerElement.children || this.elem.layerElement.childNodes;\r\n            while(elemChildren.length){\r\n                this.elem.layerElement.removeChild(elemChildren[0]);\r\n            }\r\n        }\r\n        this.elem.layerElement.appendChild(groupPath);\r\n        this.elem.layerElement.removeAttribute('mask');\r\n        groupPath.setAttribute('stroke','#fff');\r\n    }\r\n    this.initialized = true;\r\n    this.pathMasker = groupPath;\r\n};\r\n\r\nSVGStrokeEffect.prototype.renderFrame = function(forceRender){\r\n    if(!this.initialized){\r\n        this.initialize();\r\n    }\r\n    var i, len = this.paths.length;\r\n    var mask, path;\r\n    for(i=0;i<len;i+=1){\r\n        if(this.paths[i].m === -1) {\r\n            continue;\r\n        }\r\n        mask = this.elem.maskManager.viewData[this.paths[i].m];\r\n        path = this.paths[i].p;\r\n        if(forceRender || this.filterManager._mdf || mask.prop._mdf){\r\n            path.setAttribute('d',mask.lastPath);\r\n        }\r\n        if(forceRender || this.filterManager.effectElements[9].p._mdf || this.filterManager.effectElements[4].p._mdf || this.filterManager.effectElements[7].p._mdf || this.filterManager.effectElements[8].p._mdf || mask.prop._mdf){\r\n            var dasharrayValue;\r\n            if(this.filterManager.effectElements[7].p.v !== 0 || this.filterManager.effectElements[8].p.v !== 100){\r\n                var s = Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100;\r\n                var e = Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100;\r\n                var l = path.getTotalLength();\r\n                dasharrayValue = '0 0 0 ' + l*s + ' ';\r\n                var lineLength = l*(e-s);\r\n                var segment = 1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v/100;\r\n                var units = Math.floor(lineLength/segment);\r\n                var j;\r\n                for(j=0;j<units;j+=1){\r\n                    dasharrayValue += '1 ' + this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v/100 + ' ';\r\n                }\r\n                dasharrayValue += '0 ' + l*10 + ' 0 0';\r\n            } else {\r\n                dasharrayValue = '1 ' + this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v/100;\r\n            }\r\n            path.setAttribute('stroke-dasharray',dasharrayValue);\r\n        }\r\n    }\r\n    if(forceRender || this.filterManager.effectElements[4].p._mdf){\r\n        this.pathMasker.setAttribute('stroke-width',this.filterManager.effectElements[4].p.v*2);\r\n    }\r\n    \r\n    if(forceRender || this.filterManager.effectElements[6].p._mdf){\r\n        this.pathMasker.setAttribute('opacity',this.filterManager.effectElements[6].p.v);\r\n    }\r\n    if(this.filterManager.effectElements[10].p.v === 1 || this.filterManager.effectElements[10].p.v === 2){\r\n        if(forceRender || this.filterManager.effectElements[3].p._mdf){\r\n            var color = this.filterManager.effectElements[3].p.v;\r\n            this.pathMasker.setAttribute('stroke','rgb('+bm_floor(color[0]*255)+','+bm_floor(color[1]*255)+','+bm_floor(color[2]*255)+')');\r\n        }\r\n    }\r\n};\nfunction SVGTritoneFilter(filter, filterManager){\r\n    this.filterManager = filterManager;\r\n    var feColorMatrix = createNS('feColorMatrix');\r\n    feColorMatrix.setAttribute('type','matrix');\r\n    feColorMatrix.setAttribute('color-interpolation-filters','linearRGB');\r\n    feColorMatrix.setAttribute('values','0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0');\r\n    feColorMatrix.setAttribute('result','f1');\r\n    filter.appendChild(feColorMatrix);\r\n    var feComponentTransfer = createNS('feComponentTransfer');\r\n    feComponentTransfer.setAttribute('color-interpolation-filters','sRGB');\r\n    filter.appendChild(feComponentTransfer);\r\n    this.matrixFilter = feComponentTransfer;\r\n    var feFuncR = createNS('feFuncR');\r\n    feFuncR.setAttribute('type','table');\r\n    feComponentTransfer.appendChild(feFuncR);\r\n    this.feFuncR = feFuncR;\r\n    var feFuncG = createNS('feFuncG');\r\n    feFuncG.setAttribute('type','table');\r\n    feComponentTransfer.appendChild(feFuncG);\r\n    this.feFuncG = feFuncG;\r\n    var feFuncB = createNS('feFuncB');\r\n    feFuncB.setAttribute('type','table');\r\n    feComponentTransfer.appendChild(feFuncB);\r\n    this.feFuncB = feFuncB;\r\n}\r\n\r\nSVGTritoneFilter.prototype.renderFrame = function(forceRender){\r\n    if(forceRender || this.filterManager._mdf){\r\n        var color1 = this.filterManager.effectElements[0].p.v;\r\n        var color2 = this.filterManager.effectElements[1].p.v;\r\n        var color3 = this.filterManager.effectElements[2].p.v;\r\n        var tableR = color3[0] + ' ' + color2[0] + ' ' + color1[0];\r\n        var tableG = color3[1] + ' ' + color2[1] + ' ' + color1[1];\r\n        var tableB = color3[2] + ' ' + color2[2] + ' ' + color1[2];\r\n        this.feFuncR.setAttribute('tableValues', tableR);\r\n        this.feFuncG.setAttribute('tableValues', tableG);\r\n        this.feFuncB.setAttribute('tableValues', tableB);\r\n        //var opacity = this.filterManager.effectElements[2].p.v/100;\r\n        //this.matrixFilter.setAttribute('values',(colorWhite[0]- colorBlack[0])+' 0 0 0 '+ colorBlack[0] +' '+ (colorWhite[1]- colorBlack[1]) +' 0 0 0 '+ colorBlack[1] +' '+ (colorWhite[2]- colorBlack[2]) +' 0 0 0 '+ colorBlack[2] +' 0 0 0 ' + opacity + ' 0');\r\n    }\r\n};\nfunction SVGProLevelsFilter(filter, filterManager){\r\n    this.filterManager = filterManager;\r\n    var effectElements = this.filterManager.effectElements;\r\n    var feComponentTransfer = createNS('feComponentTransfer');\r\n    var feFuncR, feFuncG, feFuncB;\r\n    \r\n    if(effectElements[10].p.k || effectElements[10].p.v !== 0 || effectElements[11].p.k || effectElements[11].p.v !== 1 || effectElements[12].p.k || effectElements[12].p.v !== 1 || effectElements[13].p.k || effectElements[13].p.v !== 0 || effectElements[14].p.k || effectElements[14].p.v !== 1){\r\n        this.feFuncR = this.createFeFunc('feFuncR', feComponentTransfer);\r\n    }\r\n    if(effectElements[17].p.k || effectElements[17].p.v !== 0 || effectElements[18].p.k || effectElements[18].p.v !== 1 || effectElements[19].p.k || effectElements[19].p.v !== 1 || effectElements[20].p.k || effectElements[20].p.v !== 0 || effectElements[21].p.k || effectElements[21].p.v !== 1){\r\n        this.feFuncG = this.createFeFunc('feFuncG', feComponentTransfer);\r\n    }\r\n    if(effectElements[24].p.k || effectElements[24].p.v !== 0 || effectElements[25].p.k || effectElements[25].p.v !== 1 || effectElements[26].p.k || effectElements[26].p.v !== 1 || effectElements[27].p.k || effectElements[27].p.v !== 0 || effectElements[28].p.k || effectElements[28].p.v !== 1){\r\n        this.feFuncB = this.createFeFunc('feFuncB', feComponentTransfer);\r\n    }\r\n    if(effectElements[31].p.k || effectElements[31].p.v !== 0 || effectElements[32].p.k || effectElements[32].p.v !== 1 || effectElements[33].p.k || effectElements[33].p.v !== 1 || effectElements[34].p.k || effectElements[34].p.v !== 0 || effectElements[35].p.k || effectElements[35].p.v !== 1){\r\n        this.feFuncA = this.createFeFunc('feFuncA', feComponentTransfer);\r\n    }\r\n    \r\n    if(this.feFuncR || this.feFuncG || this.feFuncB || this.feFuncA){\r\n        feComponentTransfer.setAttribute('color-interpolation-filters','sRGB');\r\n        filter.appendChild(feComponentTransfer);\r\n        feComponentTransfer = createNS('feComponentTransfer');\r\n    }\r\n\r\n    if(effectElements[3].p.k || effectElements[3].p.v !== 0 || effectElements[4].p.k || effectElements[4].p.v !== 1 || effectElements[5].p.k || effectElements[5].p.v !== 1 || effectElements[6].p.k || effectElements[6].p.v !== 0 || effectElements[7].p.k || effectElements[7].p.v !== 1){\r\n\r\n        feComponentTransfer.setAttribute('color-interpolation-filters','sRGB');\r\n        filter.appendChild(feComponentTransfer);\r\n        this.feFuncRComposed = this.createFeFunc('feFuncR', feComponentTransfer);\r\n        this.feFuncGComposed = this.createFeFunc('feFuncG', feComponentTransfer);\r\n        this.feFuncBComposed = this.createFeFunc('feFuncB', feComponentTransfer);\r\n    }\r\n}\r\n\r\nSVGProLevelsFilter.prototype.createFeFunc = function(type, feComponentTransfer) {\r\n    var feFunc = createNS(type);\r\n    feFunc.setAttribute('type','table');\r\n    feComponentTransfer.appendChild(feFunc);\r\n    return feFunc;\r\n};\r\n\r\nSVGProLevelsFilter.prototype.getTableValue = function(inputBlack, inputWhite, gamma, outputBlack, outputWhite) {\r\n    var cnt = 0;\r\n    var segments = 256;\r\n    var perc;\r\n    var min = Math.min(inputBlack, inputWhite);\r\n    var max = Math.max(inputBlack, inputWhite);\r\n    var table = Array.call(null,{length:segments});\r\n    var colorValue;\r\n    var pos = 0;\r\n    var outputDelta = outputWhite - outputBlack; \r\n    var inputDelta = inputWhite - inputBlack; \r\n    while(cnt <= 256) {\r\n        perc = cnt/256;\r\n        if(perc <= min){\r\n            colorValue = inputDelta < 0 ? outputWhite : outputBlack;\r\n        } else if(perc >= max){\r\n            colorValue = inputDelta < 0 ? outputBlack : outputWhite;\r\n        } else {\r\n            colorValue = (outputBlack + outputDelta * Math.pow((perc - inputBlack) / inputDelta, 1 / gamma));\r\n        }\r\n        table[pos++] = colorValue;\r\n        cnt += 256/(segments-1);\r\n    }\r\n    return table.join(' ');\r\n};\r\n\r\nSVGProLevelsFilter.prototype.renderFrame = function(forceRender){\r\n    if(forceRender || this.filterManager._mdf){\r\n        var val, cnt, perc, bezier;\r\n        var effectElements = this.filterManager.effectElements;\r\n        if(this.feFuncRComposed && (forceRender || effectElements[3].p._mdf || effectElements[4].p._mdf || effectElements[5].p._mdf || effectElements[6].p._mdf || effectElements[7].p._mdf)){\r\n            val = this.getTableValue(effectElements[3].p.v,effectElements[4].p.v,effectElements[5].p.v,effectElements[6].p.v,effectElements[7].p.v);\r\n            this.feFuncRComposed.setAttribute('tableValues',val);\r\n            this.feFuncGComposed.setAttribute('tableValues',val);\r\n            this.feFuncBComposed.setAttribute('tableValues',val);\r\n        }\r\n\r\n\r\n        if(this.feFuncR && (forceRender || effectElements[10].p._mdf || effectElements[11].p._mdf || effectElements[12].p._mdf || effectElements[13].p._mdf || effectElements[14].p._mdf)){\r\n            val = this.getTableValue(effectElements[10].p.v,effectElements[11].p.v,effectElements[12].p.v,effectElements[13].p.v,effectElements[14].p.v);\r\n            this.feFuncR.setAttribute('tableValues',val);\r\n        }\r\n\r\n        if(this.feFuncG && (forceRender || effectElements[17].p._mdf || effectElements[18].p._mdf || effectElements[19].p._mdf || effectElements[20].p._mdf || effectElements[21].p._mdf)){\r\n            val = this.getTableValue(effectElements[17].p.v,effectElements[18].p.v,effectElements[19].p.v,effectElements[20].p.v,effectElements[21].p.v);\r\n            this.feFuncG.setAttribute('tableValues',val);\r\n        }\r\n\r\n        if(this.feFuncB && (forceRender || effectElements[24].p._mdf || effectElements[25].p._mdf || effectElements[26].p._mdf || effectElements[27].p._mdf || effectElements[28].p._mdf)){\r\n            val = this.getTableValue(effectElements[24].p.v,effectElements[25].p.v,effectElements[26].p.v,effectElements[27].p.v,effectElements[28].p.v);\r\n            this.feFuncB.setAttribute('tableValues',val);\r\n        }\r\n\r\n        if(this.feFuncA && (forceRender || effectElements[31].p._mdf || effectElements[32].p._mdf || effectElements[33].p._mdf || effectElements[34].p._mdf || effectElements[35].p._mdf)){\r\n            val = this.getTableValue(effectElements[31].p.v,effectElements[32].p.v,effectElements[33].p.v,effectElements[34].p.v,effectElements[35].p.v);\r\n            this.feFuncA.setAttribute('tableValues',val);\r\n        }\r\n        \r\n    }\r\n};\nfunction SVGDropShadowEffect(filter, filterManager){\r\n    filter.setAttribute('x','-100%');\r\n    filter.setAttribute('y','-100%');\r\n    filter.setAttribute('width','400%');\r\n    filter.setAttribute('height','400%');\r\n    this.filterManager = filterManager;\r\n\r\n    var feGaussianBlur = createNS('feGaussianBlur');\r\n    feGaussianBlur.setAttribute('in','SourceAlpha');\r\n    feGaussianBlur.setAttribute('result','drop_shadow_1');\r\n    feGaussianBlur.setAttribute('stdDeviation','0');\r\n    this.feGaussianBlur = feGaussianBlur;\r\n    filter.appendChild(feGaussianBlur);\r\n\r\n    var feOffset = createNS('feOffset');\r\n    feOffset.setAttribute('dx','25');\r\n    feOffset.setAttribute('dy','0');\r\n    feOffset.setAttribute('in','drop_shadow_1');\r\n    feOffset.setAttribute('result','drop_shadow_2');\r\n    this.feOffset = feOffset;\r\n    filter.appendChild(feOffset);\r\n    var feFlood = createNS('feFlood');\r\n    feFlood.setAttribute('flood-color','#00ff00');\r\n    feFlood.setAttribute('flood-opacity','1');\r\n    feFlood.setAttribute('result','drop_shadow_3');\r\n    this.feFlood = feFlood;\r\n    filter.appendChild(feFlood);\r\n\r\n    var feComposite = createNS('feComposite');\r\n    feComposite.setAttribute('in','drop_shadow_3');\r\n    feComposite.setAttribute('in2','drop_shadow_2');\r\n    feComposite.setAttribute('operator','in');\r\n    feComposite.setAttribute('result','drop_shadow_4');\r\n    filter.appendChild(feComposite);\r\n\r\n\r\n    var feMerge = createNS('feMerge');\r\n    filter.appendChild(feMerge);\r\n    var feMergeNode;\r\n    feMergeNode = createNS('feMergeNode');\r\n    feMerge.appendChild(feMergeNode);\r\n    feMergeNode = createNS('feMergeNode');\r\n    feMergeNode.setAttribute('in','SourceGraphic');\r\n    this.feMergeNode = feMergeNode;\r\n    this.feMerge = feMerge;\r\n    this.originalNodeAdded = false;\r\n    feMerge.appendChild(feMergeNode);\r\n}\r\n\r\nSVGDropShadowEffect.prototype.renderFrame = function(forceRender){\r\n    if(forceRender || this.filterManager._mdf){\r\n        if(forceRender || this.filterManager.effectElements[4].p._mdf){\r\n            this.feGaussianBlur.setAttribute('stdDeviation', this.filterManager.effectElements[4].p.v / 4);\r\n        }\r\n        if(forceRender || this.filterManager.effectElements[0].p._mdf){\r\n            var col = this.filterManager.effectElements[0].p.v;\r\n            this.feFlood.setAttribute('flood-color',rgbToHex(Math.round(col[0]*255),Math.round(col[1]*255),Math.round(col[2]*255)));\r\n        }\r\n        if(forceRender || this.filterManager.effectElements[1].p._mdf){\r\n            this.feFlood.setAttribute('flood-opacity',this.filterManager.effectElements[1].p.v/255);\r\n        }\r\n        if(forceRender || this.filterManager.effectElements[2].p._mdf || this.filterManager.effectElements[3].p._mdf){\r\n            var distance = this.filterManager.effectElements[3].p.v;\r\n            var angle = (this.filterManager.effectElements[2].p.v - 90) * degToRads;\r\n            var x = distance * Math.cos(angle);\r\n            var y = distance * Math.sin(angle);\r\n            this.feOffset.setAttribute('dx', x);\r\n            this.feOffset.setAttribute('dy', y);\r\n        }\r\n        /*if(forceRender || this.filterManager.effectElements[5].p._mdf){\r\n            if(this.filterManager.effectElements[5].p.v === 1 && this.originalNodeAdded) {\r\n                this.feMerge.removeChild(this.feMergeNode);\r\n                this.originalNodeAdded = false;\r\n            } else if(this.filterManager.effectElements[5].p.v === 0 && !this.originalNodeAdded) {\r\n                this.feMerge.appendChild(this.feMergeNode);\r\n                this.originalNodeAdded = true;\r\n            }\r\n        }*/\r\n    }\r\n};\nvar _svgMatteSymbols = [];\r\nvar _svgMatteMaskCounter = 0;\r\n\r\nfunction SVGMatte3Effect(filterElem, filterManager, elem){\r\n    this.initialized = false;\r\n    this.filterManager = filterManager;\r\n    this.filterElem = filterElem;\r\n    this.elem = elem;\r\n    elem.matteElement = createNS('g');\r\n    elem.matteElement.appendChild(elem.layerElement);\r\n    elem.matteElement.appendChild(elem.transformedElement);\r\n    elem.baseElement = elem.matteElement;\r\n}\r\n\r\nSVGMatte3Effect.prototype.findSymbol = function(mask) {\r\n    var i = 0, len = _svgMatteSymbols.length;\r\n    while(i < len) {\r\n        if(_svgMatteSymbols[i] === mask) {\r\n            return _svgMatteSymbols[i];\r\n        }\r\n        i += 1;\r\n    }\r\n    return null;\r\n};\r\n\r\nSVGMatte3Effect.prototype.replaceInParent = function(mask, symbolId) {\r\n    var parentNode = mask.layerElement.parentNode;\r\n    if(!parentNode) {\r\n        return;\r\n    }\r\n    var children = parentNode.children;\r\n    var i = 0, len = children.length;\r\n    while (i < len) {\r\n        if (children[i] === mask.layerElement) {\r\n            break;\r\n        }\r\n        i += 1;\r\n    }\r\n    var nextChild;\r\n    if (i <= len - 2) {\r\n        nextChild = children[i + 1];\r\n    }\r\n    var useElem = createNS('use');\r\n    useElem.setAttribute('href', '#' + symbolId);\r\n    if(nextChild) {\r\n        parentNode.insertBefore(useElem, nextChild);\r\n    } else {\r\n        parentNode.appendChild(useElem);\r\n    }\r\n};\r\n\r\nSVGMatte3Effect.prototype.setElementAsMask = function(elem, mask) {\r\n    if(!this.findSymbol(mask)) {\r\n        var symbolId = 'matte_' + randomString(5) + '_' + _svgMatteMaskCounter++;\r\n        var masker = createNS('mask');\r\n        masker.setAttribute('id', mask.layerId);\r\n        masker.setAttribute('mask-type', 'alpha');\r\n        _svgMatteSymbols.push(mask);\r\n        var defs = elem.globalData.defs;\r\n        defs.appendChild(masker);\r\n        var symbol = createNS('symbol');\r\n        symbol.setAttribute('id', symbolId);\r\n        this.replaceInParent(mask, symbolId);\r\n        symbol.appendChild(mask.layerElement);\r\n        defs.appendChild(symbol);\r\n        var useElem = createNS('use');\r\n        useElem.setAttribute('href', '#' + symbolId);\r\n        masker.appendChild(useElem);\r\n        mask.data.hd = false;\r\n        mask.show();\r\n    }\r\n    elem.setMatte(mask.layerId);\r\n};\r\n\r\nSVGMatte3Effect.prototype.initialize = function() {\r\n    var ind = this.filterManager.effectElements[0].p.v;\r\n    var i = 0, len = this.elem.comp.elements.length;\r\n    while (i < len) {\r\n    \tif (this.elem.comp.elements[i].data.ind === ind) {\r\n    \t\tthis.setElementAsMask(this.elem, this.elem.comp.elements[i]);\r\n    \t}\r\n    \ti += 1;\r\n    }\r\n    this.initialized = true;\r\n};\r\n\r\nSVGMatte3Effect.prototype.renderFrame = function() {\r\n\tif(!this.initialized) {\r\n\t\tthis.initialize();\r\n\t}\r\n};\nfunction SVGEffects(elem){\r\n    var i, len = elem.data.ef ? elem.data.ef.length : 0;\r\n    var filId = randomString(10);\r\n    var fil = filtersFactory.createFilter(filId);\r\n    var count = 0;\r\n    this.filters = [];\r\n    var filterManager;\r\n    for(i=0;i<len;i+=1){\r\n        filterManager = null;\r\n        if(elem.data.ef[i].ty === 20){\r\n            count += 1;\r\n            filterManager = new SVGTintFilter(fil, elem.effectsManager.effectElements[i]);\r\n        }else if(elem.data.ef[i].ty === 21){\r\n            count += 1;\r\n            filterManager = new SVGFillFilter(fil, elem.effectsManager.effectElements[i]);\r\n        }else if(elem.data.ef[i].ty === 22){\r\n            filterManager = new SVGStrokeEffect(elem, elem.effectsManager.effectElements[i]);\r\n        }else if(elem.data.ef[i].ty === 23){\r\n            count += 1;\r\n            filterManager = new SVGTritoneFilter(fil, elem.effectsManager.effectElements[i]);\r\n        }else if(elem.data.ef[i].ty === 24){\r\n            count += 1;\r\n            filterManager = new SVGProLevelsFilter(fil, elem.effectsManager.effectElements[i]);\r\n        }else if(elem.data.ef[i].ty === 25){\r\n            count += 1;\r\n            filterManager = new SVGDropShadowEffect(fil, elem.effectsManager.effectElements[i]);\r\n        }else if(elem.data.ef[i].ty === 28){\r\n            //count += 1;\r\n            filterManager = new SVGMatte3Effect(fil, elem.effectsManager.effectElements[i], elem);\r\n        }\r\n        if(filterManager) {\r\n            this.filters.push(filterManager);\r\n        }\r\n    }\r\n    if(count){\r\n        elem.globalData.defs.appendChild(fil);\r\n        elem.layerElement.setAttribute('filter','url(' + locationHref + '#'+filId+')');\r\n    }\r\n    if (this.filters.length) {\r\n        elem.addRenderableComponent(this);\r\n    }\r\n}\r\n\r\nSVGEffects.prototype.renderFrame = function(_isFirstFrame){\r\n    var i, len = this.filters.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.filters[i].renderFrame(_isFirstFrame);\r\n    }\r\n};\nvar animationManager = (function(){\r\n    var moduleOb = {};\r\n    var registeredAnimations = [];\r\n    var initTime = 0;\r\n    var len = 0;\r\n    var playingAnimationsNum = 0;\r\n    var _stopped = true;\r\n    var _isFrozen = false;\r\n\r\n    function removeElement(ev){\r\n        var i = 0;\r\n        var animItem = ev.target;\r\n        while(i<len) {\r\n            if (registeredAnimations[i].animation === animItem) {\r\n                registeredAnimations.splice(i, 1);\r\n                i -= 1;\r\n                len -= 1;\r\n                if(!animItem.isPaused){\r\n                    subtractPlayingCount();\r\n                }\r\n            }\r\n            i += 1;\r\n        }\r\n    }\r\n\r\n    function registerAnimation(element, animationData){\r\n        if(!element){\r\n            return null;\r\n        }\r\n        var i=0;\r\n        while(i<len){\r\n            if(registeredAnimations[i].elem == element && registeredAnimations[i].elem !== null ){\r\n                return registeredAnimations[i].animation;\r\n            }\r\n            i+=1;\r\n        }\r\n        var animItem = new AnimationItem();\r\n        setupAnimation(animItem, element);\r\n        animItem.setData(element, animationData);\r\n        return animItem;\r\n    }\r\n\r\n    function getRegisteredAnimations() {\r\n        var i, len = registeredAnimations.length;\r\n        var animations = [];\r\n        for(i = 0; i < len; i += 1) {\r\n            animations.push(registeredAnimations[i].animation);\r\n        }\r\n        return animations;\r\n    }\r\n\r\n    function addPlayingCount(){\r\n        playingAnimationsNum += 1;\r\n        activate();\r\n    }\r\n\r\n    function subtractPlayingCount(){\r\n        playingAnimationsNum -= 1;\r\n    }\r\n\r\n    function setupAnimation(animItem, element){\r\n        animItem.addEventListener('destroy',removeElement);\r\n        animItem.addEventListener('_active',addPlayingCount);\r\n        animItem.addEventListener('_idle',subtractPlayingCount);\r\n        registeredAnimations.push({elem: element,animation:animItem});\r\n        len += 1;\r\n    }\r\n\r\n    function loadAnimation(params){\r\n        var animItem = new AnimationItem();\r\n        setupAnimation(animItem, null);\r\n        animItem.setParams(params);\r\n        return animItem;\r\n    }\r\n\r\n\r\n    function setSpeed(val,animation){\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.setSpeed(val, animation);\r\n        }\r\n    }\r\n\r\n    function setDirection(val, animation){\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.setDirection(val, animation);\r\n        }\r\n    }\r\n\r\n    function play(animation){\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.play(animation);\r\n        }\r\n    }\r\n    function resume(nowTime) {\r\n        var elapsedTime = nowTime - initTime;\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.advanceTime(elapsedTime);\r\n        }\r\n        initTime = nowTime;\r\n        if(playingAnimationsNum && !_isFrozen) {\r\n            window.requestAnimationFrame(resume);\r\n        } else {\r\n            _stopped = true;\r\n        }\r\n    }\r\n\r\n    function first(nowTime){\r\n        initTime = nowTime;\r\n        window.requestAnimationFrame(resume);\r\n    }\r\n\r\n    function pause(animation) {\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.pause(animation);\r\n        }\r\n    }\r\n\r\n    function goToAndStop(value,isFrame,animation) {\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.goToAndStop(value,isFrame,animation);\r\n        }\r\n    }\r\n\r\n    function stop(animation) {\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.stop(animation);\r\n        }\r\n    }\r\n\r\n    function togglePause(animation) {\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.togglePause(animation);\r\n        }\r\n    }\r\n\r\n    function destroy(animation) {\r\n        var i;\r\n        for(i=(len-1);i>=0;i-=1){\r\n            registeredAnimations[i].animation.destroy(animation);\r\n        }\r\n    }\r\n\r\n    function searchAnimations(animationData, standalone, renderer){\r\n        var animElements = [].concat([].slice.call(document.getElementsByClassName('lottie')),\r\n                  [].slice.call(document.getElementsByClassName('bodymovin')));\r\n        var i, len = animElements.length;\r\n        for(i=0;i<len;i+=1){\r\n            if(renderer){\r\n                animElements[i].setAttribute('data-bm-type',renderer);\r\n            }\r\n            registerAnimation(animElements[i], animationData);\r\n        }\r\n        if(standalone && len === 0){\r\n            if(!renderer){\r\n                renderer = 'svg';\r\n            }\r\n            var body = document.getElementsByTagName('body')[0];\r\n            body.innerHTML = '';\r\n            var div = createTag('div');\r\n            div.style.width = '100%';\r\n            div.style.height = '100%';\r\n            div.setAttribute('data-bm-type',renderer);\r\n            body.appendChild(div);\r\n            registerAnimation(div, animationData);\r\n        }\r\n    }\r\n\r\n    function resize(){\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.resize();\r\n        }\r\n    }\r\n\r\n    function activate(){\r\n        if(!_isFrozen && playingAnimationsNum){\r\n            if(_stopped) {\r\n                window.requestAnimationFrame(first);\r\n                _stopped = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    function freeze() {\r\n        _isFrozen = true;\r\n    }\r\n\r\n    function unfreeze() {\r\n        _isFrozen = false;\r\n        activate();\r\n    }\r\n\r\n    moduleOb.registerAnimation = registerAnimation;\r\n    moduleOb.loadAnimation = loadAnimation;\r\n    moduleOb.setSpeed = setSpeed;\r\n    moduleOb.setDirection = setDirection;\r\n    moduleOb.play = play;\r\n    moduleOb.pause = pause;\r\n    moduleOb.stop = stop;\r\n    moduleOb.togglePause = togglePause;\r\n    moduleOb.searchAnimations = searchAnimations;\r\n    moduleOb.resize = resize;\r\n    //moduleOb.start = start;\r\n    moduleOb.goToAndStop = goToAndStop;\r\n    moduleOb.destroy = destroy;\r\n    moduleOb.freeze = freeze;\r\n    moduleOb.unfreeze = unfreeze;\r\n    moduleOb.getRegisteredAnimations = getRegisteredAnimations;\r\n    return moduleOb;\r\n}());\r\n\nvar AnimationItem = function () {\r\n    this._cbs = [];\r\n    this.name = '';\r\n    this.path = '';\r\n    this.isLoaded = false;\r\n    this.currentFrame = 0;\r\n    this.currentRawFrame = 0;\r\n    this.totalFrames = 0;\r\n    this.frameRate = 0;\r\n    this.frameMult = 0;\r\n    this.playSpeed = 1;\r\n    this.playDirection = 1;\r\n    this.pendingElements = 0;\r\n    this.playCount = 0;\r\n    this.animationData = {};\r\n    this.assets = [];\r\n    this.isPaused = true;\r\n    this.autoplay = false;\r\n    this.loop = true;\r\n    this.renderer = null;\r\n    this.animationID = randomString(10);\r\n    this.assetsPath = '';\r\n    this.timeCompleted = 0;\r\n    this.segmentPos = 0;\r\n    this.subframeEnabled = subframeEnabled;\r\n    this.segments = [];\r\n    this._idle = true;\r\n    this._completedLoop = false;\r\n    this.projectInterface = ProjectInterface();\r\n};\r\n\r\nextendPrototype([BaseEvent], AnimationItem);\r\n\r\nAnimationItem.prototype.setParams = function(params) {\r\n    if(params.context){\r\n        this.context = params.context;\r\n    }\r\n    if(params.wrapper || params.container){\r\n        this.wrapper = params.wrapper || params.container;\r\n    }\r\n    var animType = params.animType ? params.animType : params.renderer ? params.renderer : 'svg';\r\n    switch(animType){\r\n        case 'canvas':\r\n            this.renderer = new CanvasRenderer(this, params.rendererSettings);\r\n            break;\r\n        case 'svg':\r\n            this.renderer = new SVGRenderer(this, params.rendererSettings);\r\n            break;\r\n        default:\r\n            this.renderer = new HybridRenderer(this, params.rendererSettings);\r\n            break;\r\n    }\r\n    this.renderer.setProjectInterface(this.projectInterface);\r\n    this.animType = animType;\r\n\r\n    if(params.loop === '' || params.loop === null){\r\n    }else if(params.loop === false){\r\n        this.loop = false;\r\n    }else if(params.loop === true){\r\n        this.loop = true;\r\n    }else{\r\n        this.loop = parseInt(params.loop);\r\n    }\r\n    this.autoplay = 'autoplay' in params ? params.autoplay : true;\r\n    this.name = params.name ? params.name :  '';\r\n    this.autoloadSegments = params.hasOwnProperty('autoloadSegments') ? params.autoloadSegments :  true;\r\n    this.assetsPath = params.assetsPath;\r\n    if(params.animationData){\r\n        this.configAnimation(params.animationData);\r\n    }else if(params.path){\r\n        if(params.path.substr(-4) != 'json'){\r\n            if (params.path.substr(-1, 1) != '/') {\r\n                params.path += '/';\r\n            }\r\n            params.path += 'data.json';\r\n        }\r\n\r\n        if(params.path.lastIndexOf('\\\\') != -1){\r\n            this.path = params.path.substr(0,params.path.lastIndexOf('\\\\')+1);\r\n        }else{\r\n            this.path = params.path.substr(0,params.path.lastIndexOf('/')+1);\r\n        }\r\n        this.fileName = params.path.substr(params.path.lastIndexOf('/')+1);\r\n        this.fileName = this.fileName.substr(0,this.fileName.lastIndexOf('.json'));\r\n\r\n        assetLoader.load(params.path, this.configAnimation.bind(this), function() {\r\n            this.trigger('data_failed');\r\n        }.bind(this));\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.setData = function (wrapper, animationData) {\r\n    var params = {\r\n        wrapper: wrapper,\r\n        animationData: animationData ? (typeof animationData  === \"object\") ? animationData : JSON.parse(animationData) : null\r\n    };\r\n    var wrapperAttributes = wrapper.attributes;\r\n\r\n    params.path = wrapperAttributes.getNamedItem('data-animation-path') ? wrapperAttributes.getNamedItem('data-animation-path').value : wrapperAttributes.getNamedItem('data-bm-path') ? wrapperAttributes.getNamedItem('data-bm-path').value :  wrapperAttributes.getNamedItem('bm-path') ? wrapperAttributes.getNamedItem('bm-path').value : '';\r\n    params.animType = wrapperAttributes.getNamedItem('data-anim-type') ? wrapperAttributes.getNamedItem('data-anim-type').value : wrapperAttributes.getNamedItem('data-bm-type') ? wrapperAttributes.getNamedItem('data-bm-type').value : wrapperAttributes.getNamedItem('bm-type') ? wrapperAttributes.getNamedItem('bm-type').value :  wrapperAttributes.getNamedItem('data-bm-renderer') ? wrapperAttributes.getNamedItem('data-bm-renderer').value : wrapperAttributes.getNamedItem('bm-renderer') ? wrapperAttributes.getNamedItem('bm-renderer').value : 'canvas';\r\n\r\n    var loop = wrapperAttributes.getNamedItem('data-anim-loop') ? wrapperAttributes.getNamedItem('data-anim-loop').value :  wrapperAttributes.getNamedItem('data-bm-loop') ? wrapperAttributes.getNamedItem('data-bm-loop').value :  wrapperAttributes.getNamedItem('bm-loop') ? wrapperAttributes.getNamedItem('bm-loop').value : '';\r\n    if(loop === ''){\r\n    }else if(loop === 'false'){\r\n        params.loop = false;\r\n    }else if(loop === 'true'){\r\n        params.loop = true;\r\n    }else{\r\n        params.loop = parseInt(loop);\r\n    }\r\n    var autoplay = wrapperAttributes.getNamedItem('data-anim-autoplay') ? wrapperAttributes.getNamedItem('data-anim-autoplay').value :  wrapperAttributes.getNamedItem('data-bm-autoplay') ? wrapperAttributes.getNamedItem('data-bm-autoplay').value :  wrapperAttributes.getNamedItem('bm-autoplay') ? wrapperAttributes.getNamedItem('bm-autoplay').value : true;\r\n    params.autoplay = autoplay !== \"false\";\r\n\r\n    params.name = wrapperAttributes.getNamedItem('data-name') ? wrapperAttributes.getNamedItem('data-name').value :  wrapperAttributes.getNamedItem('data-bm-name') ? wrapperAttributes.getNamedItem('data-bm-name').value : wrapperAttributes.getNamedItem('bm-name') ? wrapperAttributes.getNamedItem('bm-name').value :  '';\r\n    var prerender = wrapperAttributes.getNamedItem('data-anim-prerender') ? wrapperAttributes.getNamedItem('data-anim-prerender').value :  wrapperAttributes.getNamedItem('data-bm-prerender') ? wrapperAttributes.getNamedItem('data-bm-prerender').value :  wrapperAttributes.getNamedItem('bm-prerender') ? wrapperAttributes.getNamedItem('bm-prerender').value : '';\r\n\r\n    if(prerender === 'false'){\r\n        params.prerender = false;\r\n    }\r\n    this.setParams(params);\r\n};\r\n\r\nAnimationItem.prototype.includeLayers = function(data) {\r\n    if(data.op > this.animationData.op){\r\n        this.animationData.op = data.op;\r\n        this.totalFrames = Math.floor(data.op - this.animationData.ip);\r\n    }\r\n    var layers = this.animationData.layers;\r\n    var i, len = layers.length;\r\n    var newLayers = data.layers;\r\n    var j, jLen = newLayers.length;\r\n    for(j=0;j<jLen;j+=1){\r\n        i = 0;\r\n        while(i<len){\r\n            if(layers[i].id == newLayers[j].id){\r\n                layers[i] = newLayers[j];\r\n                break;\r\n            }\r\n            i += 1;\r\n        }\r\n    }\r\n    if(data.chars || data.fonts){\r\n        this.renderer.globalData.fontManager.addChars(data.chars);\r\n        this.renderer.globalData.fontManager.addFonts(data.fonts, this.renderer.globalData.defs);\r\n    }\r\n    if(data.assets){\r\n        len = data.assets.length;\r\n        for(i = 0; i < len; i += 1){\r\n            this.animationData.assets.push(data.assets[i]);\r\n        }\r\n    }\r\n    this.animationData.__complete = false;\r\n    dataManager.completeData(this.animationData,this.renderer.globalData.fontManager);\r\n    this.renderer.includeLayers(data.layers);\r\n    if(expressionsPlugin){\r\n        expressionsPlugin.initExpressions(this);\r\n    }\r\n    this.loadNextSegment();\r\n};\r\n\r\nAnimationItem.prototype.loadNextSegment = function() {\r\n    var segments = this.animationData.segments;\r\n    if(!segments || segments.length === 0 || !this.autoloadSegments){\r\n        this.trigger('data_ready');\r\n        this.timeCompleted = this.totalFrames;\r\n        return;\r\n    }\r\n    var segment = segments.shift();\r\n    this.timeCompleted = segment.time * this.frameRate;\r\n    var segmentPath = this.path+this.fileName+'_' + this.segmentPos + '.json';\r\n    this.segmentPos += 1;\r\n    assetLoader.load(segmentPath, this.includeLayers.bind(this), function() {\r\n        this.trigger('data_failed');\r\n    }.bind(this));\r\n};\r\n\r\nAnimationItem.prototype.loadSegments = function() {\r\n    var segments = this.animationData.segments;\r\n    if(!segments) {\r\n        this.timeCompleted = this.totalFrames;\r\n    }\r\n    this.loadNextSegment();\r\n};\r\n\r\nAnimationItem.prototype.preloadImages = function() {\r\n    this.imagePreloader = new ImagePreloader();\r\n    this.imagePreloader.setAssetsPath(this.assetsPath);\r\n    this.imagePreloader.setPath(this.path);\r\n    this.imagePreloader.loadAssets(this.animationData.assets, function(err) {\r\n        if(!err) {\r\n            this.trigger('loaded_images');\r\n        }\r\n    }.bind(this));\r\n}\r\n\r\nAnimationItem.prototype.configAnimation = function (animData) {\r\n    if(!this.renderer){\r\n        return;\r\n    }\r\n    this.animationData = animData;\r\n    this.totalFrames = Math.floor(this.animationData.op - this.animationData.ip);\r\n    this.renderer.configAnimation(animData);\r\n    if(!animData.assets){\r\n        animData.assets = [];\r\n    }\r\n    this.renderer.searchExtraCompositions(animData.assets);\r\n\r\n    this.assets = this.animationData.assets;\r\n    this.frameRate = this.animationData.fr;\r\n    this.firstFrame = Math.round(this.animationData.ip);\r\n    this.frameMult = this.animationData.fr / 1000;\r\n    this.trigger('config_ready');\r\n    this.preloadImages();\r\n    this.loadSegments();\r\n    this.updaFrameModifier();\r\n    this.waitForFontsLoaded();\r\n};\r\n\r\nAnimationItem.prototype.completeData = function() {\r\n    dataManager.completeData(this.animationData,this.renderer.globalData.fontManager);\r\n    this.checkLoaded();\r\n}\r\n\r\nAnimationItem.prototype.waitForFontsLoaded = function(){\r\n    if(!this.renderer) {\r\n        return;\r\n    }\r\n    if(this.renderer.globalData.fontManager.loaded){\r\n        this.completeData();\r\n    }else{\r\n        setTimeout(this.waitForFontsLoaded.bind(this),20);\r\n    }\r\n}\r\n\r\nAnimationItem.prototype.addPendingElement = function () {\r\n    this.pendingElements += 1;\r\n};\r\n\r\nAnimationItem.prototype.elementLoaded = function () {\r\n    this.pendingElements -= 1;\r\n    this.checkLoaded();\r\n};\r\n\r\nAnimationItem.prototype.checkLoaded = function () {\r\n    if (this.pendingElements === 0) {\r\n        if(expressionsPlugin){\r\n            expressionsPlugin.initExpressions(this);\r\n        }\r\n        this.renderer.initItems();\r\n        setTimeout(function(){\r\n            this.trigger('DOMLoaded');\r\n        }.bind(this),0);\r\n        this.isLoaded = true;\r\n        this.gotoFrame();\r\n        if(this.autoplay){\r\n            this.play();\r\n        }\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.resize = function () {\r\n    this.renderer.updateContainerSize();\r\n};\r\n\r\nAnimationItem.prototype.setSubframe = function(flag){\r\n    this.subframeEnabled = flag ? true : false;\r\n};\r\n\r\nAnimationItem.prototype.gotoFrame = function () {\r\n    this.currentFrame = this.subframeEnabled ? this.currentRawFrame : ~~this.currentRawFrame;\r\n\r\n    if(this.timeCompleted !== this.totalFrames && this.currentFrame > this.timeCompleted){\r\n        this.currentFrame = this.timeCompleted;\r\n    }\r\n    this.trigger('enterFrame');\r\n    this.renderFrame();\r\n};\r\n\r\nAnimationItem.prototype.renderFrame = function () {\r\n    if(this.isLoaded === false){\r\n        return;\r\n    }\r\n    this.renderer.renderFrame(this.currentFrame + this.firstFrame);\r\n};\r\n\r\nAnimationItem.prototype.play = function (name) {\r\n    if(name && this.name != name){\r\n        return;\r\n    }\r\n    if(this.isPaused === true){\r\n        this.isPaused = false;\r\n        if(this._idle){\r\n            this._idle = false;\r\n            this.trigger('_active');\r\n        }\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.pause = function (name) {\r\n    if(name && this.name != name){\r\n        return;\r\n    }\r\n    if(this.isPaused === false){\r\n        this.isPaused = true;\r\n        this._idle = true;\r\n        this.trigger('_idle');\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.togglePause = function (name) {\r\n    if(name && this.name != name){\r\n        return;\r\n    }\r\n    if(this.isPaused === true){\r\n        this.play();\r\n    }else{\r\n        this.pause();\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.stop = function (name) {\r\n    if(name && this.name != name){\r\n        return;\r\n    }\r\n    this.pause();\r\n    this.playCount = 0;\r\n    this._completedLoop = false;\r\n    this.setCurrentRawFrameValue(0);\r\n};\r\n\r\nAnimationItem.prototype.goToAndStop = function (value, isFrame, name) {\r\n    if(name && this.name != name){\r\n        return;\r\n    }\r\n    if(isFrame){\r\n        this.setCurrentRawFrameValue(value);\r\n    }else{\r\n        this.setCurrentRawFrameValue(value * this.frameModifier);\r\n    }\r\n    this.pause();\r\n};\r\n\r\nAnimationItem.prototype.goToAndPlay = function (value, isFrame, name) {\r\n    this.goToAndStop(value, isFrame, name);\r\n    this.play();\r\n};\r\n\r\nAnimationItem.prototype.advanceTime = function (value) {\r\n    if (this.isPaused === true || this.isLoaded === false) {\r\n        return;\r\n    }\r\n    var nextValue = this.currentRawFrame + value * this.frameModifier;\r\n    var _isComplete = false;\r\n    // Checking if nextValue > totalFrames - 1 for addressing non looping and looping animations.\r\n    // If animation won't loop, it should stop at totalFrames - 1. If it will loop it should complete the last frame and then loop.\r\n    if (nextValue >= this.totalFrames - 1 && this.frameModifier > 0) {\r\n        if (!this.loop || this.playCount === this.loop) {\r\n            if (!this.checkSegments(nextValue >  this.totalFrames ? nextValue % this.totalFrames : 0)) {\r\n                _isComplete = true;\r\n                nextValue = this.totalFrames - 1;\r\n            }\r\n        } else if (nextValue >= this.totalFrames) {\r\n            this.playCount += 1;\r\n            if (!this.checkSegments(nextValue % this.totalFrames)) {\r\n                this.setCurrentRawFrameValue(nextValue % this.totalFrames);\r\n                this._completedLoop = true;\r\n                this.trigger('loopComplete');\r\n            }\r\n        } else {\r\n            this.setCurrentRawFrameValue(nextValue);\r\n        }\r\n    } else if(nextValue < 0) {\r\n        if (!this.checkSegments(nextValue % this.totalFrames)) {\r\n            if (this.loop && !(this.playCount-- <= 0 && this.loop !== true)) {\r\n                this.setCurrentRawFrameValue(this.totalFrames + (nextValue % this.totalFrames));\r\n                if(!this._completedLoop) {\r\n                    this._completedLoop = true;\r\n                } else {\r\n                    this.trigger('loopComplete');\r\n                }\r\n            } else {\r\n                _isComplete = true;\r\n                nextValue = 0;\r\n            }\r\n        }\r\n    } else {\r\n        this.setCurrentRawFrameValue(nextValue);\r\n    }\r\n    if (_isComplete) {\r\n        this.setCurrentRawFrameValue(nextValue);\r\n        this.pause();\r\n        this.trigger('complete');\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.adjustSegment = function(arr, offset){\r\n    this.playCount = 0;\r\n    if(arr[1] < arr[0]){\r\n        if(this.frameModifier > 0){\r\n            if(this.playSpeed < 0){\r\n                this.setSpeed(-this.playSpeed);\r\n            } else {\r\n                this.setDirection(-1);\r\n            }\r\n        }\r\n        this.timeCompleted = this.totalFrames = arr[0] - arr[1];\r\n        this.firstFrame = arr[1];\r\n        this.setCurrentRawFrameValue(this.totalFrames - 0.001 - offset);\r\n    } else if(arr[1] > arr[0]){\r\n        if(this.frameModifier < 0){\r\n            if(this.playSpeed < 0){\r\n                this.setSpeed(-this.playSpeed);\r\n            } else {\r\n                this.setDirection(1);\r\n            }\r\n        }\r\n        this.timeCompleted = this.totalFrames = arr[1] - arr[0];\r\n        this.firstFrame = arr[0];\r\n        this.setCurrentRawFrameValue(0.001 + offset);\r\n    }\r\n    this.trigger('segmentStart');\r\n};\r\nAnimationItem.prototype.setSegment = function (init,end) {\r\n    var pendingFrame = -1;\r\n    if(this.isPaused) {\r\n        if (this.currentRawFrame + this.firstFrame < init) {\r\n            pendingFrame = init;\r\n        } else if (this.currentRawFrame + this.firstFrame > end) {\r\n            pendingFrame = end - init;\r\n        }\r\n    }\r\n\r\n    this.firstFrame = init;\r\n    this.timeCompleted = this.totalFrames = end - init;\r\n    if(pendingFrame !== -1) {\r\n        this.goToAndStop(pendingFrame,true);\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.playSegments = function (arr,forceFlag) {\r\n    if(typeof arr[0] === 'object'){\r\n        var i, len = arr.length;\r\n        for(i=0;i<len;i+=1){\r\n            this.segments.push(arr[i]);\r\n        }\r\n    }else{\r\n        this.segments.push(arr);\r\n    }\r\n    if(forceFlag){\r\n        this.checkSegments(0);\r\n    }\r\n    if(this.isPaused){\r\n        this.play();\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.resetSegments = function (forceFlag) {\r\n    this.segments.length = 0;\r\n    this.segments.push([this.animationData.ip,this.animationData.op]);\r\n    //this.segments.push([this.animationData.ip*this.frameRate,Math.floor(this.animationData.op - this.animationData.ip+this.animationData.ip*this.frameRate)]);\r\n    if(forceFlag){\r\n        this.checkSegments(0);\r\n    }\r\n};\r\nAnimationItem.prototype.checkSegments = function(offset){\r\n    if(this.segments.length) {\r\n        this.adjustSegment(this.segments.shift(), offset);\r\n        return true;\r\n    }\r\n    return false;\r\n};\r\n\r\nAnimationItem.prototype.destroy = function (name) {\r\n    if((name && this.name != name) || !this.renderer){\r\n        return;\r\n    }\r\n    this.renderer.destroy();\r\n    this.trigger('destroy');\r\n    this._cbs = null;\r\n    this.onEnterFrame = this.onLoopComplete = this.onComplete = this.onSegmentStart = this.onDestroy = null;\r\n    this.renderer = null;\r\n};\r\n\r\nAnimationItem.prototype.setCurrentRawFrameValue = function(value){\r\n    this.currentRawFrame = value;\r\n    this.gotoFrame();\r\n};\r\n\r\nAnimationItem.prototype.setSpeed = function (val) {\r\n    this.playSpeed = val;\r\n    this.updaFrameModifier();\r\n};\r\n\r\nAnimationItem.prototype.setDirection = function (val) {\r\n    this.playDirection = val < 0 ? -1 : 1;\r\n    this.updaFrameModifier();\r\n};\r\n\r\nAnimationItem.prototype.updaFrameModifier = function () {\r\n    this.frameModifier = this.frameMult * this.playSpeed * this.playDirection;\r\n};\r\n\r\nAnimationItem.prototype.getPath = function () {\r\n    return this.path;\r\n};\r\n\r\nAnimationItem.prototype.getAssetsPath = function (assetData) {\r\n    var path = '';\r\n    if(assetData.e) {\r\n        path = assetData.p;\r\n    } else if(this.assetsPath){\r\n        var imagePath = assetData.p;\r\n        if(imagePath.indexOf('images/') !== -1){\r\n            imagePath = imagePath.split('/')[1];\r\n        }\r\n        path = this.assetsPath + imagePath;\r\n    } else {\r\n        path = this.path;\r\n        path += assetData.u ? assetData.u : '';\r\n        path += assetData.p;\r\n    }\r\n    return path;\r\n};\r\n\r\nAnimationItem.prototype.getAssetData = function (id) {\r\n    var i = 0, len = this.assets.length;\r\n    while (i < len) {\r\n        if(id == this.assets[i].id){\r\n            return this.assets[i];\r\n        }\r\n        i += 1;\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.hide = function () {\r\n    this.renderer.hide();\r\n};\r\n\r\nAnimationItem.prototype.show = function () {\r\n    this.renderer.show();\r\n};\r\n\r\nAnimationItem.prototype.getDuration = function (isFrame) {\r\n    return isFrame ? this.totalFrames : this.totalFrames / this.frameRate;\r\n};\r\n\r\nAnimationItem.prototype.trigger = function(name){\r\n    if(this._cbs && this._cbs[name]){\r\n        switch(name){\r\n            case 'enterFrame':\r\n                this.triggerEvent(name,new BMEnterFrameEvent(name,this.currentFrame,this.totalFrames,this.frameMult));\r\n                break;\r\n            case 'loopComplete':\r\n                this.triggerEvent(name,new BMCompleteLoopEvent(name,this.loop,this.playCount,this.frameMult));\r\n                break;\r\n            case 'complete':\r\n                this.triggerEvent(name,new BMCompleteEvent(name,this.frameMult));\r\n                break;\r\n            case 'segmentStart':\r\n                this.triggerEvent(name,new BMSegmentStartEvent(name,this.firstFrame,this.totalFrames));\r\n                break;\r\n            case 'destroy':\r\n                this.triggerEvent(name,new BMDestroyEvent(name,this));\r\n                break;\r\n            default:\r\n                this.triggerEvent(name);\r\n        }\r\n    }\r\n    if(name === 'enterFrame' && this.onEnterFrame){\r\n        this.onEnterFrame.call(this,new BMEnterFrameEvent(name,this.currentFrame,this.totalFrames,this.frameMult));\r\n    }\r\n    if(name === 'loopComplete' && this.onLoopComplete){\r\n        this.onLoopComplete.call(this,new BMCompleteLoopEvent(name,this.loop,this.playCount,this.frameMult));\r\n    }\r\n    if(name === 'complete' && this.onComplete){\r\n        this.onComplete.call(this,new BMCompleteEvent(name,this.frameMult));\r\n    }\r\n    if(name === 'segmentStart' && this.onSegmentStart){\r\n        this.onSegmentStart.call(this,new BMSegmentStartEvent(name,this.firstFrame,this.totalFrames));\r\n    }\r\n    if(name === 'destroy' && this.onDestroy){\r\n        this.onDestroy.call(this,new BMDestroyEvent(name,this));\r\n    }\r\n};\r\n\nfunction EffectsManager(){}\nfunction CanvasRenderer(animationItem, config){\r\n    this.animationItem = animationItem;\r\n    this.renderConfig = {\r\n        clearCanvas: (config && config.clearCanvas !== undefined) ? config.clearCanvas : true,\r\n        context: (config && config.context) || null,\r\n        progressiveLoad: (config && config.progressiveLoad) || false,\r\n        preserveAspectRatio: (config && config.preserveAspectRatio) || 'xMidYMid meet',\r\n        imagePreserveAspectRatio: (config && config.imagePreserveAspectRatio) || 'xMidYMid slice',\r\n        className: (config && config.className) || ''\r\n    };\r\n    this.renderConfig.dpr = (config && config.dpr) || 1;\r\n    if (this.animationItem.wrapper) {\r\n        this.renderConfig.dpr = (config && config.dpr) || window.devicePixelRatio || 1;\r\n    }\r\n    this.renderedFrame = -1;\r\n    this.globalData = {\r\n        frameNum: -1,\r\n        _mdf: false,\r\n        renderConfig: this.renderConfig,\r\n        currentGlobalAlpha: -1\r\n    };\r\n    this.contextData = new CVContextData();\r\n    this.elements = [];\r\n    this.pendingElements = [];\r\n    this.transformMat = new Matrix();\r\n    this.completeLayers = false;\r\n}\r\nextendPrototype([BaseRenderer],CanvasRenderer);\r\n\r\nCanvasRenderer.prototype.createShape = function (data) {\r\n    return new CVShapeElement(data, this.globalData, this);\r\n};\r\n\r\nCanvasRenderer.prototype.createText = function (data) {\r\n    return new CVTextElement(data, this.globalData, this);\r\n};\r\n\r\nCanvasRenderer.prototype.createImage = function (data) {\r\n    return new CVImageElement(data, this.globalData, this);\r\n};\r\n\r\nCanvasRenderer.prototype.createComp = function (data) {\r\n    return new CVCompElement(data, this.globalData, this);\r\n};\r\n\r\nCanvasRenderer.prototype.createSolid = function (data) {\r\n    return new CVSolidElement(data, this.globalData, this);\r\n};\r\n\r\nCanvasRenderer.prototype.createNull = SVGRenderer.prototype.createNull;\r\n\r\nCanvasRenderer.prototype.ctxTransform = function(props){\r\n    if(props[0] === 1 && props[1] === 0 && props[4] === 0 && props[5] === 1 && props[12] === 0 && props[13] === 0){\r\n        return;\r\n    }\r\n    if(!this.renderConfig.clearCanvas){\r\n        this.canvasContext.transform(props[0],props[1],props[4],props[5],props[12],props[13]);\r\n        return;\r\n    }\r\n    this.transformMat.cloneFromProps(props);\r\n    var cProps = this.contextData.cTr.props;\r\n    this.transformMat.transform(cProps[0],cProps[1],cProps[2],cProps[3],cProps[4],cProps[5],cProps[6],cProps[7],cProps[8],cProps[9],cProps[10],cProps[11],cProps[12],cProps[13],cProps[14],cProps[15]);\r\n    //this.contextData.cTr.transform(props[0],props[1],props[2],props[3],props[4],props[5],props[6],props[7],props[8],props[9],props[10],props[11],props[12],props[13],props[14],props[15]);\r\n    this.contextData.cTr.cloneFromProps(this.transformMat.props);\r\n    var trProps = this.contextData.cTr.props;\r\n    this.canvasContext.setTransform(trProps[0],trProps[1],trProps[4],trProps[5],trProps[12],trProps[13]);\r\n};\r\n\r\nCanvasRenderer.prototype.ctxOpacity = function(op){\r\n    /*if(op === 1){\r\n        return;\r\n    }*/\r\n    if(!this.renderConfig.clearCanvas){\r\n        this.canvasContext.globalAlpha *= op < 0 ? 0 : op;\r\n        this.globalData.currentGlobalAlpha = this.contextData.cO;\r\n        return;\r\n    }\r\n    this.contextData.cO *= op < 0 ? 0 : op;\r\n    if(this.globalData.currentGlobalAlpha !== this.contextData.cO) {\r\n        this.canvasContext.globalAlpha = this.contextData.cO;\r\n        this.globalData.currentGlobalAlpha = this.contextData.cO;\r\n    }\r\n};\r\n\r\nCanvasRenderer.prototype.reset = function(){\r\n    if(!this.renderConfig.clearCanvas){\r\n        this.canvasContext.restore();\r\n        return;\r\n    }\r\n    this.contextData.reset();\r\n};\r\n\r\nCanvasRenderer.prototype.save = function(actionFlag){\r\n    if(!this.renderConfig.clearCanvas){\r\n        this.canvasContext.save();\r\n        return;\r\n    }\r\n    if(actionFlag){\r\n        this.canvasContext.save();\r\n    }\r\n    var props = this.contextData.cTr.props;\r\n    if(this.contextData._length <= this.contextData.cArrPos) {\r\n        this.contextData.duplicate();\r\n    }\r\n    var i, arr = this.contextData.saved[this.contextData.cArrPos];\r\n    for (i = 0; i < 16; i += 1) {\r\n        arr[i] = props[i];\r\n    }\r\n    this.contextData.savedOp[this.contextData.cArrPos] = this.contextData.cO;\r\n    this.contextData.cArrPos += 1;\r\n};\r\n\r\nCanvasRenderer.prototype.restore = function(actionFlag){\r\n    if(!this.renderConfig.clearCanvas){\r\n        this.canvasContext.restore();\r\n        return;\r\n    }\r\n    if(actionFlag){\r\n        this.canvasContext.restore();\r\n        this.globalData.blendMode = 'source-over';\r\n    }\r\n    this.contextData.cArrPos -= 1;\r\n    var popped = this.contextData.saved[this.contextData.cArrPos];\r\n    var i,arr = this.contextData.cTr.props;\r\n    for(i=0;i<16;i+=1){\r\n        arr[i] = popped[i];\r\n    }\r\n    this.canvasContext.setTransform(popped[0],popped[1],popped[4],popped[5],popped[12],popped[13]);\r\n    popped = this.contextData.savedOp[this.contextData.cArrPos];\r\n    this.contextData.cO = popped;\r\n    if(this.globalData.currentGlobalAlpha !== popped) {\r\n        this.canvasContext.globalAlpha = popped;\r\n        this.globalData.currentGlobalAlpha = popped;\r\n    }\r\n};\r\n\r\nCanvasRenderer.prototype.configAnimation = function(animData){\r\n    if(this.animationItem.wrapper){\r\n        this.animationItem.container = createTag('canvas');\r\n        this.animationItem.container.style.width = '100%';\r\n        this.animationItem.container.style.height = '100%';\r\n        //this.animationItem.container.style.transform = 'translate3d(0,0,0)';\r\n        //this.animationItem.container.style.webkitTransform = 'translate3d(0,0,0)';\r\n        this.animationItem.container.style.transformOrigin = this.animationItem.container.style.mozTransformOrigin = this.animationItem.container.style.webkitTransformOrigin = this.animationItem.container.style['-webkit-transform'] = \"0px 0px 0px\";\r\n        this.animationItem.wrapper.appendChild(this.animationItem.container);\r\n        this.canvasContext = this.animationItem.container.getContext('2d');\r\n        if(this.renderConfig.className) {\r\n            this.animationItem.container.setAttribute('class', this.renderConfig.className);\r\n        }\r\n    }else{\r\n        this.canvasContext = this.renderConfig.context;\r\n    }\r\n    this.data = animData;\r\n    this.layers = animData.layers;\r\n    this.transformCanvas = {\r\n        w: animData.w,\r\n        h:animData.h,\r\n        sx:0,\r\n        sy:0,\r\n        tx:0,\r\n        ty:0\r\n    };\r\n    this.setupGlobalData(animData, document.body);\r\n    this.globalData.canvasContext = this.canvasContext;\r\n    this.globalData.renderer = this;\r\n    this.globalData.isDashed = false;\r\n    this.globalData.progressiveLoad = this.renderConfig.progressiveLoad;\r\n    this.globalData.transformCanvas = this.transformCanvas;\r\n    this.elements = createSizedArray(animData.layers.length);\r\n\r\n    this.updateContainerSize();\r\n};\r\n\r\nCanvasRenderer.prototype.updateContainerSize = function () {\r\n    this.reset();\r\n    var elementWidth,elementHeight;\r\n    if(this.animationItem.wrapper && this.animationItem.container){\r\n        elementWidth = this.animationItem.wrapper.offsetWidth;\r\n        elementHeight = this.animationItem.wrapper.offsetHeight;\r\n        this.animationItem.container.setAttribute('width',elementWidth * this.renderConfig.dpr );\r\n        this.animationItem.container.setAttribute('height',elementHeight * this.renderConfig.dpr);\r\n    }else{\r\n        elementWidth = this.canvasContext.canvas.width * this.renderConfig.dpr;\r\n        elementHeight = this.canvasContext.canvas.height * this.renderConfig.dpr;\r\n    }\r\n    var elementRel,animationRel;\r\n    if(this.renderConfig.preserveAspectRatio.indexOf('meet') !== -1 || this.renderConfig.preserveAspectRatio.indexOf('slice') !== -1){\r\n        var par = this.renderConfig.preserveAspectRatio.split(' ');\r\n        var fillType = par[1] || 'meet';\r\n        var pos = par[0] || 'xMidYMid';\r\n        var xPos = pos.substr(0,4);\r\n        var yPos = pos.substr(4);\r\n        elementRel = elementWidth/elementHeight;\r\n        animationRel = this.transformCanvas.w/this.transformCanvas.h;\r\n        if(animationRel>elementRel && fillType === 'meet' || animationRel<elementRel && fillType === 'slice'){\r\n            this.transformCanvas.sx = elementWidth/(this.transformCanvas.w/this.renderConfig.dpr);\r\n            this.transformCanvas.sy = elementWidth/(this.transformCanvas.w/this.renderConfig.dpr);\r\n        }else{\r\n            this.transformCanvas.sx = elementHeight/(this.transformCanvas.h / this.renderConfig.dpr);\r\n            this.transformCanvas.sy = elementHeight/(this.transformCanvas.h / this.renderConfig.dpr);\r\n        }\r\n\r\n        if(xPos === 'xMid' && ((animationRel<elementRel && fillType==='meet') || (animationRel>elementRel && fillType === 'slice'))){\r\n            this.transformCanvas.tx = (elementWidth-this.transformCanvas.w*(elementHeight/this.transformCanvas.h))/2*this.renderConfig.dpr;\r\n        } else if(xPos === 'xMax' && ((animationRel<elementRel && fillType==='meet') || (animationRel>elementRel && fillType === 'slice'))){\r\n            this.transformCanvas.tx = (elementWidth-this.transformCanvas.w*(elementHeight/this.transformCanvas.h))*this.renderConfig.dpr;\r\n        } else {\r\n            this.transformCanvas.tx = 0;\r\n        }\r\n        if(yPos === 'YMid' && ((animationRel>elementRel && fillType==='meet') || (animationRel<elementRel && fillType === 'slice'))){\r\n            this.transformCanvas.ty = ((elementHeight-this.transformCanvas.h*(elementWidth/this.transformCanvas.w))/2)*this.renderConfig.dpr;\r\n        } else if(yPos === 'YMax' && ((animationRel>elementRel && fillType==='meet') || (animationRel<elementRel && fillType === 'slice'))){\r\n            this.transformCanvas.ty = ((elementHeight-this.transformCanvas.h*(elementWidth/this.transformCanvas.w)))*this.renderConfig.dpr;\r\n        } else {\r\n            this.transformCanvas.ty = 0;\r\n        }\r\n\r\n    }else if(this.renderConfig.preserveAspectRatio == 'none'){\r\n        this.transformCanvas.sx = elementWidth/(this.transformCanvas.w/this.renderConfig.dpr);\r\n        this.transformCanvas.sy = elementHeight/(this.transformCanvas.h/this.renderConfig.dpr);\r\n        this.transformCanvas.tx = 0;\r\n        this.transformCanvas.ty = 0;\r\n    }else{\r\n        this.transformCanvas.sx = this.renderConfig.dpr;\r\n        this.transformCanvas.sy = this.renderConfig.dpr;\r\n        this.transformCanvas.tx = 0;\r\n        this.transformCanvas.ty = 0;\r\n    }\r\n    this.transformCanvas.props = [this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1];\r\n    /*var i, len = this.elements.length;\r\n    for(i=0;i<len;i+=1){\r\n        if(this.elements[i] && this.elements[i].data.ty === 0){\r\n            this.elements[i].resize(this.globalData.transformCanvas);\r\n        }\r\n    }*/\r\n    this.ctxTransform(this.transformCanvas.props);\r\n    this.canvasContext.beginPath();\r\n    this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h);\r\n    this.canvasContext.closePath();\r\n    this.canvasContext.clip();\r\n};\r\n\r\nCanvasRenderer.prototype.destroy = function () {\r\n    if(this.renderConfig.clearCanvas) {\r\n        this.animationItem.wrapper.innerHTML = '';\r\n    }\r\n    var i, len = this.layers ? this.layers.length : 0;\r\n    for (i = len - 1; i >= 0; i-=1) {\r\n        if(this.elements[i]) {\r\n            this.elements[i].destroy();\r\n        }\r\n    }\r\n    this.elements.length = 0;\r\n    this.globalData.canvasContext = null;\r\n    this.animationItem.container = null;\r\n    this.destroyed = true;\r\n};\r\n\r\nCanvasRenderer.prototype.renderFrame = function(num){\r\n    if((this.renderedFrame == num && this.renderConfig.clearCanvas === true) || this.destroyed || num === -1){\r\n        return;\r\n    }\r\n    this.renderedFrame = num;\r\n    this.globalData.frameNum = num - this.animationItem._isFirstFrame;\r\n    this.globalData.frameId += 1;\r\n    this.globalData._mdf = !this.renderConfig.clearCanvas;\r\n    this.globalData.projectInterface.currentFrame = num;\r\n\r\n     // console.log('--------');\r\n     // console.log('NEW: ',num);\r\n    var i, len = this.layers.length;\r\n    if(!this.completeLayers){\r\n        this.checkLayers(num);\r\n    }\r\n\r\n    for (i = 0; i < len; i++) {\r\n        if(this.completeLayers || this.elements[i]){\r\n            this.elements[i].prepareFrame(num - this.layers[i].st);\r\n        }\r\n    }\r\n    if(this.globalData._mdf) {\r\n        if(this.renderConfig.clearCanvas === true){\r\n            this.canvasContext.clearRect(0, 0, this.transformCanvas.w, this.transformCanvas.h);\r\n        }else{\r\n            this.save();\r\n        }\r\n        for (i = len - 1; i >= 0; i-=1) {\r\n            if(this.completeLayers || this.elements[i]){\r\n                this.elements[i].renderFrame();\r\n            }\r\n        }\r\n        if(this.renderConfig.clearCanvas !== true){\r\n            this.restore();\r\n        }\r\n    }\r\n};\r\n\r\nCanvasRenderer.prototype.buildItem = function(pos){\r\n    var elements = this.elements;\r\n    if(elements[pos] || this.layers[pos].ty == 99){\r\n        return;\r\n    }\r\n    var element = this.createItem(this.layers[pos], this,this.globalData);\r\n    elements[pos] = element;\r\n    element.initExpressions();\r\n    /*if(this.layers[pos].ty === 0){\r\n        element.resize(this.globalData.transformCanvas);\r\n    }*/\r\n};\r\n\r\nCanvasRenderer.prototype.checkPendingElements  = function(){\r\n    while(this.pendingElements.length){\r\n        var element = this.pendingElements.pop();\r\n        element.checkParenting();\r\n    }\r\n};\r\n\r\nCanvasRenderer.prototype.hide = function(){\r\n    this.animationItem.container.style.display = 'none';\r\n};\r\n\r\nCanvasRenderer.prototype.show = function(){\r\n    this.animationItem.container.style.display = 'block';\r\n};\r\n\nfunction HybridRenderer(animationItem, config){\r\n    this.animationItem = animationItem;\r\n    this.layers = null;\r\n    this.renderedFrame = -1;\r\n    this.renderConfig = {\r\n        className: (config && config.className) || '',\r\n        imagePreserveAspectRatio: (config && config.imagePreserveAspectRatio) || 'xMidYMid slice',\r\n        hideOnTransparent: (config && config.hideOnTransparent === false) ? false : true\r\n    };\r\n    this.globalData = {\r\n        _mdf: false,\r\n        frameNum: -1,\r\n        renderConfig: this.renderConfig\r\n    };\r\n    this.pendingElements = [];\r\n    this.elements = [];\r\n    this.threeDElements = [];\r\n    this.destroyed = false;\r\n    this.camera = null;\r\n    this.supports3d = true;\r\n\r\n}\r\n\r\nextendPrototype([BaseRenderer],HybridRenderer);\r\n\r\nHybridRenderer.prototype.buildItem = SVGRenderer.prototype.buildItem;\r\n\r\nHybridRenderer.prototype.checkPendingElements  = function(){\r\n    while(this.pendingElements.length){\r\n        var element = this.pendingElements.pop();\r\n        element.checkParenting();\r\n    }\r\n};\r\n\r\nHybridRenderer.prototype.appendElementInPos = function(element, pos){\r\n    var newDOMElement = element.getBaseElement();\r\n    if(!newDOMElement){\r\n        return;\r\n    }\r\n    var layer = this.layers[pos];\r\n    if(!layer.ddd || !this.supports3d){\r\n        if(this.threeDElements) {\r\n            this.addTo3dContainer(newDOMElement,pos);\r\n        } else {\r\n            var i = 0;\r\n            var nextDOMElement, nextLayer, tmpDOMElement;\r\n            while(i<pos){\r\n                if(this.elements[i] && this.elements[i]!== true && this.elements[i].getBaseElement){\r\n                    nextLayer = this.elements[i];\r\n                    tmpDOMElement = this.layers[i].ddd ? this.getThreeDContainerByPos(i) : nextLayer.getBaseElement();\r\n                    nextDOMElement = tmpDOMElement || nextDOMElement;\r\n                }\r\n                i += 1;\r\n            }\r\n            if(nextDOMElement){\r\n                if(!layer.ddd || !this.supports3d){\r\n                    this.layerElement.insertBefore(newDOMElement, nextDOMElement);\r\n                }\r\n            } else {\r\n                if(!layer.ddd || !this.supports3d){\r\n                    this.layerElement.appendChild(newDOMElement);\r\n                }\r\n            }\r\n        }\r\n        \r\n    } else {\r\n        this.addTo3dContainer(newDOMElement,pos);\r\n    }\r\n};\r\n\r\nHybridRenderer.prototype.createShape = function (data) {\r\n    if(!this.supports3d){\r\n        return new SVGShapeElement(data, this.globalData, this);\r\n    }\r\n    return new HShapeElement(data, this.globalData, this);\r\n};\r\n\r\nHybridRenderer.prototype.createText = function (data) {\r\n    if(!this.supports3d){\r\n        return new SVGTextElement(data, this.globalData, this);\r\n    }\r\n    return new HTextElement(data, this.globalData, this);\r\n};\r\n\r\nHybridRenderer.prototype.createCamera = function (data) {\r\n    this.camera = new HCameraElement(data, this.globalData, this);\r\n    return this.camera;\r\n};\r\n\r\nHybridRenderer.prototype.createImage = function (data) {\r\n    if(!this.supports3d){\r\n        return new IImageElement(data, this.globalData, this);\r\n    }\r\n    return new HImageElement(data, this.globalData, this);\r\n};\r\n\r\nHybridRenderer.prototype.createComp = function (data) {\r\n    if(!this.supports3d){\r\n        return new SVGCompElement(data, this.globalData, this);\r\n    }\r\n    return new HCompElement(data, this.globalData, this);\r\n\r\n};\r\n\r\nHybridRenderer.prototype.createSolid = function (data) {\r\n    if(!this.supports3d){\r\n        return new ISolidElement(data, this.globalData, this);\r\n    }\r\n    return new HSolidElement(data, this.globalData, this);\r\n};\r\n\r\nHybridRenderer.prototype.createNull = SVGRenderer.prototype.createNull;\r\n\r\nHybridRenderer.prototype.getThreeDContainerByPos = function(pos){\r\n    var i = 0, len = this.threeDElements.length;\r\n    while(i<len) {\r\n        if(this.threeDElements[i].startPos <= pos && this.threeDElements[i].endPos >= pos) {\r\n            return this.threeDElements[i].perspectiveElem;\r\n        }\r\n        i += 1;\r\n    }\r\n};\r\n\r\nHybridRenderer.prototype.createThreeDContainer = function(pos, type){\r\n    var perspectiveElem = createTag('div');\r\n    styleDiv(perspectiveElem);\r\n    var container = createTag('div');\r\n    styleDiv(container);\r\n    if(type === '3d') {\r\n        perspectiveElem.style.width = this.globalData.compSize.w+'px';\r\n        perspectiveElem.style.height = this.globalData.compSize.h+'px';\r\n        perspectiveElem.style.transformOrigin = perspectiveElem.style.mozTransformOrigin = perspectiveElem.style.webkitTransformOrigin = \"50% 50%\";\r\n        container.style.transform = container.style.webkitTransform = 'matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)';\r\n    }\r\n    \r\n    perspectiveElem.appendChild(container);\r\n    //this.resizerElem.appendChild(perspectiveElem);\r\n    var threeDContainerData = {\r\n        container:container,\r\n        perspectiveElem:perspectiveElem,\r\n        startPos: pos,\r\n        endPos: pos,\r\n        type: type\r\n    };\r\n    this.threeDElements.push(threeDContainerData);\r\n    return threeDContainerData;\r\n};\r\n\r\nHybridRenderer.prototype.build3dContainers = function(){\r\n    var i, len = this.layers.length;\r\n    var lastThreeDContainerData;\r\n    var currentContainer = '';\r\n    for(i=0;i<len;i+=1){\r\n        if(this.layers[i].ddd && this.layers[i].ty !== 3){\r\n            if(currentContainer !== '3d'){\r\n                currentContainer = '3d';\r\n                lastThreeDContainerData = this.createThreeDContainer(i,'3d');\r\n            }\r\n            lastThreeDContainerData.endPos = Math.max(lastThreeDContainerData.endPos,i);\r\n        } else {\r\n            if(currentContainer !== '2d'){\r\n                currentContainer = '2d';\r\n                lastThreeDContainerData = this.createThreeDContainer(i,'2d');\r\n            }\r\n            lastThreeDContainerData.endPos = Math.max(lastThreeDContainerData.endPos,i);\r\n        }\r\n    }\r\n    len = this.threeDElements.length;\r\n    for(i = len - 1; i >= 0; i --) {\r\n        this.resizerElem.appendChild(this.threeDElements[i].perspectiveElem);\r\n    }\r\n};\r\n\r\nHybridRenderer.prototype.addTo3dContainer = function(elem,pos){\r\n    var i = 0, len = this.threeDElements.length;\r\n    while(i<len){\r\n        if(pos <= this.threeDElements[i].endPos){\r\n            var j = this.threeDElements[i].startPos;\r\n            var nextElement;\r\n            while(j<pos){\r\n                if(this.elements[j] && this.elements[j].getBaseElement){\r\n                    nextElement = this.elements[j].getBaseElement();\r\n                }\r\n                j += 1;\r\n            }\r\n            if(nextElement){\r\n                this.threeDElements[i].container.insertBefore(elem, nextElement);\r\n            } else {\r\n                this.threeDElements[i].container.appendChild(elem);\r\n            }\r\n            break;\r\n        }\r\n        i += 1;\r\n    }\r\n};\r\n\r\nHybridRenderer.prototype.configAnimation = function(animData){\r\n    var resizerElem = createTag('div');\r\n    var wrapper = this.animationItem.wrapper;\r\n    resizerElem.style.width = animData.w+'px';\r\n    resizerElem.style.height = animData.h+'px';\r\n    this.resizerElem = resizerElem;\r\n    styleDiv(resizerElem);\r\n    resizerElem.style.transformStyle = resizerElem.style.webkitTransformStyle = resizerElem.style.mozTransformStyle = \"flat\";\r\n    if(this.renderConfig.className) {\r\n      resizerElem.setAttribute('class', this.renderConfig.className);\r\n    }\r\n    wrapper.appendChild(resizerElem);\r\n\r\n    resizerElem.style.overflow = 'hidden';\r\n    var svg = createNS('svg');\r\n    svg.setAttribute('width','1');\r\n    svg.setAttribute('height','1');\r\n    styleDiv(svg);\r\n    this.resizerElem.appendChild(svg);\r\n    var defs = createNS('defs');\r\n    svg.appendChild(defs);\r\n    this.data = animData;\r\n    //Mask animation\r\n    this.setupGlobalData(animData, svg);\r\n    this.globalData.defs = defs;\r\n    this.layers = animData.layers;\r\n    this.layerElement = this.resizerElem;\r\n    this.build3dContainers();\r\n    this.updateContainerSize();\r\n};\r\n\r\nHybridRenderer.prototype.destroy = function () {\r\n    this.animationItem.wrapper.innerHTML = '';\r\n    this.animationItem.container = null;\r\n    this.globalData.defs = null;\r\n    var i, len = this.layers ? this.layers.length : 0;\r\n    for (i = 0; i < len; i++) {\r\n        this.elements[i].destroy();\r\n    }\r\n    this.elements.length = 0;\r\n    this.destroyed = true;\r\n    this.animationItem = null;\r\n};\r\n\r\nHybridRenderer.prototype.updateContainerSize = function () {\r\n    var elementWidth = this.animationItem.wrapper.offsetWidth;\r\n    var elementHeight = this.animationItem.wrapper.offsetHeight;\r\n    var elementRel = elementWidth/elementHeight;\r\n    var animationRel = this.globalData.compSize.w/this.globalData.compSize.h;\r\n    var sx,sy,tx,ty;\r\n    if(animationRel>elementRel){\r\n        sx = elementWidth/(this.globalData.compSize.w);\r\n        sy = elementWidth/(this.globalData.compSize.w);\r\n        tx = 0;\r\n        ty = ((elementHeight-this.globalData.compSize.h*(elementWidth/this.globalData.compSize.w))/2);\r\n    }else{\r\n        sx = elementHeight/(this.globalData.compSize.h);\r\n        sy = elementHeight/(this.globalData.compSize.h);\r\n        tx = (elementWidth-this.globalData.compSize.w*(elementHeight/this.globalData.compSize.h))/2;\r\n        ty = 0;\r\n    }\r\n    this.resizerElem.style.transform = this.resizerElem.style.webkitTransform = 'matrix3d(' + sx + ',0,0,0,0,'+sy+',0,0,0,0,1,0,'+tx+','+ty+',0,1)';\r\n};\r\n\r\nHybridRenderer.prototype.renderFrame = SVGRenderer.prototype.renderFrame;\r\n\r\nHybridRenderer.prototype.hide = function(){\r\n    this.resizerElem.style.display = 'none';\r\n};\r\n\r\nHybridRenderer.prototype.show = function(){\r\n    this.resizerElem.style.display = 'block';\r\n};\r\n\r\nHybridRenderer.prototype.initItems = function(){\r\n    this.buildAllItems();\r\n    if(this.camera){\r\n        this.camera.setup();\r\n    } else {\r\n        var cWidth = this.globalData.compSize.w;\r\n        var cHeight = this.globalData.compSize.h;\r\n        var i, len = this.threeDElements.length;\r\n        for(i=0;i<len;i+=1){\r\n            this.threeDElements[i].perspectiveElem.style.perspective = this.threeDElements[i].perspectiveElem.style.webkitPerspective = Math.sqrt(Math.pow(cWidth,2) + Math.pow(cHeight,2)) + 'px';\r\n        }\r\n    }\r\n};\r\n\r\nHybridRenderer.prototype.searchExtraCompositions = function(assets){\r\n    var i, len = assets.length;\r\n    var floatingContainer = createTag('div');\r\n    for(i=0;i<len;i+=1){\r\n        if(assets[i].xt){\r\n            var comp = this.createComp(assets[i],floatingContainer,this.globalData.comp,null);\r\n            comp.initExpressions();\r\n            this.globalData.projectInterface.registerComposition(comp);\r\n        }\r\n    }\r\n};\r\n\nfunction CVShapeData(element, data) {\r\n    this.nodes = [];\r\n    this.trNodes = [];\r\n    this.tr = [0,0,0,0,0,0];\r\n    var ty = 4;\r\n    if(data.ty == 'rc'){\r\n        ty = 5;\r\n    }else if(data.ty == 'el'){\r\n        ty = 6;\r\n    }else if(data.ty == 'sr'){\r\n        ty = 7;\r\n    }\r\n    this.sh = ShapePropertyFactory.getShapeProp(element,data,ty,element);\r\n    this.st = false;\r\n    this.fl = false;\r\n}\r\n\r\nCVShapeData.prototype.setAsAnimated = SVGShapeData.prototype.setAsAnimated;\nfunction CVContextData() {\r\n\tthis.saved = [];\r\n    this.cArrPos = 0;\r\n    this.cTr = new Matrix();\r\n    this.cO = 1;\r\n    var i, len = 15;\r\n    this.savedOp = createTypedArray('float32', len);\r\n    for(i=0;i<len;i+=1){\r\n        this.saved[i] = createTypedArray('float32', 16);\r\n    }\r\n    this._length = len;\r\n}\r\n\r\nCVContextData.prototype.duplicate = function() {\r\n\tvar newLength = this._length * 2;\r\n\tvar currentSavedOp = this.savedOp;\r\n    this.savedOp = createTypedArray('float32', newLength);\r\n    this.savedOp.set(currentSavedOp);\r\n    var i = 0;\r\n    for(i = this._length; i < newLength; i += 1) {\r\n        this.saved[i] = createTypedArray('float32', 16);\r\n    }\r\n    this._length = newLength;\r\n};\r\n\r\nCVContextData.prototype.reset = function() {\r\n\tthis.cArrPos = 0;\r\n\tthis.cTr.reset();\r\n    this.cO = 1;\r\n};\nfunction CVBaseElement(){\r\n}\r\n\r\nCVBaseElement.prototype = {\r\n    createElements: function(){},\r\n    initRendererElement: function(){},\r\n    createContainerElements: function(){\r\n        this.canvasContext = this.globalData.canvasContext;\r\n        this.renderableEffectsManager = new CVEffects(this);\r\n    },\r\n    createContent: function(){},\r\n    setBlendMode: function(){\r\n        var globalData = this.globalData;\r\n        if(globalData.blendMode !== this.data.bm) {\r\n            globalData.blendMode = this.data.bm;\r\n            var blendModeValue = this.getBlendMode();\r\n            globalData.canvasContext.globalCompositeOperation = blendModeValue;\r\n        }\r\n    },\r\n    addMasks: function(){\r\n        this.maskManager = new CVMaskElement(this.data, this);\r\n    },\r\n    hideElement: function(){\r\n        if (!this.hidden && (!this.isInRange || this.isTransparent)) {\r\n            this.hidden = true;\r\n        }\r\n    },\r\n    showElement: function(){\r\n        if (this.isInRange && !this.isTransparent){\r\n            this.hidden = false;\r\n            this._isFirstFrame = true;\r\n            this.maskManager._isFirstFrame = true;\r\n        }\r\n    },\r\n    renderFrame: function() {\r\n        if (this.hidden || this.data.hd) {\r\n            return;\r\n        }\r\n        this.renderTransform();\r\n        this.renderRenderable();\r\n        this.setBlendMode();\r\n        this.globalData.renderer.save();\r\n        this.globalData.renderer.ctxTransform(this.finalTransform.mat.props);\r\n        this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v);\r\n        this.renderInnerContent();\r\n        this.globalData.renderer.restore();\r\n        if(this.maskManager.hasMasks) {\r\n            this.globalData.renderer.restore(true);\r\n        }\r\n        if (this._isFirstFrame) {\r\n            this._isFirstFrame = false;\r\n        }\r\n    },\r\n    destroy: function(){\r\n        this.canvasContext = null;\r\n        this.data = null;\r\n        this.globalData = null;\r\n        this.maskManager.destroy();\r\n    },\r\n    mHelper: new Matrix()\r\n};\r\nCVBaseElement.prototype.hide = CVBaseElement.prototype.hideElement;\r\nCVBaseElement.prototype.show = CVBaseElement.prototype.showElement;\r\n\nfunction CVImageElement(data, globalData, comp){\r\n    this.failed = false;\r\n    this.img = new Image();\r\n    this.img.crossOrigin = 'anonymous';\r\n    this.assetData = globalData.getAssetData(data.refId);\r\n    this.initElement(data,globalData,comp);\r\n    this.globalData.addPendingElement();\r\n}\r\nextendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement], CVImageElement);\r\n\r\nCVImageElement.prototype.initElement = SVGShapeElement.prototype.initElement;\r\nCVImageElement.prototype.prepareFrame = IImageElement.prototype.prepareFrame;\r\n\r\nCVImageElement.prototype.imageLoaded = function() {\r\n    this.globalData.elementLoaded();\r\n    if(this.assetData.w !== this.img.width || this.assetData.h !== this.img.height){\r\n        var canvas = createTag('canvas');\r\n        canvas.width = this.assetData.w;\r\n        canvas.height = this.assetData.h;\r\n        var ctx = canvas.getContext('2d');\r\n\r\n        var imgW = this.img.width;\r\n        var imgH = this.img.height;\r\n        var imgRel = imgW / imgH;\r\n        var canvasRel = this.assetData.w/this.assetData.h;\r\n        var widthCrop, heightCrop;\r\n        var par = this.assetData.pr || this.globalData.renderConfig.imagePreserveAspectRatio;\r\n        if((imgRel > canvasRel && par === 'xMidYMid slice') || (imgRel < canvasRel && par !== 'xMidYMid slice')) {\r\n            heightCrop = imgH;\r\n            widthCrop = heightCrop*canvasRel;\r\n        } else {\r\n            widthCrop = imgW;\r\n            heightCrop = widthCrop/canvasRel;\r\n        }\r\n        ctx.drawImage(this.img,(imgW-widthCrop)/2,(imgH-heightCrop)/2,widthCrop,heightCrop,0,0,this.assetData.w,this.assetData.h);\r\n        this.img = canvas;\r\n    }\r\n};\r\n\r\nCVImageElement.prototype.imageFailed = function() {\r\n    this.failed = true;\r\n    this.globalData.elementLoaded();\r\n};\r\n\r\nCVImageElement.prototype.createContent = function(){\r\n    var img = this.img;\r\n    img.addEventListener('load', this.imageLoaded.bind(this), false);\r\n    img.addEventListener('error', this.imageFailed.bind(this), false);\r\n    var assetPath = this.globalData.getAssetsPath(this.assetData);\r\n    img.src = assetPath;\r\n\r\n};\r\n\r\nCVImageElement.prototype.renderInnerContent = function(parentMatrix){\r\n    if (this.failed) {\r\n        return;\r\n    }\r\n    this.canvasContext.drawImage(this.img, 0, 0);\r\n};\r\n\r\nCVImageElement.prototype.destroy = function(){\r\n    this.img = null;\r\n};\nfunction CVCompElement(data, globalData, comp) {\r\n    this.completeLayers = false;\r\n    this.layers = data.layers;\r\n    this.pendingElements = [];\r\n    this.elements = createSizedArray(this.layers.length);\r\n    this.initElement(data, globalData, comp);\r\n    this.tm = data.tm ? PropertyFactory.getProp(this,data.tm,0,globalData.frameRate, this) : {_placeholder:true};\r\n}\r\n\r\nextendPrototype([CanvasRenderer, ICompElement, CVBaseElement], CVCompElement);\r\n\r\nCVCompElement.prototype.renderInnerContent = function() {\r\n    var i,len = this.layers.length;\r\n    for( i = len - 1; i >= 0; i -= 1 ){\r\n        if(this.completeLayers || this.elements[i]){\r\n            this.elements[i].renderFrame();\r\n        }\r\n    }\r\n};\r\n\r\nCVCompElement.prototype.destroy = function(){\r\n    var i,len = this.layers.length;\r\n    for( i = len - 1; i >= 0; i -= 1 ){\r\n        if(this.elements[i]) {\r\n            this.elements[i].destroy();\r\n        }\r\n    }\r\n    this.layers = null;\r\n    this.elements = null;\r\n};\n\r\nfunction CVMaskElement(data,element){\r\n    this.data = data;\r\n    this.element = element;\r\n    this.masksProperties = this.data.masksProperties || [];\r\n    this.viewData = createSizedArray(this.masksProperties.length);\r\n    var i, len = this.masksProperties.length, hasMasks = false;\r\n    for (i = 0; i < len; i++) {\r\n        if(this.masksProperties[i].mode !== 'n'){\r\n            hasMasks = true;\r\n        }\r\n        this.viewData[i] = ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[i],3);\r\n    }\r\n    this.hasMasks = hasMasks;\r\n    if(hasMasks) {\r\n        this.element.addRenderableComponent(this);\r\n    }\r\n}\r\n\r\nCVMaskElement.prototype.renderFrame = function () {\r\n    if(!this.hasMasks){\r\n        return;\r\n    }\r\n    var transform = this.element.finalTransform.mat;\r\n    var ctx = this.element.canvasContext;\r\n    var i, len = this.masksProperties.length;\r\n    var pt,pts,data;\r\n    ctx.beginPath();\r\n    for (i = 0; i < len; i++) {\r\n        if(this.masksProperties[i].mode !== 'n'){\r\n            if (this.masksProperties[i].inv) {\r\n                ctx.moveTo(0, 0);\r\n                ctx.lineTo(this.element.globalData.compSize.w, 0);\r\n                ctx.lineTo(this.element.globalData.compSize.w, this.element.globalData.compSize.h);\r\n                ctx.lineTo(0, this.element.globalData.compSize.h);\r\n                ctx.lineTo(0, 0);\r\n            }\r\n            data = this.viewData[i].v;\r\n            pt = transform.applyToPointArray(data.v[0][0],data.v[0][1],0);\r\n            ctx.moveTo(pt[0], pt[1]);\r\n            var j, jLen = data._length;\r\n            for (j = 1; j < jLen; j++) {\r\n                pts = transform.applyToTriplePoints(data.o[j - 1], data.i[j], data.v[j]);\r\n                ctx.bezierCurveTo(pts[0], pts[1], pts[2], pts[3], pts[4], pts[5]);\r\n            }\r\n            pts = transform.applyToTriplePoints(data.o[j - 1], data.i[0], data.v[0]);\r\n            ctx.bezierCurveTo(pts[0], pts[1], pts[2], pts[3], pts[4], pts[5]);\r\n        }\r\n    }\r\n    this.element.globalData.renderer.save(true);\r\n    ctx.clip();\r\n};\r\n\r\nCVMaskElement.prototype.getMaskProperty = MaskElement.prototype.getMaskProperty;\r\n\r\nCVMaskElement.prototype.destroy = function(){\r\n    this.element = null;\r\n};\nfunction CVShapeElement(data, globalData, comp) {\r\n    this.shapes = [];\r\n    this.shapesData = data.shapes;\r\n    this.stylesList = [];\r\n    this.itemsData = [];\r\n    this.prevViewData = [];\r\n    this.shapeModifiers = [];\r\n    this.processedElements = [];\r\n    this.initElement(data, globalData, comp);\r\n}\r\n\r\nextendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement], CVShapeElement);\r\n\r\nCVShapeElement.prototype.initElement = RenderableDOMElement.prototype.initElement;\r\n\r\nCVShapeElement.prototype.transformHelper = {opacity:1,mat:new Matrix(),_matMdf:false,_opMdf:false};\r\n\r\nCVShapeElement.prototype.dashResetter = [];\r\n\r\nCVShapeElement.prototype.createContent = function(){\r\n    this.searchShapes(this.shapesData,this.itemsData,this.prevViewData, true);\r\n};\r\n\r\nCVShapeElement.prototype.createStyleElement = function(data){\r\n    var styleElem = {\r\n        data: data,\r\n        type: data.ty,\r\n        elements: [],\r\n        closed: data.hd === true\r\n    };\r\n    var elementData = {};\r\n    if(data.ty == 'fl' || data.ty == 'st'){\r\n        elementData.c = PropertyFactory.getProp(this,data.c,1,255,this);\r\n        if(!elementData.c.k){\r\n            styleElem.co = 'rgb('+bm_floor(elementData.c.v[0])+','+bm_floor(elementData.c.v[1])+','+bm_floor(elementData.c.v[2])+')';\r\n        }\r\n    } else if (data.ty === 'gf' || data.ty === 'gs') {\r\n        elementData.s = PropertyFactory.getProp(this,data.s,1,null,this);\r\n        elementData.e = PropertyFactory.getProp(this,data.e,1,null,this);\r\n        elementData.h = PropertyFactory.getProp(this,data.h||{k:0},0,0.01,this);\r\n        elementData.a = PropertyFactory.getProp(this,data.a||{k:0},0,degToRads,this);\r\n        elementData.g = new GradientProperty(this,data.g);\r\n    }\r\n    elementData.o = PropertyFactory.getProp(this,data.o,0,0.01,this);\r\n    if(data.ty == 'st' || data.ty == 'gs') {\r\n        styleElem.lc = this.lcEnum[data.lc] || 'round';\r\n        styleElem.lj = this.ljEnum[data.lj] || 'round';\r\n        if(data.lj == 1) {\r\n            styleElem.ml = data.ml;\r\n        }\r\n        elementData.w = PropertyFactory.getProp(this,data.w,0,null,this);\r\n        if(!elementData.w.k){\r\n            styleElem.wi = elementData.w.v;\r\n        }\r\n        if(data.d){\r\n            var d = new DashProperty(this,data.d,'canvas');\r\n            elementData.d = d;\r\n            if(!elementData.d.k){\r\n                styleElem.da = elementData.d.dashArray;\r\n                styleElem.do = elementData.d.dashoffset[0];\r\n            }\r\n        }\r\n    } else {\r\n        styleElem.r = data.r === 2 ? 'evenodd' : 'nonzero';\r\n    }\r\n    this.stylesList.push(styleElem);\r\n    elementData.style = styleElem;\r\n    return elementData;\r\n};\r\n\r\nCVShapeElement.prototype.createGroupElement = function(data) {\r\n    var elementData = {\r\n        it: [],\r\n        prevViewData: []\r\n    };\r\n    return elementData;\r\n};\r\n\r\nCVShapeElement.prototype.createTransformElement = function(data) {\r\n    var elementData = {\r\n        transform : {\r\n            mat: new Matrix(),\r\n            opacity: 1,\r\n            _matMdf:false,\r\n            _opMdf:false,\r\n            op: PropertyFactory.getProp(this,data.o,0,0.01,this),\r\n            mProps: TransformPropertyFactory.getTransformProperty(this,data,this)\r\n        },\r\n        elements: []\r\n    };\r\n    return elementData;\r\n};\r\n\r\nCVShapeElement.prototype.createShapeElement = function(data) {\r\n    var elementData = new CVShapeData(this, data);\r\n    \r\n    this.shapes.push(elementData);\r\n    this.addShapeToModifiers(elementData);\r\n    var j, jLen = this.stylesList.length;\r\n    var hasStrokes = false, hasFills = false;\r\n    for(j=0;j<jLen;j+=1){\r\n        if(!this.stylesList[j].closed){\r\n            this.stylesList[j].elements.push(elementData);\r\n            if(this.stylesList[j].type === 'st'){\r\n                hasStrokes = true;\r\n            }else{\r\n                hasFills = true;\r\n            }\r\n        }\r\n    }\r\n    elementData.st = hasStrokes;\r\n    elementData.fl = hasFills;\r\n    return elementData;\r\n};\r\n\r\nCVShapeElement.prototype.reloadShapes = function(){\r\n    this._isFirstFrame = true;\r\n    var i, len = this.itemsData.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.prevViewData[i] = this.itemsData[i];\r\n    }\r\n    this.searchShapes(this.shapesData,this.itemsData,this.prevViewData, true);\r\n    len = this.dynamicProperties.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.dynamicProperties[i].getValue();\r\n    }\r\n    this.renderModifiers();\r\n};\r\n\r\nCVShapeElement.prototype.searchShapes = function(arr,itemsData, prevViewData, render){\r\n    var i, len = arr.length - 1;\r\n    var j, jLen;\r\n    var ownArrays = [], ownModifiers = [], processedPos, modifier;\r\n    for(i=len;i>=0;i-=1){\r\n        processedPos = this.searchProcessedElement(arr[i]);\r\n        if(!processedPos){\r\n            arr[i]._render = render;\r\n        } else {\r\n            itemsData[i] = prevViewData[processedPos - 1];\r\n        }\r\n        if(arr[i].ty == 'fl' || arr[i].ty == 'st'|| arr[i].ty == 'gf'|| arr[i].ty == 'gs'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createStyleElement(arr[i]);\r\n            } else {\r\n                itemsData[i].style.closed = false;\r\n            }\r\n            \r\n            ownArrays.push(itemsData[i].style);\r\n        }else if(arr[i].ty == 'gr'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createGroupElement(arr[i]);\r\n            } else {\r\n                jLen = itemsData[i].it.length;\r\n                for(j=0;j<jLen;j+=1){\r\n                    itemsData[i].prevViewData[j] = itemsData[i].it[j];\r\n                }\r\n            }\r\n            this.searchShapes(arr[i].it,itemsData[i].it,itemsData[i].prevViewData, render);\r\n        }else if(arr[i].ty == 'tr'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createTransformElement(arr[i]);\r\n            }\r\n        }else if(arr[i].ty == 'sh' || arr[i].ty == 'rc' || arr[i].ty == 'el' || arr[i].ty == 'sr'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createShapeElement(arr[i]);\r\n            }\r\n            \r\n        }else if(arr[i].ty == 'tm' || arr[i].ty == 'rd'){\r\n            if(!processedPos){\r\n                modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n                modifier.init(this,arr[i]);\r\n                itemsData[i] = modifier;\r\n                this.shapeModifiers.push(modifier);\r\n            } else {\r\n                modifier = itemsData[i];\r\n                modifier.closed = false;\r\n            }\r\n            ownModifiers.push(modifier);\r\n        } else if(arr[i].ty == 'rp'){\r\n            if(!processedPos){\r\n                modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n                itemsData[i] = modifier;\r\n                modifier.init(this,arr,i,itemsData);\r\n                this.shapeModifiers.push(modifier);\r\n                render = false;\r\n            }else{\r\n                modifier = itemsData[i];\r\n                modifier.closed = true;\r\n            }\r\n            ownModifiers.push(modifier);\r\n        }\r\n        this.addProcessedElement(arr[i], i + 1);\r\n    }\r\n    len = ownArrays.length;\r\n    for(i=0;i<len;i+=1){\r\n        ownArrays[i].closed = true;\r\n    }\r\n    len = ownModifiers.length;\r\n    for(i=0;i<len;i+=1){\r\n        ownModifiers[i].closed = true;\r\n    }\r\n};\r\n\r\nCVShapeElement.prototype.renderInnerContent = function() {\r\n\r\n    this.transformHelper.mat.reset();\r\n    this.transformHelper.opacity = 1;\r\n    this.transformHelper._matMdf = false;\r\n    this.transformHelper._opMdf = false;\r\n    this.renderModifiers();\r\n    this.renderShape(this.transformHelper,this.shapesData,this.itemsData,true);\r\n};\r\n\r\nCVShapeElement.prototype.renderShapeTransform = function(parentTransform, groupTransform) {\r\n    var props, groupMatrix;\r\n    if(parentTransform._opMdf || groupTransform.op._mdf || this._isFirstFrame) {\r\n        groupTransform.opacity = parentTransform.opacity;\r\n        groupTransform.opacity *= groupTransform.op.v;\r\n        groupTransform._opMdf = true;\r\n    }\r\n    if(parentTransform._matMdf || groupTransform.mProps._mdf || this._isFirstFrame) {\r\n        groupMatrix = groupTransform.mat;\r\n        groupMatrix.cloneFromProps(groupTransform.mProps.v.props);\r\n        groupTransform._matMdf = true;\r\n        props = parentTransform.mat.props;\r\n        groupMatrix.transform(props[0],props[1],props[2],props[3],props[4],props[5],props[6],props[7],props[8],props[9],props[10],props[11],props[12],props[13],props[14],props[15]);\r\n    }\r\n};\r\n\r\nCVShapeElement.prototype.drawLayer = function() {\r\n    var i, len = this.stylesList.length;\r\n    var j, jLen, k, kLen,elems,nodes, renderer = this.globalData.renderer, ctx = this.globalData.canvasContext, type, currentStyle;\r\n    for(i=0;i<len;i+=1){\r\n        currentStyle = this.stylesList[i];\r\n        type = currentStyle.type;\r\n        if(((type === 'st' || type === 'gs') && currentStyle.wi === 0) || !currentStyle.data._render || currentStyle.coOp === 0){\r\n            continue;\r\n        }\r\n        renderer.save();\r\n        elems = currentStyle.elements;\r\n        if(type === 'st' || type === 'gs'){\r\n            ctx.strokeStyle = type === 'st' ? currentStyle.co : currentStyle.grd;\r\n            ctx.lineWidth = currentStyle.wi;\r\n            ctx.lineCap = currentStyle.lc;\r\n            ctx.lineJoin = currentStyle.lj;\r\n            ctx.miterLimit = currentStyle.ml || 0;\r\n        } else {\r\n            ctx.fillStyle = type === 'fl' ? currentStyle.co : currentStyle.grd;\r\n        }\r\n        renderer.ctxOpacity(currentStyle.coOp);\r\n        if(this.globalData.currentGlobalAlpha !== 0) {\r\n            if(type !== 'st' && type !== 'gs'){\r\n                ctx.beginPath();\r\n            }\r\n            jLen = elems.length;\r\n            for(j=0;j<jLen;j+=1){\r\n                if(type === 'st' || type === 'gs'){\r\n                    ctx.beginPath();\r\n                    if(currentStyle.da){\r\n                        ctx.setLineDash(currentStyle.da);\r\n                        ctx.lineDashOffset = currentStyle.do;\r\n                        this.globalData.isDashed = true;\r\n                    }else if(this.globalData.isDashed){\r\n                        ctx.setLineDash(this.dashResetter);\r\n                        this.globalData.isDashed = false;\r\n                    }\r\n                }\r\n                nodes = elems[j].trNodes;\r\n                kLen = nodes.length;\r\n\r\n                for(k=0;k<kLen;k+=1){\r\n                    if(nodes[k].t == 'm'){\r\n                        ctx.moveTo(nodes[k].p[0],nodes[k].p[1]);\r\n                    }else if(nodes[k].t == 'c'){\r\n                        ctx.bezierCurveTo(nodes[k].pts[0],nodes[k].pts[1],nodes[k].pts[2],nodes[k].pts[3],nodes[k].pts[4],nodes[k].pts[5]);\r\n                    }else{\r\n                        ctx.closePath();\r\n                    }\r\n                }\r\n                if(type === 'st' || type === 'gs'){\r\n                    ctx.stroke();\r\n                }\r\n            }\r\n            if(type !== 'st' && type !== 'gs'){\r\n                ctx.fill(currentStyle.r);\r\n            }\r\n            \r\n        }\r\n        renderer.restore();\r\n    }\r\n};\r\n\r\nCVShapeElement.prototype.renderShape = function(parentTransform,items,data,isMain){\r\n    var i, len = items.length - 1;\r\n    var groupTransform;\r\n    groupTransform = parentTransform;\r\n    for(i=len;i>=0;i-=1){\r\n        if(items[i].ty == 'tr'){\r\n            groupTransform = data[i].transform;\r\n            this.renderShapeTransform(parentTransform, groupTransform);\r\n        }else if(items[i].ty == 'sh' || items[i].ty == 'el' || items[i].ty == 'rc' || items[i].ty == 'sr'){\r\n            this.renderPath(items[i],data[i],groupTransform);\r\n        }else if(items[i].ty == 'fl'){\r\n            this.renderFill(items[i],data[i],groupTransform);\r\n        }else if(items[i].ty == 'st'){\r\n            this.renderStroke(items[i],data[i],groupTransform);\r\n        }else if(items[i].ty == 'gf' || items[i].ty == 'gs'){\r\n            this.renderGradientFill(items[i],data[i],groupTransform);\r\n        }else if(items[i].ty == 'gr'){\r\n            this.renderShape(groupTransform,items[i].it,data[i].it);\r\n        }else if(items[i].ty == 'tm'){\r\n            //\r\n        }\r\n    }\r\n    if(isMain){\r\n        this.drawLayer();\r\n    }\r\n    \r\n};\r\nCVShapeElement.prototype.renderPath = function(pathData,itemData,groupTransform){\r\n    var len, i, j,jLen;\r\n    var redraw = pathData.hd !== true && (groupTransform._matMdf || itemData.sh._mdf || this._isFirstFrame);\r\n    if(redraw) {\r\n        var paths = itemData.sh.paths, groupTransformMat = groupTransform.mat;\r\n        jLen = pathData._render === false ? 0 : paths._length;\r\n        var pathStringTransformed = itemData.trNodes;\r\n        pathStringTransformed.length = 0;\r\n        for(j=0;j<jLen;j+=1){\r\n            var pathNodes = paths.shapes[j];\r\n            if(pathNodes && pathNodes.v){\r\n                len = pathNodes._length;\r\n                for (i = 1; i < len; i += 1) {\r\n                    if (i == 1) {\r\n                        pathStringTransformed.push({\r\n                            t: 'm',\r\n                            p: groupTransformMat.applyToPointArray(pathNodes.v[0][0], pathNodes.v[0][1], 0)\r\n                        });\r\n                    }\r\n                    pathStringTransformed.push({\r\n                        t: 'c',\r\n                        pts: groupTransformMat.applyToTriplePoints(pathNodes.o[i - 1], pathNodes.i[i], pathNodes.v[i])\r\n                    });\r\n                }\r\n                if (len == 1) {\r\n                    pathStringTransformed.push({\r\n                        t: 'm',\r\n                        p: groupTransformMat.applyToPointArray(pathNodes.v[0][0], pathNodes.v[0][1], 0)\r\n                    });\r\n                }\r\n                if (pathNodes.c && len) {\r\n                    pathStringTransformed.push({\r\n                        t: 'c',\r\n                        pts: groupTransformMat.applyToTriplePoints(pathNodes.o[i - 1], pathNodes.i[0], pathNodes.v[0])\r\n                    });\r\n                    pathStringTransformed.push({\r\n                        t: 'z'\r\n                    });\r\n                }\r\n                itemData.lStr = pathStringTransformed;\r\n            }\r\n\r\n        }\r\n\r\n        if (itemData.st) {\r\n            for (i = 0; i < 16; i += 1) {\r\n                itemData.tr[i] = groupTransform.mat.props[i];\r\n            }\r\n        }\r\n        itemData.trNodes = pathStringTransformed;\r\n\r\n    }\r\n};\r\n\r\nCVShapeElement.prototype.renderFill = function(styleData,itemData, groupTransform){\r\n    var styleElem = itemData.style;\r\n\r\n    if(itemData.c._mdf || this._isFirstFrame){\r\n        styleElem.co = 'rgb('+bm_floor(itemData.c.v[0])+','+bm_floor(itemData.c.v[1])+','+bm_floor(itemData.c.v[2])+')';\r\n    }\r\n    if(itemData.o._mdf || groupTransform._opMdf || this._isFirstFrame){\r\n        styleElem.coOp = itemData.o.v*groupTransform.opacity;\r\n    }\r\n};\r\n\r\nCVShapeElement.prototype.renderGradientFill = function(styleData,itemData, groupTransform){\r\n    var styleElem = itemData.style;\r\n    if(!styleElem.grd || itemData.g._mdf || itemData.s._mdf || itemData.e._mdf || (styleData.t !== 1 && (itemData.h._mdf || itemData.a._mdf))) {\r\n        var ctx = this.globalData.canvasContext;\r\n        var grd;\r\n        var pt1 = itemData.s.v, pt2 = itemData.e.v;\r\n        pt1 = groupTransform.mat.applyToPointArray(pt1[0], pt1[1], 0);\r\n        pt2 = groupTransform.mat.applyToPointArray(pt2[0], pt2[1], 0);\r\n        if(styleData.t === 1) {\r\n            grd=ctx.createLinearGradient(pt1[0],pt1[1],pt2[0],pt2[1]);\r\n        } else {\r\n            var rad;\r\n            rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\r\n            var ang = Math.atan2(pt2[1] - pt1[1], pt2[0] - pt1[0]);\r\n\r\n            var percent = itemData.h.v >= 1 ? 0.99 : itemData.h.v <= -1 ? -0.99: itemData.h.v;\r\n            var dist = rad * percent;\r\n            var x = Math.cos(ang + itemData.a.v) * dist + pt1[0];\r\n            var y = Math.sin(ang + itemData.a.v) * dist + pt1[1];\r\n            var grd=ctx.createRadialGradient(x,y,0,pt1[0],pt1[1],rad);\r\n        }\r\n\r\n        var i, len = styleData.g.p;\r\n        var cValues = itemData.g.c;\r\n        var opacity = 1;\r\n\r\n        for (i = 0; i < len; i += 1){\r\n            if(itemData.g._hasOpacity && itemData.g._collapsable) {\r\n                opacity = itemData.g.o[i*2 + 1];\r\n            }\r\n            grd.addColorStop(cValues[i * 4] / 100,'rgba('+ cValues[i * 4 + 1] + ',' + cValues[i * 4 + 2] + ','+cValues[i * 4 + 3] + ',' + opacity + ')');\r\n        }\r\n        styleElem.grd = grd;\r\n    }\r\n    styleElem.coOp = itemData.o.v*groupTransform.opacity;\r\n    \r\n};\r\n\r\nCVShapeElement.prototype.renderStroke = function(styleData,itemData, groupTransform){\r\n    var styleElem = itemData.style;\r\n    var d = itemData.d;\r\n    if(d && (d._mdf  || this._isFirstFrame)){\r\n        styleElem.da = d.dashArray;\r\n        styleElem.do = d.dashoffset[0];\r\n    }\r\n    if(itemData.c._mdf || this._isFirstFrame){\r\n        styleElem.co = 'rgb('+bm_floor(itemData.c.v[0])+','+bm_floor(itemData.c.v[1])+','+bm_floor(itemData.c.v[2])+')';\r\n    }\r\n    if(itemData.o._mdf || groupTransform._opMdf || this._isFirstFrame){\r\n        styleElem.coOp = itemData.o.v*groupTransform.opacity;\r\n    }\r\n    if(itemData.w._mdf || this._isFirstFrame){\r\n        styleElem.wi = itemData.w.v;\r\n    }\r\n};\r\n\r\n\r\nCVShapeElement.prototype.destroy = function(){\r\n    this.shapesData = null;\r\n    this.globalData = null;\r\n    this.canvasContext = null;\r\n    this.stylesList.length = 0;\r\n    this.itemsData.length = 0;\r\n};\r\n\r\n\nfunction CVSolidElement(data, globalData, comp) {\r\n    this.initElement(data,globalData,comp);\r\n}\r\nextendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement], CVSolidElement);\r\n\r\nCVSolidElement.prototype.initElement = SVGShapeElement.prototype.initElement;\r\nCVSolidElement.prototype.prepareFrame = IImageElement.prototype.prepareFrame;\r\n\r\nCVSolidElement.prototype.renderInnerContent = function() {\r\n    var ctx = this.canvasContext;\r\n    ctx.fillStyle = this.data.sc;\r\n    ctx.fillRect(0, 0, this.data.sw, this.data.sh);\r\n    //\r\n};\nfunction CVTextElement(data, globalData, comp){\r\n    this.textSpans = [];\r\n    this.yOffset = 0;\r\n    this.fillColorAnim = false;\r\n    this.strokeColorAnim = false;\r\n    this.strokeWidthAnim = false;\r\n    this.stroke = false;\r\n    this.fill = false;\r\n    this.justifyOffset = 0;\r\n    this.currentRender = null;\r\n    this.renderType = 'canvas';\r\n    this.values = {\r\n        fill: 'rgba(0,0,0,0)',\r\n        stroke: 'rgba(0,0,0,0)',\r\n        sWidth: 0,\r\n        fValue: ''\r\n    };\r\n    this.initElement(data,globalData,comp);\r\n}\r\nextendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement], CVTextElement);\r\n\r\nCVTextElement.prototype.tHelper = createTag('canvas').getContext('2d');\r\n\r\nCVTextElement.prototype.buildNewText = function(){\r\n    var documentData = this.textProperty.currentData;\r\n    this.renderedLetters = createSizedArray(documentData.l ? documentData.l.length : 0);\r\n\r\n    var hasFill = false;\r\n    if(documentData.fc) {\r\n        hasFill = true;\r\n        this.values.fill = this.buildColor(documentData.fc);\r\n    }else{\r\n        this.values.fill = 'rgba(0,0,0,0)';\r\n    }\r\n    this.fill = hasFill;\r\n    var hasStroke = false;\r\n    if(documentData.sc){\r\n        hasStroke = true;\r\n        this.values.stroke = this.buildColor(documentData.sc);\r\n        this.values.sWidth = documentData.sw;\r\n    }\r\n    var fontData = this.globalData.fontManager.getFontByName(documentData.f);\r\n    var i, len;\r\n    var letters = documentData.l;\r\n    var matrixHelper = this.mHelper;\r\n    this.stroke = hasStroke;\r\n    this.values.fValue = documentData.finalSize + 'px '+ this.globalData.fontManager.getFontByName(documentData.f).fFamily;\r\n    len = documentData.finalText.length;\r\n    //this.tHelper.font = this.values.fValue;\r\n    var charData, shapeData, k, kLen, shapes, j, jLen, pathNodes, commands, pathArr, singleShape = this.data.singleShape;\r\n    var trackingOffset = documentData.tr/1000*documentData.finalSize;\r\n    var xPos = 0, yPos = 0, firstLine = true;\r\n    var cnt = 0;\r\n    for (i = 0; i < len; i += 1) {\r\n        charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\r\n        shapeData = charData && charData.data || {};\r\n        matrixHelper.reset();\r\n        if(singleShape && letters[i].n) {\r\n            xPos = -trackingOffset;\r\n            yPos += documentData.yOffset;\r\n            yPos += firstLine ? 1 : 0;\r\n            firstLine = false;\r\n        }\r\n\r\n        shapes = shapeData.shapes ? shapeData.shapes[0].it : [];\r\n        jLen = shapes.length;\r\n        matrixHelper.scale(documentData.finalSize/100,documentData.finalSize/100);\r\n        if(singleShape){\r\n            this.applyTextPropertiesToMatrix(documentData, matrixHelper, letters[i].line, xPos, yPos);\r\n        }\r\n        commands = createSizedArray(jLen);\r\n        for(j=0;j<jLen;j+=1){\r\n            kLen = shapes[j].ks.k.i.length;\r\n            pathNodes = shapes[j].ks.k;\r\n            pathArr = [];\r\n            for(k=1;k<kLen;k+=1){\r\n                if(k==1){\r\n                    pathArr.push(matrixHelper.applyToX(pathNodes.v[0][0],pathNodes.v[0][1],0),matrixHelper.applyToY(pathNodes.v[0][0],pathNodes.v[0][1],0));\r\n                }\r\n                pathArr.push(matrixHelper.applyToX(pathNodes.o[k-1][0],pathNodes.o[k-1][1],0),matrixHelper.applyToY(pathNodes.o[k-1][0],pathNodes.o[k-1][1],0),matrixHelper.applyToX(pathNodes.i[k][0],pathNodes.i[k][1],0),matrixHelper.applyToY(pathNodes.i[k][0],pathNodes.i[k][1],0),matrixHelper.applyToX(pathNodes.v[k][0],pathNodes.v[k][1],0),matrixHelper.applyToY(pathNodes.v[k][0],pathNodes.v[k][1],0));\r\n            }\r\n            pathArr.push(matrixHelper.applyToX(pathNodes.o[k-1][0],pathNodes.o[k-1][1],0),matrixHelper.applyToY(pathNodes.o[k-1][0],pathNodes.o[k-1][1],0),matrixHelper.applyToX(pathNodes.i[0][0],pathNodes.i[0][1],0),matrixHelper.applyToY(pathNodes.i[0][0],pathNodes.i[0][1],0),matrixHelper.applyToX(pathNodes.v[0][0],pathNodes.v[0][1],0),matrixHelper.applyToY(pathNodes.v[0][0],pathNodes.v[0][1],0));\r\n            commands[j] = pathArr;\r\n        }\r\n        if(singleShape){\r\n            xPos += letters[i].l;\r\n            xPos += trackingOffset;\r\n        }\r\n        if(this.textSpans[cnt]){\r\n            this.textSpans[cnt].elem = commands;\r\n        } else {\r\n            this.textSpans[cnt] = {elem: commands};\r\n        }\r\n        cnt +=1;\r\n    }\r\n};\r\n\r\nCVTextElement.prototype.renderInnerContent = function(){\r\n    var ctx = this.canvasContext;\r\n    var finalMat = this.finalTransform.mat.props;\r\n    ctx.font = this.values.fValue;\r\n    ctx.lineCap = 'butt';\r\n    ctx.lineJoin = 'miter';\r\n    ctx.miterLimit = 4;\r\n\r\n    if(!this.data.singleShape){\r\n        this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\r\n    }\r\n\r\n    var  i,len, j, jLen, k, kLen;\r\n    var renderedLetters = this.textAnimator.renderedLetters;\r\n\r\n    var letters = this.textProperty.currentData.l;\r\n\r\n    len = letters.length;\r\n    var renderedLetter;\r\n    var lastFill = null, lastStroke = null, lastStrokeW = null, commands, pathArr;\r\n    for(i=0;i<len;i+=1){\r\n        if(letters[i].n){\r\n            continue;\r\n        }\r\n        renderedLetter = renderedLetters[i];\r\n        if(renderedLetter){\r\n            this.globalData.renderer.save();\r\n            this.globalData.renderer.ctxTransform(renderedLetter.p);\r\n            this.globalData.renderer.ctxOpacity(renderedLetter.o);\r\n        }\r\n        if(this.fill){\r\n            if(renderedLetter && renderedLetter.fc){\r\n                if(lastFill !== renderedLetter.fc){\r\n                    lastFill = renderedLetter.fc;\r\n                    ctx.fillStyle = renderedLetter.fc;\r\n                }\r\n            }else if(lastFill !== this.values.fill){\r\n                lastFill = this.values.fill;\r\n                ctx.fillStyle = this.values.fill;\r\n            }\r\n            commands = this.textSpans[i].elem;\r\n            jLen = commands.length;\r\n            this.globalData.canvasContext.beginPath();\r\n            for(j=0;j<jLen;j+=1) {\r\n                pathArr = commands[j];\r\n                kLen = pathArr.length;\r\n                this.globalData.canvasContext.moveTo(pathArr[0], pathArr[1]);\r\n                for (k = 2; k < kLen; k += 6) {\r\n                    this.globalData.canvasContext.bezierCurveTo(pathArr[k], pathArr[k + 1], pathArr[k + 2], pathArr[k + 3], pathArr[k + 4], pathArr[k + 5]);\r\n                }\r\n            }\r\n            this.globalData.canvasContext.closePath();\r\n            this.globalData.canvasContext.fill();\r\n            ///ctx.fillText(this.textSpans[i].val,0,0);\r\n        }\r\n        if(this.stroke){\r\n            if(renderedLetter && renderedLetter.sw){\r\n                if(lastStrokeW !== renderedLetter.sw){\r\n                    lastStrokeW = renderedLetter.sw;\r\n                    ctx.lineWidth = renderedLetter.sw;\r\n                }\r\n            }else if(lastStrokeW !== this.values.sWidth){\r\n                lastStrokeW = this.values.sWidth;\r\n                ctx.lineWidth = this.values.sWidth;\r\n            }\r\n            if(renderedLetter && renderedLetter.sc){\r\n                if(lastStroke !== renderedLetter.sc){\r\n                    lastStroke = renderedLetter.sc;\r\n                    ctx.strokeStyle = renderedLetter.sc;\r\n                }\r\n            }else if(lastStroke !== this.values.stroke){\r\n                lastStroke = this.values.stroke;\r\n                ctx.strokeStyle = this.values.stroke;\r\n            }\r\n            commands = this.textSpans[i].elem;\r\n            jLen = commands.length;\r\n            this.globalData.canvasContext.beginPath();\r\n            for(j=0;j<jLen;j+=1) {\r\n                pathArr = commands[j];\r\n                kLen = pathArr.length;\r\n                this.globalData.canvasContext.moveTo(pathArr[0], pathArr[1]);\r\n                for (k = 2; k < kLen; k += 6) {\r\n                    this.globalData.canvasContext.bezierCurveTo(pathArr[k], pathArr[k + 1], pathArr[k + 2], pathArr[k + 3], pathArr[k + 4], pathArr[k + 5]);\r\n                }\r\n            }\r\n            this.globalData.canvasContext.closePath();\r\n            this.globalData.canvasContext.stroke();\r\n            ///ctx.strokeText(letters[i].val,0,0);\r\n        }\r\n        if(renderedLetter) {\r\n            this.globalData.renderer.restore();\r\n        }\r\n    }\r\n};\nfunction CVEffects() {\r\n\r\n}\r\nCVEffects.prototype.renderFrame = function(){};\nfunction HBaseElement(data,globalData,comp){}\r\nHBaseElement.prototype = {\r\n    checkBlendMode: function(){},\r\n    initRendererElement: function(){\r\n        this.baseElement = createTag(this.data.tg || 'div');\r\n        if(this.data.hasMask) {\r\n            this.svgElement = createNS('svg');\r\n            this.layerElement = createNS('g');\r\n            this.maskedElement = this.layerElement;\r\n            this.svgElement.appendChild(this.layerElement);\r\n            this.baseElement.appendChild(this.svgElement);\r\n        } else {\r\n            this.layerElement = this.baseElement;\r\n        }\r\n        styleDiv(this.baseElement);\r\n    },\r\n    createContainerElements: function(){\r\n        this.renderableEffectsManager = new CVEffects(this);\r\n        this.transformedElement = this.baseElement;\r\n        this.maskedElement = this.layerElement;\r\n        if (this.data.ln) {\r\n            this.layerElement.setAttribute('id',this.data.ln);\r\n        }\r\n        if (this.data.cl) {\r\n            this.layerElement.setAttribute('class', this.data.cl);\r\n        }\r\n        if (this.data.bm !== 0) {\r\n            this.setBlendMode();\r\n        }\r\n    },\r\n    renderElement: function() {\r\n        if(this.finalTransform._matMdf){\r\n            this.transformedElement.style.transform = this.transformedElement.style.webkitTransform = this.finalTransform.mat.toCSS();\r\n        }\r\n        if(this.finalTransform._opMdf){\r\n            this.transformedElement.style.opacity = this.finalTransform.mProp.o.v;\r\n        }\r\n    },\r\n    renderFrame: function() {\r\n        //If it is exported as hidden (data.hd === true) no need to render\r\n        //If it is not visible no need to render\r\n        if (this.data.hd || this.hidden) {\r\n            return;\r\n        }\r\n        this.renderTransform();\r\n        this.renderRenderable();\r\n        this.renderElement();\r\n        this.renderInnerContent();\r\n        if (this._isFirstFrame) {\r\n            this._isFirstFrame = false;\r\n        }\r\n    },\r\n    destroy: function(){\r\n        this.layerElement = null;\r\n        this.transformedElement = null;\r\n        if(this.matteElement) {\r\n            this.matteElement = null;\r\n        }\r\n        if(this.maskManager) {\r\n            this.maskManager.destroy();\r\n            this.maskManager = null;\r\n        }\r\n    },\r\n    addMasks: function(){\r\n        this.maskManager = new MaskElement(this.data, this, this.globalData);\r\n    },\r\n    setMatte: function(){}\r\n};\r\nHBaseElement.prototype.getBaseElement = SVGBaseElement.prototype.getBaseElement;\r\nHBaseElement.prototype.destroyBaseElement = HBaseElement.prototype.destroy;\r\nHBaseElement.prototype.buildElementParenting = HybridRenderer.prototype.buildElementParenting;\nfunction HSolidElement(data,globalData,comp){\r\n    this.initElement(data,globalData,comp);\r\n}\r\nextendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement], HSolidElement);\r\n\r\nHSolidElement.prototype.createContent = function(){\r\n    var rect;\r\n    if(this.data.hasMask){\r\n        rect = createNS('rect');\r\n        rect.setAttribute('width',this.data.sw);\r\n        rect.setAttribute('height',this.data.sh);\r\n        rect.setAttribute('fill',this.data.sc);\r\n        this.svgElement.setAttribute('width',this.data.sw);\r\n        this.svgElement.setAttribute('height',this.data.sh);\r\n    } else {\r\n        rect = createTag('div');\r\n        rect.style.width = this.data.sw + 'px';\r\n        rect.style.height = this.data.sh + 'px';\r\n        rect.style.backgroundColor = this.data.sc;\r\n    }\r\n    this.layerElement.appendChild(rect);\r\n};\r\n\nfunction HCompElement(data,globalData,comp){\r\n    this.layers = data.layers;\r\n    this.supports3d = !data.hasMask;\r\n    this.completeLayers = false;\r\n    this.pendingElements = [];\r\n    this.elements = this.layers ? createSizedArray(this.layers.length) : [];\r\n    this.initElement(data,globalData,comp);\r\n    this.tm = data.tm ? PropertyFactory.getProp(this,data.tm,0,globalData.frameRate,this) : {_placeholder:true};\r\n}\r\n\r\nextendPrototype([HybridRenderer, ICompElement, HBaseElement], HCompElement);\r\nHCompElement.prototype._createBaseContainerElements = HCompElement.prototype.createContainerElements;\r\n\r\nHCompElement.prototype.createContainerElements = function(){\r\n    this._createBaseContainerElements();\r\n    //divElement.style.clip = 'rect(0px, '+this.data.w+'px, '+this.data.h+'px, 0px)';\r\n    if(this.data.hasMask){\r\n        this.svgElement.setAttribute('width',this.data.w);\r\n        this.svgElement.setAttribute('height',this.data.h);\r\n        this.transformedElement = this.baseElement;\r\n    } else {\r\n        this.transformedElement = this.layerElement;\r\n    }\r\n};\r\n\r\nHCompElement.prototype.addTo3dContainer = function(elem,pos) {\r\n    var j = 0;\r\n    var nextElement;\r\n    while(j<pos){\r\n        if(this.elements[j] && this.elements[j].getBaseElement){\r\n            nextElement = this.elements[j].getBaseElement();\r\n        }\r\n        j += 1;\r\n    }\r\n    if(nextElement){\r\n        this.layerElement.insertBefore(elem, nextElement);\r\n    } else {\r\n        this.layerElement.appendChild(elem);\r\n    }\r\n}\r\n\nfunction HShapeElement(data,globalData,comp){\r\n    //List of drawable elements\r\n    this.shapes = [];\r\n    // Full shape data\r\n    this.shapesData = data.shapes;\r\n    //List of styles that will be applied to shapes\r\n    this.stylesList = [];\r\n    //List of modifiers that will be applied to shapes\r\n    this.shapeModifiers = [];\r\n    //List of items in shape tree\r\n    this.itemsData = [];\r\n    //List of items in previous shape tree\r\n    this.processedElements = [];\r\n    // List of animated components\r\n    this.animatedContents = [];\r\n    this.shapesContainer = createNS('g');\r\n    this.initElement(data,globalData,comp);\r\n    //Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\r\n    // List of elements that have been created\r\n    this.prevViewData = [];\r\n    this.currentBBox = {\r\n        x:999999,\r\n        y: -999999,\r\n        h: 0,\r\n        w: 0\r\n    };\r\n}\r\nextendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement], HShapeElement);\r\nHShapeElement.prototype._renderShapeFrame = HShapeElement.prototype.renderInnerContent;\r\n\r\nHShapeElement.prototype.createContent = function(){\r\n    var cont;\r\n    this.baseElement.style.fontSize = 0;\r\n    if (this.data.hasMask) {\r\n        this.layerElement.appendChild(this.shapesContainer);\r\n        cont = this.svgElement;\r\n    } else {\r\n        cont = createNS('svg');\r\n        var size = this.comp.data ? this.comp.data : this.globalData.compSize;\r\n        cont.setAttribute('width',size.w);\r\n        cont.setAttribute('height',size.h);\r\n        cont.appendChild(this.shapesContainer);\r\n        this.layerElement.appendChild(cont);\r\n    }\r\n\r\n    this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0, [], true);\r\n    this.filterUniqueShapes();\r\n    this.shapeCont = cont;\r\n};\r\n\r\nHShapeElement.prototype.getTransformedPoint = function(transformers, point) {\r\n    var i, len = transformers.length;\r\n    for(i = 0; i < len; i += 1) {\r\n        point = transformers[i].mProps.v.applyToPointArray(point[0], point[1], 0);\r\n    }\r\n    return point;\r\n}\r\n\r\nHShapeElement.prototype.calculateShapeBoundingBox = function(item, boundingBox) {\r\n    var shape = item.sh.v;\r\n    var transformers = item.transformers;\r\n    var i, len = shape._length, vPoint, oPoint, nextIPoint, nextVPoint, bounds;\r\n    if (len <= 1) {\r\n        return;\r\n    }\r\n    for (i = 0; i < len - 1; i += 1) {\r\n        vPoint = this.getTransformedPoint(transformers, shape.v[i]);\r\n        oPoint = this.getTransformedPoint(transformers, shape.o[i]);\r\n        nextIPoint = this.getTransformedPoint(transformers, shape.i[i + 1]);\r\n        nextVPoint = this.getTransformedPoint(transformers, shape.v[i + 1]);\r\n        this.checkBounds(vPoint, oPoint, nextIPoint, nextVPoint, boundingBox);\r\n    }\r\n    if(shape.c) {\r\n        vPoint = this.getTransformedPoint(transformers, shape.v[i]);\r\n        oPoint = this.getTransformedPoint(transformers, shape.o[i]);\r\n        nextIPoint = this.getTransformedPoint(transformers, shape.i[0]);\r\n        nextVPoint = this.getTransformedPoint(transformers, shape.v[0]);\r\n        this.checkBounds(vPoint, oPoint, nextIPoint, nextVPoint, boundingBox);\r\n    }\r\n}\r\n\r\nHShapeElement.prototype.checkBounds = function(vPoint, oPoint, nextIPoint, nextVPoint, boundingBox) {\r\n    this.getBoundsOfCurve(vPoint, oPoint, nextIPoint, nextVPoint);\r\n    var bounds = this.shapeBoundingBox;\r\n    boundingBox.x = bm_min(bounds.left, boundingBox.x);\r\n    boundingBox.xMax = bm_max(bounds.right, boundingBox.xMax);\r\n    boundingBox.y = bm_min(bounds.top, boundingBox.y);\r\n    boundingBox.yMax = bm_max(bounds.bottom, boundingBox.yMax);\r\n}\r\n\r\nHShapeElement.prototype.shapeBoundingBox = {\r\n    left:0,\r\n    right:0,\r\n    top:0,\r\n    bottom:0,\r\n}\r\n\r\nHShapeElement.prototype.tempBoundingBox = {\r\n    x:0,\r\n    xMax:0,\r\n    y:0,\r\n    yMax:0,\r\n    width:0,\r\n    height:0\r\n}\r\n\r\nHShapeElement.prototype.getBoundsOfCurve = function(p0, p1, p2, p3) {\r\n\r\n    var bounds = [[p0[0],p3[0]], [p0[1],p3[1]]];\r\n\r\n    for (var a, b, c, t, b2ac, t1, t2, i = 0; i < 2; ++i) {\r\n\r\n      b = 6 * p0[i] - 12 * p1[i] + 6 * p2[i];\r\n      a = -3 * p0[i] + 9 * p1[i] - 9 * p2[i] + 3 * p3[i];\r\n      c = 3 * p1[i] - 3 * p0[i];\r\n\r\n      b = b | 0;\r\n      a = a | 0;\r\n      c = c | 0;\r\n\r\n      if (a === 0) {\r\n\r\n        if (b === 0) {\r\n          continue;\r\n        }\r\n\r\n        t = -c / b;\r\n\r\n        if (0 < t && t < 1) {\r\n          bounds[i].push(this.calculateF(t,p0,p1,p2,p3,i));\r\n        }\r\n        continue;\r\n      }\r\n\r\n      b2ac = b * b - 4 * c * a;\r\n\r\n      if (b2ac < 0) {\r\n        continue;\r\n      }\r\n\r\n      t1 = (-b + bm_sqrt(b2ac))/(2 * a);\r\n      if (0 < t1 && t1 < 1) bounds[i].push(this.calculateF(t1,p0,p1,p2,p3,i));\r\n\r\n      t2 = (-b - bm_sqrt(b2ac))/(2 * a);\r\n      if (0 < t2 && t2 < 1) bounds[i].push(this.calculateF(t2,p0,p1,p2,p3,i));\r\n\r\n    }\r\n\r\n    this.shapeBoundingBox.left = bm_min.apply(null, bounds[0]);\r\n    this.shapeBoundingBox.top = bm_min.apply(null, bounds[1]);\r\n    this.shapeBoundingBox.right = bm_max.apply(null, bounds[0]);\r\n    this.shapeBoundingBox.bottom = bm_max.apply(null, bounds[1]);\r\n  };\r\n\r\n  HShapeElement.prototype.calculateF = function(t, p0, p1, p2, p3, i) {\r\n    return bm_pow(1-t, 3) * p0[i]\r\n        + 3 * bm_pow(1-t, 2) * t * p1[i]\r\n        + 3 * (1-t) * bm_pow(t, 2) * p2[i]\r\n        + bm_pow(t, 3) * p3[i];\r\n  }\r\n\r\nHShapeElement.prototype.calculateBoundingBox = function(itemsData, boundingBox) {\r\n    var i, len = itemsData.length, path;\r\n    for(i = 0; i < len; i += 1) {\r\n        if(itemsData[i] && itemsData[i].sh) {\r\n            this.calculateShapeBoundingBox(itemsData[i], boundingBox)\r\n        } else if(itemsData[i] && itemsData[i].it) {\r\n            this.calculateBoundingBox(itemsData[i].it, boundingBox)\r\n        }\r\n    }\r\n}\r\n\r\nHShapeElement.prototype.currentBoxContains = function(box) {\r\n    return this.currentBBox.x <= box.x \r\n    && this.currentBBox.y <= box.y \r\n    && this.currentBBox.width + this.currentBBox.x >= box.x + box.width\r\n    && this.currentBBox.height + this.currentBBox.y >= box.y + box.height\r\n}\r\n\r\nHShapeElement.prototype.renderInnerContent = function() {\r\n    this._renderShapeFrame();\r\n\r\n    if(!this.hidden && (this._isFirstFrame || this._mdf)) {\r\n        var tempBoundingBox = this.tempBoundingBox;\r\n        var max = 999999;\r\n        tempBoundingBox.x = max;\r\n        tempBoundingBox.xMax = -max;\r\n        tempBoundingBox.y = max;\r\n        tempBoundingBox.yMax = -max;\r\n        this.calculateBoundingBox(this.itemsData, tempBoundingBox);\r\n        tempBoundingBox.width = tempBoundingBox.xMax < tempBoundingBox.x ? 0 : tempBoundingBox.xMax - tempBoundingBox.x;\r\n        tempBoundingBox.height = tempBoundingBox.yMax < tempBoundingBox.y ? 0 : tempBoundingBox.yMax - tempBoundingBox.y;\r\n        //var tempBoundingBox = this.shapeCont.getBBox();\r\n        if(this.currentBoxContains(tempBoundingBox)) {\r\n            return;\r\n        }\r\n        var changed = false;\r\n        if(this.currentBBox.w !== tempBoundingBox.width){\r\n            this.currentBBox.w = tempBoundingBox.width;\r\n            this.shapeCont.setAttribute('width',tempBoundingBox.width);\r\n            changed = true;\r\n        }\r\n        if(this.currentBBox.h !== tempBoundingBox.height){\r\n            this.currentBBox.h = tempBoundingBox.height;\r\n            this.shapeCont.setAttribute('height',tempBoundingBox.height);\r\n            changed = true;\r\n        }\r\n        if(changed  || this.currentBBox.x !== tempBoundingBox.x  || this.currentBBox.y !== tempBoundingBox.y){\r\n            this.currentBBox.w = tempBoundingBox.width;\r\n            this.currentBBox.h = tempBoundingBox.height;\r\n            this.currentBBox.x = tempBoundingBox.x;\r\n            this.currentBBox.y = tempBoundingBox.y;\r\n\r\n            this.shapeCont.setAttribute('viewBox',this.currentBBox.x+' '+this.currentBBox.y+' '+this.currentBBox.w+' '+this.currentBBox.h);\r\n            this.shapeCont.style.transform = this.shapeCont.style.webkitTransform = 'translate(' + this.currentBBox.x + 'px,' + this.currentBBox.y + 'px)';\r\n        }\r\n    }\r\n\r\n};\nfunction HTextElement(data,globalData,comp){\r\n    this.textSpans = [];\r\n    this.textPaths = [];\r\n    this.currentBBox = {\r\n        x:999999,\r\n        y: -999999,\r\n        h: 0,\r\n        w: 0\r\n    };\r\n    this.renderType = 'svg';\r\n    this.isMasked = false;\r\n    this.initElement(data,globalData,comp);\r\n\r\n}\r\nextendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement], HTextElement);\r\n\r\nHTextElement.prototype.createContent = function(){\r\n    this.isMasked = this.checkMasks();\r\n    if(this.isMasked){\r\n        this.renderType = 'svg';\r\n        this.compW = this.comp.data.w;\r\n        this.compH = this.comp.data.h;\r\n        this.svgElement.setAttribute('width',this.compW);\r\n        this.svgElement.setAttribute('height',this.compH);\r\n        var g = createNS('g');\r\n        this.maskedElement.appendChild(g);\r\n        this.innerElem = g;\r\n    } else {\r\n        this.renderType = 'html';\r\n        this.innerElem = this.layerElement;\r\n    }\r\n\r\n    this.checkParenting();\r\n\r\n};\r\n\r\nHTextElement.prototype.buildNewText = function(){\r\n    var documentData = this.textProperty.currentData;\r\n    this.renderedLetters = createSizedArray(documentData.l ? documentData.l.length : 0);\r\n    var innerElemStyle = this.innerElem.style;\r\n    innerElemStyle.color = innerElemStyle.fill = documentData.fc ? this.buildColor(documentData.fc) : 'rgba(0,0,0,0)';\r\n    if(documentData.sc){\r\n        innerElemStyle.stroke = this.buildColor(documentData.sc);\r\n        innerElemStyle.strokeWidth = documentData.sw+'px';\r\n    }\r\n    var fontData = this.globalData.fontManager.getFontByName(documentData.f);\r\n    if(!this.globalData.fontManager.chars){\r\n        innerElemStyle.fontSize = documentData.finalSize+'px';\r\n        innerElemStyle.lineHeight = documentData.finalSize+'px';\r\n        if(fontData.fClass){\r\n            this.innerElem.className = fontData.fClass;\r\n        } else {\r\n            innerElemStyle.fontFamily = fontData.fFamily;\r\n            var fWeight = documentData.fWeight, fStyle = documentData.fStyle;\r\n            innerElemStyle.fontStyle = fStyle;\r\n            innerElemStyle.fontWeight = fWeight;\r\n        }\r\n    }\r\n    var i, len;\r\n\r\n    var letters = documentData.l;\r\n    len = letters.length;\r\n    var tSpan,tParent,tCont;\r\n    var matrixHelper = this.mHelper;\r\n    var shapes, shapeStr = '';\r\n    var cnt = 0;\r\n    for (i = 0;i < len ;i += 1) {\r\n        if(this.globalData.fontManager.chars){\r\n            if(!this.textPaths[cnt]){\r\n                tSpan = createNS('path');\r\n                tSpan.setAttribute('stroke-linecap', 'butt');\r\n                tSpan.setAttribute('stroke-linejoin','round');\r\n                tSpan.setAttribute('stroke-miterlimit','4');\r\n            } else {\r\n                tSpan = this.textPaths[cnt];\r\n            }\r\n            if(!this.isMasked){\r\n                if(this.textSpans[cnt]){\r\n                    tParent = this.textSpans[cnt];\r\n                    tCont = tParent.children[0];\r\n                } else {\r\n\r\n                    tParent = createTag('div');\r\n                    tCont = createNS('svg');\r\n                    tCont.appendChild(tSpan);\r\n                    styleDiv(tParent);\r\n                }\r\n            }\r\n        }else{\r\n            if(!this.isMasked){\r\n                if(this.textSpans[cnt]){\r\n                    tParent = this.textSpans[cnt];\r\n                    tSpan = this.textPaths[cnt];\r\n                } else {\r\n                    tParent = createTag('span');\r\n                    styleDiv(tParent);\r\n                    tSpan = createTag('span');\r\n                    styleDiv(tSpan);\r\n                    tParent.appendChild(tSpan);\r\n                }\r\n            } else {\r\n                tSpan = this.textPaths[cnt] ? this.textPaths[cnt] : createNS('text');\r\n            }\r\n        }\r\n        //tSpan.setAttribute('visibility', 'hidden');\r\n        if(this.globalData.fontManager.chars){\r\n            var charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\r\n            var shapeData;\r\n            if(charData){\r\n                shapeData = charData.data;\r\n            } else {\r\n                shapeData = null;\r\n            }\r\n            matrixHelper.reset();\r\n            if(shapeData && shapeData.shapes){\r\n                shapes = shapeData.shapes[0].it;\r\n                matrixHelper.scale(documentData.finalSize/100,documentData.finalSize/100);\r\n                shapeStr = this.createPathShape(matrixHelper,shapes);\r\n                tSpan.setAttribute('d',shapeStr);\r\n            }\r\n            if(!this.isMasked){\r\n                this.innerElem.appendChild(tParent);\r\n                if(shapeData && shapeData.shapes){\r\n\r\n                    //document.body.appendChild is needed to get exact measure of shape\r\n                    document.body.appendChild(tCont);\r\n                    var boundingBox = tCont.getBBox();\r\n                    tCont.setAttribute('width',boundingBox.width + 2);\r\n                    tCont.setAttribute('height',boundingBox.height + 2);\r\n                    tCont.setAttribute('viewBox',(boundingBox.x-1)+' '+ (boundingBox.y-1)+' '+ (boundingBox.width+2)+' '+ (boundingBox.height+2));\r\n                    tCont.style.transform = tCont.style.webkitTransform = 'translate(' + (boundingBox.x-1) + 'px,' + (boundingBox.y-1) + 'px)';\r\n\r\n                    letters[i].yOffset = boundingBox.y-1;\r\n\r\n                } else{\r\n                    tCont.setAttribute('width',1);\r\n                    tCont.setAttribute('height',1);\r\n                }\r\n                    tParent.appendChild(tCont);\r\n            }else{\r\n                this.innerElem.appendChild(tSpan);\r\n            }\r\n        }else{\r\n            tSpan.textContent = letters[i].val;\r\n            tSpan.setAttributeNS(\"http://www.w3.org/XML/1998/namespace\", \"xml:space\",\"preserve\");\r\n            if(!this.isMasked){\r\n                this.innerElem.appendChild(tParent);\r\n                //\r\n                tSpan.style.transform = tSpan.style.webkitTransform = 'translate3d(0,'+ -documentData.finalSize/1.2+'px,0)';\r\n            } else {\r\n                this.innerElem.appendChild(tSpan);\r\n            }\r\n        }\r\n        //\r\n        if(!this.isMasked){\r\n            this.textSpans[cnt] = tParent;\r\n        }else{\r\n            this.textSpans[cnt] = tSpan;\r\n        }\r\n        this.textSpans[cnt].style.display = 'block';\r\n        this.textPaths[cnt] = tSpan;\r\n        cnt += 1;\r\n    }\r\n    while(cnt < this.textSpans.length){\r\n        this.textSpans[cnt].style.display = 'none';\r\n        cnt += 1;\r\n    }\r\n};\r\n\r\nHTextElement.prototype.renderInnerContent = function() {\r\n\r\n    if(this.data.singleShape){\r\n        if(!this._isFirstFrame && !this.lettersChangedFlag){\r\n            return;\r\n        } else {\r\n            // Todo Benchmark if using this is better than getBBox\r\n             if(this.isMasked && this.finalTransform._matMdf){\r\n                 this.svgElement.setAttribute('viewBox',-this.finalTransform.mProp.p.v[0]+' '+ -this.finalTransform.mProp.p.v[1]+' '+this.compW+' '+this.compH);\r\n                this.svgElement.style.transform = this.svgElement.style.webkitTransform = 'translate(' + -this.finalTransform.mProp.p.v[0] + 'px,' + -this.finalTransform.mProp.p.v[1] + 'px)';\r\n             }\r\n        }\r\n    }\r\n\r\n    this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\r\n    if(!this.lettersChangedFlag && !this.textAnimator.lettersChangedFlag){\r\n        return;\r\n    }\r\n    var  i,len, count = 0;\r\n    var renderedLetters = this.textAnimator.renderedLetters;\r\n\r\n    var letters = this.textProperty.currentData.l;\r\n\r\n    len = letters.length;\r\n    var renderedLetter, textSpan, textPath;\r\n    for(i=0;i<len;i+=1){\r\n        if(letters[i].n){\r\n            count += 1;\r\n            continue;\r\n        }\r\n        textSpan = this.textSpans[i];\r\n        textPath = this.textPaths[i];\r\n        renderedLetter = renderedLetters[count];\r\n        count += 1;\r\n        if(renderedLetter._mdf.m) {\r\n            if(!this.isMasked){\r\n                textSpan.style.transform = textSpan.style.webkitTransform = renderedLetter.m;\r\n            }else{\r\n                textSpan.setAttribute('transform',renderedLetter.m);\r\n            }\r\n        }\r\n        ////textSpan.setAttribute('opacity',renderedLetter.o);\r\n        textSpan.style.opacity = renderedLetter.o;\r\n        if(renderedLetter.sw && renderedLetter._mdf.sw){\r\n            textPath.setAttribute('stroke-width',renderedLetter.sw);\r\n        }\r\n        if(renderedLetter.sc && renderedLetter._mdf.sc){\r\n            textPath.setAttribute('stroke',renderedLetter.sc);\r\n        }\r\n        if(renderedLetter.fc && renderedLetter._mdf.fc){\r\n            textPath.setAttribute('fill',renderedLetter.fc);\r\n            textPath.style.color = renderedLetter.fc;\r\n        }\r\n    }\r\n\r\n    if(this.innerElem.getBBox && !this.hidden && (this._isFirstFrame || this._mdf)){\r\n        var boundingBox = this.innerElem.getBBox();\r\n\r\n        if(this.currentBBox.w !== boundingBox.width){\r\n            this.currentBBox.w = boundingBox.width;\r\n            this.svgElement.setAttribute('width',boundingBox.width);\r\n        }\r\n        if(this.currentBBox.h !== boundingBox.height){\r\n            this.currentBBox.h = boundingBox.height;\r\n            this.svgElement.setAttribute('height',boundingBox.height);\r\n        }\r\n\r\n        var margin = 1;\r\n        if(this.currentBBox.w !== (boundingBox.width + margin*2) || this.currentBBox.h !== (boundingBox.height + margin*2)  || this.currentBBox.x !== (boundingBox.x - margin)  || this.currentBBox.y !== (boundingBox.y - margin)){\r\n            this.currentBBox.w = boundingBox.width + margin*2;\r\n            this.currentBBox.h = boundingBox.height + margin*2;\r\n            this.currentBBox.x = boundingBox.x - margin;\r\n            this.currentBBox.y = boundingBox.y - margin;\r\n\r\n            this.svgElement.setAttribute('viewBox',this.currentBBox.x+' '+this.currentBBox.y+' '+this.currentBBox.w+' '+this.currentBBox.h);\r\n            this.svgElement.style.transform = this.svgElement.style.webkitTransform = 'translate(' + this.currentBBox.x + 'px,' + this.currentBBox.y + 'px)';\r\n        }\r\n    }\r\n};\nfunction HImageElement(data,globalData,comp){\r\n    this.assetData = globalData.getAssetData(data.refId);\r\n    this.initElement(data,globalData,comp);\r\n}\r\n\r\nextendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement], HImageElement);\r\n\r\n\r\nHImageElement.prototype.createContent = function(){\r\n    var assetPath = this.globalData.getAssetsPath(this.assetData);\r\n    var img = new Image();\r\n\r\n    if(this.data.hasMask){\r\n        this.imageElem = createNS('image');\r\n        this.imageElem.setAttribute('width',this.assetData.w+\"px\");\r\n        this.imageElem.setAttribute('height',this.assetData.h+\"px\");\r\n        this.imageElem.setAttributeNS('http://www.w3.org/1999/xlink','href',assetPath);\r\n        this.layerElement.appendChild(this.imageElem);\r\n        this.baseElement.setAttribute('width',this.assetData.w);\r\n        this.baseElement.setAttribute('height',this.assetData.h);\r\n    } else {\r\n        this.layerElement.appendChild(img);\r\n    }\r\n    img.src = assetPath;\r\n    if(this.data.ln){\r\n        this.baseElement.setAttribute('id',this.data.ln);\r\n    }\r\n};\nfunction HCameraElement(data,globalData,comp){\r\n    this.initFrame();\r\n    this.initBaseData(data,globalData,comp);\r\n    this.initHierarchy();\r\n    var getProp = PropertyFactory.getProp;\r\n    this.pe = getProp(this,data.pe,0,0,this);\r\n    if(data.ks.p.s){\r\n        this.px = getProp(this,data.ks.p.x,1,0,this);\r\n        this.py = getProp(this,data.ks.p.y,1,0,this);\r\n        this.pz = getProp(this,data.ks.p.z,1,0,this);\r\n    }else{\r\n        this.p = getProp(this,data.ks.p,1,0,this);\r\n    }\r\n    if(data.ks.a){\r\n        this.a = getProp(this,data.ks.a,1,0,this);\r\n    }\r\n    if(data.ks.or.k.length && data.ks.or.k[0].to){\r\n        var i,len = data.ks.or.k.length;\r\n        for(i=0;i<len;i+=1){\r\n            data.ks.or.k[i].to = null;\r\n            data.ks.or.k[i].ti = null;\r\n        }\r\n    }\r\n    this.or = getProp(this,data.ks.or,1,degToRads,this);\r\n    this.or.sh = true;\r\n    this.rx = getProp(this,data.ks.rx,0,degToRads,this);\r\n    this.ry = getProp(this,data.ks.ry,0,degToRads,this);\r\n    this.rz = getProp(this,data.ks.rz,0,degToRads,this);\r\n    this.mat = new Matrix();\r\n    this._prevMat = new Matrix();\r\n    this._isFirstFrame = true;\r\n}\r\nextendPrototype([BaseElement, FrameElement, HierarchyElement], HCameraElement);\r\n\r\nHCameraElement.prototype.setup = function() {\r\n    var i, len = this.comp.threeDElements.length, comp;\r\n    for(i=0;i<len;i+=1){\r\n        //[perspectiveElem,container]\r\n        comp = this.comp.threeDElements[i];\r\n        if(comp.type === '3d') {\r\n            comp.perspectiveElem.style.perspective = comp.perspectiveElem.style.webkitPerspective = this.pe.v+'px';\r\n            comp.container.style.transformOrigin = comp.container.style.mozTransformOrigin = comp.container.style.webkitTransformOrigin = \"0px 0px 0px\";\r\n            comp.perspectiveElem.style.transform = comp.perspectiveElem.style.webkitTransform = 'matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)';\r\n        }\r\n    }\r\n};\r\n\r\nHCameraElement.prototype.createElements = function(){\r\n};\r\n\r\nHCameraElement.prototype.hide = function(){\r\n};\r\n\r\nHCameraElement.prototype.renderFrame = function(){\r\n    var _mdf = this._isFirstFrame;\r\n    var i, len;\r\n    if(this.hierarchy){\r\n        len = this.hierarchy.length;\r\n        for(i=0;i<len;i+=1){\r\n            _mdf = this.hierarchy[i].finalTransform.mProp._mdf || _mdf;\r\n        }\r\n    }\r\n    if(_mdf || this.pe._mdf || (this.p && this.p._mdf) || (this.px && (this.px._mdf || this.py._mdf || this.pz._mdf)) || this.rx._mdf || this.ry._mdf || this.rz._mdf || this.or._mdf || (this.a && this.a._mdf)) {\r\n        this.mat.reset();\r\n\r\n        if(this.hierarchy){\r\n            var mat;\r\n            len = this.hierarchy.length - 1;\r\n            for (i = len; i >= 0; i -= 1) {\r\n                /*mat = this.hierarchy[i].finalTransform.mProp.v.props;\r\n                console.log(mat)\r\n                this.mat.transform(-mat[0],-mat[1],-mat[2],-mat[3],-mat[4],-mat[5],-mat[6],-mat[7],-mat[8],-mat[9],-mat[10],-mat[11],-mat[12],-mat[13],-mat[14],mat[15]);\r\n                console.log(this.mat.props)*/\r\n                var mTransf = this.hierarchy[i].finalTransform.mProp;\r\n                this.mat.translate(-mTransf.p.v[0],-mTransf.p.v[1],mTransf.p.v[2]);\r\n                this.mat.rotateX(-mTransf.rx.v).rotateY(-mTransf.ry.v).rotateZ(mTransf.rz.v);\r\n                this.mat.scale(1/mTransf.s.v[0],1/mTransf.s.v[1],1/mTransf.s.v[2]);\r\n                this.mat.translate(mTransf.a.v[0],mTransf.a.v[1],mTransf.a.v[2]);\r\n            }\r\n        }\r\n\r\n        if(this.p){\r\n            this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]);\r\n        }else{\r\n            this.mat.translate(-this.px.v,-this.py.v,this.pz.v);\r\n        }\r\n        if(this.a){\r\n            var diffVector = [this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]];\r\n            var mag = Math.sqrt(Math.pow(diffVector[0],2)+Math.pow(diffVector[1],2)+Math.pow(diffVector[2],2));\r\n            //var lookDir = getNormalizedPoint(getDiffVector(this.a.v,this.p.v));\r\n            var lookDir = [diffVector[0]/mag,diffVector[1]/mag,diffVector[2]/mag];\r\n            var lookLengthOnXZ = Math.sqrt( lookDir[2]*lookDir[2] + lookDir[0]*lookDir[0] );\r\n            var m_rotationX = (Math.atan2( lookDir[1], lookLengthOnXZ ));\r\n            var m_rotationY = (Math.atan2( lookDir[0], -lookDir[2]));\r\n            this.mat.rotateY(m_rotationY).rotateX(-m_rotationX);\r\n\r\n        }\r\n        this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v);\r\n        this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]);\r\n        this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0);\r\n        this.mat.translate(0,0,this.pe.v);\r\n\r\n\r\n        \r\n\r\n        var hasMatrixChanged = !this._prevMat.equals(this.mat);\r\n        if((hasMatrixChanged || this.pe._mdf) && this.comp.threeDElements) {\r\n            len = this.comp.threeDElements.length;\r\n            var comp;\r\n            for(i=0;i<len;i+=1){\r\n                comp = this.comp.threeDElements[i];\r\n                if(comp.type === '3d') {\r\n                    if(hasMatrixChanged) {\r\n                        comp.container.style.transform = comp.container.style.webkitTransform = this.mat.toCSS();\r\n                    }\r\n                    if(this.pe._mdf) {\r\n                        comp.perspectiveElem.style.perspective = comp.perspectiveElem.style.webkitPerspective = this.pe.v+'px';\r\n                    }\r\n                }\r\n            }\r\n            this.mat.clone(this._prevMat);\r\n        }\r\n    }\r\n    this._isFirstFrame = false;\r\n};\r\n\r\nHCameraElement.prototype.prepareFrame = function(num) {\r\n    this.prepareProperties(num, true);\r\n};\r\n\r\nHCameraElement.prototype.destroy = function(){\r\n};\r\nHCameraElement.prototype.initExpressions = function(){};\r\nHCameraElement.prototype.getBaseElement = function(){return null;};\nfunction HEffects() {\r\n}\r\nHEffects.prototype.renderFrame = function(){};\nvar Expressions = (function(){\r\n    var ob = {};\r\n    ob.initExpressions = initExpressions;\r\n\r\n\r\n    function initExpressions(animation){\r\n        animation.renderer.compInterface = CompExpressionInterface(animation.renderer);\r\n        animation.renderer.globalData.projectInterface.registerComposition(animation.renderer);\r\n    }\r\n   return ob;\r\n}());\r\n\r\nexpressionsPlugin = Expressions;\r\n\nvar ExpressionManager = (function(){\r\n    'use strict';\r\n    var ob = {};\r\n    var Math = BMMath;\r\n    var window = null;\r\n    var document = null;\r\n\r\n    function $bm_isInstanceOfArray(arr) {\r\n        return arr.constructor === Array || arr.constructor === Float32Array;\r\n    }\r\n\r\n    function isNumerable(tOfV, v) {\r\n        return tOfV === 'number' || tOfV === 'boolean' || tOfV === 'string' || v instanceof Number;\r\n    }\r\n\r\n    function $bm_neg(a){\r\n        var tOfA = typeof a;\r\n        if(tOfA === 'number' || tOfA === 'boolean'  || a instanceof Number ){\r\n            return -a;\r\n        }\r\n        if($bm_isInstanceOfArray(a)){\r\n            var i, lenA = a.length;\r\n            var retArr = [];\r\n            for(i=0;i<lenA;i+=1){\r\n                retArr[i] = -a[i];\r\n            }\r\n            return retArr;\r\n        }\r\n    }\r\n\r\n    function sum(a,b) {\r\n        var tOfA = typeof a;\r\n        var tOfB = typeof b;\r\n        if(tOfA === 'string' || tOfB === 'string'){\r\n            return a + b;\r\n        }\r\n        if(isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\r\n            return a + b;\r\n        }\r\n        if($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)){\r\n            a = a.slice(0);\r\n            a[0] = a[0] + b;\r\n            return a;\r\n        }\r\n        if(isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)){\r\n            b = b.slice(0);\r\n            b[0] = a + b[0];\r\n            return b;\r\n        }\r\n        if($bm_isInstanceOfArray(a) && $bm_isInstanceOfArray(b)){\r\n            \r\n            var i = 0, lenA = a.length, lenB = b.length;\r\n            var retArr = [];\r\n            while(i<lenA || i < lenB){\r\n                if((typeof a[i] === 'number' || a[i] instanceof Number) && (typeof b[i] === 'number' || b[i] instanceof Number)){\r\n                    retArr[i] = a[i] + b[i];\r\n                }else{\r\n                    retArr[i] = b[i] === undefined ? a[i] : a[i] || b[i];\r\n                }\r\n                i += 1;\r\n            }\r\n            return retArr;\r\n        }\r\n        return 0;\r\n    }\r\n    var add = sum;\r\n\r\n    function sub(a,b) {\r\n        var tOfA = typeof a;\r\n        var tOfB = typeof b;\r\n        if(isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\r\n            if(tOfA === 'string') {\r\n                a = parseInt(a);\r\n            }\r\n            if(tOfB === 'string') {\r\n                b = parseInt(b);\r\n            }\r\n            return a - b;\r\n        }\r\n        if( $bm_isInstanceOfArray(a) && isNumerable(tOfB, b)){\r\n            a = a.slice(0);\r\n            a[0] = a[0] - b;\r\n            return a;\r\n        }\r\n        if(isNumerable(tOfA, a) &&  $bm_isInstanceOfArray(b)){\r\n            b = b.slice(0);\r\n            b[0] = a - b[0];\r\n            return b;\r\n        }\r\n        if($bm_isInstanceOfArray(a) && $bm_isInstanceOfArray(b)){\r\n            var i = 0, lenA = a.length, lenB = b.length;\r\n            var retArr = [];\r\n            while(i<lenA || i < lenB){\r\n                if((typeof a[i] === 'number' || a[i] instanceof Number) && (typeof b[i] === 'number' || b[i] instanceof Number)){\r\n                    retArr[i] = a[i] - b[i];\r\n                }else{\r\n                    retArr[i] = b[i] === undefined ? a[i] : a[i] || b[i];\r\n                }\r\n                i += 1;\r\n            }\r\n            return retArr;\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    function mul(a,b) {\r\n        var tOfA = typeof a;\r\n        var tOfB = typeof b;\r\n        var arr;\r\n        if(isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\r\n            return a * b;\r\n        }\r\n\r\n        var i, len;\r\n        if($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)){\r\n            len = a.length;\r\n            arr = createTypedArray('float32', len);\r\n            for(i=0;i<len;i+=1){\r\n                arr[i] = a[i] * b;\r\n            }\r\n            return arr;\r\n        }\r\n        if(isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)){\r\n            len = b.length;\r\n            arr = createTypedArray('float32', len);\r\n            for(i=0;i<len;i+=1){\r\n                arr[i] = a * b[i];\r\n            }\r\n            return arr;\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    function div(a,b) {\r\n        var tOfA = typeof a;\r\n        var tOfB = typeof b;\r\n        var arr;\r\n        if(isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\r\n            return a / b;\r\n        }\r\n        var i, len;\r\n        if($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)){\r\n            len = a.length;\r\n            arr = createTypedArray('float32', len);\r\n            for(i=0;i<len;i+=1){\r\n                arr[i] = a[i] / b;\r\n            }\r\n            return arr;\r\n        }\r\n        if(isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)){\r\n            len = b.length;\r\n            arr = createTypedArray('float32', len);\r\n            for(i=0;i<len;i+=1){\r\n                arr[i] = a / b[i];\r\n            }\r\n            return arr;\r\n        }\r\n        return 0;\r\n    }\r\n    function mod(a,b) {\r\n        if(typeof a === 'string') {\r\n            a = parseInt(a);\r\n        }\r\n        if(typeof b === 'string') {\r\n            b = parseInt(b);\r\n        }\r\n        return a % b;\r\n    }\r\n\r\n    function clamp(num, min, max) {\r\n        if(min > max){\r\n            var mm = max;\r\n            max = min;\r\n            min = mm;\r\n        }\r\n        return Math.min(Math.max(num, min), max);\r\n    }\r\n\r\n    function radiansToDegrees(val) {\r\n        return val/degToRads;\r\n    }\r\n    var radians_to_degrees = radiansToDegrees;\r\n\r\n    function degreesToRadians(val) {\r\n        return val*degToRads;\r\n    }\r\n    var degrees_to_radians = radiansToDegrees;\r\n\r\n    var helperLengthArray = [0,0,0,0,0,0];\r\n\r\n    function length(arr1, arr2) {\r\n        if (typeof arr1 === 'number' || arr1 instanceof Number) {\r\n            arr2 = arr2 || 0;\r\n            return Math.abs(arr1 - arr2);\r\n        }\r\n        if(!arr2) {\r\n            arr2 = helperLengthArray;\r\n        }\r\n        var i, len = Math.min(arr1.length, arr2.length);\r\n        var addedLength = 0;\r\n        for (i = 0; i < len; i += 1) {\r\n            addedLength += Math.pow(arr2[i] - arr1[i], 2);\r\n        }\r\n        return Math.sqrt(addedLength);\r\n    }\r\n\r\n    function normalize(vec) {\r\n        return div(vec, length(vec));\r\n    }\r\n\r\n    function rgbToHsl(val) {\r\n        var r = val[0]; var g = val[1]; var b = val[2];\r\n        var max = Math.max(r, g, b), min = Math.min(r, g, b);\r\n        var h, s, l = (max + min) / 2;\r\n\r\n        if(max == min){\r\n            h = s = 0; // achromatic\r\n        }else{\r\n            var d = max - min;\r\n            s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n            switch(max){\r\n                case r: h = (g - b) / d + (g < b ? 6 : 0); break;\r\n                case g: h = (b - r) / d + 2; break;\r\n                case b: h = (r - g) / d + 4; break;\r\n            }\r\n            h /= 6;\r\n        }\r\n\r\n        return [h, s, l,val[3]];\r\n    }\r\n\r\n    function hue2rgb(p, q, t){\r\n        if(t < 0) t += 1;\r\n        if(t > 1) t -= 1;\r\n        if(t < 1/6) return p + (q - p) * 6 * t;\r\n        if(t < 1/2) return q;\r\n        if(t < 2/3) return p + (q - p) * (2/3 - t) * 6;\r\n        return p;\r\n    }\r\n\r\n    function hslToRgb(val){\r\n        var h = val[0];\r\n        var s = val[1];\r\n        var l = val[2];\r\n\r\n        var r, g, b;\r\n\r\n        if(s === 0){\r\n            r = g = b = l; // achromatic\r\n        }else{\r\n\r\n            var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n            var p = 2 * l - q;\r\n            r = hue2rgb(p, q, h + 1/3);\r\n            g = hue2rgb(p, q, h);\r\n            b = hue2rgb(p, q, h - 1/3);\r\n        }\r\n\r\n        return [r, g , b, val[3]];\r\n    }\r\n\r\n    function linear(t, tMin, tMax, value1, value2){\r\n        if(value1 === undefined || value2 === undefined){\r\n            value1 = tMin;\r\n            value2 = tMax;\r\n            tMin = 0;\r\n            tMax = 1;\r\n        }\r\n        if(tMax < tMin) {\r\n            var _tMin = tMax;\r\n            tMax = tMin;\r\n            tMin = _tMin;\r\n        }\r\n        if(t <= tMin) {\r\n            return value1;\r\n        }else if(t >= tMax){\r\n            return value2;\r\n        }\r\n        var perc = tMax === tMin ? 0 : (t-tMin)/(tMax-tMin);\r\n        if(!value1.length){\r\n            return value1 + (value2-value1)*perc;\r\n        }\r\n        var i, len = value1.length;\r\n        var arr = createTypedArray('float32', len);\r\n        for(i=0;i<len;i+=1){\r\n            arr[i] = value1[i] + (value2[i]-value1[i])*perc;\r\n        }\r\n        return arr;\r\n    }\r\n    function random(min,max){\r\n        if(max === undefined){\r\n            if(min === undefined){\r\n                min = 0;\r\n                max = 1;\r\n            } else {\r\n                max = min;\r\n                min = undefined;\r\n            }\r\n        }\r\n        if(max.length){\r\n            var i, len = max.length;\r\n            if(!min){\r\n                min = createTypedArray('float32', len);\r\n            }\r\n            var arr = createTypedArray('float32', len);\r\n            var rnd = BMMath.random();\r\n            for(i=0;i<len;i+=1){\r\n                arr[i] = min[i] + rnd*(max[i]-min[i]);\r\n            }\r\n            return arr;\r\n        }\r\n        if(min === undefined){\r\n            min = 0;\r\n        }\r\n        var rndm = BMMath.random();\r\n        return min + rndm*(max-min);\r\n    }\r\n\r\n    function createPath(points, inTangents, outTangents, closed) {\r\n        var i, len = points.length;\r\n        var path = shape_pool.newElement();\r\n        path.setPathData(!!closed, len);\r\n        var arrPlaceholder = [0,0], inVertexPoint, outVertexPoint;\r\n        for(i = 0; i < len; i += 1) {\r\n            inVertexPoint = (inTangents && inTangents[i]) ? inTangents[i] : arrPlaceholder;\r\n            outVertexPoint = (outTangents && outTangents[i]) ? outTangents[i] : arrPlaceholder;\r\n            path.setTripleAt(points[i][0],points[i][1],outVertexPoint[0] + points[i][0],outVertexPoint[1] + points[i][1],inVertexPoint[0] + points[i][0],inVertexPoint[1] + points[i][1],i,true);\r\n        }\r\n        return path;\r\n    }\r\n\r\n    function initiateExpression(elem,data,property){\r\n        var val = data.x;\r\n        var needsVelocity = /velocity(?![\\w\\d])/.test(val);\r\n        var _needsRandom = val.indexOf('random') !== -1;\r\n        var elemType = elem.data.ty;\r\n        var transform,content,effect;\r\n        var thisProperty = property;\r\n        elem.comp.frameDuration = 1/elem.comp.globalData.frameRate;\r\n        var inPoint = elem.data.ip/elem.comp.globalData.frameRate;\r\n        var outPoint = elem.data.op/elem.comp.globalData.frameRate;\r\n        var width = elem.data.sw ? elem.data.sw : 0;\r\n        var height = elem.data.sh ? elem.data.sh : 0;\r\n        var name = elem.data.nm;\r\n        var loopIn, loop_in, loopOut, loop_out;\r\n        var toWorld,fromWorld,fromComp,toComp,fromCompToSurface,anchorPoint,thisLayer,thisComp,mask,valueAtTime,velocityAtTime;\r\n        var __expression_functions = [];\r\n        if(data.xf) {\r\n            var i, len = data.xf.length;\r\n            for(i = 0; i < len; i += 1) {\r\n                __expression_functions[i] = eval('(function(){ return ' + data.xf[i] + '}())');\r\n            }\r\n        }\r\n\r\n        var scoped_bm_rt;\r\n        var expression_function = eval('[function _expression_function(){' + val+';scoped_bm_rt=$bm_rt}' + ']')[0];\r\n        var numKeys = property.kf ? data.k.length : 0;\r\n\r\n        var active = !this.data || this.data.hd !== true;\r\n\r\n        var wiggle = function wiggle(freq,amp){\r\n            var i,j, len = this.pv.length ? this.pv.length : 1;\r\n            var addedAmps = createTypedArray('float32', len);\r\n            freq = 5;\r\n            var iterations = Math.floor(time*freq);\r\n            i = 0;\r\n            j = 0;\r\n            while(i<iterations){\r\n                //var rnd = BMMath.random();\r\n                for(j=0;j<len;j+=1){\r\n                    addedAmps[j] += -amp + amp*2*BMMath.random();\r\n                    //addedAmps[j] += -amp + amp*2*rnd;\r\n                }\r\n                i += 1;\r\n            }\r\n            //var rnd2 = BMMath.random();\r\n            var periods = time*freq;\r\n            var perc = periods - Math.floor(periods);\r\n            var arr = createTypedArray('float32', len);\r\n            if(len>1){\r\n                for(j=0;j<len;j+=1){\r\n                    arr[j] = this.pv[j] + addedAmps[j] + (-amp + amp*2*BMMath.random())*perc;\r\n                    //arr[j] = this.pv[j] + addedAmps[j] + (-amp + amp*2*rnd)*perc;\r\n                    //arr[i] = this.pv[i] + addedAmp + amp1*perc + amp2*(1-perc);\r\n                }\r\n                return arr;\r\n            } else {\r\n                return this.pv + addedAmps[0] + (-amp + amp*2*BMMath.random())*perc;\r\n            }\r\n        }.bind(this);\r\n\r\n        if(thisProperty.loopIn) {\r\n            loopIn = thisProperty.loopIn.bind(thisProperty);\r\n            loop_in = loopIn;\r\n        }\r\n\r\n        if(thisProperty.loopOut) {\r\n            loopOut = thisProperty.loopOut.bind(thisProperty);\r\n            loop_out = loopOut;\r\n        }\r\n\r\n        function loopInDuration(type,duration){\r\n            return loopIn(type,duration,true);\r\n        }\r\n\r\n        function loopOutDuration(type,duration){\r\n            return loopOut(type,duration,true);\r\n        }\r\n\r\n        if(this.getValueAtTime) {\r\n            valueAtTime = this.getValueAtTime.bind(this);\r\n        }\r\n\r\n        if(this.getVelocityAtTime) {\r\n            velocityAtTime = this.getVelocityAtTime.bind(this);\r\n        }\r\n\r\n        var comp = elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);\r\n\r\n        function lookAt(elem1,elem2){\r\n            var fVec = [elem2[0]-elem1[0],elem2[1]-elem1[1],elem2[2]-elem1[2]];\r\n            var pitch = Math.atan2(fVec[0],Math.sqrt(fVec[1]*fVec[1]+fVec[2]*fVec[2]))/degToRads;\r\n            var yaw = -Math.atan2(fVec[1],fVec[2])/degToRads;\r\n            return [yaw,pitch,0];\r\n        }\r\n\r\n        function easeOut(t, tMin, tMax, val1, val2){\r\n            if(val1 === undefined){\r\n                val1 = tMin;\r\n                val2 = tMax;\r\n            } else {\r\n                t = (t - tMin) / (tMax - tMin);\r\n            }\r\n            return -(val2-val1) * t*(t-2) + val1;\r\n        }\r\n\r\n        function easeIn(t, tMin, tMax, val1, val2){\r\n            if(val1 === undefined){\r\n                val1 = tMin;\r\n                val2 = tMax;\r\n            } else {\r\n                t = (t - tMin) / (tMax - tMin);\r\n            }\r\n            return (val2-val1)*t*t + val1;\r\n        }\r\n\r\n        function nearestKey(time){\r\n            var i, len = data.k.length,index,keyTime;\r\n            if(!data.k.length || typeof(data.k[0]) === 'number'){\r\n                index = 0;\r\n                keyTime = 0;\r\n            } else {\r\n                index = -1;\r\n                time *= elem.comp.globalData.frameRate;\r\n                if (time < data.k[0].t) {\r\n                    index = 1;\r\n                    keyTime = data.k[0].t;\r\n                } else {\r\n                    for(i=0;i<len-1;i+=1){\r\n                        if(time === data.k[i].t){\r\n                            index = i + 1;\r\n                            keyTime = data.k[i].t;\r\n                            break;\r\n                        }else if(time>data.k[i].t && time<data.k[i+1].t){\r\n                            if(time-data.k[i].t > data.k[i+1].t - time){\r\n                                index = i + 2;\r\n                                keyTime = data.k[i+1].t;\r\n                            } else {\r\n                                index = i + 1;\r\n                                keyTime = data.k[i].t;\r\n                            }\r\n                            break;\r\n                        }\r\n                    }\r\n                    if(index === -1){\r\n                        index = i + 1;\r\n                        keyTime = data.k[i].t;\r\n                    }\r\n                }\r\n                \r\n            }\r\n            var ob = {};\r\n            ob.index = index;\r\n            ob.time = keyTime/elem.comp.globalData.frameRate;\r\n            return ob;\r\n        }\r\n\r\n        function key(ind){\r\n            var ob, i, len;\r\n            if(!data.k.length || typeof(data.k[0]) === 'number'){\r\n                throw new Error('The property has no keyframe at index ' + ind);\r\n            }\r\n            ind -= 1;\r\n            ob = {\r\n                time: data.k[ind].t/elem.comp.globalData.frameRate\r\n            };\r\n            var arr;\r\n            if(ind === data.k.length - 1 && !data.k[ind].h){\r\n                arr = data.k[ind-1].e;\r\n            }else{\r\n                arr = data.k[ind].s;\r\n            }\r\n            len = arr.length;\r\n            for(i=0;i<len;i+=1){\r\n                ob[i] = arr[i];\r\n            }\r\n            return ob;\r\n        }\r\n\r\n        function framesToTime(frames, fps) { \r\n            if (!fps) {\r\n                fps = elem.comp.globalData.frameRate;\r\n            }\r\n            return frames / fps;\r\n        }\r\n\r\n        function timeToFrames(t, fps) {\r\n            if (!t && t !== 0) {\r\n                t = time;\r\n            }\r\n            if (!fps) {\r\n                fps = elem.comp.globalData.frameRate;\r\n            }\r\n            return t * fps;\r\n        }\r\n\r\n        function seedRandom(seed){\r\n            BMMath.seedrandom(randSeed + seed);\r\n        }\r\n\r\n        function sourceRectAtTime() {\r\n            return elem.sourceRectAtTime();\r\n        }\r\n\r\n        function substring(init, end) {\r\n            if(typeof value === 'string') {\r\n                if(end === undefined) {\r\n                return value.substring(init)\r\n                }\r\n                return value.substring(init, end)\r\n            }\r\n            return '';\r\n        }\r\n\r\n        function substr(init, end) {\r\n            if(typeof value === 'string') {\r\n                if(end === undefined) {\r\n                return value.substr(init)\r\n                }\r\n                return value.substr(init, end)\r\n            }\r\n            return '';\r\n        }\r\n\r\n        var time, velocity, value, text, textIndex, textTotal, selectorValue;\r\n        var index = elem.data.ind;\r\n        var hasParent = !!(elem.hierarchy && elem.hierarchy.length);\r\n        var parent;\r\n        var randSeed = Math.floor(Math.random()*1000000);\r\n        function executeExpression(_value) {\r\n            value = _value;\r\n            if (_needsRandom) {\r\n                seedRandom(randSeed);\r\n            }\r\n            if (this.frameExpressionId === elem.globalData.frameId && this.propType !== 'textSelector') {\r\n                return value;\r\n            }\r\n            if(this.propType === 'textSelector'){\r\n                textIndex = this.textIndex;\r\n                textTotal = this.textTotal;\r\n                selectorValue = this.selectorValue;\r\n            }\r\n            if (!thisLayer) {\r\n                text = elem.layerInterface.text;\r\n                thisLayer = elem.layerInterface;\r\n                thisComp = elem.comp.compInterface;\r\n                toWorld = thisLayer.toWorld.bind(thisLayer);\r\n                fromWorld = thisLayer.fromWorld.bind(thisLayer);\r\n                fromComp = thisLayer.fromComp.bind(thisLayer);\r\n                toComp = thisLayer.toComp.bind(thisLayer);\r\n                mask = thisLayer.mask ? thisLayer.mask.bind(thisLayer) : null;\r\n                fromCompToSurface = fromComp;\r\n            }\r\n            if (!transform) {\r\n                transform = elem.layerInterface(\"ADBE Transform Group\");\r\n                anchorPoint = transform.anchorPoint;\r\n            }\r\n            \r\n            if (elemType === 4 && !content) {\r\n                content = thisLayer(\"ADBE Root Vectors Group\");\r\n            }\r\n            if (!effect) {\r\n                effect = thisLayer(4);\r\n            }\r\n            hasParent = !!(elem.hierarchy && elem.hierarchy.length);\r\n            if (hasParent && !parent) {\r\n                parent = elem.hierarchy[0].layerInterface;\r\n            }\r\n            time = this.comp.renderedFrame/this.comp.globalData.frameRate;\r\n            if (needsVelocity) {\r\n                velocity = velocityAtTime(time);\r\n            }\r\n            expression_function();\r\n            this.frameExpressionId = elem.globalData.frameId;\r\n\r\n\r\n            //TODO: Check if it's possible to return on ShapeInterface the .v value\r\n            if (scoped_bm_rt.propType === \"shape\") {\r\n                scoped_bm_rt = shape_pool.clone(scoped_bm_rt.v);\r\n            }\r\n            return scoped_bm_rt;\r\n        }\r\n        return executeExpression;\r\n    }\r\n\r\n    ob.initiateExpression = initiateExpression;\r\n    return ob;\r\n}());\n(function addPropertyDecorator() {\r\n\r\n    function getStaticValueAtTime() {\r\n        return this.pv;\r\n    }\r\n\r\n    function loopOut(type,duration,durationFlag){\r\n        if(!this.k || !this.keyframes){\r\n            return this.pv;\r\n        }\r\n        type = type ? type.toLowerCase() : '';\r\n        var currentFrame = this.comp.renderedFrame;\r\n        var keyframes = this.keyframes;\r\n        var lastKeyFrame = keyframes[keyframes.length - 1].t;\r\n        if(currentFrame<=lastKeyFrame){\r\n            return this.pv;\r\n        }else{\r\n            var cycleDuration, firstKeyFrame;\r\n            if(!durationFlag){\r\n                if(!duration || duration > keyframes.length - 1){\r\n                    duration = keyframes.length - 1;\r\n                }\r\n                firstKeyFrame = keyframes[keyframes.length - 1 - duration].t;\r\n                cycleDuration = lastKeyFrame - firstKeyFrame;\r\n            } else {\r\n                if(!duration){\r\n                    cycleDuration = Math.max(0,lastKeyFrame - this.elem.data.ip);\r\n                } else {\r\n                    cycleDuration = Math.abs(lastKeyFrame - elem.comp.globalData.frameRate*duration);\r\n                }\r\n                firstKeyFrame = lastKeyFrame - cycleDuration;\r\n            }\r\n            var i, len, ret;\r\n            if(type === 'pingpong') {\r\n                var iterations = Math.floor((currentFrame - firstKeyFrame)/cycleDuration);\r\n                if(iterations % 2 !== 0){\r\n                    return this.getValueAtTime(((cycleDuration - (currentFrame - firstKeyFrame) % cycleDuration +  firstKeyFrame)) / this.comp.globalData.frameRate, 0);\r\n                }\r\n            } else if(type === 'offset'){\r\n                var initV = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\r\n                var endV = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\r\n                var current = this.getValueAtTime(((currentFrame - firstKeyFrame) % cycleDuration +  firstKeyFrame) / this.comp.globalData.frameRate, 0);\r\n                var repeats = Math.floor((currentFrame - firstKeyFrame)/cycleDuration);\r\n                if(this.pv.length){\r\n                    ret = new Array(initV.length);\r\n                    len = ret.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        ret[i] = (endV[i]-initV[i])*repeats + current[i];\r\n                    }\r\n                    return ret;\r\n                }\r\n                return (endV-initV)*repeats + current;\r\n            } else if(type === 'continue'){\r\n                var lastValue = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\r\n                var nextLastValue = this.getValueAtTime((lastKeyFrame - 0.001) / this.comp.globalData.frameRate, 0);\r\n                if(this.pv.length){\r\n                    ret = new Array(lastValue.length);\r\n                    len = ret.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        ret[i] = lastValue[i] + (lastValue[i]-nextLastValue[i])*((currentFrame - lastKeyFrame)/ this.comp.globalData.frameRate)/0.0005;\r\n                    }\r\n                    return ret;\r\n                }\r\n                return lastValue + (lastValue-nextLastValue)*(((currentFrame - lastKeyFrame))/0.001);\r\n            }\r\n            return this.getValueAtTime((((currentFrame - firstKeyFrame) % cycleDuration +  firstKeyFrame)) / this.comp.globalData.frameRate, 0);\r\n        }\r\n    }\r\n\r\n    function loopIn(type,duration, durationFlag) {\r\n        if(!this.k){\r\n            return this.pv;\r\n        }\r\n        type = type ? type.toLowerCase() : '';\r\n        var currentFrame = this.comp.renderedFrame;\r\n        var keyframes = this.keyframes;\r\n        var firstKeyFrame = keyframes[0].t;\r\n        if(currentFrame>=firstKeyFrame){\r\n            return this.pv;\r\n        }else{\r\n            var cycleDuration, lastKeyFrame;\r\n            if(!durationFlag){\r\n                if(!duration || duration > keyframes.length - 1){\r\n                    duration = keyframes.length - 1;\r\n                }\r\n                lastKeyFrame = keyframes[duration].t;\r\n                cycleDuration = lastKeyFrame - firstKeyFrame;\r\n            } else {\r\n                if(!duration){\r\n                    cycleDuration = Math.max(0,this.elem.data.op - firstKeyFrame);\r\n                } else {\r\n                    cycleDuration = Math.abs(elem.comp.globalData.frameRate*duration);\r\n                }\r\n                lastKeyFrame = firstKeyFrame + cycleDuration;\r\n            }\r\n            var i, len, ret;\r\n            if(type === 'pingpong') {\r\n                var iterations = Math.floor((firstKeyFrame - currentFrame)/cycleDuration);\r\n                if(iterations % 2 === 0){\r\n                    return this.getValueAtTime((((firstKeyFrame - currentFrame)%cycleDuration +  firstKeyFrame)) / this.comp.globalData.frameRate, 0);\r\n                }\r\n            } else if(type === 'offset'){\r\n                var initV = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\r\n                var endV = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\r\n                var current = this.getValueAtTime((cycleDuration - (firstKeyFrame - currentFrame)%cycleDuration +  firstKeyFrame) / this.comp.globalData.frameRate, 0);\r\n                var repeats = Math.floor((firstKeyFrame - currentFrame)/cycleDuration)+1;\r\n                if(this.pv.length){\r\n                    ret = new Array(initV.length);\r\n                    len = ret.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        ret[i] = current[i]-(endV[i]-initV[i])*repeats;\r\n                    }\r\n                    return ret;\r\n                }\r\n                return current-(endV-initV)*repeats;\r\n            } else if(type === 'continue'){\r\n                var firstValue = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\r\n                var nextFirstValue = this.getValueAtTime((firstKeyFrame + 0.001) / this.comp.globalData.frameRate, 0);\r\n                if(this.pv.length){\r\n                    ret = new Array(firstValue.length);\r\n                    len = ret.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        ret[i] = firstValue[i] + (firstValue[i]-nextFirstValue[i])*(firstKeyFrame - currentFrame)/0.001;\r\n                    }\r\n                    return ret;\r\n                }\r\n                return firstValue + (firstValue-nextFirstValue)*(firstKeyFrame - currentFrame)/0.001;\r\n            }\r\n            return this.getValueAtTime(((cycleDuration - (firstKeyFrame - currentFrame) % cycleDuration +  firstKeyFrame)) / this.comp.globalData.frameRate, 0);\r\n        }\r\n    }\r\n\r\n    function getValueAtTime(frameNum) {\r\n        if(frameNum !== this._cachingAtTime.lastFrame) {\r\n            frameNum *= this.elem.globalData.frameRate;\r\n            frameNum -= this.offsetTime;\r\n            this._cachingAtTime.lastIndex = this._cachingAtTime.lastFrame < frameNum ? this._cachingAtTime.lastIndex : 0;\r\n            this._cachingAtTime.value = this.interpolateValue(frameNum, this._cachingAtTime);\r\n            this._cachingAtTime.lastFrame = frameNum;\r\n        }\r\n        return this._cachingAtTime.value;\r\n\r\n    }\r\n\r\n    function getSpeedAtTime(frameNum) {\r\n        var delta = -0.01;\r\n        var v1 = this.getValueAtTime(frameNum);\r\n        var v2 = this.getValueAtTime(frameNum + delta);\r\n        var speed = 0;\r\n        if(v1.length){\r\n            var i;\r\n            for(i=0;i<v1.length;i+=1){\r\n                speed += Math.pow(v2[i] - v1[i], 2);\r\n            }\r\n            speed = Math.sqrt(speed) * 100;\r\n        } else {\r\n            speed = 0;\r\n        }\r\n        return speed;\r\n    }\r\n\r\n    function getVelocityAtTime(frameNum) {\r\n        if(this.vel !== undefined){\r\n            return this.vel;\r\n        }\r\n        var delta = -0.001;\r\n        //frameNum += this.elem.data.st;\r\n        var v1 = this.getValueAtTime(frameNum);\r\n        var v2 = this.getValueAtTime(frameNum + delta);\r\n        var velocity;\r\n        if(v1.length){\r\n            velocity = createTypedArray('float32', v1.length);\r\n            var i;\r\n            for(i=0;i<v1.length;i+=1){\r\n                //removing frameRate\r\n                //if needed, don't add it here\r\n                //velocity[i] = this.elem.globalData.frameRate*((v2[i] - v1[i])/delta);\r\n                velocity[i] = (v2[i] - v1[i])/delta;\r\n            }\r\n        } else {\r\n            velocity = (v2 - v1)/delta;\r\n        }\r\n        return velocity;\r\n    }\r\n\r\n    function setGroupProperty(propertyGroup){\r\n        this.propertyGroup = propertyGroup;\r\n    }\r\n\r\n    function searchExpressions(elem,data,prop){\r\n        if(data.x){\r\n            prop.k = true;\r\n            prop.x = true;\r\n            prop.initiateExpression = ExpressionManager.initiateExpression;\r\n            prop.effectsSequence.push(prop.initiateExpression(elem,data,prop).bind(prop));\r\n        }\r\n    }\r\n\r\n    function getTransformValueAtTime(time) {\r\n        console.warn('Transform at time not supported');\r\n    }\r\n\r\n    function getTransformStaticValueAtTime(time) {\r\n\r\n    }\r\n\r\n    var TextExpressionSelectorProp = (function(){\r\n\r\n        function getValueProxy(index,total){\r\n            this.textIndex = index+1;\r\n            this.textTotal = total;\r\n            this.getValue();\r\n            return this.v;\r\n        }\r\n\r\n        return function TextExpressionSelectorProp(elem,data){\r\n            this.pv = 1;\r\n            this.comp = elem.comp;\r\n            this.elem = elem;\r\n            this.mult = 0.01;\r\n            this.propType = 'textSelector';\r\n            this.textTotal = data.totalChars;\r\n            this.selectorValue = 100;\r\n            this.lastValue = [1,1,1];\r\n            searchExpressions.bind(this)(elem,data,this);\r\n            this.getMult = getValueProxy;\r\n            this.getVelocityAtTime = getVelocityAtTime;\r\n            if(this.kf){\r\n                this.getValueAtTime = getValueAtTime.bind(this);\r\n            } else {\r\n                this.getValueAtTime = getStaticValueAtTime.bind(this);\r\n            }\r\n            this.setGroupProperty = setGroupProperty;\r\n        };\r\n    }());\r\n\r\n    var getTransformProperty = TransformPropertyFactory.getTransformProperty;\r\n    TransformPropertyFactory.getTransformProperty = function(elem, data, container) {\r\n        var prop = getTransformProperty(elem, data, container);\r\n        if(prop.dynamicProperties.length) {\r\n            prop.getValueAtTime = getTransformValueAtTime.bind(prop);\r\n        } else {\r\n            prop.getValueAtTime = getTransformStaticValueAtTime.bind(prop);\r\n        }\r\n        prop.setGroupProperty = setGroupProperty;\r\n        return prop;\r\n    };\r\n\r\n    var propertyGetProp = PropertyFactory.getProp;\r\n    PropertyFactory.getProp = function(elem,data,type, mult, container){\r\n        var prop = propertyGetProp(elem,data,type, mult, container);\r\n        //prop.getVelocityAtTime = getVelocityAtTime;\r\n        //prop.loopOut = loopOut;\r\n        //prop.loopIn = loopIn;\r\n        if(prop.kf){\r\n            prop.getValueAtTime = getValueAtTime.bind(prop);\r\n        } else {\r\n            prop.getValueAtTime = getStaticValueAtTime.bind(prop);\r\n        }\r\n        prop.setGroupProperty = setGroupProperty;\r\n        prop.loopOut = loopOut;\r\n        prop.loopIn = loopIn;\r\n        prop.getVelocityAtTime = getVelocityAtTime.bind(prop);\r\n        prop.getSpeedAtTime = getSpeedAtTime.bind(prop);\r\n        prop.numKeys = data.a === 1 ? data.k.length : 0;\r\n        prop.propertyIndex = data.ix;\r\n        var value = 0;\r\n        if(type !== 0) {\r\n            value = createTypedArray('float32', data.a === 1 ?  data.k[0].s.length : data.k.length);\r\n        }\r\n        prop._cachingAtTime = {\r\n            lastFrame: initialDefaultFrame,\r\n            lastIndex: 0,\r\n            value: value\r\n        };\r\n        searchExpressions(elem,data,prop);\r\n        if(prop.k){\r\n            container.addDynamicProperty(prop);\r\n        }\r\n\r\n        return prop;\r\n    };\r\n\r\n    function getShapeValueAtTime(frameNum) {\r\n        //For now this caching object is created only when needed instead of creating it when the shape is initialized.\r\n        if (!this._cachingAtTime) {\r\n            this._cachingAtTime = {\r\n                shapeValue: shape_pool.clone(this.pv),\r\n                lastIndex: 0,\r\n                lastTime: initialDefaultFrame\r\n            };\r\n        }\r\n        if(frameNum !== this._cachingAtTime.lastTime) {\r\n            this._cachingAtTime.lastIndex = this._cachingAtTime.lastTime < frameNum ? this._caching.lastIndex : 0;\r\n            this._cachingAtTime.lastTime = frameNum;\r\n            frameNum *= this.elem.globalData.frameRate;\r\n            this.interpolateShape(frameNum, this._cachingAtTime.shapeValue, this._cachingAtTime);\r\n        }\r\n        return this._cachingAtTime.shapeValue;\r\n    }\r\n\r\n    var ShapePropertyConstructorFunction = ShapePropertyFactory.getConstructorFunction();\r\n    var KeyframedShapePropertyConstructorFunction = ShapePropertyFactory.getKeyframedConstructorFunction();\r\n\r\n    function ShapeExpressions(){}\r\n    ShapeExpressions.prototype = {\r\n        vertices: function(prop, time){\r\n            var shapePath = this.v;\r\n            if(time !== undefined) {\r\n                shapePath = this.getValueAtTime(time, 0);\r\n            }\r\n            var i, len = shapePath._length;\r\n            var vertices = shapePath[prop];\r\n            var points = shapePath.v;\r\n            var arr = createSizedArray(len);\r\n            for(i = 0; i < len; i += 1) {\r\n                if(prop === 'i' || prop === 'o') {\r\n                    arr[i] = [vertices[i][0] - points[i][0], vertices[i][1] - points[i][1]];\r\n                } else {\r\n                    arr[i] = [vertices[i][0], vertices[i][1]];\r\n                }\r\n                \r\n            }\r\n            return arr;\r\n        },\r\n        points: function(time){\r\n            return this.vertices('v', time);\r\n        },\r\n        inTangents: function(time){\r\n            return this.vertices('i', time);\r\n        },\r\n        outTangents: function(time){\r\n            return this.vertices('o', time);\r\n        },\r\n        isClosed: function(){\r\n            return this.v.c;\r\n        },\r\n        pointOnPath: function(perc, time){\r\n            var shapePath = this.v;\r\n            if(time !== undefined) {\r\n                shapePath = this.getValueAtTime(time, 0);\r\n            }\r\n            if(!this._segmentsLength) {\r\n                this._segmentsLength = bez.getSegmentsLength(shapePath);\r\n            }\r\n\r\n            var segmentsLength = this._segmentsLength;\r\n            var lengths = segmentsLength.lengths;\r\n            var lengthPos = segmentsLength.totalLength * perc;\r\n            var i = 0, len = lengths.length;\r\n            var j = 0, jLen;\r\n            var accumulatedLength = 0, pt;\r\n            while(i < len) {\r\n                if(accumulatedLength + lengths[i].addedLength > lengthPos) {\r\n                    var initIndex = i;\r\n                    var endIndex = (shapePath.c && i === len - 1) ? 0 : i + 1;\r\n                    var segmentPerc = (lengthPos - accumulatedLength)/lengths[i].addedLength;\r\n                    pt = bez.getPointInSegment(shapePath.v[initIndex], shapePath.v[endIndex], shapePath.o[initIndex], shapePath.i[endIndex], segmentPerc, lengths[i]);\r\n                    break;\r\n                } else {\r\n                    accumulatedLength += lengths[i].addedLength;\r\n                }\r\n                i += 1;\r\n            }\r\n            if(!pt){\r\n                pt = shapePath.c ? [shapePath.v[0][0],shapePath.v[0][1]]:[shapePath.v[shapePath._length-1][0],shapePath.v[shapePath._length-1][1]];\r\n            }\r\n            return pt;\r\n        },\r\n        vectorOnPath: function(perc, time, vectorType){\r\n            //perc doesn't use triple equality because it can be a Number object as well as a primitive.\r\n            perc = perc == 1 ? this.v.c ? 0 : 0.999 : perc;\r\n            var pt1 = this.pointOnPath(perc, time);\r\n            var pt2 = this.pointOnPath(perc + 0.001, time);\r\n            var xLength = pt2[0] - pt1[0];\r\n            var yLength = pt2[1] - pt1[1];\r\n            var magnitude = Math.sqrt(Math.pow(xLength,2) + Math.pow(yLength,2));\r\n            var unitVector = vectorType === 'tangent' ? [xLength/magnitude, yLength/magnitude] : [-yLength/magnitude, xLength/magnitude];\r\n            return unitVector;\r\n        },\r\n        tangentOnPath: function(perc, time){\r\n            return this.vectorOnPath(perc, time, 'tangent');\r\n        },\r\n        normalOnPath: function(perc, time){\r\n            return this.vectorOnPath(perc, time, 'normal');\r\n        },\r\n        setGroupProperty: setGroupProperty,\r\n        getValueAtTime: getStaticValueAtTime\r\n    };\r\n    extendPrototype([ShapeExpressions], ShapePropertyConstructorFunction);\r\n    extendPrototype([ShapeExpressions], KeyframedShapePropertyConstructorFunction);\r\n    KeyframedShapePropertyConstructorFunction.prototype.getValueAtTime = getShapeValueAtTime;\r\n    KeyframedShapePropertyConstructorFunction.prototype.initiateExpression = ExpressionManager.initiateExpression;\r\n\r\n    var propertyGetShapeProp = ShapePropertyFactory.getShapeProp;\r\n    ShapePropertyFactory.getShapeProp = function(elem,data,type, arr, trims){\r\n        var prop = propertyGetShapeProp(elem,data,type, arr, trims);\r\n        prop.propertyIndex = data.ix;\r\n        prop.lock = false;\r\n        if(type === 3){\r\n            searchExpressions(elem,data.pt,prop);\r\n        } else if(type === 4){\r\n            searchExpressions(elem,data.ks,prop);\r\n        }\r\n        if(prop.k){\r\n            elem.addDynamicProperty(prop);\r\n        }\r\n        return prop;\r\n    };\r\n\r\n    var propertyGetTextProp = TextSelectorProp.getTextSelectorProp;\r\n    TextSelectorProp.getTextSelectorProp = function(elem, data,arr){\r\n        if(data.t === 1){\r\n            return new TextExpressionSelectorProp(elem, data,arr);\r\n        } else {\r\n            return propertyGetTextProp(elem,data,arr);\r\n        }\r\n    };\r\n}());\n(function addDecorator() {\r\n\r\n    function searchExpressions(){\r\n        if(this.data.d.x){\r\n            this.calculateExpression = ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this);\r\n            this.addEffect(this.getExpressionValue.bind(this));\r\n            return true;\r\n        }\r\n    }\r\n\r\n    TextProperty.prototype.getExpressionValue = function(currentValue, text) {\r\n        var newValue = this.calculateExpression(text);\r\n        if(currentValue.t !== newValue) {\r\n            var newData = {};\r\n            this.copyData(newData, currentValue);\r\n            newData.t = newValue.toString();\r\n            newData.__complete = false;\r\n            return newData;\r\n        }\r\n        return currentValue;\r\n    }\r\n\r\n    TextProperty.prototype.searchProperty = function(){\r\n\r\n        var isKeyframed = this.searchKeyframes();\r\n        var hasExpressions = this.searchExpressions();\r\n        this.kf = isKeyframed || hasExpressions;\r\n        return this.kf;\r\n    };\r\n\r\n    TextProperty.prototype.searchExpressions = searchExpressions;\r\n    \r\n}());\nvar ShapeExpressionInterface = (function(){\r\n\r\n    function iterateElements(shapes,view, propertyGroup){\r\n        var arr = [];\r\n        var i, len = shapes ? shapes.length : 0;\r\n        for(i=0;i<len;i+=1){\r\n            if(shapes[i].ty == 'gr'){\r\n                arr.push(groupInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            }else if(shapes[i].ty == 'fl'){\r\n                arr.push(fillInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            }else if(shapes[i].ty == 'st'){\r\n                arr.push(strokeInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            }else if(shapes[i].ty == 'tm'){\r\n                arr.push(trimInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            }else if(shapes[i].ty == 'tr'){\r\n                //arr.push(transformInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            }else if(shapes[i].ty == 'el'){\r\n                arr.push(ellipseInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            }else if(shapes[i].ty == 'sr'){\r\n                arr.push(starInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            } else if(shapes[i].ty == 'sh'){\r\n                arr.push(pathInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            } else if(shapes[i].ty == 'rc'){\r\n                arr.push(rectInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            } else if(shapes[i].ty == 'rd'){\r\n                arr.push(roundedInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            } else if(shapes[i].ty == 'rp'){\r\n                arr.push(repeaterInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            }\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    function contentsInterfaceFactory(shape,view, propertyGroup){\r\n       var interfaces;\r\n       var interfaceFunction = function _interfaceFunction(value){\r\n           var i = 0, len = interfaces.length;\r\n            while(i<len){\r\n                if(interfaces[i]._name === value || interfaces[i].mn === value || interfaces[i].propertyIndex === value || interfaces[i].ix === value || interfaces[i].ind === value){\r\n                   return interfaces[i];\r\n                }\r\n                i+=1;\r\n            }\r\n            if(typeof value === 'number'){\r\n               return interfaces[value-1];\r\n            }\r\n       };\r\n       interfaceFunction.propertyGroup = function(val){\r\n           if(val === 1){\r\n               return interfaceFunction;\r\n           } else{\r\n               return propertyGroup(val-1);\r\n           }\r\n       };\r\n       interfaces = iterateElements(shape.it, view.it, interfaceFunction.propertyGroup);\r\n       interfaceFunction.numProperties = interfaces.length;\r\n       interfaceFunction.propertyIndex = shape.cix;\r\n       interfaceFunction._name = shape.nm;\r\n\r\n       return interfaceFunction;\r\n   }\r\n\r\n    function groupInterfaceFactory(shape,view, propertyGroup){\r\n        var interfaceFunction = function _interfaceFunction(value){\r\n            switch(value){\r\n                case 'ADBE Vectors Group':\r\n                case 'Contents':\r\n                case 2:\r\n                    return interfaceFunction.content;\r\n                //Not necessary for now. Keeping them here in case a new case appears\r\n                //case 'ADBE Vector Transform Group':\r\n                //case 3:\r\n                default:\r\n                    return interfaceFunction.transform;\r\n            }\r\n        };\r\n        interfaceFunction.propertyGroup = function(val){\r\n            if(val === 1){\r\n                return interfaceFunction;\r\n            } else{\r\n                return propertyGroup(val-1);\r\n            }\r\n        };\r\n        var content = contentsInterfaceFactory(shape,view,interfaceFunction.propertyGroup);\r\n        var transformInterface = transformInterfaceFactory(shape.it[shape.it.length - 1],view.it[view.it.length - 1],interfaceFunction.propertyGroup);\r\n        interfaceFunction.content = content;\r\n        interfaceFunction.transform = transformInterface;\r\n        Object.defineProperty(interfaceFunction, '_name', {\r\n            get: function(){\r\n                return shape.nm;\r\n            }\r\n        });\r\n        //interfaceFunction.content = interfaceFunction;\r\n        interfaceFunction.numProperties = shape.np;\r\n        interfaceFunction.propertyIndex = shape.ix;\r\n        interfaceFunction.nm = shape.nm;\r\n        interfaceFunction.mn = shape.mn;\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function fillInterfaceFactory(shape,view,propertyGroup){\r\n        function interfaceFunction(val){\r\n            if(val === 'Color' || val === 'color'){\r\n                return interfaceFunction.color;\r\n            } else if(val === 'Opacity' || val === 'opacity'){\r\n                return interfaceFunction.opacity;\r\n            }\r\n        }\r\n        Object.defineProperties(interfaceFunction, {\r\n            'color': {\r\n                get: function() {\r\n                    return ExpressionValue(view.c, 1 / view.c.mult, 'color');\r\n                }\r\n            },\r\n            'opacity': {\r\n                get: function() {\r\n                    return ExpressionValue(view.o, 100);\r\n                }\r\n            },\r\n            '_name': { value: shape.nm },\r\n            'mn': { value: shape.mn }\r\n        });\r\n\r\n        view.c.setGroupProperty(propertyGroup);\r\n        view.o.setGroupProperty(propertyGroup);\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function strokeInterfaceFactory(shape,view,propertyGroup){\r\n        function _propertyGroup(val){\r\n            if(val === 1){\r\n                return ob;\r\n            } else{\r\n                return propertyGroup(val-1);\r\n            }\r\n        }\r\n        function _dashPropertyGroup(val){\r\n            if(val === 1){\r\n                return dashOb;\r\n            } else{\r\n                return _propertyGroup(val-1);\r\n            }\r\n        }\r\n        function addPropertyToDashOb(i) {\r\n            Object.defineProperty(dashOb, shape.d[i].nm, {\r\n                get: function(){\r\n                    return ExpressionValue(view.d.dataProps[i].p);\r\n                }\r\n            });\r\n        }\r\n        var i, len = shape.d ? shape.d.length : 0;\r\n        var dashOb = {};\r\n        for (i = 0; i < len; i += 1) {\r\n            addPropertyToDashOb(i);\r\n            view.d.dataProps[i].p.setGroupProperty(_dashPropertyGroup);\r\n        }\r\n\r\n        function interfaceFunction(val){\r\n            if(val === 'Color' || val === 'color'){\r\n                return interfaceFunction.color;\r\n            } else if(val === 'Opacity' || val === 'opacity'){\r\n                return interfaceFunction.opacity;\r\n            } else if(val === 'Stroke Width' || val === 'stroke width'){\r\n                return interfaceFunction.strokeWidth;\r\n            }\r\n        }\r\n        Object.defineProperties(interfaceFunction, {\r\n            'color': {\r\n                get: function() {\r\n                    return ExpressionValue(view.c, 1 / view.c.mult, 'color');\r\n                }\r\n            },\r\n            'opacity': {\r\n                get: function() {\r\n                    return ExpressionValue(view.o, 100);\r\n                }\r\n            },\r\n            'strokeWidth': {\r\n                get: function() {\r\n                    return ExpressionValue(view.w);\r\n                }\r\n            },\r\n            'dash': {\r\n                get: function() {\r\n                    return dashOb;\r\n                }\r\n            },\r\n            '_name': { value: shape.nm },\r\n            'mn': { value: shape.mn }\r\n        });\r\n\r\n        view.c.setGroupProperty(_propertyGroup);\r\n        view.o.setGroupProperty(_propertyGroup);\r\n        view.w.setGroupProperty(_propertyGroup);\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function trimInterfaceFactory(shape,view,propertyGroup){\r\n        function _propertyGroup(val){\r\n            if(val == 1){\r\n                return interfaceFunction;\r\n            } else {\r\n                return propertyGroup(--val);\r\n            }\r\n        }\r\n        interfaceFunction.propertyIndex = shape.ix;\r\n\r\n        view.s.setGroupProperty(_propertyGroup);\r\n        view.e.setGroupProperty(_propertyGroup);\r\n        view.o.setGroupProperty(_propertyGroup);\r\n\r\n        function interfaceFunction(val){\r\n            if(val === shape.e.ix || val === 'End' || val === 'end'){\r\n                return interfaceFunction.end;\r\n            }\r\n            if(val === shape.s.ix){\r\n                return interfaceFunction.start;\r\n            }\r\n            if(val === shape.o.ix){\r\n                return interfaceFunction.offset;\r\n            }\r\n        }\r\n        interfaceFunction.propertyIndex = shape.ix;\r\n\r\n        Object.defineProperties(interfaceFunction, {\r\n            'start': {\r\n                get: function() {\r\n                    return ExpressionValue(view.s, 1 / view.s.mult);\r\n                }\r\n            },\r\n            'end': {\r\n                get: function() {\r\n                    return ExpressionValue(view.e, 1 / view.e.mult);\r\n                }\r\n            },\r\n            'offset': {\r\n                get: function() {\r\n                    return ExpressionValue(view.o);\r\n                }\r\n            },\r\n            '_name': { value: shape.nm }\r\n        });\r\n        interfaceFunction.mn = shape.mn;\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function transformInterfaceFactory(shape,view,propertyGroup){\r\n        function _propertyGroup(val){\r\n            if(val == 1){\r\n                return interfaceFunction;\r\n            } else {\r\n                return propertyGroup(--val);\r\n            }\r\n        }\r\n        view.transform.mProps.o.setGroupProperty(_propertyGroup);\r\n        view.transform.mProps.p.setGroupProperty(_propertyGroup);\r\n        view.transform.mProps.a.setGroupProperty(_propertyGroup);\r\n        view.transform.mProps.s.setGroupProperty(_propertyGroup);\r\n        view.transform.mProps.r.setGroupProperty(_propertyGroup);\r\n        if(view.transform.mProps.sk){\r\n            view.transform.mProps.sk.setGroupProperty(_propertyGroup);\r\n            view.transform.mProps.sa.setGroupProperty(_propertyGroup);\r\n        }\r\n        view.transform.op.setGroupProperty(_propertyGroup);\r\n\r\n        function interfaceFunction(value){\r\n            if(shape.a.ix === value || value === 'Anchor Point'){\r\n                return interfaceFunction.anchorPoint;\r\n            }\r\n            if(shape.o.ix === value || value === 'Opacity'){\r\n                return interfaceFunction.opacity;\r\n            }\r\n            if(shape.p.ix === value || value === 'Position'){\r\n                return interfaceFunction.position;\r\n            }\r\n            if(shape.r.ix === value || value === 'Rotation' || value === 'ADBE Vector Rotation'){\r\n                return interfaceFunction.rotation;\r\n            }\r\n            if(shape.s.ix === value || value === 'Scale'){\r\n                return interfaceFunction.scale;\r\n            }\r\n            if(shape.sk && shape.sk.ix === value || value === 'Skew'){\r\n                return interfaceFunction.skew;\r\n            }\r\n            if(shape.sa && shape.sa.ix === value || value === 'Skew Axis'){\r\n                return interfaceFunction.skewAxis;\r\n            }\r\n\r\n        }\r\n        Object.defineProperties(interfaceFunction, {\r\n            'opacity': {\r\n                get: function(){\r\n                    return ExpressionValue(view.transform.mProps.o, 1/view.transform.mProps.o.mult);\r\n                }\r\n            },\r\n            'position': {\r\n                get: function(){\r\n                    return ExpressionValue(view.transform.mProps.p);\r\n                }\r\n            },\r\n            'anchorPoint': {\r\n                get: function(){\r\n                    return ExpressionValue(view.transform.mProps.a);\r\n                }\r\n            },\r\n            'scale': {\r\n                get: function(){\r\n                    return ExpressionValue(view.transform.mProps.s, 1 / view.transform.mProps.s.mult);\r\n                }\r\n            },\r\n            'rotation': {\r\n                get: function(){\r\n                    return ExpressionValue(view.transform.mProps.r, 1 / view.transform.mProps.r.mult);\r\n                }\r\n            },\r\n            'skew': {\r\n                get: function(){\r\n                    return ExpressionValue(view.transform.mProps.sk);\r\n                }\r\n            },\r\n            'skewAxis': {\r\n                get: function(){\r\n                    return ExpressionValue(view.transform.mProps.sa);\r\n                }\r\n            },\r\n            '_name': { value: shape.nm }\r\n        });\r\n        interfaceFunction.ty = 'tr';\r\n        interfaceFunction.mn = shape.mn;\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function ellipseInterfaceFactory(shape,view,propertyGroup){\r\n        function _propertyGroup(val){\r\n            if(val == 1){\r\n                return interfaceFunction;\r\n            } else {\r\n                return propertyGroup(--val);\r\n            }\r\n        }\r\n        interfaceFunction.propertyIndex = shape.ix;\r\n        var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\r\n        prop.s.setGroupProperty(_propertyGroup);\r\n        prop.p.setGroupProperty(_propertyGroup);\r\n        function interfaceFunction(value){\r\n            if(shape.p.ix === value){\r\n                return interfaceFunction.position;\r\n            }\r\n            if(shape.s.ix === value){\r\n                return interfaceFunction.size;\r\n            }\r\n        }\r\n        Object.defineProperties(interfaceFunction, {\r\n            'size': {\r\n                get: function(){\r\n                    return ExpressionValue(prop.s);\r\n                }\r\n            },\r\n            'position': {\r\n                get: function(){\r\n                    return ExpressionValue(prop.p);\r\n                }\r\n            },\r\n            '_name': { value: shape.nm }\r\n        });\r\n        interfaceFunction.mn = shape.mn;\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function starInterfaceFactory(shape,view,propertyGroup){\r\n        function _propertyGroup(val){\r\n            if(val == 1){\r\n                return interfaceFunction;\r\n            } else {\r\n                return propertyGroup(--val);\r\n            }\r\n        }\r\n        var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\r\n        interfaceFunction.propertyIndex = shape.ix;\r\n        prop.or.setGroupProperty(_propertyGroup);\r\n        prop.os.setGroupProperty(_propertyGroup);\r\n        prop.pt.setGroupProperty(_propertyGroup);\r\n        prop.p.setGroupProperty(_propertyGroup);\r\n        prop.r.setGroupProperty(_propertyGroup);\r\n        if(shape.ir){\r\n            prop.ir.setGroupProperty(_propertyGroup);\r\n            prop.is.setGroupProperty(_propertyGroup);\r\n        }\r\n\r\n        function interfaceFunction(value){\r\n            if(shape.p.ix === value){\r\n                return interfaceFunction.position;\r\n            }\r\n            if(shape.r.ix === value){\r\n                return interfaceFunction.rotation;\r\n            }\r\n            if(shape.pt.ix === value){\r\n                return interfaceFunction.points;\r\n            }\r\n            if(shape.or.ix === value || 'ADBE Vector Star Outer Radius' === value){\r\n                return interfaceFunction.outerRadius;\r\n            }\r\n            if(shape.os.ix === value){\r\n                return interfaceFunction.outerRoundness;\r\n            }\r\n            if(shape.ir && (shape.ir.ix === value || 'ADBE Vector Star Inner Radius' === value)){\r\n                return interfaceFunction.innerRadius;\r\n            }\r\n            if(shape.is && shape.is.ix === value){\r\n                return interfaceFunction.innerRoundness;\r\n            }\r\n\r\n        }\r\n        Object.defineProperties(interfaceFunction, {\r\n            'position': {\r\n                get: function() {\r\n                    return ExpressionValue(prop.p);\r\n                }\r\n            },\r\n            'rotation': {\r\n                get: function() {\r\n                    return ExpressionValue(prop.r, 1 / prop.r.mult);\r\n                }\r\n            },\r\n            'points': {\r\n                get: function() {\r\n                    return ExpressionValue(prop.pt);\r\n                }\r\n            },\r\n            'outerRadius': {\r\n                get: function() {\r\n                    return ExpressionValue(prop.or);\r\n                }\r\n            },\r\n            'outerRoundness': {\r\n                get: function(){\r\n                    return ExpressionValue(prop.os);\r\n                }\r\n            },\r\n            'innerRadius': {\r\n                get: function(){\r\n                    if(!prop.ir){\r\n                        return 0;\r\n                    }\r\n                    return ExpressionValue(prop.ir);\r\n                }\r\n            },\r\n            'innerRoundness': {\r\n                get: function(){\r\n                    if(!prop.is){\r\n                        return 0;\r\n                    }\r\n                    return ExpressionValue(prop.is, 1 / prop.is.mult);\r\n                }\r\n            },\r\n            '_name': { value: shape.nm }\r\n        });\r\n        interfaceFunction.mn = shape.mn;\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function rectInterfaceFactory(shape,view,propertyGroup){\r\n        function _propertyGroup(val){\r\n            if(val == 1){\r\n                return interfaceFunction;\r\n            } else {\r\n                return propertyGroup(--val);\r\n            }\r\n        }\r\n        var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\r\n        interfaceFunction.propertyIndex = shape.ix;\r\n        prop.p.setGroupProperty(_propertyGroup);\r\n        prop.s.setGroupProperty(_propertyGroup);\r\n        prop.r.setGroupProperty(_propertyGroup);\r\n\r\n        function interfaceFunction(value){\r\n            if(shape.p.ix === value){\r\n                return interfaceFunction.position;\r\n            }\r\n            if(shape.r.ix === value){\r\n                return interfaceFunction.roundness;\r\n            }\r\n            if(shape.s.ix === value || value === 'Size' || value === 'ADBE Vector Rect Size'){\r\n                return interfaceFunction.size;\r\n            }\r\n\r\n        }\r\n        Object.defineProperties(interfaceFunction, {\r\n            'position': {\r\n                get: function(){\r\n                    return ExpressionValue(prop.p);\r\n                }\r\n            },\r\n            'roundness': {\r\n                get: function(){\r\n                    return ExpressionValue(prop.r);\r\n                }\r\n            },\r\n            'size': {\r\n                get: function(){\r\n                    return ExpressionValue(prop.s);\r\n                }\r\n            },\r\n            '_name': { value: shape.nm }\r\n        });\r\n        interfaceFunction.mn = shape.mn;\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function roundedInterfaceFactory(shape,view,propertyGroup){\r\n        function _propertyGroup(val){\r\n            if(val == 1){\r\n                return interfaceFunction;\r\n            } else {\r\n                return propertyGroup(--val);\r\n            }\r\n        }\r\n        var prop = view;\r\n        interfaceFunction.propertyIndex = shape.ix;\r\n        prop.rd.setGroupProperty(_propertyGroup);\r\n\r\n        function interfaceFunction(value){\r\n            if(shape.r.ix === value || 'Round Corners 1' === value){\r\n                return interfaceFunction.radius;\r\n            }\r\n\r\n        }\r\n        Object.defineProperties(interfaceFunction, {\r\n            'radius': {\r\n                get: function() {\r\n                    return ExpressionValue(prop.rd);\r\n                }\r\n            },\r\n            '_name': { value: shape.nm }\r\n        });\r\n        interfaceFunction.mn = shape.mn;\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function repeaterInterfaceFactory(shape,view,propertyGroup){\r\n        function _propertyGroup(val){\r\n            if(val == 1){\r\n                return interfaceFunction;\r\n            } else {\r\n                return propertyGroup(--val);\r\n            }\r\n        }\r\n        var prop = view;\r\n        interfaceFunction.propertyIndex = shape.ix;\r\n        prop.c.setGroupProperty(_propertyGroup);\r\n        prop.o.setGroupProperty(_propertyGroup);\r\n\r\n        function interfaceFunction(value){\r\n            if(shape.c.ix === value || 'Copies' === value){\r\n                return interfaceFunction.copies;\r\n            } else if(shape.o.ix === value || 'Offset' === value){\r\n                return interfaceFunction.offset;\r\n            }\r\n\r\n        }\r\n        Object.defineProperties(interfaceFunction, {\r\n            'copies': {\r\n                get: function(){\r\n                    return ExpressionValue(prop.c);\r\n                }\r\n            },\r\n            'offset': {\r\n                get: function(){\r\n                    return ExpressionValue(prop.o);\r\n                }\r\n            },\r\n            '_name': { value: shape.nm }\r\n        });\r\n        interfaceFunction.mn = shape.mn;\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function pathInterfaceFactory(shape,view,propertyGroup){\r\n        var prop = view.sh;\r\n        function _propertyGroup(val){\r\n            if(val == 1){\r\n                return interfaceFunction;\r\n            } else {\r\n                return propertyGroup(--val);\r\n            }\r\n        }\r\n        prop.setGroupProperty(_propertyGroup);\r\n\r\n        function interfaceFunction(val){\r\n            if(val === 'Shape' || val === 'shape' || val === 'Path' || val === 'path' || val === 'ADBE Vector Shape' || val === 2){\r\n                return interfaceFunction.path;\r\n            }\r\n        }\r\n        Object.defineProperties(interfaceFunction, {\r\n            'path': {\r\n                get: function(){\r\n                    if(prop.k){\r\n                        prop.getValue();\r\n                    }\r\n                    return prop;\r\n                }\r\n            },\r\n            'shape': {\r\n                get: function(){\r\n                    if(prop.k){\r\n                        prop.getValue();\r\n                    }\r\n                    return prop;\r\n                }\r\n            },\r\n            '_name': { value: shape.nm },\r\n            'ix': { value: shape.ix },\r\n            'mn': { value: shape.mn }\r\n        });\r\n        return interfaceFunction;\r\n    }\r\n\r\n    return function(shapes,view,propertyGroup) {\r\n        var interfaces;\r\n        function _interfaceFunction(value){\r\n            if(typeof value === 'number'){\r\n                return interfaces[value-1];\r\n            } else {\r\n                var i = 0, len = interfaces.length;\r\n                while(i<len){\r\n                    if(interfaces[i]._name === value){\r\n                        return interfaces[i];\r\n                    }\r\n                    i+=1;\r\n                }\r\n            }\r\n        }\r\n        _interfaceFunction.propertyGroup = propertyGroup;\r\n        interfaces = iterateElements(shapes, view, _interfaceFunction);\r\n        return _interfaceFunction;\r\n    };\r\n}());\r\n\nvar TextExpressionInterface = (function(){\r\n\treturn function(elem){\r\n        var _prevValue, _sourceText;\r\n        function _thisLayerFunction(){\r\n        }\r\n        Object.defineProperty(_thisLayerFunction, \"sourceText\", {\r\n            get: function(){\r\n                var stringValue = elem.textProperty.currentData.t;\r\n                if(stringValue !== _prevValue) {\r\n                    elem.textProperty.currentData.t = _prevValue;\r\n                    _sourceText = new String(stringValue);\r\n                    //If stringValue is an empty string, eval returns undefined, so it has to be returned as a String primitive\r\n                    _sourceText.value = stringValue ? stringValue : new String(stringValue);\r\n                }\r\n                return _sourceText;\r\n            }\r\n        });\r\n        return _thisLayerFunction;\r\n    };\r\n}());\nvar LayerExpressionInterface = (function (){\r\n    function toWorld(arr, time){\r\n        var toWorldMat = new Matrix();\r\n        toWorldMat.reset();\r\n        var transformMat;\r\n        if(time) {\r\n            //Todo implement value at time on transform properties\r\n            //transformMat = this._elem.finalTransform.mProp.getValueAtTime(time);\r\n            transformMat = this._elem.finalTransform.mProp;\r\n        } else {\r\n            transformMat = this._elem.finalTransform.mProp;\r\n        }\r\n        transformMat.applyToMatrix(toWorldMat);\r\n        if(this._elem.hierarchy && this._elem.hierarchy.length){\r\n            var i, len = this._elem.hierarchy.length;\r\n            for(i=0;i<len;i+=1){\r\n                this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(toWorldMat);\r\n            }\r\n            return toWorldMat.applyToPointArray(arr[0],arr[1],arr[2]||0);\r\n        }\r\n        return toWorldMat.applyToPointArray(arr[0],arr[1],arr[2]||0);\r\n    }\r\n    function fromWorld(arr, time){\r\n        var toWorldMat = new Matrix();\r\n        toWorldMat.reset();\r\n        var transformMat;\r\n        if(time) {\r\n            //Todo implement value at time on transform properties\r\n            //transformMat = this._elem.finalTransform.mProp.getValueAtTime(time);\r\n            transformMat = this._elem.finalTransform.mProp;\r\n        } else {\r\n            transformMat = this._elem.finalTransform.mProp;\r\n        }\r\n        transformMat.applyToMatrix(toWorldMat);\r\n        if(this._elem.hierarchy && this._elem.hierarchy.length){\r\n            var i, len = this._elem.hierarchy.length;\r\n            for(i=0;i<len;i+=1){\r\n                this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(toWorldMat);\r\n            }\r\n            return toWorldMat.inversePoint(arr);\r\n        }\r\n        return toWorldMat.inversePoint(arr);\r\n    }\r\n    function fromComp(arr){\r\n        var toWorldMat = new Matrix();\r\n        toWorldMat.reset();\r\n        this._elem.finalTransform.mProp.applyToMatrix(toWorldMat);\r\n        if(this._elem.hierarchy && this._elem.hierarchy.length){\r\n            var i, len = this._elem.hierarchy.length;\r\n            for(i=0;i<len;i+=1){\r\n                this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(toWorldMat);\r\n            }\r\n            return toWorldMat.inversePoint(arr);\r\n        }\r\n        return toWorldMat.inversePoint(arr);\r\n    }\r\n\r\n    function sampleImage() {\r\n        return [1,1,1,1];\r\n    }\r\n\r\n\r\n    return function(elem){\r\n\r\n        var transformInterface;\r\n\r\n        function _registerMaskInterface(maskManager){\r\n            _thisLayerFunction.mask = new MaskManagerInterface(maskManager, elem);\r\n        }\r\n        function _registerEffectsInterface(effects){\r\n            _thisLayerFunction.effect = effects;\r\n        }\r\n\r\n        function _thisLayerFunction(name){\r\n            switch(name){\r\n                case \"ADBE Root Vectors Group\":\r\n                case \"Contents\":\r\n                case 2:\r\n                    return _thisLayerFunction.shapeInterface;\r\n                case 1:\r\n                case 6:\r\n                case \"Transform\":\r\n                case \"transform\":\r\n                case \"ADBE Transform Group\":\r\n                    return transformInterface;\r\n                case 4:\r\n                case \"ADBE Effect Parade\":\r\n                    return _thisLayerFunction.effect;\r\n            }\r\n        }\r\n        _thisLayerFunction.toWorld = toWorld;\r\n        _thisLayerFunction.fromWorld = fromWorld;\r\n        _thisLayerFunction.toComp = toWorld;\r\n        _thisLayerFunction.fromComp = fromComp;\r\n        _thisLayerFunction.sampleImage = sampleImage;\r\n        _thisLayerFunction.sourceRectAtTime = elem.sourceRectAtTime.bind(elem);\r\n        _thisLayerFunction._elem = elem;\r\n        transformInterface = TransformExpressionInterface(elem.finalTransform.mProp);\r\n        var anchorPointDescriptor = getDescriptor(transformInterface, 'anchorPoint');\r\n        Object.defineProperties(_thisLayerFunction,{\r\n            hasParent: {\r\n                get: function(){\r\n                    return elem.hierarchy.length;\r\n                }\r\n            },\r\n            parent: {\r\n                get: function(){\r\n                    return elem.hierarchy[0].layerInterface;\r\n                }\r\n            },\r\n            rotation: getDescriptor(transformInterface, 'rotation'),\r\n            scale: getDescriptor(transformInterface, 'scale'),\r\n            position: getDescriptor(transformInterface, 'position'),\r\n            opacity: getDescriptor(transformInterface, 'opacity'),\r\n            anchorPoint: anchorPointDescriptor,\r\n            anchor_point: anchorPointDescriptor,\r\n            transform: {\r\n                get: function () {\r\n                    return transformInterface;\r\n                }\r\n            },\r\n            active: {\r\n                get: function(){\r\n                    return elem.isInRange;\r\n                }\r\n            }\r\n        });\r\n\r\n        _thisLayerFunction.startTime = elem.data.st;\r\n        _thisLayerFunction.index = elem.data.ind;\r\n        _thisLayerFunction.source = elem.data.refId;\r\n        _thisLayerFunction.height = elem.data.ty === 0 ? elem.data.h : 100;\r\n        _thisLayerFunction.width = elem.data.ty === 0 ? elem.data.w : 100;\r\n        _thisLayerFunction.inPoint = elem.data.ip/elem.comp.globalData.frameRate;\r\n        _thisLayerFunction.outPoint = elem.data.op/elem.comp.globalData.frameRate;\r\n        _thisLayerFunction._name = elem.data.nm;\r\n\r\n        _thisLayerFunction.registerMaskInterface = _registerMaskInterface;\r\n        _thisLayerFunction.registerEffectsInterface = _registerEffectsInterface;\r\n        return _thisLayerFunction;\r\n    };\r\n}());\r\n\nvar CompExpressionInterface = (function (){\r\n    return function(comp){\r\n        function _thisLayerFunction(name){\r\n            var i=0, len = comp.layers.length;\r\n            while(i<len){\r\n                if(comp.layers[i].nm === name || comp.layers[i].ind === name){\r\n                    return comp.elements[i].layerInterface;\r\n                }\r\n                i += 1;\r\n            }\r\n            return null;\r\n            //return {active:false};\r\n        }\r\n        Object.defineProperty(_thisLayerFunction, \"_name\", { value:comp.data.nm });\r\n        _thisLayerFunction.layer = _thisLayerFunction;\r\n        _thisLayerFunction.pixelAspect = 1;\r\n        _thisLayerFunction.height = comp.globalData.compSize.h;\r\n        _thisLayerFunction.width = comp.globalData.compSize.w;\r\n        _thisLayerFunction.pixelAspect = 1;\r\n        _thisLayerFunction.frameDuration = 1/comp.globalData.frameRate;\r\n        return _thisLayerFunction;\r\n    };\r\n}());\nvar TransformExpressionInterface = (function (){\r\n    return function(transform){\r\n        function _thisFunction(name){\r\n            switch(name){\r\n                case \"scale\":\r\n                case \"Scale\":\r\n                case \"ADBE Scale\":\r\n                case 6:\r\n                    return _thisFunction.scale;\r\n                case \"rotation\":\r\n                case \"Rotation\":\r\n                case \"ADBE Rotation\":\r\n                case \"ADBE Rotate Z\":\r\n                case 10:\r\n                    return _thisFunction.rotation;\r\n                case \"ADBE Rotate X\":\r\n                    return _thisFunction.xRotation;\r\n                case \"ADBE Rotate Y\":\r\n                    return _thisFunction.yRotation;\r\n                case \"position\":\r\n                case \"Position\":\r\n                case \"ADBE Position\":\r\n                case 2:\r\n                    return _thisFunction.position;\r\n                case 'ADBE Position_0':\r\n                    return _thisFunction.xPosition;\r\n                case 'ADBE Position_1':\r\n                    return _thisFunction.yPosition;\r\n                case 'ADBE Position_2':\r\n                    return _thisFunction.zPosition;\r\n                case \"anchorPoint\":\r\n                case \"AnchorPoint\":\r\n                case \"Anchor Point\":\r\n                case \"ADBE AnchorPoint\":\r\n                case 1:\r\n                    return _thisFunction.anchorPoint;\r\n                case \"opacity\":\r\n                case \"Opacity\":\r\n                case 11:\r\n                    return _thisFunction.opacity;\r\n            }\r\n        }\r\n\r\n        Object.defineProperty(_thisFunction, \"rotation\", {\r\n            get: function(){\r\n                if(transform.r) {\r\n                    return ExpressionValue(transform.r, 1/degToRads);\r\n                } else {\r\n                    return ExpressionValue(transform.rz, 1/degToRads);\r\n                }\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"xRotation\", {\r\n            get: function(){\r\n                    return ExpressionValue(transform.rx, 1/degToRads);\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"yRotation\", {\r\n            get: function(){\r\n                    return ExpressionValue(transform.ry, 1/degToRads);\r\n            }\r\n        });\r\n        Object.defineProperty(_thisFunction, \"scale\", {\r\n            get: function () {\r\n                return ExpressionValue(transform.s, 100);\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"position\", {\r\n            get: function () {\r\n                if(transform.p) {\r\n                    return ExpressionValue(transform.p);\r\n                } else {\r\n                    return [transform.px.v, transform.py.v, transform.pz ? transform.pz.v : 0];\r\n                }\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"xPosition\", {\r\n            get: function () {\r\n                return ExpressionValue(transform.px);\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"yPosition\", {\r\n            get: function () {\r\n                return ExpressionValue(transform.py);\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"zPosition\", {\r\n            get: function () {\r\n                return ExpressionValue(transform.pz);\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"anchorPoint\", {\r\n            get: function () {\r\n                return ExpressionValue(transform.a);\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"opacity\", {\r\n            get: function () {\r\n                return ExpressionValue(transform.o, 100);\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"skew\", {\r\n            get: function () {\r\n                return ExpressionValue(transform.sk);\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"skewAxis\", {\r\n            get: function () {\r\n                return ExpressionValue(transform.sa);\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"orientation\", {\r\n            get: function () {\r\n                return ExpressionValue(transform.or);\r\n            }\r\n        });\r\n\r\n        return _thisFunction;\r\n    };\r\n}());\nvar ProjectInterface = (function (){\r\n\r\n    function registerComposition(comp){\r\n        this.compositions.push(comp);\r\n    }\r\n\r\n    return function(){\r\n        function _thisProjectFunction(name){\r\n            var i = 0, len = this.compositions.length;\r\n            while(i<len){\r\n                if(this.compositions[i].data && this.compositions[i].data.nm === name){\r\n                    if(this.compositions[i].prepareFrame && this.compositions[i].data.xt) {\r\n                        this.compositions[i].prepareFrame(this.currentFrame);\r\n                    }\r\n                    return this.compositions[i].compInterface;\r\n                }\r\n                i+=1;\r\n            }\r\n        }\r\n\r\n        _thisProjectFunction.compositions = [];\r\n        _thisProjectFunction.currentFrame = 0;\r\n\r\n        _thisProjectFunction.registerComposition = registerComposition;\r\n\r\n\r\n\r\n        return _thisProjectFunction;\r\n    };\r\n}());\nvar EffectsExpressionInterface = (function (){\r\n    var ob = {\r\n        createEffectsInterface: createEffectsInterface\r\n    };\r\n\r\n    function createEffectsInterface(elem, propertyGroup){\r\n        if(elem.effectsManager){\r\n\r\n            var effectElements = [];\r\n            var effectsData = elem.data.ef;\r\n            var i, len = elem.effectsManager.effectElements.length;\r\n            for(i=0;i<len;i+=1){\r\n                effectElements.push(createGroupInterface(effectsData[i],elem.effectsManager.effectElements[i],propertyGroup,elem));\r\n            }\r\n\r\n            return function(name){\r\n                var effects = elem.data.ef || [], i = 0, len = effects.length;\r\n                while(i<len) {\r\n                    if(name === effects[i].nm || name === effects[i].mn || name === effects[i].ix){\r\n                        return effectElements[i];\r\n                    }\r\n                    i += 1;\r\n                }\r\n            };\r\n        }\r\n    }\r\n\r\n    function createGroupInterface(data,elements, propertyGroup, elem){\r\n        var effectElements = [];\r\n        var i, len = data.ef.length;\r\n        for(i=0;i<len;i+=1){\r\n            if(data.ef[i].ty === 5){\r\n                effectElements.push(createGroupInterface(data.ef[i],elements.effectElements[i],elements.effectElements[i].propertyGroup, elem));\r\n            } else {\r\n                effectElements.push(createValueInterface(elements.effectElements[i],data.ef[i].ty, elem, _propertyGroup));\r\n            }\r\n        }\r\n\r\n        function _propertyGroup(val) {\r\n            if(val === 1){\r\n               return groupInterface;\r\n            } else{\r\n               return propertyGroup(val-1);\r\n            }\r\n        }\r\n\r\n        var groupInterface = function(name){\r\n            var effects = data.ef, i = 0, len = effects.length;\r\n            while(i<len) {\r\n                if(name === effects[i].nm || name === effects[i].mn || name === effects[i].ix){\r\n                    if(effects[i].ty === 5){\r\n                        return effectElements[i];\r\n                    } else {\r\n                        return effectElements[i]();\r\n                    }\r\n                }\r\n                i += 1;\r\n            }\r\n            return effectElements[0]();\r\n        };\r\n\r\n        groupInterface.propertyGroup = _propertyGroup;\r\n\r\n        if(data.mn === 'ADBE Color Control'){\r\n            Object.defineProperty(groupInterface, 'color', {\r\n                get: function(){\r\n                    return effectElements[0]();\r\n                }\r\n            });\r\n        }\r\n        Object.defineProperty(groupInterface, 'numProperties', {\r\n            get: function(){\r\n                return data.np;\r\n            }\r\n        });\r\n        groupInterface.active = data.en !== 0;\r\n        return groupInterface;\r\n    }\r\n\r\n    function createValueInterface(element, type, elem, propertyGroup){\r\n        function interfaceFunction(){\r\n            if(type === 10){\r\n                return elem.comp.compInterface(element.p.v);\r\n            }\r\n            return ExpressionValue(element.p);\r\n        }\r\n\r\n        if(element.p.setGroupProperty) {\r\n            element.p.setGroupProperty(propertyGroup);\r\n        }\r\n\r\n        return interfaceFunction;\r\n    }\r\n\r\n    return ob;\r\n\r\n}());\nvar MaskManagerInterface = (function(){\r\n\r\n\tfunction MaskInterface(mask, data){\r\n\t\tthis._mask = mask;\r\n\t\tthis._data = data;\r\n\t}\r\n\tObject.defineProperty(MaskInterface.prototype, 'maskPath', {\r\n        get: function(){\r\n                if(this._mask.prop.k){\r\n                    this._mask.prop.getValue();\r\n                }\r\n                return this._mask.prop;\r\n            }\r\n        });\r\n\r\n\tvar MaskManager = function(maskManager, elem){\r\n\t\tvar _maskManager = maskManager;\r\n\t\tvar _elem = elem;\r\n\t\tvar _masksInterfaces = createSizedArray(maskManager.viewData.length);\r\n\t\tvar i, len = maskManager.viewData.length;\r\n\t\tfor(i = 0; i < len; i += 1) {\r\n\t\t\t_masksInterfaces[i] = new MaskInterface(maskManager.viewData[i], maskManager.masksProperties[i]);\r\n\t\t}\r\n\r\n\t\tvar maskFunction = function(name){\r\n\t\t\ti = 0;\r\n\t\t    while(i<len){\r\n\t\t        if(maskManager.masksProperties[i].nm === name){\r\n\t\t            return _masksInterfaces[i];\r\n\t\t        }\r\n\t\t        i += 1;\r\n\t\t    }\r\n\t\t};\r\n\t\treturn maskFunction;\r\n\t};\r\n\treturn MaskManager;\r\n}());\r\n\nvar ExpressionValue = (function() {\r\n\treturn function(elementProp, mult, type) {\r\n        mult = mult || 1;\r\n        var expressionValue, arrayValue;\r\n\r\n\t\tif (elementProp.k) {\r\n            elementProp.getValue();\r\n        }\r\n        var i, len, arrValue, val;\r\n        if (type) {\r\n        \tif(type === 'color') {\r\n        \t\tlen = 4;\r\n                expressionValue = createTypedArray('float32', len);\r\n                arrValue = createTypedArray('float32', len);\r\n\t\t        for (i = 0; i < len; i += 1) {\r\n\t\t            expressionValue[i] = arrValue[i] = (i < 3) ? elementProp.v[i] * mult : 1;\r\n\t\t        }\r\n\t        \texpressionValue.value = arrValue;\r\n        \t}\r\n        } else if (elementProp.propType === 'unidimensional'){\r\n            val = elementProp.v * mult;\r\n            expressionValue = new Number(val);\r\n            expressionValue.value = val;\r\n        } else {\r\n        \tlen = elementProp.pv.length;\r\n            expressionValue = createTypedArray('float32', len);\r\n            arrValue = createTypedArray('float32', len);\r\n\t        for (i = 0; i < len; i += 1) {\r\n\t            expressionValue[i] = arrValue[i] = elementProp.v[i] * mult;\r\n\t        }\r\n\t        expressionValue.value = arrValue;\r\n        }\r\n        \r\n        expressionValue.numKeys = elementProp.keyframes ? elementProp.keyframes.length : 0;\r\n        expressionValue.key = function(pos) {\r\n            if (!expressionValue.numKeys) {\r\n                return 0;\r\n            } else {\r\n                return elementProp.keyframes[pos-1].t;\r\n            }\r\n        };\r\n        expressionValue.valueAtTime = elementProp.getValueAtTime;\r\n        expressionValue.speedAtTime = elementProp.getSpeedAtTime;\r\n        expressionValue.velocityAtTime = elementProp.getVelocityAtTime;\r\n        expressionValue.propertyGroup = elementProp.propertyGroup;\r\n        return expressionValue;\r\n\t};\r\n}());\nfunction SliderEffect(data,elem, container){\r\n    this.p = PropertyFactory.getProp(elem,data.v,0,0,container);\r\n}\r\nfunction AngleEffect(data,elem, container){\r\n    this.p = PropertyFactory.getProp(elem,data.v,0,0,container);\r\n}\r\nfunction ColorEffect(data,elem, container){\r\n    this.p = PropertyFactory.getProp(elem,data.v,1,0,container);\r\n}\r\nfunction PointEffect(data,elem, container){\r\n    this.p = PropertyFactory.getProp(elem,data.v,1,0,container);\r\n}\r\nfunction LayerIndexEffect(data,elem, container){\r\n    this.p = PropertyFactory.getProp(elem,data.v,0,0,container);\r\n}\r\nfunction MaskIndexEffect(data,elem, container){\r\n    this.p = PropertyFactory.getProp(elem,data.v,0,0,container);\r\n}\r\nfunction CheckboxEffect(data,elem, container){\r\n    this.p = PropertyFactory.getProp(elem,data.v,0,0,container);\r\n}\r\nfunction NoValueEffect(){\r\n    this.p = {};\r\n}\nfunction EffectsManager(data,element){\r\n    var effects = data.ef || [];\r\n    this.effectElements = [];\r\n    var i,len = effects.length;\r\n    var effectItem;\r\n    for(i=0;i<len;i++) {\r\n        effectItem = new GroupEffect(effects[i],element);\r\n        this.effectElements.push(effectItem);\r\n    }\r\n}\r\n\r\nfunction GroupEffect(data,element){\r\n    this.init(data,element);\r\n}\r\n\r\nextendPrototype([DynamicPropertyContainer], GroupEffect);\r\n\r\nGroupEffect.prototype.getValue = GroupEffect.prototype.iterateDynamicProperties;\r\n\r\nGroupEffect.prototype.init = function(data,element){\r\n    this.data = data;\r\n    this.effectElements = [];\r\n    this.initDynamicPropertyContainer(element);\r\n    var i, len = this.data.ef.length;\r\n    var eff, effects = this.data.ef;\r\n    for(i=0;i<len;i+=1){\r\n        eff = null;\r\n        switch(effects[i].ty){\r\n            case 0:\r\n                eff = new SliderEffect(effects[i],element,this);\r\n                break;\r\n            case 1:\r\n                eff = new AngleEffect(effects[i],element,this);\r\n                break;\r\n            case 2:\r\n                eff = new ColorEffect(effects[i],element,this);\r\n                break;\r\n            case 3:\r\n                eff = new PointEffect(effects[i],element,this);\r\n                break;\r\n            case 4:\r\n            case 7:\r\n                eff = new CheckboxEffect(effects[i],element,this);\r\n                break;\r\n            case 10:\r\n                eff = new LayerIndexEffect(effects[i],element,this);\r\n                break;\r\n            case 11:\r\n                eff = new MaskIndexEffect(effects[i],element,this);\r\n                break;\r\n            case 5:\r\n                eff = new EffectsManager(effects[i],element,this);\r\n                break;\r\n            //case 6:\r\n            default:\r\n                eff = new NoValueEffect(effects[i],element,this);\r\n                break;\r\n        }\r\n        if(eff) {\r\n            this.effectElements.push(eff);\r\n        }\r\n    }\r\n};\r\n    var lottiejs = {};\r\n\r\n    var _isFrozen = false;\r\n\r\n    function setLocationHref (href) {\r\n        locationHref = href;\r\n    }\r\n\r\n    function searchAnimations() {\r\n        if (standalone === true) {\r\n            animationManager.searchAnimations(animationData, standalone, renderer);\r\n        } else {\r\n            animationManager.searchAnimations();\r\n        }\r\n    }\r\n\r\n    function setSubframeRendering(flag) {\r\n        subframeEnabled = flag;\r\n    }\r\n\r\n    function loadAnimation(params) {\r\n        if (standalone === true) {\r\n            params.animationData = JSON.parse(animationData);\r\n        }\r\n        return animationManager.loadAnimation(params);\r\n    }\r\n\r\n    function setQuality(value) {\r\n        if (typeof value === 'string') {\r\n            switch (value) {\r\n                case 'high':\r\n                    defaultCurveSegments = 200;\r\n                    break;\r\n                case 'medium':\r\n                    defaultCurveSegments = 50;\r\n                    break;\r\n                case 'low':\r\n                    defaultCurveSegments = 10;\r\n                    break;\r\n            }\r\n        } else if (!isNaN(value) && value > 1) {\r\n            defaultCurveSegments = value;\r\n        }\r\n        if (defaultCurveSegments >= 50) {\r\n            roundValues(false);\r\n        } else {\r\n            roundValues(true);\r\n        }\r\n    }\r\n\r\n    function inBrowser() {\r\n        return typeof navigator !== 'undefined';\r\n    }\r\n\r\n    function installPlugin(type, plugin) {\r\n        if (type === 'expressions') {\r\n            expressionsPlugin = plugin;\r\n        }\r\n    }\r\n\r\n    function getFactory(name) {\r\n        switch (name) {\r\n            case \"propertyFactory\":\r\n                return PropertyFactory;\r\n            case \"shapePropertyFactory\":\r\n                return ShapePropertyFactory;\r\n            case \"matrix\":\r\n                return Matrix;\r\n        }\r\n    }\r\n\r\n    lottiejs.play = animationManager.play;\r\n    lottiejs.pause = animationManager.pause;\r\n    lottiejs.setLocationHref = setLocationHref;\r\n    lottiejs.togglePause = animationManager.togglePause;\r\n    lottiejs.setSpeed = animationManager.setSpeed;\r\n    lottiejs.setDirection = animationManager.setDirection;\r\n    lottiejs.stop = animationManager.stop;\r\n    lottiejs.searchAnimations = searchAnimations;\r\n    lottiejs.registerAnimation = animationManager.registerAnimation;\r\n    lottiejs.loadAnimation = loadAnimation;\r\n    lottiejs.setSubframeRendering = setSubframeRendering;\r\n    lottiejs.resize = animationManager.resize;\r\n    //lottiejs.start = start;\r\n    lottiejs.goToAndStop = animationManager.goToAndStop;\r\n    lottiejs.destroy = animationManager.destroy;\r\n    lottiejs.setQuality = setQuality;\r\n    lottiejs.inBrowser = inBrowser;\r\n    lottiejs.installPlugin = installPlugin;\r\n    lottiejs.freeze = animationManager.freeze;\r\n    lottiejs.unfreeze = animationManager.unfreeze;\r\n    lottiejs.getRegisteredAnimations = animationManager.getRegisteredAnimations;\r\n    lottiejs.__getFactory = getFactory;\r\n    lottiejs.version = '5.2.1';\r\n\r\n    function checkReady() {\r\n        if (document.readyState === \"complete\") {\r\n            clearInterval(readyStateCheckInterval);\r\n            searchAnimations();\r\n        }\r\n    }\r\n\r\n    function getQueryVariable(variable) {\r\n        var vars = queryString.split('&');\r\n        for (var i = 0; i < vars.length; i++) {\r\n            var pair = vars[i].split('=');\r\n            if (decodeURIComponent(pair[0]) == variable) {\r\n                return decodeURIComponent(pair[1]);\r\n            }\r\n        }\r\n    }\r\n    var standalone = '__[STANDALONE]__';\r\n    var animationData = '__[ANIMATIONDATA]__';\r\n    var renderer = '';\r\n    if (standalone) {\r\n        var scripts = document.getElementsByTagName('script');\r\n        var index = scripts.length - 1;\r\n        var myScript = scripts[index] || {\r\n            src: ''\r\n        };\r\n        var queryString = myScript.src.replace(/^[^\\?]+\\??/, '');\r\n        renderer = getQueryVariable('renderer');\r\n    }\r\n    var readyStateCheckInterval = setInterval(checkReady, 100);\r\n    return lottiejs;\r\n}));\r","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar numberTag = '[object Number]';\n\n/**\n * Checks if `value` is classified as a `Number` primitive or object.\n *\n * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are\n * classified as numbers, use the `_.isFinite` method.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a number, else `false`.\n * @example\n *\n * _.isNumber(3);\n * // => true\n *\n * _.isNumber(Number.MIN_VALUE);\n * // => true\n *\n * _.isNumber(Infinity);\n * // => true\n *\n * _.isNumber('3');\n * // => false\n */\nfunction isNumber(value) {\n  return typeof value == 'number' ||\n    (isObjectLike(value) && baseGetTag(value) == numberTag);\n}\n\nmodule.exports = isNumber;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","var baseGetTag = require('./_baseGetTag'),\n    isArray = require('./isArray'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar stringTag = '[object String]';\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a string, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' ||\n    (!isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag);\n}\n\nmodule.exports = isString;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]';\n\n/**\n * Checks if `value` is classified as a boolean primitive or object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a boolean, else `false`.\n * @example\n *\n * _.isBoolean(false);\n * // => true\n *\n * _.isBoolean(null);\n * // => false\n */\nfunction isBoolean(value) {\n  return value === true || value === false ||\n    (isObjectLike(value) && baseGetTag(value) == boolTag);\n}\n\nmodule.exports = isBoolean;\n","/**\n * Checks `value` to determine whether a default value should be returned in\n * its place. The `defaultValue` is returned if `value` is `NaN`, `null`,\n * or `undefined`.\n *\n * @static\n * @memberOf _\n * @since 4.14.0\n * @category Util\n * @param {*} value The value to check.\n * @param {*} defaultValue The default value.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * _.defaultTo(1, 10);\n * // => 1\n *\n * _.defaultTo(undefined, 10);\n * // => 10\n */\nfunction defaultTo(value, defaultValue) {\n  return (value == null || value !== value) ? defaultValue : value;\n}\n\nmodule.exports = defaultTo;\n","/**\n * Checks if `value` is `undefined`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.\n * @example\n *\n * _.isUndefined(void 0);\n * // => true\n *\n * _.isUndefined(null);\n * // => false\n */\nfunction isUndefined(value) {\n  return value === undefined;\n}\n\nmodule.exports = isUndefined;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nmodule.exports = listCacheClear;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","var eq = require('./eq');\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nmodule.exports = listCacheDelete;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nmodule.exports = listCacheGet;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nmodule.exports = listCacheHas;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nmodule.exports = listCacheSet;\n","var listCacheClear = require('./_listCacheClear'),\n    listCacheDelete = require('./_listCacheDelete'),\n    listCacheGet = require('./_listCacheGet'),\n    listCacheHas = require('./_listCacheHas'),\n    listCacheSet = require('./_listCacheSet');\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nmodule.exports = ListCache;\n","var ListCache = require('./_ListCache');\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nmodule.exports = stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nmodule.exports = stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nmodule.exports = stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nmodule.exports = stackHas;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n","var getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n","var nativeCreate = require('./_nativeCreate');\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nmodule.exports = hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = hashDelete;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nmodule.exports = hashGet;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nmodule.exports = hashHas;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nmodule.exports = hashSet;\n","var hashClear = require('./_hashClear'),\n    hashDelete = require('./_hashDelete'),\n    hashGet = require('./_hashGet'),\n    hashHas = require('./_hashHas'),\n    hashSet = require('./_hashSet');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nmodule.exports = Hash;\n","var Hash = require('./_Hash'),\n    ListCache = require('./_ListCache'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapCacheClear;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nmodule.exports = isKeyable;\n","var isKeyable = require('./_isKeyable');\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nmodule.exports = getMapData;\n","var getMapData = require('./_getMapData');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = mapCacheDelete;\n","var getMapData = require('./_getMapData');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nmodule.exports = mapCacheGet;\n","var getMapData = require('./_getMapData');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nmodule.exports = mapCacheHas;\n","var getMapData = require('./_getMapData');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nmodule.exports = mapCacheSet;\n","var mapCacheClear = require('./_mapCacheClear'),\n    mapCacheDelete = require('./_mapCacheDelete'),\n    mapCacheGet = require('./_mapCacheGet'),\n    mapCacheHas = require('./_mapCacheHas'),\n    mapCacheSet = require('./_mapCacheSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nmodule.exports = MapCache;\n","var ListCache = require('./_ListCache'),\n    Map = require('./_Map'),\n    MapCache = require('./_MapCache');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nmodule.exports = stackSet;\n","var ListCache = require('./_ListCache'),\n    stackClear = require('./_stackClear'),\n    stackDelete = require('./_stackDelete'),\n    stackGet = require('./_stackGet'),\n    stackHas = require('./_stackHas'),\n    stackSet = require('./_stackSet');\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nmodule.exports = Stack;\n","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nmodule.exports = setCacheAdd;\n","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nmodule.exports = setCacheHas;\n","var MapCache = require('./_MapCache'),\n    setCacheAdd = require('./_setCacheAdd'),\n    setCacheHas = require('./_setCacheHas');\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nmodule.exports = SetCache;\n","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arraySome;\n","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nmodule.exports = cacheHas;\n","var SetCache = require('./_SetCache'),\n    arraySome = require('./_arraySome'),\n    cacheHas = require('./_cacheHas');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalArrays;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nmodule.exports = Uint8Array;\n","/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nmodule.exports = mapToArray;\n","/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nmodule.exports = setToArray;\n","var Symbol = require('./_Symbol'),\n    Uint8Array = require('./_Uint8Array'),\n    eq = require('./eq'),\n    equalArrays = require('./_equalArrays'),\n    mapToArray = require('./_mapToArray'),\n    setToArray = require('./_setToArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nmodule.exports = equalByTag;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n","var arrayPush = require('./_arrayPush'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nmodule.exports = baseGetAllKeys;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayFilter;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nmodule.exports = stubArray;\n","var arrayFilter = require('./_arrayFilter'),\n    stubArray = require('./stubArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nmodule.exports = getSymbols;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n","var root = require('./_root'),\n    stubFalse = require('./stubFalse');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nmodule.exports = isBuffer;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","var baseGetTag = require('./_baseGetTag'),\n    isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nmodule.exports = baseIsTypedArray;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n","var baseIsTypedArray = require('./_baseIsTypedArray'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nmodule.exports = isTypedArray;\n","var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isIndex = require('./_isIndex'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayLikeKeys;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n","var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n","var isPrototype = require('./_isPrototype'),\n    nativeKeys = require('./_nativeKeys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeys;\n","var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeys = require('./_baseKeys'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = keys;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbols = require('./_getSymbols'),\n    keys = require('./keys');\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nmodule.exports = getAllKeys;\n","var getAllKeys = require('./_getAllKeys');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalObjects;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nmodule.exports = DataView;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nmodule.exports = Promise;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nmodule.exports = WeakMap;\n","var DataView = require('./_DataView'),\n    Map = require('./_Map'),\n    Promise = require('./_Promise'),\n    Set = require('./_Set'),\n    WeakMap = require('./_WeakMap'),\n    baseGetTag = require('./_baseGetTag'),\n    toSource = require('./_toSource');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nmodule.exports = getTag;\n","var Stack = require('./_Stack'),\n    equalArrays = require('./_equalArrays'),\n    equalByTag = require('./_equalByTag'),\n    equalObjects = require('./_equalObjects'),\n    getTag = require('./_getTag'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nmodule.exports = baseIsEqualDeep;\n","var baseIsEqualDeep = require('./_baseIsEqualDeep'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nmodule.exports = baseIsEqual;\n","var Stack = require('./_Stack'),\n    baseIsEqual = require('./_baseIsEqual');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack;\n      if (customizer) {\n        var result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nmodule.exports = baseIsMatch;\n","var isObject = require('./isObject');\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\nmodule.exports = isStrictComparable;\n","var isStrictComparable = require('./_isStrictComparable'),\n    keys = require('./keys');\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = keys(object),\n      length = result.length;\n\n  while (length--) {\n    var key = result[length],\n        value = object[key];\n\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\n\nmodule.exports = getMatchData;\n","/**\n * A specialized version of `matchesProperty` for source values suitable\n * for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction matchesStrictComparable(key, srcValue) {\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue &&\n      (srcValue !== undefined || (key in Object(object)));\n  };\n}\n\nmodule.exports = matchesStrictComparable;\n","var baseIsMatch = require('./_baseIsMatch'),\n    getMatchData = require('./_getMatchData'),\n    matchesStrictComparable = require('./_matchesStrictComparable');\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\nmodule.exports = baseMatches;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nmodule.exports = isKey;\n","var MapCache = require('./_MapCache');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nmodule.exports = memoize;\n","var memoize = require('./memoize');\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nmodule.exports = memoizeCapped;\n","var memoizeCapped = require('./_memoizeCapped');\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nmodule.exports = stringToPath;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","var Symbol = require('./_Symbol'),\n    arrayMap = require('./_arrayMap'),\n    isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = baseToString;\n","var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n","var isArray = require('./isArray'),\n    isKey = require('./_isKey'),\n    stringToPath = require('./_stringToPath'),\n    toString = require('./toString');\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nmodule.exports = castPath;\n","var isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = toKey;\n","var castPath = require('./_castPath'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nmodule.exports = baseGet;\n","var baseGet = require('./_baseGet');\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n","/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\nmodule.exports = baseHasIn;\n","var castPath = require('./_castPath'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isIndex = require('./_isIndex'),\n    isLength = require('./isLength'),\n    toKey = require('./_toKey');\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      result = false;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\nmodule.exports = hasPath;\n","var baseHasIn = require('./_baseHasIn'),\n    hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\nmodule.exports = hasIn;\n","var baseIsEqual = require('./_baseIsEqual'),\n    get = require('./get'),\n    hasIn = require('./hasIn'),\n    isKey = require('./_isKey'),\n    isStrictComparable = require('./_isStrictComparable'),\n    matchesStrictComparable = require('./_matchesStrictComparable'),\n    toKey = require('./_toKey');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n  };\n}\n\nmodule.exports = baseMatchesProperty;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n","/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nmodule.exports = baseProperty;\n","var baseGet = require('./_baseGet');\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\nmodule.exports = basePropertyDeep;\n","var baseProperty = require('./_baseProperty'),\n    basePropertyDeep = require('./_basePropertyDeep'),\n    isKey = require('./_isKey'),\n    toKey = require('./_toKey');\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': 2 } },\n *   { 'a': { 'b': 1 } }\n * ];\n *\n * _.map(objects, _.property('a.b'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\n\nmodule.exports = property;\n","var baseMatches = require('./_baseMatches'),\n    baseMatchesProperty = require('./_baseMatchesProperty'),\n    identity = require('./identity'),\n    isArray = require('./isArray'),\n    property = require('./property');\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (typeof value == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\nmodule.exports = baseIteratee;\n","var baseIteratee = require('./_baseIteratee'),\n    isArrayLike = require('./isArrayLike'),\n    keys = require('./keys');\n\n/**\n * Creates a `_.find` or `_.findLast` function.\n *\n * @private\n * @param {Function} findIndexFunc The function to find the collection index.\n * @returns {Function} Returns the new find function.\n */\nfunction createFind(findIndexFunc) {\n  return function(collection, predicate, fromIndex) {\n    var iterable = Object(collection);\n    if (!isArrayLike(collection)) {\n      var iteratee = baseIteratee(predicate, 3);\n      collection = keys(collection);\n      predicate = function(key) { return iteratee(iterable[key], key, iterable); };\n    }\n    var index = findIndexFunc(collection, predicate, fromIndex);\n    return index > -1 ? iterable[iteratee ? collection[index] : index] : undefined;\n  };\n}\n\nmodule.exports = createFind;\n","/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = baseFindIndex;\n","var isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var toNumber = require('./toNumber');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\nmodule.exports = toFinite;\n","var toFinite = require('./toFinite');\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\nmodule.exports = toInteger;\n","var baseFindIndex = require('./_baseFindIndex'),\n    baseIteratee = require('./_baseIteratee'),\n    toInteger = require('./toInteger');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * This method is like `_.find` except that it returns the index of the first\n * element `predicate` returns truthy for instead of the element itself.\n *\n * @static\n * @memberOf _\n * @since 1.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param {number} [fromIndex=0] The index to search from.\n * @returns {number} Returns the index of the found element, else `-1`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'active': false },\n *   { 'user': 'fred',    'active': false },\n *   { 'user': 'pebbles', 'active': true }\n * ];\n *\n * _.findIndex(users, function(o) { return o.user == 'barney'; });\n * // => 0\n *\n * // The `_.matches` iteratee shorthand.\n * _.findIndex(users, { 'user': 'fred', 'active': false });\n * // => 1\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.findIndex(users, ['active', false]);\n * // => 0\n *\n * // The `_.property` iteratee shorthand.\n * _.findIndex(users, 'active');\n * // => 2\n */\nfunction findIndex(array, predicate, fromIndex) {\n  var length = array == null ? 0 : array.length;\n  if (!length) {\n    return -1;\n  }\n  var index = fromIndex == null ? 0 : toInteger(fromIndex);\n  if (index < 0) {\n    index = nativeMax(length + index, 0);\n  }\n  return baseFindIndex(array, baseIteratee(predicate, 3), index);\n}\n\nmodule.exports = findIndex;\n","var createFind = require('./_createFind'),\n    findIndex = require('./findIndex');\n\n/**\n * Iterates over elements of `collection`, returning the first element\n * `predicate` returns truthy for. The predicate is invoked with three\n * arguments: (value, index|key, collection).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to inspect.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param {number} [fromIndex=0] The index to search from.\n * @returns {*} Returns the matched element, else `undefined`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'age': 36, 'active': true },\n *   { 'user': 'fred',    'age': 40, 'active': false },\n *   { 'user': 'pebbles', 'age': 1,  'active': true }\n * ];\n *\n * _.find(users, function(o) { return o.age < 40; });\n * // => object for 'barney'\n *\n * // The `_.matches` iteratee shorthand.\n * _.find(users, { 'age': 1, 'active': true });\n * // => object for 'pebbles'\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.find(users, ['active', false]);\n * // => object for 'fred'\n *\n * // The `_.property` iteratee shorthand.\n * _.find(users, 'active');\n * // => object for 'barney'\n */\nvar find = createFind(findIndex);\n\nmodule.exports = find;\n","export class Event {\r\n  constructor() {\r\n    this.bindings = {};\r\n  }\r\n\r\n  on(event, handler, once = false) {\r\n    var e = this.bindings[event];\r\n    var h = {\r\n      handler,\r\n      once\r\n    };\r\n    var index;\r\n\r\n    if (typeof e === 'undefined') {\r\n      this.bindings[event] = [ h ];\r\n    } else {\r\n      index = this.bindings[event].findIndex(el => handler.toString() === el.handler.toString());\r\n      if (index === -1) {\r\n        e.push(h);\r\n      }\r\n    }\r\n  }\r\n\r\n  off(event, handler = null) {\r\n    var index;\r\n\r\n    if (handler === null) {\r\n      delete this.bindings[event];\r\n    } else {\r\n      index = this.bindings[event].findIndex(el => handler.toString() === el.handler.toString());\r\n      this.bindings[event].splice(index, 1);\r\n    }\r\n  }\r\n\r\n  trigger(event, params) {\r\n    var e = this.bindings[event];\r\n\r\n    if (typeof e !== 'undefined') {\r\n      e.forEach(el => {\r\n        el.handler(params);\r\n        if (el.once) {\r\n          this.off(event, el.handler);\r\n        }\r\n      });\r\n    }\r\n  }\r\n}","import bodymovin from 'lottie-web';\r\nimport isNumber from 'lodash/isnumber';\r\nimport isString from 'lodash/isstring';\r\nimport isBoolean from 'lodash/isboolean';\r\nimport defaultTo from 'lodash/defaultto';\r\nimport isUndefined from 'lodash/isundefined';\r\nimport find from 'lodash/find';\r\nimport { Event } from './event';\r\n\r\n/* eslint-disable */\r\nif (!Array.prototype.findIndex) {\r\n  Array.prototype.findIndex = function (predicate) {\r\n    if (this === null) {\r\n      throw new TypeError('Array.prototype.findIndex called on null or undefined');\r\n    }\r\n    if (typeof predicate !== 'function') {\r\n      throw new TypeError('predicate must be a function');\r\n    }\r\n    var list = Object(this);\r\n    var length = list.length >>> 0;\r\n    var thisArg = arguments[1];\r\n    var value;\r\n\r\n    for (var i = 0; i < length; i++) {\r\n      value = list[i];\r\n      if (predicate.call(thisArg, value, i, list)) {\r\n        return i;\r\n      }\r\n    }\r\n    return -1;\r\n  };\r\n}\r\n/* eslint-enable */\r\n\r\n/**\r\n * A player to run lottie-web animations.\r\n *\r\n * @class Player\r\n * @extends {Event}\r\n */\r\nclass Player extends Event {\r\n  /**\r\n   * Creates an instance of Player.\r\n   * @param {Object} options Options. see README.md\r\n   * @memberof Player\r\n   */\r\n  constructor(options) {\r\n    var delay;\r\n\r\n    super();\r\n    this.options = options;\r\n    this.scenes = options.scenes;\r\n    this._el = typeof options.container === 'string' ? document.querySelector(options.container) : options.container;\r\n    if (isNumber(this.options.loop)) {\r\n      this.animationCount = 0;\r\n    }\r\n    this._index = 0;\r\n\r\n    this._el.classList.add('bm-player');\r\n\r\n    this._prepareScenes();\r\n\r\n    if (isBoolean(options.autoplay) && options.autoplay) {\r\n      this.play(this._index);\r\n    } else if (isNumber(options.autoplay)) { //\r\n      delay = Number(options.autoplay);\r\n      setTimeout(() => this.play(this._index), delay * 1000);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Plays a specific animation\r\n   *\r\n   * @param {String|Number} index Scene index or id.\r\n   * @returns {undefined}\r\n   * @memberof Player\r\n   */\r\n  play(index) {\r\n    var scene, anim, speed, reverse;\r\n\r\n\r\n    if (this.timer) { clearTimeout(this.timer); }\r\n\r\n    scene = this._getScene(index);\r\n\r\n    if (isUndefined(scene)) {\r\n      throw new Error(`Scene '${index}' undefined.`);\r\n    }\r\n\r\n    this._index = scene.index;\r\n\r\n    anim = scene.animation;\r\n    speed = defaultTo(scene.speed, 1);\r\n    reverse = defaultTo(scene.reverse, false);\r\n\r\n    if (this.actualScene) {\r\n      this.actualScene.container.classList.remove('active');\r\n      this.actualScene.animation.stop();\r\n\r\n      if (this.paused || this.playing) {\r\n        this._cleanSceneListeners(this.actualScene);\r\n      }\r\n    }\r\n\r\n    this.paused = false;\r\n    this.stopped = false;\r\n    this.playing = true;\r\n\r\n    scene.container.classList.add('active');\r\n    this.actualScene = scene;\r\n\r\n    anim.setSpeed(speed);\r\n    if (reverse) {\r\n      anim.goToAndStop(anim.totalFrames, true);\r\n      anim.setDirection(-1);\r\n    } else {\r\n      anim.goToAndStop(0, true);\r\n      anim.setDirection(1);\r\n    }\r\n\r\n    this._setFinishScenario(scene);\r\n\r\n    this.trigger('scene', scene);\r\n    scene.playing = true;\r\n    anim.play();\r\n  }\r\n\r\n  stop () {\r\n    if (!this.stopped && this.actualScene) {\r\n      if (this.timer) { clearTimeout(this.timer); }\r\n      this.stopped = true;\r\n      this._cleanSceneListeners(this.actualScene);\r\n      this.actualScene.container.classList.remove('active');\r\n      this.actualScene.animation.stop();\r\n      this._index = 0;\r\n      this.scenes[0].container.classList.add('active');\r\n    }\r\n  }\r\n\r\n  pause () {\r\n    if (!this.paused) {\r\n      this.actualScene.animation.pause();\r\n      this.paused = true;\r\n    } else {\r\n      this.actualScene.animation.play();\r\n      this.paused = false;\r\n    }\r\n  }\r\n\r\n  next() {\r\n    var scene = this.actualScene;\r\n\r\n    if (scene.loop && !isNumber(scene.loop)) {\r\n      this.trigger('sceneComplete', scene);\r\n    }\r\n\r\n    this.play(this._index + 1);\r\n  }\r\n\r\n  _cleanSceneListeners(scene) {\r\n    scene.listeners.forEach(fn => fn.call());\r\n  }\r\n  _setFinishScenario(scene) {\r\n    if (isBoolean(scene.loop) && !scene.loop) {\r\n      this._setEventListener(scene, 'complete', this._sceneFinishListener);\r\n    } else if (isNumber(scene.iterations)) {\r\n      this.counter = 0;\r\n      this._setEventListener(scene, 'loopComplete', this._loopIterationsListener);\r\n    } else if (isNumber(scene.duration)) {\r\n      this.timer = setTimeout(() => this._sceneFinish(scene), scene.duration * 1000);\r\n    } else {\r\n      this._setEventListener(scene, 'loopComplete', this._loopIterationsListener);\r\n    }\r\n  }\r\n\r\n  _loopIterationsListener () {\r\n    var scene = this.actualScene;\r\n\r\n    this.counter++;\r\n    this.trigger('loopComplete');\r\n    if (!isUndefined(scene.iterations)) {\r\n      if (this.counter >= scene.iterations) { this._sceneFinish(scene); }\r\n    }\r\n  }\r\n  _sceneFinishListener() {\r\n    this._sceneFinish(this.actualScene);\r\n  }\r\n\r\n  _hasMoreScenes(scene) {\r\n    return !isUndefined(this.scenes[scene.index + 1]);\r\n  }\r\n\r\n  _getScene(index) {\r\n    if (isString(index)) {\r\n      return this._getSceneFromId(index);\r\n    } else {\r\n      index = isNumber(index) ? index : 0;\r\n\r\n      if (index === 0) {\r\n        this.trigger('start');\r\n        this._el.classList.add('animation-playing');\r\n        this._el.classList.remove('animation-ended');\r\n      }\r\n\r\n      return  this.scenes[index];\r\n    }\r\n  }\r\n\r\n  _setEventListener(scene, evnt, fn) {\r\n    scene.listeners.push(scene.animation.addEventListener(evnt, fn.bind(this)));\r\n  }\r\n\r\n  _prepareScenes() {\r\n    // Prepare scenes\r\n    this.options.scenes.forEach((s, i) => {\r\n      var div = document.createElement('div');\r\n\r\n      div.classList.add('scene', `scene-${i}`, `scene-${s.id}`);\r\n      this._el.appendChild(div);\r\n      s.renderer = this.options.renderer || 'svg';\r\n      s.prerender = !!this.options.prerender;\r\n      s.container = div;\r\n      s.autoplay = false;\r\n      s.index = i;\r\n      s.player = this;\r\n      s.listeners = [];\r\n      if (isNumber(s.loop)) {\r\n        s.iterations = s.loop;\r\n        s.loop = true;\r\n      }\r\n\r\n      s.animation = bodymovin.loadAnimation(s);\r\n    });\r\n  }\r\n\r\n  _sceneFinish(scene) {\r\n    this._cleanSceneListeners(scene);\r\n    this.trigger('sceneComplete', scene);\r\n    scene.listeners = [];\r\n    scene.playing = false;\r\n    // scene.animation.stop();\r\n\r\n    if (this._hasMoreScenes(scene)) {\r\n      scene.container.classList.remove('active');\r\n      this.play(scene.index + 1);\r\n    } else if (isUndefined(this.options.loop) || (isBoolean(this.options.loop) && !this.options.loop)) {\r\n      this._complete();\r\n      if (this.options.chain instanceof Player) {\r\n        this.options.chain.play();\r\n      }\r\n    } else {\r\n      if (isNumber(this.animationCount)) {\r\n        if (this.animationCount === (this.options.loop - 1)) {\r\n          this._complete();\r\n          if (this.options.chain instanceof Player) {\r\n            this.options.chain.play();\r\n          }\r\n          return;\r\n        }\r\n        this.animationCount++;\r\n      }\r\n\r\n      this.play(0);\r\n    }\r\n  }\r\n\r\n  _complete() {\r\n    this.trigger('complete');\r\n    this.playing = false;\r\n    this._el.classList.remove('animation-playing');\r\n    this._el.classList.add('animation-ended');\r\n  }\r\n\r\n  _getSceneFromId(id) {\r\n    console.log('id =>', id);\r\n    return find(this.scenes, { id });\r\n  }\r\n}\r\n\r\n\r\nexport default Player;"],"names":["root","factory","navigator","window","svgNS","locationHref","initialDefaultFrame","subframeEnabled","expressionsPlugin","isSafari","test","userAgent","cachedColors","bm_rounder","Math","round","bm_rnd","bm_pow","pow","bm_sqrt","sqrt","bm_abs","abs","bm_floor","floor","bm_max","max","bm_min","min","blitter","BMMath","ProjectInterface","i","propertyNames","Object","getOwnPropertyNames","len","length","random","val","absArr","createSizedArray","defaultCurveSegments","degToRads","PI","roundCorner","roundValues","flag","styleDiv","element","style","position","top","left","display","transformOrigin","webkitTransformOrigin","backfaceVisibility","webkitBackfaceVisibility","transformStyle","webkitTransformStyle","mozTransformStyle","BMEnterFrameEvent","n","c","t","d","this","type","currentTime","totalTime","direction","BMCompleteEvent","BMCompleteLoopEvent","currentLoop","totalLoops","BMSegmentStartEvent","f","firstFrame","totalFrames","BMDestroyEvent","target","randomString","chars","undefined","result","HSVtoRGB","h","s","v","r","g","b","p","q","RGBtoHSV","addSaturationToRGB","color","offset","hsv","addBrightnessToRGB","addHueToRGB","rgbToHex","hex","colorMap","toString","BaseEvent","prototype","triggerEvent","eventName","args","_cbs","addEventListener","callback","push","removeEventListener","bind","splice","createTypedArray","Uint8ClampedArray","Float32Array","Int16Array","value","arr","Array","apply","createNS","document","createElementNS","createTag","createElement","DynamicPropertyContainer","addDynamicProperty","prop","dynamicProperties","indexOf","container","_isAnimated","iterateDynamicProperties","_mdf","getValue","initDynamicPropertyContainer","Matrix","_cos","cos","_sin","sin","_tan","tan","_rnd","reset","props","rotate","angle","mCos","mSin","_t","rotateX","rotateY","rotateZ","shear","sx","sy","skew","ax","ay","skewFromAxis","scale","sz","isNaN","setTransform","a","e","j","k","l","m","o","translate","tx","ty","tz","transform","a2","b2","c2","d2","e2","f2","g2","h2","i2","j2","k2","l2","m2","n2","o2","p2","_p","_identityCalculated","a1","b1","c1","d1","e1","f1","g1","h1","i1","j1","k1","l1","m1","n1","o1","p1","isIdentity","_identity","equals","matr","clone","cloneFromProps","applyToPoint","x","y","z","applyToX","applyToY","applyToZ","inversePoint","pt","determinant","inversePoints","pts","retPts","applyToTriplePoints","pt1","pt2","pt3","p0","p4","p5","p12","p13","applyToPointArray","applyToPointStringified","toCSS","cssValue","roundMatrixProperty","to2dCSS","pool","math","nodecrypto","global","width","chunks","rngname","startdenom","significance","overflow","mask","copy","S","slice","mixkey","seed","key","smear","stringseed","charCodeAt","tostring","String","fromCharCode","options","shortseed","flatten","obj","depth","typ","entropy","randomBytes","out","Uint8Array","crypto","msCrypto","getRandomValues","browser","plugins","Date","screen","autoseed","arc4","keylen","me","count","prng","int32","quick","double","pass","is_math_call","state","BezierFactory","ob","getBezierEasing","nm","str","replace","beziers","bezEasing","BezierEasing","NEWTON_ITERATIONS","SUBDIVISION_PRECISION","SUBDIVISION_MAX_ITERATIONS","kSplineTableSize","kSampleStepSize","float32ArraySupported","A","aA1","aA2","B","C","calcBezier","aT","getSlope","points","_mSampleValues","_precomputed","get","mX1","mY1","mX2","mY2","_precompute","_getTForX","_calcSampleValues","aX","mSampleValues","intervalStart","currentSample","lastSample","guessForT","initialSlope","aGuessT","currentSlope","newtonRaphsonIterate","aA","aB","currentX","currentT","binarySubdivide","extendPrototype","sources","destination","sourcePrototype","attr","hasOwnProperty","getDescriptor","object","getOwnPropertyDescriptor","createProxyFunction","ProxyFunction","bezFunction","pointOnLine2D","x1","y1","x2","y2","x3","y3","det1","getBezierLength","pt4","ptCoord","perc","ptDistance","curveSegments","addedLength","point","lastPoint","lengthData","bezier_length_pool","newElement","percents","lengths","PointData","partial","partialLength","storedData","buildBezierData","keyData","to","ti","bezierName","bezierData","segmentLength","getDistancePerc","initPos","lengthPos","lPerc","dir","bezier_segment_points","getSegmentsLength","shapeData","segmentsLength","segments_length_pool","closed","pathV","pathO","pathI","_length","totalLength","getNewSegment","startPerc","endPerc","t0","t1","u0","u1","u0u0u0","t0u0u0_3","t0t0u0_3","t0t0t0","u0u0u1","t0u0u1_3","t0t0u1_3","t0t0t1","u0u1u1","t0u1u1_3","t0t1u1_3","t0t1t1","u1u1u1","t1u1u1_3","t1t1u1_3","t1t1t1","getPointInSegment","percent","pointOnLine3D","z1","z2","z3","diffDist","dist1","dist2","dist3","lastTime","vendors","requestAnimationFrame","cancelAnimationFrame","currTime","getTime","timeToCall","id","setTimeout","clearTimeout","bez","dataFunctionManager","findCompLayers","comps","layers","__used","JSON","parse","stringify","completeShapes","jLen","ks","convertPathsToAbsoluteValues","it","path","checkVersion","minimum","animVersionString","animVersion","split","minimumVersion","checkText","iterateLayers","textLayer","documentData","animationData","assets","checkChars","pathData","paths","data","shapes","__converted","checkColors","iterateShapes","checkShapes","layerData","kLen","hasMask","maskProps","masksProperties","cl","moduleOb","completeData","fontManager","__complete","completeLayers","completed","tt","td","refId","singleShape","dataManager","FontManager","maxWaitingTime","emptyChar","w","size","combinedCharacters","setUpNode","font","family","parentNode","fontFamily","node","innerHTML","fontSize","fontVariant","fontStyle","fontWeight","letterSpacing","appendChild","body","offsetWidth","parent","createHelper","def","fontData","tHelper","setAttribute","fFamily","fStyle","fWeight","textContent","fClass","className","getContext","concat","Font","fonts","typekitLoaded","loaded","initTime","now","getCombinedCharacterCodes","addChars","found","ch","addFonts","defs","list","fontArr","monoCase","sansCase","fPath","fOrigin","origin","rel","href","sc","helper","cache","checkLoadedFonts","loadedCount","Typekit","load","async","active","removeChild","getCharData","char","console","warn","getFontByName","name","fName","measureText","fontName","index","getComputedTextLength","PropertyFactory","initFrame","math_abs","interpolateValue","frameNum","caching","newValue","offsetTime","propType","pv","nextKeyData","fnc","quat","qx","qy","qz","qw","heading","attitude","bank","iterationIndex","lastIndex","keyframes","ind","_lastBezierData","__fnct","segmentPerc","distanceInLine","lastFrame","_lastAddedLength","_lastPoint","outX","outY","inX","inY","keyValue","sh","quatStart","createQuaternion","quatEnd","time","omega","cosom","sinom","scale0","scale1","az","aw","bx","by","bz","bw","acos","slerp","atan2","asin","constructor","values","c3","s1","s2","s3","getValueAtCurrentTime","comp","renderedFrame","endTime","_caching","renderResult","setVValue","multipliedValue","mult","processEffectsSequence","elem","globalData","frameId","effectsSequence","lock","_isFirstFrame","finalValue","kf","addEffect","effectFunction","ValueProperty","vel","MultiDimensionalProperty","KeyframedValueProperty","st","KeyframedMultidimensionalProperty","arrLen","getProp","TransformPropertyFactory","TransformProperty","pre","appliedTransformations","px","py","pz","rx","ry","rz","or","sk","sa","_isDirty","applyToMatrix","mat","forceRender","precalculateMatrix","autoOriented","v1","v2","frameRate","getValueAtTime","autoOrient","_addDynamicProperty","getTransformProperty","ShapePath","_maxLength","setPathData","setLength","point_pool","doubleArrayLength","setXYAt","pos","setTripleAt","vX","vY","oX","oY","iX","iY","reverse","newPath","vertices","outPoints","inPoints","init","cnt","ShapePropertyFactory","interpolateShape","previousValue","keyPropS","keyPropE","isHold","vertexValue","resetShape","localShapeCollection","shape1","shape2","shapesEqual","shape_pool","releaseShapes","addShape","ShapeProperty","shapeCollection_pool","newShapeCollection","KeyframedShapeProperty","EllShapeProperty","cPoint","convertEllToPath","s0","_cw","_v","StarShapeProperty","ir","is","convertToPath","convertStarToPath","convertPolygonToPath","os","rad","roundness","perimSegment","numPts","longFlag","longRad","shortRad","longRound","shortRound","longPerimSegment","shortPerimSegment","currentAng","ox","oy","RectShapeProperty","convertRectToPath","v0","getShapeProp","dataProp","keys","getConstructorFunction","getKeyframedConstructorFunction","ShapeModifiers","modifiers","registerModifier","getModifier","ShapeModifier","TrimModifier","RoundCornersModifier","RepeaterModifier","ShapeCollection","DashProperty","renderer","dataProps","dashStr","dashArray","dashoffset","GradientProperty","cLength","_cmdf","_omdf","_collapsable","checkCollapsable","_hasOpacity","initModifierProperties","addShapeToModifier","shape","setAsAnimated","processKeys","sValue","eValue","pathsData","calculateShapeEdges","shapeLength","totalModifierLength","segments","segmentOb","shapeSegments","shapeS","shapeE","releasePathsData","release","processShapes","shapePaths","_s","totalShapeLength","edges","newShapesData","addShapes","lastShape","pop","addPaths","newPaths","addSegment","shapePath","newShape","addSegmentFromArray","shapeSegment","currentLengthData","segmentCount","segment","rd","processPath","cloned_path","currentV","currentI","currentO","closerV","distance","newPosPerc","tr","pMatrix","rMatrix","sMatrix","tMatrix","matrix","applyTransforms","inv","scaleX","scaleY","elemsData","_currentCopies","_elements","_groups","unshift","resetElements","elements","_processed","cloneElements","newElements","changeGroupRender","renderFlag","_render","items","itemsTransform","cont","copies","ceil","group","ix","reloadShapes","offsetModulo","roundOffset","pProps","rProps","sProps","iteration","mProps","op","comparePoints","buildShapeString","pathNodes","_o","_i","shapeString","ImagePreloader","imageLoaded","loadedAssets","totalImages","imagesLoadedCb","getAssetsPath","assetData","assetsPath","imagePath","u","loadImage","img","src","loadAssets","cb","totalAssets","setPath","setAssetsPath","destroy","featureSupport","maskType","filtersFactory","createFilter","filId","fil","createAlphaToLuminanceFilter","feColorMatrix","assetLoader","formatResponse","xhr","response","responseText","errorCallback","XMLHttpRequest","open","responseType","send","onreadystatechange","readyState","status","err","TextAnimatorProperty","textData","renderType","_hasMaskedPath","_frameId","_textData","_renderType","_elem","_animatorsData","_pathData","_moreOptions","alignment","renderedLetters","lettersChangedFlag","TextAnimatorDataProperty","animatorProps","defaultData","textAnimator_animatables","sw","fc","fh","fs","fb","TextSelectorProp","getTextSelectorProp","LetterProps","TextProperty","keysIndex","canResize","minimumFontSize","currentData","ascent","boxWidth","defaultBoxWidth","justifyOffset","lh","lineWidths","ls","of","ps","fillColorAnim","strokeColorAnim","strokeWidthAnim","yOffset","finalSize","finalText","finalLineHeight","copyData","searchProperty","completeTextData","searchProperties","maskManager","getMaskProperty","getMeasures","xPos","yPos","pathInfo","currentLength","currentPoint","pointInd","segmentInd","prevPoint","tanAngle","animators","matrixHelper","mHelper","renderedLettersCount","letters","tLength","pi","letterValue","yOff","firstLine","offf","xPathPos","yPathPos","elemOpacity","letterSw","letterSc","letterFc","letterO","initPathPos","initSegmentInd","initPointInd","currentLine","letterM","letterP","defaultPropsArray","animatorJustifyOffset","animatorFirstCharOffset","justifyOffsetMult","isNewLine","getMult","anIndexes","totalChars","line","extra","an","animatorOffset","add","rot","atan","update","updated","setCurrentData","searchKeyframes","getKeyframeValue","_finalValue","currentValue","currentIndex","currentTextValue","textKeys","buildFinalText","text","charactersArray","charAt","newLineFlag","charData","anchorGrouping","currentSize","currentPos","lineWidth","maxLineWidth","styles","toLowerCase","trackingOffset","currentHeight","boxHeight","lastSpaceIndex","currentChar","uncollapsedSpaces","animatorData","letterData","based","indexes","rn","newInd","currentInd","updateDocumentData","newData","dData","recalculate","canResizeFont","_canResize","setMinimumFontSize","_fontValue","_currentTextLength","finalS","finalE","xe","ne","textProperty","easer","tot","newCharsFlag","divisor","pool_factory","initialLength","_create","_release","_clone","pooling","cloned","shapeCollection","BaseRenderer","SVGRenderer","animationItem","config","svgElement","maskElement","layerElement","renderConfig","preserveAspectRatio","imagePreserveAspectRatio","progressiveLoad","hideOnTransparent","viewBoxOnly","viewBoxSize","pendingElements","destroyed","MaskElement","viewData","solidPath","rect","expansor","feMorph","properties","currentMasks","layerId","maskRef","mode","filterID","expan","lastPath","lastOperator","filterId","lastRadius","createLayerSolidPath","invRect","drawPath","maskedElement","addRenderableComponent","HierarchyElement","FrameElement","TransformElement","RenderableElement","RenderableDOMElement","ProcessedElement","SVGStyleData","level","lvl","hd","pElem","msElem","SVGShapeData","transformers","caches","lStr","SVGTransformData","SVGStrokeStyleData","styleOb","SVGFillStyleData","SVGGradientFillStyleData","initGradientData","SVGGradientStrokeStyleData","ShapeGroupData","prevViewData","gr","checkLayers","num","ip","buildItem","checkPendingElements","createItem","layer","createImage","createComp","createSolid","createNull","createShape","createText","createCamera","Error","buildAllItems","includeLayers","newLayers","setProjectInterface","pInterface","projectInterface","initItems","buildElementParenting","parentName","hierarchy","setAsParent","setHierarchy","addPendingElement","searchExtraCompositions","xt","initExpressions","registerComposition","setupGlobalData","animData","fontsContainer","getAssetData","elementLoaded","fr","compSize","NullElement","SVGShapeElement","SVGTextElement","IImageElement","SVGCompElement","ISolidElement","configAnimation","height","wrapper","maskId","updateContainerSize","appendElementInPos","setMatte","checkParenting","renderFrame","currentFrame","prepareFrame","getBaseElement","nextElement","insertBefore","hide","show","isFirstFrame","finalMat","finalTransform","mProp","getMaskelement","pathString","pathShapeValue","initHierarchy","_isParent","prepareProperties","isVisible","initTransform","_matMdf","_opMdf","ao","renderTransform","globalToLocal","transforms","ptNew","initRenderable","isInRange","hidden","isTransparent","renderableComponents","component","removeRenderableComponent","prepareRenderableFrame","checkLayerLimits","checkTransparency","renderRenderable","sourceRectAtTime","getLayerSize","initElement","initBaseData","initRendererElement","createContainerElements","addMasks","createContent","baseElement","renderElement","renderInnerContent","innerElem","destroyBaseElement","stops","setGradientData","setGradientOpacity","pathElement","gradientId","gfill","stop","gf","cst","opacityId","opFill","ms","ost","SVGElementsRenderer","_identityMatrix","_matrixHelper","renderContentTransform","styleData","itemData","renderPath","pathStringTransformed","redraw","iterations","lLen","renderFill","styleElem","renderGradientStroke","renderGradient","renderStroke","hasOpacity","attr1","attr2","cValues","oValues","ang","dist","createRenderFunction","BaseElement","SVGBaseElement","IShapeElement","ITextElement","ICompElement","supports3d","tm","_placeholder","textSpans","shapesData","stylesList","shapeModifiers","itemsData","processedElements","animatedContents","SVGTintFilter","filter","filterManager","matrixFilter","effectElements","feMergeNode","feMerge","SVGFillFilter","SVGStrokeEffect","initialized","SVGTritoneFilter","feComponentTransfer","feFuncR","feFuncG","feFuncB","SVGProLevelsFilter","createFeFunc","feFuncA","feFuncRComposed","feFuncGComposed","feFuncBComposed","SVGDropShadowEffect","feGaussianBlur","feOffset","feFlood","feComposite","originalNodeAdded","checkMasks","layerInterface","LayerExpressionInterface","registerMaskInterface","effectsInterface","EffectsExpressionInterface","createEffectsInterface","registerEffectsInterface","compInterface","CompExpressionInterface","shapeInterface","ShapeExpressionInterface","content","textInterface","TextExpressionInterface","blendModeEnums","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","getBlendMode","bm","setBlendMode","blendModeValue","sr","effectsManager","EffectsManager","getType","matteElement","transformedElement","_sizeChanged","gg","layerElementParent","masker","maskGroup","maskGrouper","alphaRect","ln","cp","clipId","cpGroup","renderableEffectsManager","SVGEffects","addShapeToModifiers","isShapeInAnimatedModifiers","isAnimatedWithShape","renderModifiers","lcEnum","ljEnum","searchProcessedElement","addProcessedElement","textAnimator","buildNewText","createPathShape","shapeStr","_fontSize","applyTextPropertiesToMatrix","lineNumber","buildColor","colorData","emptyProp","timeRemapped","setElements","elems","getElements","destroyElements","assetPath","pr","setAttributeNS","textContainer","buildTextContents","textArray","textContents","currentTextContent","tSpan","usesGlyphs","cachedSpansLength","tElement","justify","textBox","getBBox","bbox","renderedLetter","textSpan","initSecondaryElement","identityMatrix","buildExpressionInterface","searchShapes","filterUniqueShapes","tempShapes","areAnimated","setShapesAsAnimated","createStyleElement","elementData","lc","lj","ml","addToAnimatedContents","createGroupElement","createTransformElement","transformProperty","createShapeElement","ownTransformers","fn","setElementStyles","render","currentTransform","modifier","processedPos","ownStyles","ownModifiers","renderShape","animatedContent","colorBlack","colorWhite","opacity","initialize","groupPath","elemChildren","children","childNodes","removeAttribute","pathMasker","dasharrayValue","getTotalLength","lineLength","units","color1","color2","color3","tableR","tableG","tableB","feFunc","getTableValue","inputBlack","inputWhite","gamma","outputBlack","outputWhite","colorValue","table","call","outputDelta","inputDelta","join","col","_svgMatteSymbols","_svgMatteMaskCounter","SVGMatte3Effect","filterElem","ef","filters","findSymbol","replaceInParent","symbolId","nextChild","useElem","setElementAsMask","symbol","animationManager","registeredAnimations","playingAnimationsNum","_stopped","_isFrozen","removeElement","ev","animItem","animation","isPaused","subtractPlayingCount","registerAnimation","AnimationItem","setupAnimation","setData","addPlayingCount","activate","resume","nowTime","elapsedTime","advanceTime","first","loadAnimation","params","setParams","setSpeed","setDirection","play","pause","togglePause","searchAnimations","standalone","animElements","getElementsByClassName","getElementsByTagName","div","resize","goToAndStop","isFrame","freeze","unfreeze","getRegisteredAnimations","animations","isLoaded","currentRawFrame","frameMult","playSpeed","playDirection","playCount","autoplay","loop","animationID","timeCompleted","segmentPos","_idle","_completedLoop","CanvasRenderer","clearCanvas","context","dpr","devicePixelRatio","currentGlobalAlpha","contextData","CVContextData","transformMat","HybridRenderer","threeDElements","camera","CVShapeData","nodes","trNodes","fl","saved","cArrPos","cTr","cO","savedOp","CVBaseElement","CVImageElement","failed","Image","crossOrigin","CVCompElement","CVMaskElement","hasMasks","CVShapeElement","CVSolidElement","CVTextElement","stroke","fill","currentRender","sWidth","fValue","CVEffects","HBaseElement","HSolidElement","HCompElement","HShapeElement","shapesContainer","currentBBox","HTextElement","textPaths","isMasked","HImageElement","HCameraElement","pe","_prevMat","HEffects","animType","rendererSettings","parseInt","autoloadSegments","substr","lastIndexOf","fileName","trigger","wrapperAttributes","attributes","getNamedItem","prerender","loadNextSegment","shift","segmentPath","loadSegments","preloadImages","imagePreloader","updaFrameModifier","waitForFontsLoaded","checkLoaded","gotoFrame","setSubframe","setCurrentRawFrameValue","frameModifier","goToAndPlay","nextValue","_isComplete","checkSegments","adjustSegment","setSegment","end","pendingFrame","playSegments","forceFlag","resetSegments","onEnterFrame","onLoopComplete","onComplete","onSegmentStart","onDestroy","getPath","getDuration","ctxTransform","cProps","trProps","canvasContext","ctxOpacity","globalAlpha","restore","save","actionFlag","duplicate","blendMode","popped","mozTransformOrigin","transformCanvas","isDashed","elementWidth","elementHeight","elementRel","animationRel","offsetHeight","canvas","par","fillType","beginPath","closePath","clip","clearRect","newDOMElement","ddd","addTo3dContainer","nextDOMElement","nextLayer","getThreeDContainerByPos","startPos","endPos","perspectiveElem","createThreeDContainer","webkitTransform","threeDContainerData","build3dContainers","lastThreeDContainerData","currentContainer","resizerElem","svg","setup","cWidth","cHeight","perspective","webkitPerspective","floatingContainer","newLength","currentSavedOp","set","createElements","globalCompositeOperation","hideElement","showElement","widthCrop","heightCrop","ctx","imgW","imgH","imgRel","canvasRel","drawImage","imageFailed","parentMatrix","moveTo","lineTo","bezierCurveTo","transformHelper","dashResetter","co","wi","da","do","hasStrokes","hasFills","ownArrays","renderShapeTransform","parentTransform","groupTransform","groupMatrix","drawLayer","currentStyle","coOp","strokeStyle","grd","lineCap","lineJoin","miterLimit","fillStyle","setLineDash","lineDashOffset","isMain","renderGradientFill","groupTransformMat","createLinearGradient","createRadialGradient","addColorStop","fillRect","hasFill","hasStroke","commands","pathArr","lastFill","lastStroke","lastStrokeW","checkBlendMode","tg","backgroundColor","_createBaseContainerElements","_renderShapeFrame","shapeCont","getTransformedPoint","calculateShapeBoundingBox","item","boundingBox","vPoint","oPoint","nextIPoint","nextVPoint","checkBounds","getBoundsOfCurve","bounds","shapeBoundingBox","xMax","right","yMax","bottom","tempBoundingBox","p3","b2ac","t2","calculateF","calculateBoundingBox","currentBoxContains","box","changed","compW","compH","innerElemStyle","strokeWidth","lineHeight","tParent","tCont","textPath","margin","imageElem","mTransf","diffVector","mag","lookDir","lookLengthOnXZ","m_rotationX","m_rotationY","hasMatrixChanged","Expressions","ExpressionManager","$bm_isInstanceOfArray","isNumerable","tOfV","Number","$bm_neg","tOfA","lenA","retArr","sum","tOfB","lenB","sub","mul","mod","clamp","mm","radiansToDegrees","radians_to_degrees","degreesToRadians","degrees_to_radians","helperLengthArray","arr1","arr2","normalize","vec","rgbToHsl","hue2rgb","hslToRgb","linear","tMin","tMax","value1","value2","_tMin","rnd","createPath","inTangents","outTangents","inVertexPoint","outVertexPoint","arrPlaceholder","initiateExpression","property","needsVelocity","_needsRandom","elemType","effect","thisProperty","frameDuration","inPoint","outPoint","loopIn","loop_in","loopOut","loop_out","toWorld","fromWorld","fromComp","toComp","fromCompToSurface","anchorPoint","thisLayer","thisComp","valueAtTime","velocityAtTime","__expression_functions","scoped_bm_rt","xf","eval","expression_function","numKeys","wiggle","freq","amp","addedAmps","periods","loopInDuration","duration","loopOutDuration","getVelocityAtTime","velocity","textIndex","textTotal","selectorValue","lookAt","elem1","elem2","fVec","pitch","easeOut","val1","val2","easeIn","nearestKey","keyTime","framesToTime","frames","fps","timeToFrames","seedRandom","seedrandom","randSeed","substring","hasParent","executeExpression","_value","frameExpressionId","getStaticValueAtTime","durationFlag","cycleDuration","firstKeyFrame","ret","lastKeyFrame","initV","endV","current","repeats","lastValue","nextLastValue","firstValue","nextFirstValue","_cachingAtTime","setGroupProperty","propertyGroup","searchExpressions","TextExpressionSelectorProp","getValueProxy","total","propertyGetProp","getSpeedAtTime","speed","propertyIndex","ShapePropertyConstructorFunction","KeyframedShapePropertyConstructorFunction","ShapeExpressions","isClosed","pointOnPath","_segmentsLength","accumulatedLength","initIndex","endIndex","vectorOnPath","vectorType","xLength","yLength","magnitude","tangentOnPath","normalOnPath","shapeValue","propertyGetShapeProp","trims","propertyGetTextProp","getExpressionValue","calculateExpression","isKeyframed","hasExpressions","iterateElements","view","groupInterfaceFactory","fillInterfaceFactory","strokeInterfaceFactory","trimInterfaceFactory","ellipseInterfaceFactory","starInterfaceFactory","pathInterfaceFactory","rectInterfaceFactory","roundedInterfaceFactory","repeaterInterfaceFactory","interfaceFunction","interfaces","_name","mn","numProperties","cix","contentsInterfaceFactory","transformInterface","_propertyGroup","rotation","skewAxis","defineProperties","ExpressionValue","transformInterfaceFactory","defineProperty","np","_dashPropertyGroup","dashOb","addPropertyToDashOb","dash","start","outerRadius","outerRoundness","innerRoundness","innerRadius","radius","_interfaceFunction","_sourceText","_thisLayerFunction","stringValue","_prevValue","toWorldMat","sampleImage","anchorPointDescriptor","TransformExpressionInterface","anchor_point","startTime","source","MaskManagerInterface","effects","pixelAspect","_thisFunction","xRotation","yRotation","xPosition","yPosition","zPosition","compositions","_thisProjectFunction","createGroupInterface","createValueInterface","groupInterface","en","effectsData","MaskInterface","_mask","_data","_masksInterfaces","elementProp","expressionValue","arrValue","speedAtTime","SliderEffect","AngleEffect","ColorEffect","PointEffect","LayerIndexEffect","MaskIndexEffect","CheckboxEffect","NoValueEffect","effectItem","GroupEffect","eff","lottiejs","setLocationHref","setSubframeRendering","setQuality","inBrowser","installPlugin","plugin","getFactory","checkReady","clearInterval","readyStateCheckInterval","getQueryVariable","variable","vars","queryString","pair","decodeURIComponent","__getFactory","version","scripts","myScript","setInterval","module","exports","lottie","bodymovin","freeGlobal","freeSelf","self","Function","Symbol","objectProto","nativeObjectToString","symToStringTag","toStringTag","getRawTag","isOwn","tag","unmasked","objectToString","nullTag","undefinedTag","baseGetTag","isObjectLike","numberTag","isNumber","isArray","stringTag","isString","boolTag","isBoolean","defaultTo","defaultValue","isUndefined","listCacheClear","__data__","eq","other","assocIndexOf","array","arrayProto","listCacheDelete","listCacheGet","listCacheHas","listCacheSet","ListCache","entries","clear","entry","has","stackClear","stackDelete","stackGet","stackHas","isObject","asyncTag","funcTag","genTag","proxyTag","isFunction","coreJsData","maskSrcKey","uid","exec","IE_PROTO","func","funcProto","funcToString","toSource","reRegExpChar","reIsHostCtor","reIsNative","RegExp","baseIsNative","getNative","Map","nativeCreate","hashClear","hashDelete","HASH_UNDEFINED","hashGet","hashHas","hashSet","Hash","mapCacheClear","hash","map","string","isKeyable","getMapData","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","MapCache","LARGE_ARRAY_SIZE","stackSet","pairs","Stack","setCacheAdd","setCacheHas","SetCache","arraySome","predicate","cacheHas","COMPARE_PARTIAL_FLAG","COMPARE_UNORDERED_FLAG","equalArrays","bitmask","customizer","equalFunc","stack","isPartial","arrLength","othLength","stacked","seen","othValue","compared","othIndex","mapToArray","forEach","setToArray","dateTag","errorTag","mapTag","regexpTag","setTag","symbolTag","arrayBufferTag","dataViewTag","symbolProto","symbolValueOf","valueOf","equalByTag","byteLength","byteOffset","buffer","message","convert","arrayPush","baseGetAllKeys","keysFunc","symbolsFunc","arrayFilter","resIndex","stubArray","propertyIsEnumerable","nativeGetSymbols","getOwnPropertySymbols","getSymbols","baseTimes","iteratee","argsTag","baseIsArguments","isArguments","arguments","stubFalse","freeExports","nodeType","freeModule","Buffer","isBuffer","MAX_SAFE_INTEGER","reIsUint","isIndex","isLength","arrayTag","objectTag","weakMapTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","typedArrayTags","baseIsTypedArray","baseUnary","freeProcess","process","nodeUtil","types","require","binding","nodeIsTypedArray","isTypedArray","arrayLikeKeys","inherited","isArr","isArg","isBuff","isType","skipIndexes","isPrototype","Ctor","overArg","arg","nativeKeys","baseKeys","isArrayLike","getAllKeys","equalObjects","objProps","objLength","skipCtor","objValue","objCtor","othCtor","DataView","Promise","Set","WeakMap","promiseTag","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","getTag","ArrayBuffer","resolve","ctorString","baseIsEqualDeep","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","baseIsEqual","baseIsMatch","matchData","noCustomizer","srcValue","isStrictComparable","getMatchData","matchesStrictComparable","baseMatches","isSymbol","reIsDeepProp","reIsPlainProp","isKey","FUNC_ERROR_TEXT","memoize","resolver","TypeError","memoized","Cache","MAX_MEMOIZE_SIZE","memoizeCapped","rePropName","reEscapeChar","stringToPath","match","number","quote","subString","arrayMap","INFINITY","symbolToString","baseToString","castPath","toKey","baseGet","baseHasIn","hasPath","hasFunc","hasIn","baseMatchesProperty","identity","baseProperty","basePropertyDeep","baseIteratee","createFind","findIndexFunc","collection","fromIndex","iterable","baseFindIndex","fromRight","NAN","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","toNumber","isBinary","MAX_INTEGER","toFinite","toInteger","remainder","nativeMax","findIndex","find","Event","bindings","event","handler","once","el","off","thisArg","Player","delay","scenes","_el","querySelector","_this","animationCount","_index","classList","_prepareScenes","scene","anim","timer","_getScene","actualScene","remove","paused","playing","_cleanSceneListeners","stopped","_setFinishScenario","listeners","_setEventListener","_sceneFinishListener","counter","_loopIterationsListener","_this2","_sceneFinish","_getSceneFromId","evnt","_this3","player","_hasMoreScenes","_complete","chain","log"],"mappings":"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"}