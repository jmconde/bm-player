<!DOCTYPE html>
<html style="width: 100%;height: 100%">

<head>

    <style>

        #check {
            transition: all 0.5s;
        }
    </style>
    <link rel="stylesheet" href="styles.css">
</head>

<body style="background-color:#ccc; margin: 0px;height: 100%; font-family: sans-serif;font-size: 10px">

    <div style="width:400px;height:400px;margin:50px auto 0;;background-color:#333;" id="bodymovin">
    </div>

    <div style="width:300px;height:300px;margin:50px auto 0;border:2px solid #333;" id="check">
    </div>
    <script src="player.js"></script>

    <script>
        var introData = {
            id: 'intro',
            loop: false,
            path: 'data/Intro.json'
        };

        var introReverseData = {
            id: 'intro-reverse',
            loop: false,
            path: 'data/Intro.json',
            reverse: true
        };

        var loopData = {
            id: 'loop',
            loop: true,
            path: 'data/Loop.json',
            speed: 1.2
        };

        var checkData = {
            id: 'check',
            loop: false,
            path: 'data/Check.json'
        };

    var player = new Player({
        autoplay: 0.5,
        scenes: [introData, loopData, introReverseData],
        container: '#bodymovin',
        // onStart: () => console.log("Animation started"),
        // onScene: scene => {
        //     if (scene.id === 'loop') {
        //         setTimeout(function () {
        //             player.next();
        //         }, 5000);
        //     }
        //     console.log("Animating scene", scene)
        // },
        // onFinishScene: () => console.log("Scene finished"),
        // onFinish: () => {
        //     checkPlayer.play();
        // }
    });

    player.on('scene', scene => {
        if (scene.id === 'loop') {
            setTimeout(function () {
                console.log("Service response");
                player.next();
            }, 10000);
        }
        console.log("Animating scene", scene.id)
    })
    player.on('start', () => console.log("Animation 1 started."));
    player.on('scene', scene => console.log("ONCE!"), true);
    player.on('sceneFinish',  scene => console.log("Finishing scene", scene.id));
    player.on('finish',  () => {
        console.log("Animation 1 finisehd")
        checkPlayer.play();
    });

    var checkPlayer = new Player({
        autoplay: false,
        scenes: [checkData],
        container: '#check'
    });
    checkPlayer.on('start', () => console.log("Animation 2 started."));
    checkPlayer.on('finish', () => console.log("Animation 2 finisehd."));


    </script>
    <script id="__bs_script__">//<![CDATA[
        document.write("<script async src='http://HOST:3000/browser-sync/browser-sync-client.js?v=2.23.6'><\/script>".replace("HOST", location.hostname));
    //]]></script>
</body>

</html>
