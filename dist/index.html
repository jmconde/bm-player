<!DOCTYPE html>
<html style="width: 100%;height: 100%">

<head>

    <style>
        #container {
            position: relative;
            
        }

        #bodymovin, #check {
            position: absolute;
            top: 0;
            transition: all 0.5s;
            transform-origin: center center;
        }

        #check {
            width:300px;
            height:300px;
            top:50px;
            left: calc(50% - 150px);
            opacity: 0;
        }
        
        #bodymovin {
            width:400px;
            height:400px;
            left: calc(50% - 200px);
        }
        #check.animation-playing {
            opacity: 1;
        }
        #bodymovin.animation-ended {
            transform: scale(0);
        }
    </style>
    <link rel="stylesheet" href="styles.css">
</head>

<body style="background-color:palegreen; margin: 0px;height: 100%; font-family: sans-serif;font-size: 10px">

    <div id="container">
        <div id="bodymovin">
        </div>
        <div id="check">
        </div>
    </div>
    <script src="player.js"></script>

    <script>

        var scenes = [{
            id: 'preloader',
            path: './data/gears.json',
            loop: 1
        }, {
            id: "dogrun",
            path: "./data/dogrun.json",
            loop: true,
            duration: 1
        }, {
            id: "star",
            path: "./data/star.json",
            loop: 1
        }, {
            id: "bday",
            path: "./data/bday.json",
            loop: false
        },
        {
            id: "bdayInverse",
            path: "./data/bday.json",
            loop: false,
            reverse: true,
            speed: 0.7
        }];

    var scenes2 = [{
        id: 'rider',
        path: './data/rey_updated.json',
        loop: 2
    }, {
        id: "check",
        path: "./data/checked_done.json",
        loop: false
    }]

    var player = new Player({
        autoplay: 0.5,
        scenes: scenes,
        container: '#bodymovin',
        loop: false
    });

    player.on('scene', scene => {
        if (scene.id === 'preloader') {
            setTimeout(function () {
                console.log("Service response");
                player.play('dogrun');
            }, 5000);
        }
        console.log("Animating scene", scene.id)
    });
    player.on('start', () => console.log("Animation 1 started."));
    player.on('scene', scene => console.log("ONCE!"), true);
    player.on('loopComplete',  () => console.log("Loop completed"));
    player.on('sceneFinish',  scene => console.log("Finishing scene", scene.id));
    player.on('finish',  () => {
        console.log("Animation 1 finisehd")
        checkPlayer.play();
    });

    var checkPlayer = new Player({
        autoplay: false,
        scenes: scenes2,
        container: '#check'
    });
    checkPlayer.on('start', () => console.log("Animation 2 started."));
    checkPlayer.on('finish', () => console.log("Animation 2 finisehd."));


    </script>
    <script id="__bs_script__">//<![CDATA[
        document.write("<script async src='http://HOST:3000/browser-sync/browser-sync-client.js?v=2.23.6'><\/script>".replace("HOST", location.hostname));
    //]]></script>
</body>

</html>
